"use strict";(self.webpackChunkMindShare=self.webpackChunkMindShare||[]).push([[179],{6304:(pt,Ce,L)=>{L.d(Ce,{Dh:()=>Se,GT:()=>fe,cc:()=>Ae,hO:()=>ke,on:()=>$,pX:()=>ie,xv:()=>pe});var h=L(5879),B=L(7142),O=L(8186);pt=L.hmd(pt);const Y=["ngOnDestroy"],ie=(Oe,yt,ut,ee={})=>new Proxy(Oe,{get:(Ee,se)=>ut.runOutsideAngular(()=>{var he;if(Oe[se])return!(null===(he=ee?.spy)||void 0===he)&&he.get&&ee.spy.get(se,Oe[se]),Oe[se];if(Y.indexOf(se)>-1)return()=>{};const Ne=yt.toPromise().then(J=>{const Xe=J&&J[se];return"function"==typeof Xe?Xe.bind(J):Xe&&Xe.then?Xe.then($e=>ut.run(()=>$e)):ut.run(()=>Xe)});return new Proxy(()=>{},{get:(J,Xe)=>Ne[Xe],apply:(J,Xe,$e)=>Ne.then(Kt=>{var cr;const Gr=Kt&&Kt(...$e);return!(null===(cr=ee?.spy)||void 0===cr)&&cr.apply&&ee.spy.apply(se,$e,Gr),Gr})})})}),fe=(Oe,yt)=>{yt.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(ee=>{Object.defineProperty(Oe.prototype,ee,Object.getOwnPropertyDescriptor(ut.prototype||ut,ee))})})};class ge{constructor(yt){return yt}}const Se=new h.OlP("angularfire2.app.options"),pe=new h.OlP("angularfire2.app.name");function $(Oe,yt,ut){const Ee="object"==typeof ut&&ut||{};Ee.name=Ee.name||"string"==typeof ut&&ut||"[DEFAULT]";const he=B.Z.apps.filter(Ne=>Ne&&Ne.name===Ee.name)[0]||yt.runOutsideAngular(()=>B.Z.initializeApp(Oe,Ee));try{JSON.stringify(Oe)!==JSON.stringify(he.options)&&z("error",`${he.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(he)}const z=(Oe,...yt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Oe](...yt)},te={provide:ge,useFactory:$,deps:[Se,h.R0b,[new h.FiY,pe]]};let ke=(()=>{class Oe{constructor(ut){B.Z.registerVersion("angularfire",O.q4.full,"core"),B.Z.registerVersion("angularfire",O.q4.full,"app-compat"),B.Z.registerVersion("angular",h.q4F.full,ut.toString())}static initializeApp(ut,ee){return{ngModule:Oe,providers:[{provide:Se,useValue:ut},{provide:pe,useValue:ee}]}}}return Oe.\u0275fac=function(ut){return new(ut||Oe)(h.LFG(h.Lbi))},Oe.\u0275mod=h.oAB({type:Oe}),Oe.\u0275inj=h.cJS({providers:[te]}),Oe})();function Ae(Oe,yt,ut,ee,Ee){const[,se,he]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===Oe)||[];if(se)return function We(Oe,yt){try{return Oe.toString()===yt.toString()}catch{return Oe===yt}}(Ee,he)||(qe("error",`${yt} was already initialized on the ${ut} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:Ee,was:he})),se;{const Ne=ee();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Ne,Ee]),Ne}}const xe=!!pt.hot,qe=(Oe,...yt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Oe](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(pt,Ce,L)=>{L.d(Ce,{q4:()=>na,iC:()=>Nf,HU:()=>Yu,vb:()=>Rf,JM:()=>xf,u3:()=>Of});var h=L(5879),B=L(3182),O=L(5861),Y=L(534),ie=L(9058),fe=L(4537),ge=L(7879);const Se=(w,C)=>C.some(A=>w instanceof A);let pe,$;const ke=new WeakMap,Ae=new WeakMap,We=new WeakMap,xe=new WeakMap,qe=new WeakMap;let ut={get(w,C,A){if(w instanceof IDBTransaction){if("done"===C)return Ae.get(w);if("objectStoreNames"===C)return w.objectStoreNames||We.get(w);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return he(w[C])},set:(w,C,A)=>(w[C]=A,!0),has:(w,C)=>w instanceof IDBTransaction&&("done"===C||"store"===C)||C in w};function se(w){return"function"==typeof w?function Ee(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...C){return w.apply(Ne(this),C),he(ke.get(this))}:function(...C){return he(w.apply(Ne(this),C))}:function(C,...A){const V=w.call(Ne(this),C,...A);return We.set(V,C.sort?C.sort():[C]),he(V)}}(w):(w instanceof IDBTransaction&&function yt(w){if(Ae.has(w))return;const C=new Promise((A,V)=>{const W=()=>{w.removeEventListener("complete",K),w.removeEventListener("error",le),w.removeEventListener("abort",le)},K=()=>{A(),W()},le=()=>{V(w.error||new DOMException("AbortError","AbortError")),W()};w.addEventListener("complete",K),w.addEventListener("error",le),w.addEventListener("abort",le)});Ae.set(w,C)}(w),Se(w,function z(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ut):w)}function he(w){if(w instanceof IDBRequest)return function Oe(w){const C=new Promise((A,V)=>{const W=()=>{w.removeEventListener("success",K),w.removeEventListener("error",le)},K=()=>{A(he(w.result)),W()},le=()=>{V(w.error),W()};w.addEventListener("success",K),w.addEventListener("error",le)});return C.then(A=>{A instanceof IDBCursor&&ke.set(A,w)}).catch(()=>{}),qe.set(C,w),C}(w);if(xe.has(w))return xe.get(w);const C=se(w);return C!==w&&(xe.set(w,C),qe.set(C,w)),C}const Ne=w=>qe.get(w),$e=["get","getKey","getAll","getAllKeys","count"],Kt=["put","add","delete","clear"],cr=new Map;function Gr(w,C){if(!(w instanceof IDBDatabase)||C in w||"string"!=typeof C)return;if(cr.get(C))return cr.get(C);const A=C.replace(/FromIndex$/,""),V=C!==A,W=Kt.includes(A);if(!(A in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!$e.includes(A))return;const K=function(){var le=(0,O.Z)(function*(ze,...je){const at=this.transaction(ze,W?"readwrite":"readonly");let Ot=at.store;return V&&(Ot=Ot.index(je.shift())),(yield Promise.all([Ot[A](...je),W&&at.done]))[0]});return function(je){return le.apply(this,arguments)}}();return cr.set(C,K),K}!function ee(w){ut=w(ut)}(w=>({...w,get:(C,A,V)=>Gr(C,A)||w.get(C,A,V),has:(C,A)=>!!Gr(C,A)||w.has(C,A)}));const Is="@firebase/installations",ae="0.6.4",ye=1e4,be=`w:${ae}`,Pe="FIS_v2",He="https://firebaseinstallations.googleapis.com/v1",Ue=36e5,et=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(w){return w instanceof ie.ZR&&w.code.includes("request-failed")}function en({projectId:w}){return`${He}/projects/${w}/installations`}function fn(w){return{token:w.token,requestStatus:2,expiresIn:Di(w.expiresIn),creationTime:Date.now()}}function Fn(w,C){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(w,C){const V=(yield C.json()).error;return et.create("request-failed",{requestName:w,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function lr({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function tr(w){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(w){const C=yield w();return C.status>=500&&C.status<600?w():C})).apply(this,arguments)}function Di(w){return Number(w.replace("s","000"))}function Dr(){return(Dr=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:C},{fid:A}){const V=en(w),W=lr(w),K=C.getImmediate({optional:!0});if(K){const at=yield K.getHeartbeatsHeader();at&&W.append("x-firebase-client",at)}const ze={method:"POST",headers:W,body:JSON.stringify({fid:A,authVersion:Pe,appId:w.appId,sdkVersion:be})},je=yield tr(()=>fetch(V,ze));if(je.ok){const at=yield je.json();return{fid:at.fid||A,registrationStatus:2,refreshToken:at.refreshToken,authToken:fn(at.authToken)}}throw yield Fn("Create Installation",je)})).apply(this,arguments)}function $n(w){return new Promise(C=>{setTimeout(C,w)})}const rs=/^[cdef][\w-]{21}$/,Ze="";function dt(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const A=function Et(w){return function Wr(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return rs.test(A)?A:Ze}catch{return Ze}}function Wt(w){return`${w.appName}!${w.appId}`}const nr=new Map;function ii(w,C){const A=Wt(w);is(A,C),function ln(w,C){const A=function Pt(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=w=>{is(w.data.key,w.data.fid)}),Lr}();A&&A.postMessage({key:w,fid:C}),function Ln(){0===nr.size&&Lr&&(Lr.close(),Lr=null)}()}(A,C)}function is(w,C){const A=nr.get(w);if(A)for(const V of A)V(C)}let Lr=null;const ji="firebase-installations-database",Ds=1,Cr="firebase-installations-store";let Hn=null;function vn(){return Hn||(Hn=function J(w,C,{blocked:A,upgrade:V,blocking:W,terminated:K}={}){const le=indexedDB.open(w,C),ze=he(le);return V&&le.addEventListener("upgradeneeded",je=>{V(he(le.result),je.oldVersion,je.newVersion,he(le.transaction))}),A&&le.addEventListener("blocked",()=>A()),ze.then(je=>{K&&je.addEventListener("close",()=>K()),W&&je.addEventListener("versionchange",()=>W())}).catch(()=>{}),ze}(ji,Ds,{upgrade:(w,C)=>{0===C&&w.createObjectStore(Cr)}})),Hn}function Kn(w,C){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(w,C){const A=Wt(w),W=(yield vn()).transaction(Cr,"readwrite"),K=W.objectStore(Cr),le=yield K.get(A);return yield K.put(C,A),yield W.done,(!le||le.fid!==C.fid)&&ii(w,C.fid),C})).apply(this,arguments)}function rr(w){return An.apply(this,arguments)}function An(){return(An=(0,O.Z)(function*(w){const C=Wt(w),V=(yield vn()).transaction(Cr,"readwrite");yield V.objectStore(Cr).delete(C),yield V.done})).apply(this,arguments)}function qr(w,C){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(w,C){const A=Wt(w),W=(yield vn()).transaction(Cr,"readwrite"),K=W.objectStore(Cr),le=yield K.get(A),ze=C(le);return void 0===ze?yield K.delete(A):yield K.put(ze,A),yield W.done,ze&&(!le||le.fid!==ze.fid)&&ii(w,ze.fid),ze})).apply(this,arguments)}function H(w){return j.apply(this,arguments)}function j(){return j=(0,O.Z)(function*(w){let C;const A=yield qr(w.appConfig,V=>{const W=function k(w){return mt(w||{fid:dt(),registrationStatus:0})}(V),K=function F(w,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(et.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},V=function R(w,C){return Q.apply(this,arguments)}(w,A);return{installationEntry:A,registrationPromise:V}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:me(w)}:{installationEntry:C}}(w,W);return C=K.registrationPromise,K.installationEntry});return A.fid===Ze?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),j.apply(this,arguments)}function Q(){return Q=(0,O.Z)(function*(w,C){try{const A=yield function Bi(w,C){return Dr.apply(this,arguments)}(w,C);return Kn(w.appConfig,A)}catch(A){throw gt(A)&&409===A.customData.serverCode?yield rr(w.appConfig):yield Kn(w.appConfig,{fid:C.fid,registrationStatus:0}),A}}),Q.apply(this,arguments)}function me(w){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(w){let C=yield vt(w.appConfig);for(;1===C.registrationStatus;)yield $n(100),C=yield vt(w.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:V}=yield H(w);return V||A}return C})).apply(this,arguments)}function vt(w){return qr(w,C=>{if(!C)throw et.create("installation-not-found");return mt(C)})}function mt(w){return function ht(w){return 1===w.registrationStatus&&w.registrationTime+ye<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function pn(){return(pn=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:C},A){const V=function kt(w,{fid:C}){return`${en(w)}/${C}/authTokens:generate`}(w,A),W=function dr(w,{refreshToken:C}){const A=lr(w);return A.append("Authorization",function ho(w){return`${Pe} ${w}`}(C)),A}(w,A),K=C.getImmediate({optional:!0});if(K){const at=yield K.getHeartbeatsHeader();at&&W.append("x-firebase-client",at)}const ze={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:be,appId:w.appId}})},je=yield tr(()=>fetch(V,ze));if(je.ok)return fn(yield je.json());throw yield Fn("Generate Auth Token",je)})).apply(this,arguments)}function vr(w){return br.apply(this,arguments)}function br(){return br=(0,O.Z)(function*(w,C=!1){let A;const V=yield qr(w.appConfig,K=>{if(!jt(K))throw et.create("not-registered");const le=K.authToken;if(!C&&function Xt(w){return 2===w.requestStatus&&!function _r(w){const C=Date.now();return C<w.creationTime||w.creationTime+w.expiresIn<C+Ue}(w)}(le))return K;if(1===le.requestStatus)return A=function de(w,C){return re.apply(this,arguments)}(w,C),K;{if(!navigator.onLine)throw et.create("app-offline");const ze=function zn(w){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:C})}(K);return A=function ft(w,C){return Rt.apply(this,arguments)}(w,ze),ze}});return A?yield A:V.authToken}),br.apply(this,arguments)}function re(){return(re=(0,O.Z)(function*(w,C){let A=yield Fe(w.appConfig);for(;1===A.authToken.requestStatus;)yield $n(100),A=yield Fe(w.appConfig);const V=A.authToken;return 0===V.requestStatus?vr(w,C):V})).apply(this,arguments)}function Fe(w){return qr(w,C=>{if(!jt(C))throw et.create("not-registered");return function $s(w){return 1===w.requestStatus&&w.requestTime+ye<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Rt(){return Rt=(0,O.Z)(function*(w,C){try{const A=yield function At(w,C){return pn.apply(this,arguments)}(w,C),V=Object.assign(Object.assign({},C),{authToken:A});return yield Kn(w.appConfig,V),A}catch(A){if(!gt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const V=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Kn(w.appConfig,V)}else yield rr(w.appConfig);throw A}}),Rt.apply(this,arguments)}function jt(w){return void 0!==w&&2===w.registrationStatus}function va(){return(va=(0,O.Z)(function*(w){const C=w,{installationEntry:A,registrationPromise:V}=yield H(C);return V?V.catch(console.error):vr(C).catch(console.error),A.fid})).apply(this,arguments)}function si(){return si=(0,O.Z)(function*(w,C=!1){const A=w;return yield function Hs(w){return po.apply(this,arguments)}(A),(yield vr(A,C)).token}),si.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(w){const{registrationPromise:C}=yield H(w);C&&(yield C)})).apply(this,arguments)}function zo(w){return et.create("missing-app-config-values",{valueName:w})}const Nc="installations",_a=w=>{const C=w.getProvider("app").getImmediate(),A=function pu(w){if(!w||!w.options)throw zo("App Configuration");if(!w.name)throw zo("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!w.options[A])throw zo(A);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,Y._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ea=w=>{const C=w.getProvider("app").getImmediate(),A=(0,Y._getProvider)(C,Nc).getImmediate();return{getId:()=>function fo(w){return va.apply(this,arguments)}(A),getToken:W=>function td(w){return si.apply(this,arguments)}(A,W)}};(function rd(){(0,Y._registerComponent)(new fe.wA(Nc,_a,"PUBLIC")),(0,Y._registerComponent)(new fe.wA("installations-internal",Ea,"PRIVATE"))})(),(0,Y.registerVersion)(Is,ae),(0,Y.registerVersion)(Is,ae,"esm2017");const gu="@firebase/remote-config",dn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Da{constructor(C,A,V,W){this.client=C,this.storage=A,this.storageCache=V,this.logger=W}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-A,W=V<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var A=this;return(0,O.Z)(function*(){const[V,W]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(W&&A.isCachedDataFresh(C.cacheMaxAgeMillis,V))return W;C.eTag=W&&W.eTag;const K=yield A.client.fetch(C),le=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&le.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(le),K})()}}function vu(w=navigator){return w.languages&&w.languages[0]||w.language}class zs{constructor(C,A,V,W,K,le){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=V,this.projectId=W,this.apiKey=K,this.appId=le}fetch(C){var A=this;return(0,O.Z)(function*(){const[V,W]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},je={sdk_version:A.sdkVersion,app_instance_id:V,app_instance_id_token:W,app_id:A.appId,language_code:vu()},at={method:"POST",headers:ze,body:JSON.stringify(je)},Ot=fetch(le,at),bt=new Promise((mi,ps)=>{C.signal.addEventListener(()=>{const ml=new Error("The operation was aborted.");ml.name="AbortError",ps(ml)})});let xr;try{yield Promise.race([Ot,bt]),xr=yield Ot}catch(mi){let ps="fetch-client-network";throw"AbortError"===mi?.name&&(ps="fetch-timeout"),dn.create(ps,{originalErrorMessage:mi?.message})}let sr=xr.status;const hs=xr.headers.get("ETag")||void 0;let Qu,fs;if(200===xr.status){let mi;try{mi=yield xr.json()}catch(ps){throw dn.create("fetch-client-parse",{originalErrorMessage:ps?.message})}Qu=mi.entries,fs=mi.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?sr=500:"NO_CHANGE"===fs?sr=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(Qu={}),304!==sr&&200!==sr)throw dn.create("fetch-status",{httpStatus:sr});return{status:sr,eTag:hs,config:Qu}})()}}class mo{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,O.Z)(function*(){const V=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,V)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:V}){var W=this;return(0,O.Z)(function*(){yield function xn(w,C){return new Promise((A,V)=>{const W=Math.max(C-Date.now(),0),K=setTimeout(A,W);w.addEventListener(()=>{clearTimeout(K),V(dn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const K=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),K}catch(K){if(!function _u(w){if(!(w instanceof ie.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(K))throw K;const le={throttleEndTimeMillis:Date.now()+(0,ie.$s)(V),backoffCount:V+1};return yield W.storage.setThrottleMetadata(le),W.attemptFetch(C,le)}})()}}class Eu{constructor(C,A,V,W,K){this.app=C,this._client=A,this._storageCache=V,this._storage=W,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sr(w,C){const A=w.target.error||void 0;return dn.create(C,{originalErrorMessage:A&&A?.message})}const Yr="app_namespace_store";class hf{constructor(C,A,V,W=function tn(){return new Promise((w,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=V=>{C(Sr(V,"storage-open"))},A.onsuccess=V=>{w(V.target.result)},A.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Yr,{keyPath:"compositeKey"})}}catch(A){C(dn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=V,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,O.Z)(function*(){const V=yield A.openDbPromise;return new Promise((W,K)=>{const ze=V.transaction([Yr],"readonly").objectStore(Yr),je=A.createCompositeKey(C);try{const at=ze.get(je);at.onerror=Ot=>{K(Sr(Ot,"storage-get"))},at.onsuccess=Ot=>{const bt=Ot.target.result;W(bt?bt.value:void 0)}}catch(at){K(dn.create("storage-get",{originalErrorMessage:at?.message}))}})})()}set(C,A){var V=this;return(0,O.Z)(function*(){const W=yield V.openDbPromise;return new Promise((K,le)=>{const je=W.transaction([Yr],"readwrite").objectStore(Yr),at=V.createCompositeKey(C);try{const Ot=je.put({compositeKey:at,value:A});Ot.onerror=bt=>{le(Sr(bt,"storage-set"))},Ot.onsuccess=()=>{K()}}catch(Ot){le(dn.create("storage-set",{originalErrorMessage:Ot?.message}))}})})()}delete(C){var A=this;return(0,O.Z)(function*(){const V=yield A.openDbPromise;return new Promise((W,K)=>{const ze=V.transaction([Yr],"readwrite").objectStore(Yr),je=A.createCompositeKey(C);try{const at=ze.delete(je);at.onerror=Ot=>{K(Sr(Ot,"storage-delete"))},at.onsuccess=()=>{W()}}catch(at){K(dn.create("storage-delete",{originalErrorMessage:at?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class os{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const A=C.storage.getLastFetchStatus(),V=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),K=yield A;K&&(C.lastFetchStatus=K);const le=yield V;le&&(C.lastSuccessfulFetchTimestampMillis=le);const ze=yield W;ze&&(C.activeConfig=ze)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function qo(){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function yo(){(0,Y._registerComponent)(new fe.wA("remote-config",function w(C,{instanceIdentifier:A}){const V=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw dn.create("registration-window");if(!(0,ie.hl)())throw dn.create("indexed-db-unavailable");const{projectId:K,apiKey:le,appId:ze}=V.options;if(!K)throw dn.create("registration-project-id");if(!le)throw dn.create("registration-api-key");if(!ze)throw dn.create("registration-app-id");const je=new hf(ze,V.name,A=A||"firebase"),at=new os(je),Ot=new ge.Yd(gu);Ot.logLevel=ge.in.ERROR;const bt=new zs(W,Y.SDK_VERSION,A,K,le,ze),xr=new mo(bt,je),sr=new Da(xr,je,at,Ot),hs=new Eu(V,sr,at,je,Ot);return function Nt(w){const C=(0,ie.m9)(w);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(hs),hs},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(gu,"0.4.4"),(0,Y.registerVersion)(gu,"0.4.4","esm2017")}();const Ar=(w,C)=>C.some(A=>w instanceof A);let Ca,Vr;const zi=new WeakMap,Gs=new WeakMap,_n=new WeakMap,Ko=new WeakMap,sd=new WeakMap;let Vc={get(w,C,A){if(w instanceof IDBTransaction){if("done"===C)return Gs.get(w);if("objectStoreNames"===C)return w.objectStoreNames||_n.get(w);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return as(w[C])},set:(w,C,A)=>(w[C]=A,!0),has:(w,C)=>w instanceof IDBTransaction&&("done"===C||"store"===C)||C in w};function od(w){return"function"==typeof w?function xg(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function kc(){return Vr||(Vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...C){return w.apply(Uc(this),C),as(zi.get(this))}:function(...C){return as(w.apply(Uc(this),C))}:function(C,...A){const V=w.call(Uc(this),C,...A);return _n.set(V,C.sort?C.sort():[C]),as(V)}}(w):(w instanceof IDBTransaction&&function Lc(w){if(Gs.has(w))return;const C=new Promise((A,V)=>{const W=()=>{w.removeEventListener("complete",K),w.removeEventListener("error",le),w.removeEventListener("abort",le)},K=()=>{A(),W()},le=()=>{V(w.error||new DOMException("AbortError","AbortError")),W()};w.addEventListener("complete",K),w.addEventListener("error",le),w.addEventListener("abort",le)});Gs.set(w,C)}(w),Ar(w,function Ur(){return Ca||(Ca=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Vc):w)}function as(w){if(w instanceof IDBRequest)return function Fc(w){const C=new Promise((A,V)=>{const W=()=>{w.removeEventListener("success",K),w.removeEventListener("error",le)},K=()=>{A(as(w.result)),W()},le=()=>{V(w.error),W()};w.addEventListener("success",K),w.addEventListener("error",le)});return C.then(A=>{A instanceof IDBCursor&&zi.set(A,w)}).catch(()=>{}),sd.set(C,w),C}(w);if(Ko.has(w))return Ko.get(w);const C=od(w);return C!==w&&(Ko.set(w,C),sd.set(C,w)),C}const Uc=w=>sd.get(w);function Bc(w,C,{blocked:A,upgrade:V,blocking:W,terminated:K}={}){const le=indexedDB.open(w,C),ze=as(le);return V&&le.addEventListener("upgradeneeded",je=>{V(as(le.result),je.oldVersion,je.newVersion,as(le.transaction))}),A&&le.addEventListener("blocked",()=>A()),ze.then(je=>{K&&je.addEventListener("close",()=>K()),W&&je.addEventListener("versionchange",()=>W())}).catch(()=>{}),ze}function wu(w,{blocked:C}={}){const A=indexedDB.deleteDatabase(w);return C&&A.addEventListener("blocked",()=>C()),as(A).then(()=>{})}const pf=["get","getKey","getAll","getAllKeys","count"],ad=["put","add","delete","clear"],ud=new Map;function cd(w,C){if(!(w instanceof IDBDatabase)||C in w||"string"!=typeof C)return;if(ud.get(C))return ud.get(C);const A=C.replace(/FromIndex$/,""),V=C!==A,W=ad.includes(A);if(!(A in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!pf.includes(A))return;const K=function(){var le=(0,O.Z)(function*(ze,...je){const at=this.transaction(ze,W?"readwrite":"readonly");let Ot=at.store;return V&&(Ot=Ot.index(je.shift())),(yield Promise.all([Ot[A](...je),W&&at.done]))[0]});return function(je){return le.apply(this,arguments)}}();return ud.set(C,K),K}!function ff(w){Vc=w(Vc)}(w=>({...w,get:(C,A,V)=>cd(C,A)||w.get(C,A,V),has:(C,A)=>!!cd(C,A)||w.has(C,A)}));const jc="/firebase-messaging-sw.js",ld="/firebase-cloud-messaging-push-scope",Iu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$c="https://fcmregistrations.googleapis.com/v1",gf="google.c.a.c_id",Gn="google.c.a.c_l",Jy="google.c.a.ts";var qs=(()=>((qs=qs||{}).PUSH_RECEIVED="push-received",qs.NOTIFICATION_CLICKED="notification-clicked",qs))();function oi(w){const C=new Uint8Array(w);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hc(w){const A=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(A),W=new Uint8Array(V.length);for(let K=0;K<V.length;++K)W[K]=V.charCodeAt(K);return W}const ba="fcm_token_details_db",Ta=5,mf="fcm_token_object_Store";function Du(){return Du=(0,O.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(ba))return null;let C=null;return(yield Bc(ba,Ta,{upgrade:(V=(0,O.Z)(function*(W,K,le,ze){var je;if(K<2||!W.objectStoreNames.contains(mf))return;const at=ze.objectStore(mf),Ot=yield at.index("fcmSenderId").get(w);if(yield at.clear(),Ot)if(2===K){const bt=Ot;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;C={token:bt.fcmToken,createTime:null!==(je=bt.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:oi(bt.vapidKey)}}}else if(3===K){const bt=Ot;C={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:oi(bt.auth),p256dh:oi(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:oi(bt.vapidKey)}}}else if(4===K){const bt=Ot;C={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:oi(bt.auth),p256dh:oi(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:oi(bt.vapidKey)}}}}),function(K,le,ze,je){return V.apply(this,arguments)})})).close(),yield wu(ba),yield wu("fcm_vapid_details_db"),yield wu("undefined"),function Ci(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:C}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var V}),Du.apply(this,arguments)}const Cu="firebase-messaging-database",Wn=1,pi="firebase-messaging-store";let zc=null;function bu(){return zc||(zc=Bc(Cu,Wn,{upgrade:(w,C)=>{0===C&&w.createObjectStore(pi)}})),zc}function _o(w){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,O.Z)(function*(w){const C=hd(w),V=yield(yield bu()).transaction(pi).objectStore(pi).get(C);if(V)return V;{const W=yield function yf(w){return Du.apply(this,arguments)}(w.appConfig.senderId);if(W)return yield Tu(w,W),W}}),Eo.apply(this,arguments)}function Tu(w,C){return vf.apply(this,arguments)}function vf(){return(vf=(0,O.Z)(function*(w,C){const A=hd(w),W=(yield bu()).transaction(pi,"readwrite");return yield W.objectStore(pi).put(C,A),yield W.done,C})).apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(w){const C=hd(w),V=(yield bu()).transaction(pi,"readwrite");yield V.objectStore(pi).delete(C),yield V.done})).apply(this,arguments)}function hd({appConfig:w}){return w.appId}const wr=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xy(w,C){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,O.Z)(function*(w,C){const A=yield Yo(w),V=Zc(C),W={method:"POST",headers:A,body:JSON.stringify(V)};let K;try{K=yield(yield fetch(Su(w.appConfig),W)).json()}catch(le){throw wr.create("token-subscribe-failed",{errorInfo:le?.toString()})}if(K.error)throw wr.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw wr.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(w,C){const A=yield Yo(w),V=Zc(C.subscriptionOptions),W={method:"PATCH",headers:A,body:JSON.stringify(V)};let K;try{K=yield(yield fetch(`${Su(w.appConfig)}/${C.token}`,W)).json()}catch(le){throw wr.create("token-update-failed",{errorInfo:le?.toString()})}if(K.error)throw wr.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw wr.create("token-update-no-token");return K.token})).apply(this,arguments)}function _f(w,C){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(w,C){const V={method:"DELETE",headers:yield Yo(w)};try{const K=yield(yield fetch(`${Su(w.appConfig)}/${C}`,V)).json();if(K.error)throw wr.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(W){throw wr.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Su({projectId:w}){return`${$c}/projects/${w}/registrations`}function Yo(w){return qc.apply(this,arguments)}function qc(){return(qc=(0,O.Z)(function*({appConfig:w,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Zc({p256dh:w,auth:C,endpoint:A,vapidKey:V}){const W={web:{endpoint:A,auth:C,p256dh:w}};return V!==Iu&&(W.web.applicationPubKey=V),W}const Ef=6048e5;function fd(){return fd=(0,O.Z)(function*(w){const C=yield function Au(w,C){return Qo.apply(this,arguments)}(w.swRegistration,w.vapidKey),A={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:C.endpoint,auth:oi(C.getKey("auth")),p256dh:oi(C.getKey("p256dh"))},V=yield _o(w.firebaseDependencies);if(V){if(function Br(w,C){return C.vapidKey===w.vapidKey&&C.endpoint===w.endpoint&&C.auth===w.auth&&C.p256dh===w.p256dh}(V.subscriptionOptions,A))return Date.now()>=V.createTime+Ef?function Gi(w,C){return Jc.apply(this,arguments)}(w,{token:V.token,createTime:Date.now(),subscriptionOptions:A}):V.token;try{yield _f(w.firebaseDependencies,V.token)}catch(W){console.warn(W)}return wo(w.firebaseDependencies,A)}return wo(w.firebaseDependencies,A)}),fd.apply(this,arguments)}function Qc(){return Qc=(0,O.Z)(function*(w){const C=yield _o(w.firebaseDependencies);C&&(yield _f(w.firebaseDependencies,C.token),yield function dd(w){return Zs.apply(this,arguments)}(w.firebaseDependencies));const A=yield w.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Qc.apply(this,arguments)}function Jc(){return Jc=(0,O.Z)(function*(w,C){try{const A=yield function Ng(w,C){return Sa.apply(this,arguments)}(w.firebaseDependencies,C),V=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield Tu(w.firebaseDependencies,V),A}catch(A){throw yield function Yc(w){return Qc.apply(this,arguments)}(w),A}}),Jc.apply(this,arguments)}function wo(w,C){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(w,C){const V={token:yield Xy(w,C),createTime:Date.now(),subscriptionOptions:C};return yield Tu(w,V),V.token})).apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(w,C){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hc(C)})})).apply(this,arguments)}function Jo(w){const C={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function pd(w,C){if(!C.notification)return;w.notification={};const A=C.notification.title;A&&(w.notification.title=A);const V=C.notification.body;V&&(w.notification.body=V);const W=C.notification.image;W&&(w.notification.image=W);const K=C.notification.icon;K&&(w.notification.icon=K)}(C,w),function Ks(w,C){C.data&&(w.data=C.data)}(C,w),function bi(w,C){var A,V,W,K,le;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;w.fcmOptions={};const ze=null!==(W=null===(V=C.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==W?W:null===(K=C.notification)||void 0===K?void 0:K.click_action;ze&&(w.fcmOptions.link=ze);const je=null===(le=C.fcmOptions)||void 0===le?void 0:le.analytics_label;je&&(w.fcmOptions.analyticsLabel=je)}(C,w),C}function gd(w,C){const A=[];for(let V=0;V<w.length;V++)A.push(w.charAt(V)),V<C.length&&A.push(C.charAt(V));return A.join("")}function us(w){return wr.create("missing-app-config-values",{valueName:w})}gd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yd{constructor(C,A,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function md(w){if(!w||!w.options)throw us("App Configuration Object");if(!w.name)throw us("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=w;for(const V of C)if(!A[V])throw us(V);return{appName:w.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:A,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Mu(){return(Mu=(0,O.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(jc,{scope:ld}),w.swRegistration.update().catch(()=>{})}catch(C){throw wr.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(w,C){if(!C&&!w.swRegistration&&(yield function Xc(w){return Mu.apply(this,arguments)}(w)),C||!w.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw wr.create("invalid-sw-registration");w.swRegistration=C}})).apply(this,arguments)}function St(){return(St=(0,O.Z)(function*(w,C){C?w.vapidKey=C:w.vapidKey||(w.vapidKey=Iu)})).apply(this,arguments)}function vd(){return vd=(0,O.Z)(function*(w,C){if(!navigator)throw wr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wr.create("permission-blocked");return yield function xu(w,C){return St.apply(this,arguments)}(w,C?.vapidKey),yield function Xo(w,C){return Ti.apply(this,arguments)}(w,C?.serviceWorkerRegistration),function Kc(w){return fd.apply(this,arguments)}(w)}),vd.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(w,C,A){const V=function If(w){switch(w){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:A[gf],message_name:A[Gn],message_time:A[Jy],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wi(){return Wi=(0,O.Z)(function*(w,C){const A=C.data;if(!A.isFirebaseMessaging)return;w.onMessageHandler&&A.messageType===qs.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(Jo(A)):w.onMessageHandler.next(Jo(A)));const V=A.data;(function wf(w){return"object"==typeof w&&!!w&&gf in w})(V)&&"1"===V["google.c.a.e"]&&(yield function Og(w,C,A){return tl.apply(this,arguments)}(w,A.messageType,V))}),Wi.apply(this,arguments)}const Ru="@firebase/messaging",Df=w=>{const C=new yd(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Ma(w,C){return Wi.apply(this,arguments)}(C,A)),C},_d=w=>{const C=w.getProvider("messaging").getImmediate();return{getToken:V=>function el(w,C){return vd.apply(this,arguments)}(C,V)}};function Te(){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cf(){(0,Y._registerComponent)(new fe.wA("messaging",Df,"PUBLIC")),(0,Y._registerComponent)(new fe.wA("messaging-internal",_d,"PRIVATE")),(0,Y.registerVersion)(Ru,"0.12.4"),(0,Y.registerVersion)(Ru,"0.12.4","esm2017")}();const rl="analytics",Ed="firebase_id",wd="origin",Mr=6e4,cs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pu="https://www.googletagmanager.com/gtag/js",Rn=new ge.Yd("@firebase/analytics"),fr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function il(w){if(!w.startsWith(Pu)){const C=fr.create("invalid-gtag-resource",{gtagURL:w});return Rn.warn(C.message),""}return w}function Ra(w){return Promise.all(w.map(C=>C.catch(A=>A)))}function Ys(){return(Ys=(0,O.Z)(function*(w,C,A,V,W,K){const le=V[W];try{if(le)yield C[le];else{const je=(yield Ra(A)).find(at=>at.measurementId===W);je&&(yield C[je.appId])}}catch(ze){Rn.error(ze)}w("config",W,K)})).apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(w,C,A,V,W){try{let K=[];if(W&&W.send_to){let le=W.send_to;Array.isArray(le)||(le=[le]);const ze=yield Ra(A);for(const je of le){const at=ze.find(bt=>bt.measurementId===je),Ot=at&&C[at.appId];if(!Ot){K=[];break}K.push(Ot)}}0===K.length&&(K=Object.values(C)),yield Promise.all(K),w("event",V,W||{})}catch(K){Rn.error(K)}})).apply(this,arguments)}const Pg=30,bd=new class Cd{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function kg(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function Js(){return(Js=(0,O.Z)(function*(w){var C;const{appId:A,apiKey:V}=w,W={method:"GET",headers:kg(V)},K=cs.replace("{app-id}",A),le=yield fetch(K,W);if(200!==le.status&&304!==le.status){let ze="";try{const je=yield le.json();null!==(C=je.error)&&void 0!==C&&C.message&&(ze=je.error.message)}catch{}throw fr.create("config-fetch-failed",{httpStatus:le.status,responseMessage:ze})}return le.json()})).apply(this,arguments)}function Td(){return(Td=(0,O.Z)(function*(w,C=bd,A){const{appId:V,apiKey:W,measurementId:K}=w.options;if(!V)throw fr.create("no-app-id");if(!W){if(K)return{measurementId:K,appId:V};throw fr.create("no-api-key")}const le=C.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new ol;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==A?A:Mr),Sf({appId:V,apiKey:W,measurementId:K},le,ze,C)})).apply(this,arguments)}function Sf(w,C,A){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,O.Z)(function*(w,{throttleEndTimeMillis:C,backoffCount:A},V,W=bd){var K;const{appId:le,measurementId:ze}=w;try{yield function Ad(w,C){return new Promise((A,V)=>{const W=Math.max(C-Date.now(),0),K=setTimeout(A,W);w.addEventListener(()=>{clearTimeout(K),V(fr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(V,C)}catch(je){if(ze)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:le,measurementId:ze};throw je}try{const je=yield function ai(w){return Js.apply(this,arguments)}(w);return W.deleteThrottleMetadata(le),je}catch(je){const at=je;if(!function Md(w){if(!(w instanceof ie.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(at)){if(W.deleteThrottleMetadata(le),ze)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:le,measurementId:ze};throw je}const Ot=503===Number(null===(K=at?.customData)||void 0===K?void 0:K.httpStatus)?(0,ie.$s)(A,W.intervalMillis,Pg):(0,ie.$s)(A,W.intervalMillis),bt={throttleEndTimeMillis:Date.now()+Ot,backoffCount:A+1};return W.setThrottleMetadata(le,bt),Rn.debug(`Calling attemptFetch again in ${Ot} millis`),Sf(w,bt,V,W)}}),Sd.apply(this,arguments)}class ol{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Oa,ka;function xd(){return(xd=(0,O.Z)(function*(w,C,A,V,W){if(W&&W.global)w("event",A,V);else{const K=yield C;w("event",A,Object.assign(Object.assign({},V),{send_to:K}))}})).apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(){if(!(0,ie.hl)())return Rn.warn(fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(w){return Rn.warn(fr.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function eo(){return eo=(0,O.Z)(function*(w,C,A,V,W,K,le){var ze;const je=function Dn(w){return Td.apply(this,arguments)}(w);je.then(sr=>{A[sr.measurementId]=sr.appId,w.options.measurementId&&sr.measurementId!==w.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>Rn.error(sr)),C.push(je);const at=function La(){return jr.apply(this,arguments)}().then(sr=>{if(sr)return V.getId()}),[Ot,bt]=yield Promise.all([je,at]);(function sl(w){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(Pu)&&A.src.includes(w))return A;return null})(K)||function Id(w,C){const A=function ku(w,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(w,C)),A}("firebase-js-sdk-policy",{createScriptURL:il}),V=document.createElement("script"),W=`${Pu}?l=${w}&id=${C}`;V.src=A?A?.createScriptURL(W):W,V.async=!0,document.head.appendChild(V)}(K,Ot.measurementId),ka&&(W("consent","default",ka),function Co(w){ka=w}(void 0)),W("js",new Date);const xr=null!==(ze=le?.config)&&void 0!==ze?ze:{};return xr[wd]="firebase",xr.update=!0,null!=bt&&(xr[Ed]=bt),W("config",Ot.measurementId,xr),Oa&&(W("set",Oa),function Fa(w){Oa=w}(void 0)),Ot.measurementId}),eo.apply(this,arguments)}class ju{constructor(C){this.app=C}_delete(){return delete ui[this.app.options.appId],Promise.resolve()}}let ui={},ll=[];const Va={};let ds,qi,Ts="dataLayer",bo=!1;function Af(w,C,A){!function Ai(){const w=[];if((0,ie.ru)()&&w.push("This is a browser extension environment."),(0,ie.zI)()||w.push("Cookies are not available."),w.length>0){const C=w.map((V,W)=>`(${W+1}) ${V}`).join(" "),A=fr.create("invalid-analytics-context",{errorInfo:C});Rn.warn(A.message)}}();const V=w.options.appId;if(!V)throw fr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw fr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ui[V])throw fr.create("already-exists",{id:V});if(!bo){!function Na(w){let C=[];Array.isArray(window[w])?C=window[w]:window[w]=C}(Ts);const{wrappedGtag:K,gtagCore:le}=function Vu(w,C,A,V,W){let K=function(...le){window[V].push(arguments)};return window[W]&&"function"==typeof window[W]&&(K=window[W]),window[W]=function Lu(w,C,A,V){function K(){return K=(0,O.Z)(function*(le,...ze){try{if("event"===le){const[je,at]=ze;yield function Qs(w,C,A,V,W){return ea.apply(this,arguments)}(w,C,A,je,at)}else if("config"===le){const[je,at]=ze;yield function Fu(w,C,A,V,W,K){return Ys.apply(this,arguments)}(w,C,A,V,je,at)}else if("consent"===le){const[je]=ze;w("consent","update",je)}else if("get"===le){const[je,at,Ot]=ze;w("get",je,at,Ot)}else if("set"===le){const[je]=ze;w("set",je)}else w(le,...ze)}catch(je){Rn.error(je)}}),K.apply(this,arguments)}return function W(le){return K.apply(this,arguments)}}(K,w,C,A),{gtagCore:K,wrappedGtag:window[W]}}(ui,ll,Va,Ts,"gtag");qi=K,ds=le,bo=!0}return ui[V]=function Lt(w,C,A,V,W,K,le){return eo.apply(this,arguments)}(w,ll,Va,C,ds,Ts,A),new ju(w)}function dl(){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const hl="@firebase/analytics";!function To(){(0,Y._registerComponent)(new fe.wA(rl,(C,{options:A})=>Af(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,Y._registerComponent)(new fe.wA("analytics-internal",function w(C){try{const A=C.getProvider(rl).getImmediate();return{logEvent:(V,W,K)=>function ta(w,C,A,V){w=(0,ie.m9)(w),function Io(w,C,A,V,W){return xd.apply(this,arguments)}(qi,ui[w.app.options.appId],C,A,V).catch(W=>Rn.error(W))}(A,V,W,K)}}catch(A){throw fr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,Y.registerVersion)(hl,"0.10.0"),(0,Y.registerVersion)(hl,"0.10.0","esm2017")}();var So=L(1954),Ba=L(2631);const Mf=new class Gu extends Ba.v{}(class Od extends So.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(C,A,V):(C.flush(this),0)}});var qu=L(6321),Zi=L(5592),As=L(9397),Ki=L(5137),ja=L(3093);const na=new h.GfV("7.6.1"),Ms="__angularfire_symbol__analyticsIsSupportedValue",$a="__angularfire_symbol__analyticsIsSupported",Ao="__angularfire_symbol__remoteConfigIsSupportedValue",Zu="__angularfire_symbol__remoteConfigIsSupported",fl="__angularfire_symbol__messagingIsSupportedValue",Ku="__angularfire_symbol__messagingIsSupported";function xf(w,C,A){if(C){if(1===C.length)return C[0];const K=C.filter(le=>le.app===A);if(1===K.length)return K[0]}return A.container.getProvider(w).getImmediate({optional:!0})}globalThis[$a]||(globalThis[$a]=dl().then(w=>globalThis[Ms]=w).catch(()=>globalThis[Ms]=!1)),globalThis[Ku]||(globalThis[Ku]=Te().then(w=>globalThis[fl]=w).catch(()=>globalThis[fl]=!1)),globalThis[Zu]||(globalThis[Zu]=qo().then(w=>globalThis[Ao]=w).catch(()=>globalThis[Ao]=!1));const Rf=(w,C)=>{const A=C?[C]:(0,B.C6)(),V=[];return A.forEach(W=>{W.container.getProvider(w).instances.forEach(le=>{V.includes(le)||V.push(le)})}),V};function Cn(){}class Ha{constructor(C,A=Mf){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,V){const W=this.zone;return this.delegate.schedule(function(le){W.runGuarded(()=>{C.apply(this,[le])})},A,V)}}class ro{constructor(C){this.zone=C,this.task=null}call(C,A){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cn,{},Cn,Cn)),A.pipe((0,As.b)({next:V,complete:V,error:V})).subscribe(C).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yu=(()=>{class w{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Ha(Zone.current)),this.insideAngular=A.run(()=>new Ha(Zone.current,qu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(A){return new(A||w)(h.LFG(h.R0b))},w.\u0275prov=h.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ir(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function Mo(w){return ir().ngZone.run(()=>w())}function Nf(w){return ir(),function ev(w){return function(A){return(A=A.lift(new ro(w.ngZone))).pipe((0,Ki.R)(w.outsideAngular),(0,ja.Q)(w.insideAngular))}}(ir())(w)}const Ug=(w,C)=>function(){const V=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),Mo(()=>w.apply(void 0,V))},Of=(w,C)=>function(){let A;const V=arguments;for(let K=0;K<arguments.length;K++)"function"==typeof V[K]&&(C&&(A||(A=Mo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cn,{},Cn,Cn)))),V[K]=Ug(V[K],A));const W=function za(w){return ir().ngZone.runOutsideAngular(()=>w())}(()=>w.apply(this,V));if(!C){if(W instanceof Zi.y){const K=ir();return W.pipe((0,Ki.R)(K.outsideAngular),(0,ja.Q)(K.insideAngular))}return Mo(()=>W)}return W instanceof Zi.y?W.pipe(Nf):W instanceof Promise?Mo(()=>new Promise((K,le)=>W.then(ze=>Mo(()=>K(ze)),ze=>Mo(()=>le(ze))))):"function"==typeof W&&A?function(){return setTimeout(()=>{A&&"scheduled"===A.state&&A.invoke()},10),W.apply(this,arguments)}:Mo(()=>W)}},6878:(pt,Ce,L)=>{L.d(Ce,{$:()=>jc,A:()=>z,D:()=>Ae,I:()=>nd,J:()=>_a,L:()=>Dt,N:()=>qr,P:()=>Lt,Q:()=>hf,R:()=>al,U:()=>vo,V:()=>qo,W:()=>Zo,X:()=>fi,Y:()=>Ur,Z:()=>kc,_:()=>sd,a:()=>hr,a0:()=>Iu,a1:()=>gf,a2:()=>Rg,a3:()=>mf,a4:()=>Du,a5:()=>Cu,a6:()=>pi,a7:()=>bu,a8:()=>Eo,a9:()=>vf,aA:()=>J,aB:()=>$a,aC:()=>rr,aD:()=>qt,aE:()=>As,aF:()=>Nd,aG:()=>Rd,aH:()=>Yn,aL:()=>Qr,aO:()=>Ca,aa:()=>dd,ab:()=>hd,ac:()=>Gc,ad:()=>Ng,ae:()=>_f,af:()=>Su,ai:()=>Ef,aj:()=>fd,ak:()=>Yc,an:()=>xg,ao:()=>pd,aq:()=>St,ar:()=>Ru,as:()=>$e,at:()=>mt,au:()=>me,av:()=>ee,aw:()=>bt,ax:()=>Ku,ay:()=>ht,az:()=>Ee,b:()=>nl,c:()=>qi,d:()=>Af,e:()=>Fg,f:()=>hl,g:()=>Gu,h:()=>So,i:()=>Dd,j:()=>qu,k:()=>fs,l:()=>Xs,m:()=>ml,o:()=>$g,p:()=>Se,r:()=>cl,s:()=>gi,u:()=>La});var h=L(5861),B=L(9058),O=L(534),Y=L(7582),ie=L(7879),fe=L(4537);const Se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},We=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new ie.Yd("@firebase/auth");function ut(v,...p){Oe.logLevel<=ie.in.ERROR&&Oe.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function ee(v,...p){throw Ne(v,...p)}function Ee(v,...p){return Ne(v,...p)}function se(v,p,m){const I=Object.assign(Object.assign({},We()),{[p]:m});return new B.LL("auth","Firebase",I).create(p,{appName:v.name})}function he(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&ee(v,"argument-error"),se(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return xe.create(v,...p)}function J(v,p,...m){if(!v)throw Ne(p,...m)}function Xe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ut(p),new Error(p)}function $e(v,p){v||Xe(p)}function Kt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function cr(){return"http:"===Gr()||"https:"===Gr()}function Gr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ye{constructor(p,m){this.shortDelay=p,this.longDelay=m,$e(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Is(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(cr()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function be(v,p){$e(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Pe{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ue=new ye(3e4,6e4);function Ye(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function rt(v,p,m,I){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(v,p,m,I,M={}){return et(v,M,(0,h.Z)(function*(){let P={},Z={};I&&("GET"===p?Z=I:P={body:JSON.stringify(I)});const ce=(0,B.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),Pe.fetch()(Fn(v,v.config.apiHost,m,ce),Object.assign({method:p,headers:Be,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function et(v,p,m){return gt.apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},He),p);try{const M=new Yt(v),P=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw lr(v,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const ce=P.ok?Z.errorMessage:Z.error.message,[Be,Qe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw lr(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Be)throw lr(v,"email-already-in-use",Z);if("USER_DISABLED"===Be)throw lr(v,"user-disabled",Z);const _t=I[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw se(v,_t,Qe);ee(v,_t)}}catch(M){if(M instanceof B.ZR)throw M;ee(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function en(v,p,m,I){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(v,p,m,I,M={}){const P=yield rt(v,p,m,I,M);return"mfaPendingCredential"in P&&ee(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Fn(v,p,m,I){const M=`${p}${m}?${I}`;return v.config.emulator?be(v.config,M):`${v.config.apiScheme}://${M}`}class Yt{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Ee(this.auth,"network-request-failed")),Ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const M=Ee(v,p,I);return M.customData._tokenResponse=m,M}function tr(){return(tr=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bi(){return(Bi=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Dr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function rs(){return(rs=(0,h.Z)(function*(v,p=!1){const m=(0,B.m9)(v),I=yield m.getIdToken(p),M=dt(I);J(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,Z=P?.sign_in_provider;return{claims:M,token:I,authTime:Dr(Ze(M.auth_time)),issuedAtTime:Dr(Ze(M.iat)),expirationTime:Dr(Ze(M.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Ze(v){return 1e3*Number(v)}function dt(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return ut("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,B.tV)(m);return M?JSON.parse(M):(ut("Failed to decode base64 JWT payload"),null)}catch(M){return ut("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Wt(v,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof B.ZR&&function ii({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class zt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Zn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function is(v){return ln.apply(this,arguments)}function ln(){return ln=(0,h.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),M=yield Wt(v,function ho(v,p){return Bi.apply(this,arguments)}(m,{idToken:I}));J(M?.users.length,m,"internal-error");const P=M.users[0];v._notifyReloadListener(P);const Z=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?function ji(v){return v.map(p=>{var{providerId:m}=p,I=(0,Y._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],ce=function Ln(v,p){return[...v.filter(I=>!p.some(M=>M.providerId===I.providerId)),...p]}(v.providerData,Z),_t=!!v.isAnonymous&&!(v.email&&P.passwordHash||ce?.length),Jt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ce,metadata:new Zn(P.createdAt,P.lastLoginAt),isAnonymous:_t};Object.assign(v,Jt)}),ln.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(v){const p=(0,B.m9)(v);yield is(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(v,p){const m=yield et(v,{},(0,h.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:P}=v.config,Z=Fn(v,M,"/v1/token",`key=${P}`),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Pe.fetch()(Z,{method:"POST",headers:ce,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(typeof p.idToken<"u","internal-error"),J(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Et(v){const p=dt(v);return J(p,"internal-error"),J(typeof p.exp<"u","internal-error"),J(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,h.Z)(function*(){return J(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,h.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:Z}=yield function Ds(v,p){return Cr.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(M,P,Number(Z))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:M,expirationTime:P}=m,Z=new Hn;return I&&(J("string"==typeof I,"internal-error",{appName:p}),Z.refreshToken=I),M&&(J("string"==typeof M,"internal-error",{appName:p}),Z.accessToken=M),P&&(J("number"==typeof P,"internal-error",{appName:p}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Hn,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function vn(v,p){J("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Kn{constructor(p){var{uid:m,auth:I,stsTokenManager:M}=p,P=(0,Y._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Zn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const I=yield Wt(m,m.stsTokenManager.getToken(m.auth,p));return J(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function Wr(v){return rs.apply(this,arguments)}(this,p)}reload(){return function Lr(v){return Pt.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Kn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,h.Z)(function*(){let M=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield is(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Wt(p,function dr(v,p){return tr.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,M,P,Z,ce,Be,Qe,_t;const Jt=null!==(I=m.displayName)&&void 0!==I?I:void 0,ci=null!==(M=m.email)&&void 0!==M?M:void 0,Ju=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Uf=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,yl=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,vl=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,Hg=null!==(Qe=m.createdAt)&&void 0!==Qe?Qe:void 0,Bf=null!==(_t=m.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:qa,emailVerified:jf,isAnonymous:$f,providerData:_l,stsTokenManager:zg}=m;J(qa&&zg,p,"internal-error");const El=Hn.fromJSON(this.name,zg);J("string"==typeof qa,p,"internal-error"),vn(Jt,p.name),vn(ci,p.name),J("boolean"==typeof jf,p,"internal-error"),J("boolean"==typeof $f,p,"internal-error"),vn(Ju,p.name),vn(Uf,p.name),vn(yl,p.name),vn(vl,p.name),vn(Hg,p.name),vn(Bf,p.name);const Hf=new Kn({uid:qa,auth:p,email:ci,emailVerified:jf,displayName:Jt,isAnonymous:$f,photoURL:Uf,phoneNumber:Ju,tenantId:yl,stsTokenManager:El,createdAt:Hg,lastLoginAt:Bf});return _l&&Array.isArray(_l)&&(Hf.providerData=_l.map(nv=>Object.assign({},nv))),vl&&(Hf._redirectEventId=vl),Hf}static _fromIdTokenResponse(p,m,I=!1){return(0,h.Z)(function*(){const M=new Hn;M.updateFromServerResponse(m);const P=new Kn({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:I});return yield is(P),P})()}}const Sn=new Map;function rr(v){$e(v instanceof Function,"Expected a class definition");let p=Sn.get(v);return p?($e(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Sn.set(v,p),p)}const qr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,I){var M=this;return(0,h.Z)(function*(){M.storage[m]=I})()}_get(m){var I=this;return(0,h.Z)(function*(){const M=I.storage[m];return void 0===M?null:M})()}_remove(m){var I=this;return(0,h.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function qt(v,p,m){return`firebase:${v}:${p}:${m}`}class H{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:M,name:P}=this.auth;this.fullUserKey=qt(this.userKey,M.apiKey,P),this.fullPersistenceKey=qt("persistence",M.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Kn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,h.Z)(function*(){if(!m.length)return new H(rr(qr),p,I);const M=(yield Promise.all(m.map(function(){var Qe=(0,h.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let P=M[0]||rr(qr);const Z=qt(I,p.config.apiKey,p.name);let ce=null;for(const Qe of m)try{const _t=yield Qe._get(Z);if(_t){const Jt=Kn._fromJSON(p,_t);Qe!==P&&(ce=Jt),P=Qe;break}}catch{}const Be=M.filter(Qe=>Qe._shouldAllowMigration);return P._shouldAllowMigration&&Be.length?(P=Be[0],ce&&(yield P._set(Z,ce.toJSON())),yield Promise.all(m.map(function(){var Qe=(0,h.Z)(function*(_t){if(_t!==P)try{yield _t._remove(Z)}catch{}});return function(_t){return Qe.apply(this,arguments)}}())),new H(P,p,I)):new H(P,p,I)})()}}function j(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Q(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(k(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ge(p))return"Blackberry";if(vt(p))return"Webos";if(F(p))return"Safari";if((p.includes("chrome/")||R(p))&&!p.includes("edge/"))return"Chrome";if(me(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function k(v=(0,B.z$)()){return/firefox\//i.test(v)}function F(v=(0,B.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function R(v=(0,B.z$)()){return/crios\//i.test(v)}function Q(v=(0,B.z$)()){return/iemobile/i.test(v)}function me(v=(0,B.z$)()){return/android/i.test(v)}function Ge(v=(0,B.z$)()){return/blackberry/i.test(v)}function vt(v=(0,B.z$)()){return/webos/i.test(v)}function mt(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ht(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function kt(v=(0,B.z$)()){return mt(v)||me(v)||vt(v)||Ge(v)||/windows phone/i.test(v)||Q(v)}function br(v,p=[]){let m;switch(v){case"Browser":m=j((0,B.z$)());break;case"Worker":m=`${j((0,B.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${I}`}function re(){return(re=(0,h.Z)(function*(v){return(yield rt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fe(v,p){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(v,p){return rt(v,"GET","/v2/recaptchaConfig",Ye(v,p))})).apply(this,arguments)}function Rt(v){return void 0!==v&&void 0!==v.getResponse}function jt(v){return void 0!==v&&void 0!==v.enterprise}class Xt{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function zn(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=M=>{const P=Ee("internal-error");P.customData=M,m(P)},I.type="text/javascript",I.charset="UTF-8",function _r(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function $s(v){return`__${v}${Math.floor(1e6*Math.random())}`}class si{constructor(p){this.type="recaptcha-enterprise",this.auth=Yn(p)}verify(p="verify",m=!1){var I=this;return(0,h.Z)(function*(){function P(){return P=(0,h.Z)(function*(ce){if(!m){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var Be=(0,h.Z)(function*(Qe,_t){Fe(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Jt=>{if(void 0!==Jt.recaptchaKey){const ci=new Xt(Jt);return null==ce.tenantId?ce._agentRecaptchaConfig=ci:ce._tenantRecaptchaConfigs[ce.tenantId]=ci,Qe(ci.siteKey)}_t(new Error("recaptcha Enterprise site key undefined"))}).catch(Jt=>{_t(Jt)})});return function(Qe,_t){return Be.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(ce,Be,Qe){const _t=window.grecaptcha;jt(_t)?_t.enterprise.ready(()=>{_t.enterprise.execute(ce,{action:p}).then(Jt=>{Be(Jt)}).catch(()=>{Be("NO_RECAPTCHA")})}):Qe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,Be)=>{(function M(ce){return P.apply(this,arguments)})(I.auth).then(Qe=>{if(!m&&jt(window.grecaptcha))Z(Qe,ce,Be);else{if(typeof window>"u")return void Be(new Error("RecaptchaVerifier is only supported in browser"));zn("https://www.google.com/recaptcha/enterprise.js?render="+Qe).then(()=>{Z(Qe,ce,Be)}).catch(_t=>{Be(_t)})}}).catch(Qe=>{Be(Qe)})})})()}}function Hs(v,p,m){return po.apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(v,p,m,I=!1){const M=new si(v);let P;try{P=yield M.verify(m)}catch{P=yield M.verify(m,!0)}const Z=Object.assign({},p);return Object.assign(Z,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class cf{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=P=>new Promise((Z,ce)=>{try{Z(p(P))}catch(Be){ce(Be)}});I.onAbort=m,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const M of m.queue)yield M(p),M.onAbort&&I.push(M.onAbort)}catch(M){I.reverse();for(const P of I)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Rc{constructor(p,m,I,M){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=I,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ag(this),this.idTokenSubscription=new Ag(this),this.beforeStateQueue=new cf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=rr(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var M,P;if(!I._deleted&&(I.persistenceManager=yield H.create(I,p),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var I;const M=yield m.assertedPersistence.getCurrentUser();let P=M,Z=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,Be=P?._redirectEventId,Qe=yield m.tryRedirectSignIn(p);(!ce||ce===Be)&&Qe?.user&&(P=Qe.user,Z=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(P)}catch(ce){P=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return J(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield is(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ae(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const I=p?(0,B.m9)(p):null;return I&&J(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return p&&J(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(rr(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const m=yield Fe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Xt(m);null==p.tenantId?p._agentRecaptchaConfig=I:p._tenantRecaptchaConfigs[p.tenantId]=I,I.emailPasswordEnabled&&new si(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,h.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&rr(p)||m._popupRedirectResolver;J(I,m,"argument-error"),m.redirectPersistenceManager=yield H.create(m,[rr(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var I,M;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,M){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return J(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,I,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=br(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(I["X-Firebase-Client"]=M);const P=yield p._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var m;const I=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return I?.error&&function yt(v,...p){Oe.logLevel<=ie.in.WARN&&Oe.warn(`Auth (${O.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Yn(v){return(0,B.m9)(v)}class Ag{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nd(v,p,m){const I=Yn(v);J(I._canInitEmulator,I,"emulator-config-failed"),J(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const M=!!m?.disableWarnings,P=pu(p),{host:Z,port:ce}=function zo(v){const p=pu(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const P=M[1];return{host:P,port:Nc(I.substr(P.length+1))}}{const[P,Z]=I.split(":");return{host:P,port:Nc(Z)}}}(p);I.config.emulator={url:`${P}//${Z}${null===ce?"":`:${ce}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:ce,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function lf(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function pu(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Nc(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class _a{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Xe("not implemented")}_getIdTokenResponse(p){return Xe("not implemented")}_linkToIdToken(p,m){return Xe("not implemented")}_getReauthenticationResolver(p){return Xe("not implemented")}}function Ea(v,p){return rd.apply(this,arguments)}function rd(){return(rd=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:resetPassword",Ye(v,p))})).apply(this,arguments)}function gu(v,p){return mu.apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",Ye(v,p))})).apply(this,arguments)}function Er(v,p){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPassword",Ye(v,p))})).apply(this,arguments)}function Cs(v,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:sendOobCode",Ye(v,p))})).apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Go(v,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Oc(v,p){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Kr(){return(Kr=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}class bs extends _a{constructor(p,m,I,M=null){super("password",I),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new bs(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new bs(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){var I;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=p._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield Hs(p,M,"signInWithPassword");return Er(p,P)}return Er(p,M).catch(function(){var P=(0,h.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ce=yield Hs(p,M,"signInWithPassword");return Er(p,ce)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function Mn(v,p){return Kr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:ee(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return gu(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function yu(v,p){return Tr.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function gn(v,p){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithIdp",Ye(v,p))})).apply(this,arguments)}class Dt extends _a{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Dt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):ee("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:M}=m,P=(0,Y._T)(m,["providerId","signInMethod"]);if(!I||!M)return null;const Z=new Dt(I,M);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(p){return gn(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,gn(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,gn(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function vu(){return(vu=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:sendVerificationCode",Ye(v,p))})).apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p))})).apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(v,p){const m=yield en(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p));if(m.temporaryProof)throw lr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ss={USER_NOT_FOUND:"user-not-found"};function Eu(){return(Eu=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ss)})).apply(this,arguments)}class Sr extends _a{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Sr({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Sr({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function zs(v,p){return xn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function _u(v,p){return mo.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Wo(v,p){return Eu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:M,temporaryProof:P}=p;return I||m||M||P?new Sr({verificationId:m,verificationCode:I,phoneNumber:M,temporaryProof:P}):null}}class Hi{constructor(p){var m,I,M,P,Z,ce;const Be=(0,B.zd)((0,B.pd)(p)),Qe=null!==(m=Be.apiKey)&&void 0!==m?m:null,_t=null!==(I=Be.oobCode)&&void 0!==I?I:null,Jt=function Yr(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Be.mode)&&void 0!==M?M:null);J(Qe&&_t&&Jt,"argument-error"),this.apiKey=Qe,this.operation=Jt,this.code=_t,this.continueUrl=null!==(P=Be.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Be.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ce=Be.tenantId)&&void 0!==ce?ce:null}static parseLink(p){const m=function Pc(v){const p=(0,B.zd)((0,B.pd)(v)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||m||p||v}(p);try{return new Hi(m)}catch{return null}}}let hf=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return bs._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const M=Hi.parseLink(I);return J(M,"argument-error"),bs._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class os{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class yo extends os{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class fi extends yo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return J("providerId"in m&&"signInMethod"in m,"argument-error"),Dt._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),Dt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return fi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return fi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:P,nonce:Z,providerId:ce}=p;if(!I&&!M&&!m&&!P||!ce)return null;try{return new fi(ce)._credential({idToken:m,accessToken:I,nonce:Z,pendingToken:P})}catch{return null}}}let vo=(()=>{class v extends yo{constructor(){super("facebook.com")}static credential(m){return Dt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),qo=(()=>{class v extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Dt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:M}=m;if(!I&&!M)return null;try{return v.credential(I,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Zo=(()=>{class v extends yo{constructor(){super("github.com")}static credential(m){return Dt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ca extends _a{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return gn(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,gn(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,gn(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:M,pendingToken:P}=m;return I&&M&&P&&I===M?new Ca(I,P):null}static _create(p,m){return new Ca(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ur extends os{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ur.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ur.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Ca.fromJSON(p);return J(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Ca._create(I,m)}catch{return null}}}let kc=(()=>{class v extends yo{constructor(){super("twitter.com")}static credential(m,I){return Dt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=m;if(!I||!M)return null;try{return v.credential(I,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function zi(v,p){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signUp",Ye(v,p))})).apply(this,arguments)}class _n{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,M=!1){return(0,h.Z)(function*(){const P=yield Kn._fromIdTokenResponse(p,I,M),Z=Ko(I);return new _n({user:P,providerId:Z,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const M=Ko(I);return new _n({user:p,providerId:M,_tokenResponse:I,operationType:m})})()}}function Ko(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function sd(v){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,h.Z)(function*(v){var p;const m=Yn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new _n({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield zi(m,{returnSecureToken:!0}),M=yield _n._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Lc extends B.ZR{constructor(p,m,I,M){var P;super(m.code,m.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,M){return new Lc(p,m,I,M)}}function Vc(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Lc._fromErrorAndOperation(v,P,p,I):P})}function ff(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function xg(v,p){return od.apply(this,arguments)}function od(){return od=(0,h.Z)(function*(v,p){const m=(0,B.m9)(v);yield Bc(!0,m,p);const{providerUserInfo:I}=yield function jn(v,p){return Di.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=ff(I||[]);return m.providerData=m.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),od.apply(this,arguments)}function as(v,p){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,h.Z)(function*(v,p,m=!1){const I=yield Wt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return _n._forOperation(v,"link",I)})).apply(this,arguments)}function Bc(v,p,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(v,p,m){yield is(p);const M=!1===v?"provider-already-linked":"no-such-provider";J(ff(p.providerData).has(m)===v,p.auth,M)})).apply(this,arguments)}function pf(v,p){return ad.apply(this,arguments)}function ad(){return(ad=(0,h.Z)(function*(v,p,m=!1){const{auth:I}=v,M="reauthenticate";try{const P=yield Wt(v,Vc(I,M,p,v),m);J(P.idToken,I,"internal-error");const Z=dt(P.idToken);J(Z,I,"internal-error");const{sub:ce}=Z;return J(v.uid===ce,I,"user-mismatch"),_n._forOperation(v,M,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(I,"user-mismatch"),P}})).apply(this,arguments)}function ud(v,p){return cd.apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(v,p,m=!1){const I="signIn",M=yield Vc(v,I,p),P=yield _n._fromIdTokenResponse(v,I,M);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function jc(v,p){return ld.apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(v,p){return ud(Yn(v),p)})).apply(this,arguments)}function Iu(v,p){return $c.apply(this,arguments)}function $c(){return($c=(0,h.Z)(function*(v,p){const m=(0,B.m9)(v);return yield Bc(!1,m,p.providerId),as(m,p)})).apply(this,arguments)}function gf(v,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(v,p){return pf((0,B.m9)(v),p)})).apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithCustomToken",Ye(v,p))})).apply(this,arguments)}function Rg(v,p){return qs.apply(this,arguments)}function qs(){return qs=(0,h.Z)(function*(v,p){const m=Yn(v),I=yield function Jy(v,p){return Ws.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),M=yield _n._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(M.user),M}),qs.apply(this,arguments)}class oi{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Hc._fromServerResponse(p,m):"totpInfo"in m?ba._fromServerResponse(p,m):ee(p,"internal-error")}}class Hc extends oi{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Hc(m)}}class ba extends oi{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new ba(m)}}function Ta(v,p,m){var I;J((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),J(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(J(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(J(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function mf(v,p,m){return yf.apply(this,arguments)}function yf(){return yf=(0,h.Z)(function*(v,p,m){var I;const M=Yn(v),P={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield Hs(M,P,"getOobCode",!0);m&&Ta(M,Z,m),yield Go(M,Z)}else m&&Ta(M,P,m),yield Go(M,P).catch(function(){var Z=(0,h.Z)(function*(ce){if("auth/missing-recaptcha-token"!==ce.code)return Promise.reject(ce);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Be=yield Hs(M,P,"getOobCode",!0);m&&Ta(M,Be,m),yield Go(M,Be)}});return function(ce){return Z.apply(this,arguments)}}())}),yf.apply(this,arguments)}function Du(v,p,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(v,p,m){yield Ea((0,B.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Cu(v,p){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,h.Z)(function*(v,p){yield function df(v,p){return Ft.apply(this,arguments)}((0,B.m9)(v),{oobCode:p})}),Wn.apply(this,arguments)}function pi(v,p){return zc.apply(this,arguments)}function zc(){return(zc=(0,h.Z)(function*(v,p){const m=(0,B.m9)(v),I=yield Ea(m,{oobCode:p}),M=I.requestType;switch(J(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(I.mfaInfo,m,"internal-error");default:J(I.email,m,"internal-error")}let P=null;return I.mfaInfo&&(P=oi._fromServerResponse(Yn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function bu(v,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(v,p){const{data:m}=yield pi((0,B.m9)(v),p);return m.email})).apply(this,arguments)}function Eo(v,p,m){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,h.Z)(function*(v,p,m){var I;const M=Yn(v),P={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Qe=yield Hs(M,P,"signUpPassword");Z=zi(M,Qe)}else Z=zi(M,P).catch(function(){var Qe=(0,h.Z)(function*(_t){if("auth/missing-recaptcha-token"===_t.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Jt=yield Hs(M,P,"signUpPassword");return zi(M,Jt)}return Promise.reject(_t)});return function(_t){return Qe.apply(this,arguments)}}());const ce=yield Z.catch(Qe=>Promise.reject(Qe)),Be=yield _n._fromIdTokenResponse(M,"signIn",ce);return yield M._updateCurrentUser(Be.user),Be}),Tu.apply(this,arguments)}function vf(v,p,m){return jc((0,B.m9)(v),hf.credential(p,m))}function dd(v,p,m){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,h.Z)(function*(v,p,m){var I;const M=Yn(v),P={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Z(ce,Be){J(Be.handleCodeInApp,M,"argument-error"),Be&&Ta(M,ce,Be)}if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ce=yield Hs(M,P,"getOobCode",!0);Z(ce,m),yield Oc(M,ce)}else Z(P,m),yield Oc(M,P).catch(function(){var ce=(0,h.Z)(function*(Be){if("auth/missing-recaptcha-token"!==Be.code)return Promise.reject(Be);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Qe=yield Hs(M,P,"getOobCode",!0);Z(Qe,m),yield Oc(M,Qe)}});return function(Be){return ce.apply(this,arguments)}}())}),Zs.apply(this,arguments)}function hd(v,p){const m=Hi.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function Gc(v,p,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v),M=hf.credentialWithLink(p,m||Kt());return J(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),jc(I,M)})).apply(this,arguments)}function Wc(){return(Wc=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:createAuthUri",Ye(v,p))})).apply(this,arguments)}function Ng(v,p){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,h.Z)(function*(v,p){const I={identifier:p,continueUri:cr()?Kt():"http://localhost"},{signinMethods:M}=yield function Xy(v,p){return Wc.apply(this,arguments)}((0,B.m9)(v),I);return M||[]}),Sa.apply(this,arguments)}function _f(v,p){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,h.Z)(function*(v,p){const m=(0,B.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ta(m.auth,M,p);const{email:P}=yield function id(v,p){return wa.apply(this,arguments)}(m.auth,M);P!==v.email&&(yield v.reload())}),Aa.apply(this,arguments)}function Su(v,p,m){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Ta(I.auth,P,m);const{email:Z}=yield function tt(v,p){return Nt.apply(this,arguments)}(I.auth,P);Z!==v.email&&(yield v.reload())}),Yo.apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ef(v,p){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,B.m9)(v),P={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Z=yield Wt(I,function qc(v,p){return Zc.apply(this,arguments)}(I.auth,P));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const ce=I.providerData.find(({providerId:Be})=>"password"===Be);ce&&(ce.displayName=I.displayName,ce.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),Kc.apply(this,arguments)}function fd(v,p){return Qc((0,B.m9)(v),p,null)}function Yc(v,p){return Qc((0,B.m9)(v),null,p)}function Qc(v,p,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(v,p,m){const{auth:I}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const Z=yield Wt(v,gu(I,P));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class wo{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class mn extends wo{constructor(p,m,I,M){super(p,m,I),this.username=M}}class Au extends wo{constructor(p,m){super(p,"facebook.com",m)}}class Qo extends mn{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Br extends wo{constructor(p,m){super(p,"google.com",m)}}class Jo extends mn{constructor(p,m,I){super(p,"twitter.com",m,I)}}function pd(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Jc(v){var p,m;if(!v)return null;const{providerId:I}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Z=null===(m=null===(p=dt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new wo(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new Au(P,M);case"github.com":return new Qo(P,M);case"google.com":return new Br(P,M);case"twitter.com":return new Jo(P,M,v.screenName||null);case"custom":case"anonymous":return new wo(P,null);default:return new wo(P,I,M)}}(m)}class Ti{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new Ti("enroll",p,m)}static _fromMfaPendingCredential(p){return new Ti("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ti._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Ti._fromIdtoken(p.multiFactorSession.idToken)}return null}}class xu{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=Yn(p),M=m.customData._serverResponse,P=(M.mfaInfo||[]).map(ce=>oi._fromServerResponse(I,ce));J(M.mfaPendingCredential,I,"internal-error");const Z=Ti._fromMfaPendingCredential(M.mfaPendingCredential);return new xu(Z,P,function(){var ce=(0,h.Z)(function*(Be){const Qe=yield Be._process(I,Z);delete M.mfaInfo,delete M.mfaPendingCredential;const _t=Object.assign(Object.assign({},M),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(m.operationType){case"signIn":const Jt=yield _n._fromIdTokenResponse(I,m.operationType,_t);return yield I._updateCurrentUser(Jt.user),Jt;case"reauthenticate":return J(m.user,I,"internal-error"),_n._forOperation(m.user,m.operationType,_t);default:ee(I,"internal-error")}});return function(Be){return ce.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function St(v,p){var m;const I=(0,B.m9)(v),M=p;return J(p.customData.operationType,I,"argument-error"),J(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),xu._fromError(I,M)}class Ma{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>oi._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new Ma(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Ti._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,h.Z)(function*(){const M=p,P=yield I.getSession(),Z=yield Wt(I.user,M._process(I.user.auth,P,m));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const I="string"==typeof p?p:p.uid,M=yield m.user.getIdToken();try{const P=yield Wt(m.user,function If(v,p){return rt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(v,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Z})=>Z!==I),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const Wi=new WeakMap;function Ru(v){const p=(0,B.m9)(v);return Wi.has(p)||Wi.set(p,Ma._fromUser(p)),Wi.get(p)}const xa="__sak";class Df{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(xa,"1"),this.storage.removeItem(xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const nl=(()=>{class v extends Df{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _d(){const v=(0,B.z$)();return F(v)||mt(v)}()&&function vr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),P=this.localCache[I];M!==P&&m(I,P,M)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((ce,Be,Qe)=>{this.notifyListeners(ce,Qe)});const M=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!I)return}const P=()=>{const ce=this.storage.getItem(M);!I&&this.localCache[M]===ce||this.notifyListeners(M,ce)},Z=this.storage.getItem(M);!function pn(){return(0,B.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,I){this.localCache[m]=I;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var M=()=>super._set,P=this;return(0,h.Z)(function*(){yield M().call(P,m,I),P.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,M=this;return(0,h.Z)(function*(){const P=yield I().call(M,m);return M.localCache[m]=JSON.stringify(P),P})()}_remove(m){var I=()=>super._remove,M=this;return(0,h.Z)(function*(){yield I().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),hr=(()=>{class v extends Df{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let Ou=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(P=>P.isListeningto(m));if(I)return I;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,h.Z)(function*(){const M=m,{eventId:P,eventType:Z,data:ce}=M.data,Be=I.handlersMap[Z];if(!Be?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const Qe=Array.from(Be).map(function(){var Jt=(0,h.Z)(function*(ci){return ci(M.origin,ce)});return function(ci){return Jt.apply(this,arguments)}}()),_t=yield function bf(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(Qe);M.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:_t})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Qr(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class Tf{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var M=this;return(0,h.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,ce;return new Promise((Be,Qe)=>{const _t=Qr("",20);P.port1.start();const Jt=setTimeout(()=>{Qe(new Error("unsupported_event"))},I);ce={messageChannel:P,onMessage(ci){const Ju=ci;if(Ju.data.eventId===_t)switch(Ju.data.status){case"ack":clearTimeout(Jt),Z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Be(Ju.data.response);break;default:clearTimeout(Jt),clearTimeout(Z),Qe(new Error("invalid_response"))}}},M.handlers.add(ce),P.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:p,eventId:_t,data:m},[P.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function qn(){return window}function Ed(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function Mr(){return(Mr=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Rn="firebaseLocalStorageDb",fr="firebaseLocalStorage",il="fbase_key";class Ra{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ku(v,p){return v.transaction([fr],p?"readwrite":"readonly").objectStore(fr)}function Na(){const v=indexedDB.open(Rn,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(fr,{keyPath:il})}catch(M){m(M)}}),v.addEventListener("success",(0,h.Z)(function*(){const I=v.result;I.objectStoreNames.contains(fr)?p(I):(I.close(),yield function Id(){const v=indexedDB.deleteDatabase(Rn);return new Ra(v).toPromise()}(),p(yield Na()))}))})}function Fu(v,p,m){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(v,p,m){const I=ku(v,!0).put({[il]:p,value:m});return new Ra(I).toPromise()})).apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(v,p){const m=ku(v,!1).get(p),I=yield new Ra(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Lu(v,p){const m=ku(v,!0).delete(p);return new Ra(m).toPromise()}const Dd=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Na()),m.db})()}_withRetries(m){var I=this;return(0,h.Z)(function*(){let M=0;for(;;)try{const P=yield I._openDb();return yield m(P)}catch(P){if(M++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Ed()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Ou._getInstance(function Pu(){return Ed()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*(M,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(M,P){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var I,M;if(m.activeServiceWorker=yield function wd(){return Mr.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Tf(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(M=P[0])&&void 0!==M&&M.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function cs(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Na();return yield Fu(m,xa,"1"),yield Lu(m,xa),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var M=this;return(0,h.Z)(function*(){return M._withPendingWrite((0,h.Z)(function*(){return yield M._withRetries(P=>Fu(P,m,I)),M.localCache[m]=I,M.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,h.Z)(function*(){const M=yield I._withRetries(P=>function Qs(v,p){return ea.apply(this,arguments)}(P,m));return I.localCache[m]=M,M})()}_remove(m){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(M=>Lu(M,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const I=yield m._withRetries(Z=>{const ce=ku(Z,!1).getAll();return new Ra(ce).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:Z,value:ce}of I)P.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ce)&&(m.notifyListeners(Z,ce),M.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!P.has(Z)&&(m.notifyListeners(Z,null),M.push(Z));return M})()}notifyListeners(m,I){this.localCache[m]=I;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Dn=1e12;class Td{constructor(p){this.auth=p,this.counter=Dn,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new Sf(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||Dn;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Dn))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var I;return null===(I=m._widgets.get(p||Dn))||void 0===I||I.execute(),""})()}}class Sf{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;J(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Sd(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ad=$s("rcb"),Md=new ye(3e4,6e4);class Oa{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=qn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return J(function Io(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Rt(qn().grecaptcha)?Promise.resolve(qn().grecaptcha):new Promise((I,M)=>{const P=qn().setTimeout(()=>{M(Ee(p,"network-request-failed"))},Md.get());qn()[Ad]=()=>{qn().clearTimeout(P),delete qn()[Ad];const ce=qn().grecaptcha;if(!ce||!Rt(ce))return void M(Ee(p,"internal-error"));const Be=ce.render;ce.render=(Qe,_t)=>{const Jt=Be(Qe,_t);return this.counter++,Jt},this.hostLanguage=m,I(ce)},zn(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Ad,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),M(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=qn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xd{load(p){return(0,h.Z)(function*(){return new Td(p)})()}clearedOneInstance(){}}const Uu="recaptcha",Pa={theme:"light",type:"image"};class al{constructor(p,m=Object.assign({},Pa),I){this.parameters=m,this.type=Uu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yn(I),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;J(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xd:new Oa,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(P=>{const Z=ce=>{ce&&(p.tokenChangeListeners.delete(Z),P(ce))};p.tokenChangeListeners.add(Z),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=qn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){J(cr()&&!Ed(),p.auth,"internal-error"),yield function Bu(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function de(v){return re.apply(this,arguments)}(p.auth);J(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class En{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Sr._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function gi(v,p,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(v,p,m){const I=Yn(v),M=yield Co(I,p,(0,B.m9)(m));return new En(M,P=>jc(I,P))})).apply(this,arguments)}function Xs(v,p,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v);yield Bc(!1,I,"phone");const M=yield Co(I.auth,p,(0,B.m9)(m));return new En(M,P=>Iu(I,P))})).apply(this,arguments)}function cl(v,p,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v),M=yield Co(I.auth,p,(0,B.m9)(m));return new En(M,P=>gf(I,P))})).apply(this,arguments)}function Co(v,p,m){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,h.Z)(function*(v,p,m){var I;const M=yield m.verify();try{let P;if(J("string"==typeof M,v,"argument-error"),J(m.type===Uu,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const Z=P.session;if("phoneNumber"in P)return J("enroll"===Z.type,v,"internal-error"),(yield function el(v,p){return rt(v,"POST","/v2/accounts/mfaEnrollment:start",Ye(v,p))}(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{J("signin"===Z.type,v,"internal-error");const ce=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return J(ce,v,"missing-multi-factor-info"),(yield function Cd(v,p){return rt(v,"POST","/v2/accounts/mfaSignIn:start",Ye(v,p))}(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function Da(v,p){return vu.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:M});return Z}}finally{m._reset()}}),Fa.apply(this,arguments)}function La(v,p){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(v,p){yield as((0,B.m9)(v),p)})).apply(this,arguments)}let Lt=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Yn(m)}verifyPhoneNumber(m,I){return Co(this.auth,m,(0,B.m9)(I))}static credential(m,I){return Sr._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:M}=m;return I&&M?Sr._fromTokenResponse(I,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function eo(v,p){return p?rr(p):(J(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ju extends _a{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return gn(p,this._buildIdpRequest())}_linkToIdToken(p,m){return gn(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return gn(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ui(v){return ud(v.auth,new ju(v),v.bypassAuthState)}function ll(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),pf(m,new ju(v),v.bypassAuthState)}function Va(v){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),as(m,new ju(v),v.bypassAuthState)})).apply(this,arguments)}class Si{constructor(p,m,I,M,P=!1){this.auth=p,this.resolver=I,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(I,M){p.pendingPromise={resolve:I,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(I,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:P,tenantId:Z,error:ce,type:Be}=p;if(ce)return void m.reject(ce);const Qe={auth:m.auth,requestUri:I,sessionId:M,tenantId:Z||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(Qe))}catch(_t){m.reject(_t)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ui;case"linkViaPopup":case"linkViaRedirect":return Va;case"reauthViaPopup":case"reauthViaRedirect":return ll;default:ee(this.auth,"internal-error")}}resolve(p){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){$e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ds=new ye(2e3,1e4);function qi(v,p,m){return bo.apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(v,p,m){const I=Yn(v);he(v,p,os);const M=eo(I,m);return new Mi(I,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function Fg(v,p,m){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v);he(I.auth,p,os);const M=eo(I.auth,m);return new Mi(I.auth,"reauthViaPopup",p,M,I).executeNotNull()})).apply(this,arguments)}function Af(v,p,m){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v);he(I.auth,p,os);const M=eo(I.auth,m);return new Mi(I.auth,"linkViaPopup",p,M,I).executeNotNull()})).apply(this,arguments)}let Mi=(()=>{class v extends Si{constructor(m,I,M,P,Z){super(m,I,P,Z),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const I=yield m.execute();return J(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,h.Z)(function*(){$e(1===m.filter.length,"Popup operations only handle one event");const I=Qr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ds.get())};m()}}return v.currentPopupAction=null,v})();const dl="pendingRedirect",Nn=new Map;class Ss extends Si{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let I=Nn.get(m.auth._key());if(!I){try{const P=(yield function Lg(v,p){return Ua.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(P)}catch(M){I=()=>Promise.reject(M)}Nn.set(m.auth._key(),I)}return m.bypassAuthState||Nn.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const M=yield I.auth._redirectUserForId(p.eventId);if(M)return I.user=M,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ua(){return(Ua=(0,h.Z)(function*(v,p){const m=no(p),I=ta(v);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(m));return yield I._remove(m),M})).apply(this,arguments)}function $u(v,p){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,h.Z)(function*(v,p){return ta(v)._set(no(p),"true")})).apply(this,arguments)}function Rd(){Nn.clear()}function Nd(v,p){Nn.set(v._key(),p)}function ta(v){return rr(v._redirectPersistence)}function no(v){return qt(dl,v.config.apiKey,v.name)}function hl(v,p,m){return function zu(v,p,m){return To.apply(this,arguments)}(v,p,m)}function To(){return(To=(0,h.Z)(function*(v,p,m){const I=Yn(v);he(v,p,os),yield I._initializationPromise;const M=eo(I,m);return yield $u(M,I),M._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function So(v,p,m){return function Od(v,p,m){return Ba.apply(this,arguments)}(v,p,m)}function Ba(){return(Ba=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v);he(I.auth,p,os),yield I.auth._initializationPromise;const M=eo(I.auth,m);yield $u(M,I.auth);const P=yield ja(I);return M._openRedirect(I.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Gu(v,p,m){return function Mf(v,p,m){return Wu.apply(this,arguments)}(v,p,m)}function Wu(){return(Wu=(0,h.Z)(function*(v,p,m){const I=(0,B.m9)(v);he(I.auth,p,os),yield I.auth._initializationPromise;const M=eo(I.auth,m);yield Bc(!1,I,p.providerId),yield $u(M,I.auth);const P=yield ja(I);return M._openRedirect(I.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function qu(v,p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(v,p){return yield Yn(v)._initializationPromise,As(v,p,!1)})).apply(this,arguments)}function As(v,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,h.Z)(function*(v,p,m=!1){const I=Yn(v),M=eo(I,p),Z=yield new Ss(I,M,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,p)),Z})).apply(this,arguments)}function ja(v){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(v){const p=Qr(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class $a{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function fl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zu(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Zu(p)){const M=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ao(p))}saveEventToCache(p){this.cachedEventUids.add(Ao(p)),this.lastProcessedEventTime=Date.now()}}function Ao(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Zu({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Ku(v){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(v,p={}){return rt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vg=/^https?/;function xf(){return(xf=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Ku(v);for(const m of p)try{if(Rf(m))return}catch{}ee(v,"unauthorized-domain")})).apply(this,arguments)}function Rf(v){const p=Kt(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===I}if(!Vg.test(m))return!1;if(ra.test(v))return I===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const Cn=new ye(3e4,6e4);function Ha(){const v=qn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Yu=null;const za=new ye(5e3,15e3),Mo="__/auth/iframe",Pd="emulator/auth/iframe",gl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ev(v){const p=v.config;J(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?be(p,Pd):`https://${v.config.authDomain}/${Mo}`,I={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},M=Nf.get(v.config.apiHost);M&&(I.eid=M);const P=v._getFrameworks();return P.length&&(I.fw=P.join(",")),`${m}?${(0,B.xO)(I).slice(1)}`}function Of(){return Of=(0,h.Z)(function*(v){const p=yield function ir(v){return Yu=Yu||function ro(v){return new Promise((p,m)=>{var I,M,P;function Z(){Ha(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ha(),m(Ee(v,"network-request-failed"))},timeout:Cn.get()})}if(null!==(M=null===(I=qn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(P=qn().gapi)||void 0===P||!P.load){const ce=$s("iframefcb");return qn()[ce]=()=>{gapi.load?Z():m(Ee(v,"network-request-failed"))},zn(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Be=>m(Be))}Z()}}).catch(p=>{throw Yu=null,p})}(v),Yu}(v),m=qn().gapi;return J(m,v,"internal-error"),p.open({where:document.body,url:ev(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gl,dontclear:!0},I=>new Promise(function(){var M=(0,h.Z)(function*(P,Z){yield I.restyle({setHideOnLeave:!1});const ce=Ee(v,"network-request-failed"),Be=qn().setTimeout(()=>{Z(ce)},za.get());function Qe(){qn().clearTimeout(Be),P(I)}I.ping(Qe).then(Qe,()=>{Z(ce)})});return function(P,Z){return M.apply(this,arguments)}}()))}),Of.apply(this,arguments)}const w={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class K{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const je="__/auth/handler",at="emulator/auth/handler",Ot=encodeURIComponent("fac");function bt(v,p,m,I,M,P){return xr.apply(this,arguments)}function xr(){return(xr=(0,h.Z)(function*(v,p,m,I,M,P){J(v.config.authDomain,v,"auth-domain-config-required"),J(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:O.SDK_VERSION,eventId:M};if(p instanceof os){p.setDefaultLanguage(v.languageCode),Z.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(Z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[_t,Jt]of Object.entries(P||{}))Z[_t]=Jt}if(p instanceof yo){const _t=p.getScopes().filter(Jt=>""!==Jt);_t.length>0&&(Z.scopes=_t.join(","))}v.tenantId&&(Z.tid=v.tenantId);const ce=Z;for(const _t of Object.keys(ce))void 0===ce[_t]&&delete ce[_t];const Be=yield v._getAppCheckToken(),Qe=Be?`#${Ot}=${encodeURIComponent(Be)}`:"";return`${function sr({config:v}){return v.emulator?be(v,at):`https://${v.authDomain}/${je}`}(v)}?${(0,B.xO)(ce).slice(1)}${Qe}`})).apply(this,arguments)}const hs="webStorageSupport",fs=class Qu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hr,this._completeRedirectFn=As,this._overrideRedirectResult=Nd}_openPopup(p,m,I,M){var P=this;return(0,h.Z)(function*(){var Z;$e(null===(Z=P.eventManagers[p._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ce=yield bt(p,m,I,Kt(),M);return function le(v,p,m,I=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let ce="";const Be=Object.assign(Object.assign({},w),{width:I.toString(),height:M.toString(),top:P,left:Z}),Qe=(0,B.z$)().toLowerCase();m&&(ce=R(Qe)?"_blank":m),k(Qe)&&(p=p||"http://localhost",Be.scrollbars="yes");const _t=Object.entries(Be).reduce((ci,[Ju,Uf])=>`${ci}${Ju}=${Uf},`,"");if(function At(v=(0,B.z$)()){var p;return mt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Qe)&&"_self"!==ce)return function ze(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",ce),new K(null);const Jt=window.open(p||"",ce,_t);J(Jt,v,"popup-blocked");try{Jt.focus()}catch{}return new K(Jt)}(p,ce,Qr())})()}_openRedirect(p,m,I,M){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),function rl(v){qn().location.href=v}(yield bt(p,m,I,Kt(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:P}=this.eventManagers[m];return M?Promise.resolve(M):($e(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const I=yield function Ug(v){return Of.apply(this,arguments)}(p),M=new $a(p);return I.register("authEvent",P=>(J(P?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=I,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(hs,{type:hs},M=>{var P;const Z=null===(P=M?.[0])||void 0===P?void 0:P[hs];void 0!==Z&&m(!!Z),ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function pl(v){return xf.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return kt()||F()||mt()}};class mi{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return Xe("unexpected MultiFactorSessionType")}}}class ps extends mi{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ps(p)}_finalizeEnroll(p,m,I){return function vd(v,p){return rt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function bd(v,p){return rt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ye(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ml=(()=>{class v{constructor(){}static assertion(m){return ps._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var io="@firebase/auth";class kd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vf=(0,B.Pz)("authIdTokenMaxAge")||300;let jg=null;const tv=v=>function(){var p=(0,h.Z)(function*(m){const I=m&&(yield m.getIdTokenResult()),M=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(M&&M>Vf)return;const P=I?.token;jg!==P&&(jg=P,yield fetch(v,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function $g(v=(0,O.getApp)()){const p=(0,O._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const m=function Ho(v,p){const m=(0,O._getProvider)(v,"auth");if(m.isInitialized()){const M=m.getImmediate(),P=m.getOptions();if((0,B.vZ)(P,p??{}))return M;ee(M,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:fs,persistence:[Dd,nl,hr]}),I=(0,B.Pz)("authTokenSyncURL");if(I){const P=tv(I);(function gd(v,p,m){(0,B.m9)(v).beforeAuthStateChanged(p,m)})(m,P,()=>P(m.currentUser)),function wf(v,p,m,I){(0,B.m9)(v).onIdTokenChanged(p,m,I)}(m,Z=>P(Z))}const M=(0,B.q4)("auth");return M&&nd(m,`http://${M}`),m}!function Bg(v){(0,O._registerComponent)(new fe.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),P=p.getProvider("app-check-internal"),{apiKey:Z,authDomain:ce}=I.options;J(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Be={apiKey:Z,authDomain:ce,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:br(v)},Qe=new Rc(I,M,P,Be);return function Mg(v,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(rr);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,p?.popupRedirectResolver)}(Qe,m),Qe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new fe.wA("auth-internal",p=>{const m=Yn(p.getProvider("auth").getImmediate());return new kd(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(io,"0.23.2",function Ff(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(io,"0.23.2","esm2017")}("Browser")},9058:(pt,Ce,L)=>{L.d(Ce,{$s:()=>rr,BH:()=>se,G6:()=>be,L:()=>pe,LL:()=>Tn,P0:()=>ut,Pz:()=>Ee,Sg:()=>he,UG:()=>Xe,US:()=>fe,ZB:()=>te,ZR:()=>rt,aH:()=>ee,b$:()=>cr,eu:()=>He,hl:()=>Pe,jU:()=>$e,m9:()=>qt,ne:()=>Wt,pd:()=>dt,q4:()=>yt,r3:()=>jn,ru:()=>Kt,tV:()=>$,uI:()=>J,vZ:()=>Dr,w1:()=>Is,xO:()=>rs,xb:()=>ho,z$:()=>Ne,zI:()=>Ue,zd:()=>Ze});const Y=function(H){const j=[];let k=0;for(let F=0;F<H.length;F++){let R=H.charCodeAt(F);R<128?j[k++]=R:R<2048?(j[k++]=R>>6|192,j[k++]=63&R|128):55296==(64512&R)&&F+1<H.length&&56320==(64512&H.charCodeAt(F+1))?(R=65536+((1023&R)<<10)+(1023&H.charCodeAt(++F)),j[k++]=R>>18|240,j[k++]=R>>12&63|128,j[k++]=R>>6&63|128,j[k++]=63&R|128):(j[k++]=R>>12|224,j[k++]=R>>6&63|128,j[k++]=63&R|128)}return j},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,j){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let R=0;R<H.length;R+=3){const Q=H[R],me=R+1<H.length,Ge=me?H[R+1]:0,vt=R+2<H.length,mt=vt?H[R+2]:0;let pn=(15&Ge)<<2|mt>>6,kt=63&mt;vt||(kt=64,me||(pn=64)),F.push(k[Q>>2],k[(3&Q)<<4|Ge>>4],k[pn],k[kt])}return F.join("")},encodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(H):this.encodeByteArray(Y(H),j)},decodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(H):function(H){const j=[];let k=0,F=0;for(;k<H.length;){const R=H[k++];if(R<128)j[F++]=String.fromCharCode(R);else if(R>191&&R<224){const Q=H[k++];j[F++]=String.fromCharCode((31&R)<<6|63&Q)}else if(R>239&&R<365){const vt=((7&R)<<18|(63&H[k++])<<12|(63&H[k++])<<6|63&H[k++])-65536;j[F++]=String.fromCharCode(55296+(vt>>10)),j[F++]=String.fromCharCode(56320+(1023&vt))}else{const Q=H[k++],me=H[k++];j[F++]=String.fromCharCode((15&R)<<12|(63&Q)<<6|63&me)}}return j.join("")}(this.decodeStringToByteArray(H,j))},decodeStringToByteArray(H,j){this.init_();const k=j?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let R=0;R<H.length;){const Q=k[H.charAt(R++)],Ge=R<H.length?k[H.charAt(R)]:0;++R;const mt=R<H.length?k[H.charAt(R)]:64;++R;const At=R<H.length?k[H.charAt(R)]:64;if(++R,null==Q||null==Ge||null==mt||null==At)throw new ge;F.push(Q<<2|Ge>>4),64!==mt&&(F.push(Ge<<4&240|mt>>2),64!==At&&F.push(mt<<6&192|At))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(H){return function(H){const j=Y(H);return fe.encodeByteArray(j,!0)}(H).replace(/\./g,"")},$=function(H){try{return fe.decodeString(H,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function te(H,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return j}for(const k in j)!j.hasOwnProperty(k)||!ke(k)||(H[k]=te(H[k],j[k]));return H}function ke(H){return"__proto__"!==H}const Oe=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=H&&$(H[1]);return j&&JSON.parse(j)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},yt=H=>{var j,k;return null===(k=null===(j=Oe())||void 0===j?void 0:j.emulatorHosts)||void 0===k?void 0:k[H]},ut=H=>{const j=yt(H);if(!j)return;const k=j.lastIndexOf(":");if(k<=0||k+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const F=parseInt(j.substring(k+1),10);return"["===j[0]?[j.substring(1,k-1),F]:[j.substring(0,k),F]},ee=()=>{var H;return null===(H=Oe())||void 0===H?void 0:H.config},Ee=H=>{var j;return null===(j=Oe())||void 0===j?void 0:j[`_${H}`]};class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,k)=>{this.resolve=j,this.reject=k})}wrapCallback(j){return(k,F)=>{k?this.reject(k):this.resolve(F),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(k):j(k,F))}}}function he(H,j){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=j||"demo-project",R=H.iat||0,Q=H.sub||H.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:R,exp:R+3600,auth_time:R,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},H);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(me)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function Xe(){var H;const j=null===(H=Oe())||void 0===H?void 0:H.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $e(){return"object"==typeof self&&self.self===self}function Kt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function cr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Is(){const H=Ne();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function be(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((H,j)=>{try{let k=!0;const F="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(F);R.onsuccess=()=>{R.result.close(),k||self.indexedDB.deleteDatabase(F),H(!0)},R.onupgradeneeded=()=>{k=!1},R.onerror=()=>{var Q;j((null===(Q=R.error)||void 0===Q?void 0:Q.message)||"")}}catch(k){j(k)}})}function Ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rt extends Error{constructor(j,k,F){super(k),this.code=j,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}}class Tn{constructor(j,k,F){this.service=j,this.serviceName=k,this.errors=F}create(j,...k){const F=k[0]||{},R=`${this.service}/${j}`,Q=this.errors[j],me=Q?function et(H,j){return H.replace(gt,(k,F)=>{const R=j[F];return null!=R?String(R):`<${F}?>`})}(Q,F):"Error";return new rt(R,`${this.serviceName}: ${me} (${R}).`,F)}}const gt=/\{\$([^}]+)}/g;function jn(H,j){return Object.prototype.hasOwnProperty.call(H,j)}function ho(H){for(const j in H)if(Object.prototype.hasOwnProperty.call(H,j))return!1;return!0}function Dr(H,j){if(H===j)return!0;const k=Object.keys(H),F=Object.keys(j);for(const R of k){if(!F.includes(R))return!1;const Q=H[R],me=j[R];if($n(Q)&&$n(me)){if(!Dr(Q,me))return!1}else if(Q!==me)return!1}for(const R of F)if(!k.includes(R))return!1;return!0}function $n(H){return null!==H&&"object"==typeof H}function rs(H){const j=[];for(const[k,F]of Object.entries(H))Array.isArray(F)?F.forEach(R=>{j.push(encodeURIComponent(k)+"="+encodeURIComponent(R))}):j.push(encodeURIComponent(k)+"="+encodeURIComponent(F));return j.length?"&"+j.join("&"):""}function Ze(H){const j={};return H.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[R,Q]=F.split("=");j[decodeURIComponent(R)]=decodeURIComponent(Q)}}),j}function dt(H){const j=H.indexOf("?");if(!j)return"";const k=H.indexOf("#",j);return H.substring(j,k>0?k:void 0)}function Wt(H,j){const k=new nr(H,j);return k.subscribe.bind(k)}class nr{constructor(j,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{j(this)}).catch(F=>{this.error(F)})}next(j){this.forEachObserver(k=>{k.next(j)})}error(j){this.forEachObserver(k=>{k.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,k,F){let R;if(void 0===j&&void 0===k&&void 0===F)throw new Error("Missing Observer.");R=function zt(H,j){if("object"!=typeof H||null===H)return!1;for(const k of j)if(k in H&&"function"==typeof H[k])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:k,complete:F},void 0===R.next&&(R.next=Zn),void 0===R.error&&(R.error=Zn),void 0===R.complete&&(R.complete=Zn);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),Q}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,j)}sendOne(j,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{k(this.observers[j])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zn(){}const Hn=1e3,vn=2,Kn=144e5,Sn=.5;function rr(H,j=Hn,k=vn){const F=j*Math.pow(k,H),R=Math.round(Sn*F*(Math.random()-.5)*2);return Math.min(Kn,F+R)}function qt(H){return H&&H._delegate?H._delegate:H}},5665:(pt,Ce,L)=>{var h=L(5879);let B=null;function O(){return B}class ie{}const fe=new h.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(pe)},providedIn:"platform"}),n})();const Se=new h.OlP("Location Initialized");let pe=(()=>{class n extends ge{constructor(){super(),this._doc=(0,h.f3M)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function $(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function te(n){return n&&"?"!==n[0]?"?"+n:n}let ke=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(We)},providedIn:"root"}),n})();const Ae=new h.OlP("appBaseHref");let We=(()=>{class n extends ke{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+te(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+te(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+te(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(Ae,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends ke{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+te(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+te(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(Ae,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(ut(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+te(r))}normalize(t){return n.stripTrailingSlash(function yt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ut(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=te,n.joinWithSlash=$,n.stripTrailingSlash=z,n.\u0275fac=function(t){return new(t||n)(h.LFG(ke))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Oe(){return new qe((0,h.LFG)(ke))}()},providedIn:"root"}),n})();function ut(n){return n.replace(/\/index.html$/,"")}var Ne=(()=>((Ne=Ne||{})[Ne.Format=0]="Format",Ne[Ne.Standalone=1]="Standalone",Ne))(),J=(()=>((J=J||{})[J.Narrow=0]="Narrow",J[J.Abbreviated=1]="Abbreviated",J[J.Wide=2]="Wide",J[J.Short=3]="Short",J))(),Xe=(()=>((Xe=Xe||{})[Xe.Short=0]="Short",Xe[Xe.Medium=1]="Medium",Xe[Xe.Long=2]="Long",Xe[Xe.Full=3]="Full",Xe))(),$e=(()=>(($e=$e||{})[$e.Decimal=0]="Decimal",$e[$e.Group=1]="Group",$e[$e.List=2]="List",$e[$e.PercentSign=3]="PercentSign",$e[$e.PlusSign=4]="PlusSign",$e[$e.MinusSign=5]="MinusSign",$e[$e.Exponential=6]="Exponential",$e[$e.SuperscriptingExponent=7]="SuperscriptingExponent",$e[$e.PerMille=8]="PerMille",$e[$e.Infinity=9]="Infinity",$e[$e.NaN=10]="NaN",$e[$e.TimeSeparator=11]="TimeSeparator",$e[$e.CurrencyDecimal=12]="CurrencyDecimal",$e[$e.CurrencyGroup=13]="CurrencyGroup",$e))();function He(n,e){return jn((0,h.cg1)(n)[h.wAp.DateFormat],e)}function Ue(n,e){return jn((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function Ye(n,e){return jn((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function rt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===$e.CurrencyDecimal)return t[h.wAp.NumberSymbols][$e.Decimal];if(e===$e.CurrencyGroup)return t[h.wAp.NumberSymbols][$e.Group]}return r}function Yt(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function jn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Di(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const $n=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Wr={},rs=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ze=(()=>((Ze=Ze||{})[Ze.Short=0]="Short",Ze[Ze.ShortGMT=1]="ShortGMT",Ze[Ze.Long=2]="Long",Ze[Ze.Extended=3]="Extended",Ze))(),dt=(()=>((dt=dt||{})[dt.FullYear=0]="FullYear",dt[dt.Month=1]="Month",dt[dt.Date=2]="Date",dt[dt.Hours=3]="Hours",dt[dt.Minutes=4]="Minutes",dt[dt.Seconds=5]="Seconds",dt[dt.FractionalSeconds=6]="FractionalSeconds",dt[dt.Day=7]="Day",dt))(),Et=(()=>((Et=Et||{})[Et.DayPeriods=0]="DayPeriods",Et[Et.Days=1]="Days",Et[Et.Months=2]="Months",Et[Et.Eras=3]="Eras",Et))();function Wt(n,e,t,r){let o=function j(n){if(F(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,l=1]=n.split("-").map(g=>+g);return nr(o,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match($n))return function k(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,g=Number(n[5]||0)-r,_=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,g,_,b),e}(r)}const e=new Date(n);if(!F(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=ii(t,e)||e;let g,l=[];for(;e;){if(g=rs.exec(e),!g){l.push(e);break}{l=l.concat(g.slice(1));const S=l.pop();if(!S)break;e=S}}let _=o.getTimezoneOffset();r&&(_=qr(r,_),o=function H(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function qt(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(qr(e,o)-o))}(o,r,!0));let b="";return l.forEach(S=>{const N=function An(n){if(rr[n])return rr[n];let e;switch(n){case"G":case"GG":case"GGG":e=Pt(Et.Eras,J.Abbreviated);break;case"GGGG":e=Pt(Et.Eras,J.Wide);break;case"GGGGG":e=Pt(Et.Eras,J.Narrow);break;case"y":e=ln(dt.FullYear,1,0,!1,!0);break;case"yy":e=ln(dt.FullYear,2,0,!0,!0);break;case"yyy":e=ln(dt.FullYear,3,0,!1,!0);break;case"yyyy":e=ln(dt.FullYear,4,0,!1,!0);break;case"Y":e=Sn(1);break;case"YY":e=Sn(2,!0);break;case"YYY":e=Sn(3);break;case"YYYY":e=Sn(4);break;case"M":case"L":e=ln(dt.Month,1,1);break;case"MM":case"LL":e=ln(dt.Month,2,1);break;case"MMM":e=Pt(Et.Months,J.Abbreviated);break;case"MMMM":e=Pt(Et.Months,J.Wide);break;case"MMMMM":e=Pt(Et.Months,J.Narrow);break;case"LLL":e=Pt(Et.Months,J.Abbreviated,Ne.Standalone);break;case"LLLL":e=Pt(Et.Months,J.Wide,Ne.Standalone);break;case"LLLLL":e=Pt(Et.Months,J.Narrow,Ne.Standalone);break;case"w":e=Kn(1);break;case"ww":e=Kn(2);break;case"W":e=Kn(1,!0);break;case"d":e=ln(dt.Date,1);break;case"dd":e=ln(dt.Date,2);break;case"c":case"cc":e=ln(dt.Day,1);break;case"ccc":e=Pt(Et.Days,J.Abbreviated,Ne.Standalone);break;case"cccc":e=Pt(Et.Days,J.Wide,Ne.Standalone);break;case"ccccc":e=Pt(Et.Days,J.Narrow,Ne.Standalone);break;case"cccccc":e=Pt(Et.Days,J.Short,Ne.Standalone);break;case"E":case"EE":case"EEE":e=Pt(Et.Days,J.Abbreviated);break;case"EEEE":e=Pt(Et.Days,J.Wide);break;case"EEEEE":e=Pt(Et.Days,J.Narrow);break;case"EEEEEE":e=Pt(Et.Days,J.Short);break;case"a":case"aa":case"aaa":e=Pt(Et.DayPeriods,J.Abbreviated);break;case"aaaa":e=Pt(Et.DayPeriods,J.Wide);break;case"aaaaa":e=Pt(Et.DayPeriods,J.Narrow);break;case"b":case"bb":case"bbb":e=Pt(Et.DayPeriods,J.Abbreviated,Ne.Standalone,!0);break;case"bbbb":e=Pt(Et.DayPeriods,J.Wide,Ne.Standalone,!0);break;case"bbbbb":e=Pt(Et.DayPeriods,J.Narrow,Ne.Standalone,!0);break;case"B":case"BB":case"BBB":e=Pt(Et.DayPeriods,J.Abbreviated,Ne.Format,!0);break;case"BBBB":e=Pt(Et.DayPeriods,J.Wide,Ne.Format,!0);break;case"BBBBB":e=Pt(Et.DayPeriods,J.Narrow,Ne.Format,!0);break;case"h":e=ln(dt.Hours,1,-12);break;case"hh":e=ln(dt.Hours,2,-12);break;case"H":e=ln(dt.Hours,1);break;case"HH":e=ln(dt.Hours,2);break;case"m":e=ln(dt.Minutes,1);break;case"mm":e=ln(dt.Minutes,2);break;case"s":e=ln(dt.Seconds,1);break;case"ss":e=ln(dt.Seconds,2);break;case"S":e=ln(dt.FractionalSeconds,1);break;case"SS":e=ln(dt.FractionalSeconds,2);break;case"SSS":e=ln(dt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ji(Ze.Short);break;case"ZZZZZ":e=ji(Ze.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ji(Ze.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ji(Ze.Long);break;default:return null}return rr[n]=e,e}(S);b+=N?N(o,t,_):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function nr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ii(n,e){const t=function cr(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Wr[t]=Wr[t]||{},Wr[t][e])return Wr[t][e];let r="";switch(e){case"shortDate":r=He(n,Xe.Short);break;case"mediumDate":r=He(n,Xe.Medium);break;case"longDate":r=He(n,Xe.Long);break;case"fullDate":r=He(n,Xe.Full);break;case"shortTime":r=Ue(n,Xe.Short);break;case"mediumTime":r=Ue(n,Xe.Medium);break;case"longTime":r=Ue(n,Xe.Long);break;case"fullTime":r=Ue(n,Xe.Full);break;case"short":const o=ii(n,"shortTime"),u=ii(n,"shortDate");r=zt(Ye(n,Xe.Short),[o,u]);break;case"medium":const l=ii(n,"mediumTime"),g=ii(n,"mediumDate");r=zt(Ye(n,Xe.Medium),[l,g]);break;case"long":const _=ii(n,"longTime"),b=ii(n,"longDate");r=zt(Ye(n,Xe.Long),[_,b]);break;case"full":const S=ii(n,"fullTime"),N=ii(n,"fullDate");r=zt(Ye(n,Xe.Full),[S,N])}return r&&(Wr[t][e]=r),r}function zt(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Zn(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function ln(n,e,t=0,r=!1,o=!1){return function(u,l){let g=function Lr(n,e){switch(n){case dt.FullYear:return e.getFullYear();case dt.Month:return e.getMonth();case dt.Date:return e.getDate();case dt.Hours:return e.getHours();case dt.Minutes:return e.getMinutes();case dt.Seconds:return e.getSeconds();case dt.FractionalSeconds:return e.getMilliseconds();case dt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||g>-t)&&(g+=t),n===dt.Hours)0===g&&-12===t&&(g=12);else if(n===dt.FractionalSeconds)return function is(n,e){return Zn(n,3).substring(0,e)}(g,e);const _=rt(l,$e.MinusSign);return Zn(g,e,_,r,o)}}function Pt(n,e,t=Ne.Format,r=!1){return function(o,u){return function Ln(n,e,t,r,o,u){switch(t){case Et.Months:return function ae(n,e,t){const r=(0,h.cg1)(n),u=jn([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return jn(u,t)}(e,o,r)[n.getMonth()];case Et.Days:return function Is(n,e,t){const r=(0,h.cg1)(n),u=jn([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return jn(u,t)}(e,o,r)[n.getDay()];case Et.DayPeriods:const l=n.getHours(),g=n.getMinutes();if(u){const b=function lr(n){const e=(0,h.cg1)(n);return Yt(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Di(r):[Di(r[0]),Di(r[1])])}(e),S=function dr(n,e,t){const r=(0,h.cg1)(n);Yt(r);const u=jn([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return jn(u,t)||[]}(e,o,r),N=b.findIndex(G=>{if(Array.isArray(G)){const[ne,ve]=G,De=l>=ne.hours&&g>=ne.minutes,Me=l<ve.hours||l===ve.hours&&g<ve.minutes;if(ne.hours<ve.hours){if(De&&Me)return!0}else if(De||Me)return!0}else if(G.hours===l&&G.minutes===g)return!0;return!1});if(-1!==N)return S[N]}return function Gr(n,e,t){const r=(0,h.cg1)(n),u=jn([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return jn(u,t)}(e,o,r)[l<12?0:1];case Et.Eras:return function ye(n,e){return jn((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function ji(n){return function(e,t,r){const o=-1*r,u=rt(t,$e.MinusSign),l=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case Ze.Short:return(o>=0?"+":"")+Zn(l,2,u)+Zn(Math.abs(o%60),2,u);case Ze.ShortGMT:return"GMT"+(o>=0?"+":"")+Zn(l,1,u);case Ze.Long:return"GMT"+(o>=0?"+":"")+Zn(l,2,u)+":"+Zn(Math.abs(o%60),2,u);case Ze.Extended:return 0===r?"Z":(o>=0?"+":"")+Zn(l,2,u)+":"+Zn(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}const Ds=0,Cr=4;function vn(n){return nr(n.getFullYear(),n.getMonth(),n.getDate()+(Cr-n.getDay()))}function Kn(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();o=1+Math.floor((l+u)/7)}else{const u=vn(t),l=function Hn(n){const e=nr(n,Ds,1).getDay();return nr(n,0,1+(e<=Cr?Cr:Cr+7)-e)}(u.getFullYear()),g=u.getTime()-l.getTime();o=1+Math.round(g/6048e5)}return Zn(o,n,rt(r,$e.MinusSign))}}function Sn(n,e=!1){return function(t,r){return Zn(vn(t).getFullYear(),n,rt(r,$e.MinusSign),e)}}const rr={};function qr(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function F(n){return n instanceof Date&&!isNaN(n.valueOf())}function fo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}let Ho=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Mg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Mg{constructor(){this.$implicit=null,this.ngIf=null}}function nd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function Ft(n,e){return new h.vHH(2100,!1)}let Oc=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Ft();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=h.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})();const tt=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Nt=new h.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Mn=(()=>{class n{constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,u){if(null==t||""===t||t!=t)return null;try{return Wt(t,r??this.defaultOptions?.dateFormat??"mediumDate",u||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw Ft()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(tt,24),h.Y36(Nt,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),ss=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Hi(n){return"server"===n}let yo=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new fi((0,h.LFG)(fe),window)}),n})();class fi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vo(this.window.history)||vo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ar{}class Qo extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Br extends Qo{static makeCurrent(){!function Y(n){B||(B=n)}(new Br)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pd(){return Jo=Jo||document.querySelector("base"),Jo?Jo.getAttribute("href"):null}();return null==t?null:function bi(n){Ks=Ks||document.createElement("a"),Ks.setAttribute("href",n);const e=Ks.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fo(document.cookie,e)}}let Ks,Jo=null,gd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const md=new h.OlP("EventManagerPlugins");let us=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(md),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class yd{constructor(e){this._doc=e}}const Xc="ng-app-id";let Mu=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hi(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Xc}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(Xc),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Xc,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ti=/%COMP%/g,Og=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ma(n,e){return e.map(t=>t.replace(Ti,n))}let Wi=(()=>{class n{constructor(t,r,o,u,l,g,_,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=Hi(g),this.defaultRenderer=new Ru(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof Qt?o.applyToHost(t):o instanceof Te&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,b=this.sharedStylesHost,S=this.removeStylesOnCompDestory,N=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new Qt(_,b,r,this.appId,S,l,g,N);break;case h.ifc.ShadowDom:return new Cf(_,b,t,r,l,g,this.nonce,N);default:u=new Te(_,b,r,S,l,g,N)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(us),h.LFG(Mu),h.LFG(h.AFp),h.LFG(Og),h.LFG(fe),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ru{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Xo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_d(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_d(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Xo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Xo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=O().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function _d(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Cf extends Ru{constructor(e,t,r,o,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=Ma(o.id,o.styles);for(const S of b){const N=document.createElement("style");g&&N.setAttribute("nonce",g),N.textContent=S,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Te extends Ru{constructor(e,t,r,o,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=_?Ma(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Qt extends Te{constructor(e,t,r,o,u,l,g,_){const b=o+"-"+r.id;super(e,t,r,u,l,g,_,b),this.contentAttr=function tl(n){return"_ngcontent-%COMP%".replace(Ti,n)}(b),this.hostAttr=function If(n){return"_nghost-%COMP%".replace(Ti,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let nl=(()=>{class n extends yd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=["alt","control","meta","shift"],hr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ou=(()=>{class n extends yd{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Nu.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let o=hr[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Nu.forEach(l=>{l!==o&&(0,bf[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Ed(){Br.makeCurrent()},multi:!0},{provide:fe,useFactory:function Mr(){return(0,h.RDi)(document),document},deps:[]}]),Rn=new h.OlP(""),ls=[{provide:h.rWj,useClass:class wf{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};o.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],fr=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function wd(){return new h.qLn},deps:[]},{provide:md,useClass:nl,multi:!0,deps:[fe,h.R0b,h.Lbi]},{provide:md,useClass:Ou,multi:!0,deps:[fe]},Wi,Mu,us,{provide:h.FYo,useExisting:Wi},{provide:Ar,useClass:gd,deps:[]},[]];let il=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rn,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...fr,...ls],imports:[ss,h.hGG]}),n})(),Fu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Na(){return new Fu((0,h.LFG)(fe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var En=L(2459),gi=L(5592);const{isArray:ul}=Array,{getPrototypeOf:Xs,prototype:Do,keys:cl}=Object;function ka(n){if(1===n.length){const e=n[0];if(ul(e))return{args:e,keys:null};if(function Co(n){return n&&"object"==typeof n&&Xs(n)===Do}(e)){const t=cl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Fa=L(4829),La=L(4564),jr=L(8251),Lt=L(7398);const{isArray:eo}=Array;function ui(n){return(0,Lt.U)(e=>function ju(n,e){return eo(e)?n(...e):n(e)}(n,e))}function ll(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Ts=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Si=(()=>{class n extends Ts{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ds=new h.OlP("NgValueAccessor"),Fg={provide:ds,useExisting:(0,h.Gpc)(()=>to),multi:!0},Af=new h.OlP("CompositionEventMode");let to=(()=>{class n extends Ts{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ai(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Af,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([Fg]),h.qOj]}),n})();function Mi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Nn=new h.OlP("NgValidators"),Ss=new h.OlP("NgAsyncValidators"),Lg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Rd(n){return Mi(n.value)?{required:!0}:null}function ta(n){return Mi(n.value)||Lg.test(n.value)?null:{email:!0}}function To(n){return null}function So(n){return null!=n}function Od(n){return(0,h.QGY)(n)?(0,En.D)(n):n}function Ba(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Gu(n,e){return e.map(t=>t(n))}function Wu(n){return n.map(e=>function Mf(n){return!n.validate}(e)?e:t=>e.validate(t))}function Zi(n){return null!=n?function qu(n){if(!n)return null;const e=n.filter(So);return 0==e.length?null:function(t){return Ba(Gu(t,e))}}(Wu(n)):null}function Ki(n){return null!=n?function As(n){if(!n)return null;const e=n.filter(So);return 0==e.length?null:function(t){return function Va(...n){const e=(0,La.jO)(n),{args:t,keys:r}=ka(n),o=new gi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,b=l;for(let S=0;S<l;S++){let N=!1;(0,Fa.Xf)(t[S]).subscribe((0,jr.x)(u,G=>{N||(N=!0,b--),g[S]=G},()=>_--,void 0,()=>{(!_||!N)&&(b||u.next(r?ll(r,g):g),u.complete())}))}});return e?o.pipe(ui(e)):o}(Gu(t,e).map(Od)).pipe((0,Lt.U)(Ba))}}(Wu(n)):null}function ja(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $a(n){return n?Array.isArray(n)?n:[n]:[]}function Ao(n,e){return Array.isArray(n)?n.includes(e):n===e}function Zu(n,e){const t=$a(e);return $a(n).forEach(o=>{Ao(t,o)||t.push(o)}),t}function fl(n,e){return $a(e).filter(t=>!Ao(n,t))}class Ku{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zi(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ki(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ir extends Ku{get formDirective(){return null}get path(){return null}}class ra extends Ku{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vg{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Rf=(()=>{class n extends Vg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ra,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Cn=(()=>{class n extends Vg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ir,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const K="VALID",le="INVALID",ze="PENDING",je="DISABLED";function at(n){return(sr(n)?n.validators:n)||null}function bt(n,e){return(sr(e)?e.asyncValidators:n)||null}function sr(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class fs{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===K}get invalid(){return this.status===le}get pending(){return this.status==ze}get disabled(){return this.status===je}get enabled(){return this.status!==je}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Zu(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Zu(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fl(e,this._rawAsyncValidators))}hasValidator(e){return Ao(this._rawValidators,e)}hasAsyncValidator(e){return Ao(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ze,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=je,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=K,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===K||this.status===ze)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?je:K}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ze,this._hasOwnPendingAsyncValidator=!0;const t=Od(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?je:this.errors?le:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ze)?ze:this._anyControlsHaveStatus(le)?le:K}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sr(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ot(n){return Array.isArray(n)?Zi(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function xr(n){return Array.isArray(n)?Ki(n):n||null}(this._rawAsyncValidators)}}class mi extends fs{constructor(e,t,r){super(at(t),bt(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Qu(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function hs(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ga=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Wa}),Wa="always";function so(n,e,t=Wa){Lf(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function jg(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$g(n,e)})}(n,e),function v(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tv(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$g(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Bg(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ff(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Lf(n,e){const t=function na(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ja(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Ms(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ja(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ff(e._rawValidators,o),Ff(e._rawAsyncValidators,o)}function $g(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Uf={provide:Ir,useExisting:(0,h.Gpc)(()=>vl)},yl=(()=>Promise.resolve())();let vl=(()=>{class n extends Ir{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new mi({},Zi(t),Ki(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),so(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yl.then(()=>{const r=this._findContainer(t.path),o=new mi({});(function p(n,e){Lf(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){yl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function _t(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Nn,10),h.Y36(Ss,10),h.Y36(Ga,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Uf]),h.qOj]}),n})();function Hg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bf(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const qa=class extends fs{constructor(e=null,t,r){super(at(t),bt(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sr(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Bf(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Bf(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},ia={provide:ra,useExisting:(0,h.Gpc)(()=>rv)},RE=(()=>Promise.resolve())();let rv=(()=>{class n extends ra{constructor(t,r,o,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new qa,this._registered=!1,this.name="",this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Jt(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===to?t=u:function Qe(n){return Object.getPrototypeOf(n.constructor)===Si}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Be(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){so(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){RE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.VuI)(r);RE.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function io(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ir,9),h.Y36(Nn,10),h.Y36(Ss,10),h.Y36(ds,10),h.Y36(h.sBO,8),h.Y36(Ga,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([ia]),h.qOj,h.TTD]}),n})(),NE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),PE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),sa=(()=>{class n{constructor(){this._validator=To}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):To,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Tb={provide:Nn,useExisting:(0,h.Gpc)(()=>em),multi:!0};let em=(()=>{class n extends sa{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.VuI,this.createValidator=t=>Rd}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Tb]),h.qOj]}),n})();const Ab={provide:Nn,useExisting:(0,h.Gpc)(()=>tm),multi:!0};let tm=(()=>{class n extends sa{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=h.VuI,this.createValidator=t=>ta}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[h._Bn([Ab]),h.qOj]}),n})(),KE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[PE]}),n})(),QE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ga,useValue:t.callSetDisabledState??Wa}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[KE]}),n})();var Ri=L(6304),Vd=L(4674),Ct=L(2096),xs=L(5619),Ud=L(2737),Wf=L(7103);function hv(...n){const e=(0,La.yG)(n),t=(0,La.jO)(n),{args:r,keys:o}=ka(n);if(0===r.length)return(0,En.D)([],e);const u=new gi.y(function JE(n,e,t=Ud.y){return r=>{XE(e,()=>{const{length:o}=n,u=new Array(o);let l=o,g=o;for(let _=0;_<o;_++)XE(e,()=>{const b=(0,En.D)(n[_],e);let S=!1;b.subscribe((0,jr.x)(r,N=>{u[_]=N,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>ll(o,l):Ud.y));return t?u.pipe(ui(t)):u}function XE(n,e,t){n?(0,Wf.f)(t,n,e):e()}const rm=(0,L(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Bd=L(7537);function jd(...n){return function ew(){return(0,Bd.J)(1)}()((0,En.D)(n,(0,La.yG)(n)))}function im(n){return new gi.y(e=>{(0,Fa.Xf)(n()).subscribe(e)})}var $d=L(8407);function Hd(n,e){const t=(0,Vd.m)(n)?n:()=>n,r=o=>o.error(t());return new gi.y(e?o=>e.schedule(r,0,o):r)}var Xu=L(6232),Lb=L(7394),oo=L(9360);function qf(){return(0,oo.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tw extends gi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,oo.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Lb.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Lb.w0.EMPTY)}return e}refCount(){return qf()(this)}}var xo=L(8645),Rr=L(4664);function Za(n){return n<=0?()=>Xu.E:(0,oo.e)((e,t)=>{let r=0;e.subscribe((0,jr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Zf(...n){const e=(0,La.yG)(n);return(0,oo.e)((t,r)=>{(e?jd(n,t,e):jd(n,t)).subscribe(r)})}function Rs(n,e){return(0,oo.e)((t,r)=>{let o=0;t.subscribe((0,jr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Ni=L(1631);function Kf(n){return(0,oo.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function nw(n=Vb){return(0,oo.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Vb(){return new rm}function ec(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rs((o,u)=>n(o,u,r)):Ud.y,Za(1),t?Kf(e):nw(()=>new rm))}function zd(n,e){return(0,Vd.m)(e)?(0,Ni.z)(n,e,1):(0,Ni.z)(n,1)}var yi=L(9397);function Oi(n){return(0,oo.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,jr.x)(t,void 0,void 0,l=>{u=(0,Fa.Xf)(n(l,Oi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function sm(n,e){return(0,oo.e)(function Yf(n,e,t,r,o){return(u,l)=>{let g=t,_=e,b=0;u.subscribe((0,jr.x)(l,S=>{const N=b++;_=g?n(_,S,N):(g=!0,S),r&&l.next(_)},o&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function rw(n){return n<=0?()=>Xu.E:(0,oo.e)((e,t)=>{let r=[];e.subscribe((0,jr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function om(n){return(0,oo.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",Gd=Symbol("RouteTitle");class Ub{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wd(n){return new Ub(n)}function Bb(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))o[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ao(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!oa(n[o],e[o]))return!1;return!0}function oa(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function qd(n){return n.length>0?n[n.length-1]:null}function Ka(n){return function dv(n){return!!n&&(n instanceof gi.y||(0,Vd.m)(n.lift)&&(0,Vd.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,En.D)(Promise.resolve(n)):(0,Ct.of)(n)}const iw={exact:function Hb(n,e,t){if(!Cl(n.segments,e.segments)||!gv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Hb(n.children[r],e.children[r],t))return!1;return!0},subset:am},fv={exact:function Hx(n,e){return ao(n,e)},subset:function pv(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>oa(n[t],e[t]))},ignored:()=>!0};function $b(n,e,t){return iw[t.paths](n.root,e.root,t.matrixParams)&&fv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function am(n,e,t){return zb(n,e,e.segments,t)}function zb(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Cl(o,t)||e.hasChildren()||!gv(o,t,r))}if(n.segments.length===t.length){if(!Cl(n.segments,t)||!gv(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!am(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Cl(n.segments,o)&&gv(n.segments,o,r)&&n.children[Zt])&&zb(n.children[Zt],e,u,r)}}function gv(n,e,t){return e.every((r,o)=>fv[t](n[o].parameters,r.parameters))}class Dl{constructor(e=new bn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wd(this.queryParams)),this._queryParamMap}toString(){return yv.serialize(this)}}class bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return um(this)}}class Qf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wd(this.parameters)),this._parameterMap}toString(){return uw(this)}}function Cl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new mv},providedIn:"root"}),n})();class mv{parse(e){const t=new _v(e);return new Dl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${or(e.root,!0)}`,r=function cw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${cm(t)}=${cm(o)}`).join("&"):`${cm(t)}=${cm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function vv(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yv=new mv;function um(n){return n.segments.map(e=>uw(e)).join("/")}function or(n,e){if(!n.hasChildren())return um(n);if(e){const t=n.children[Zt]?or(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==Zt&&r.push(`${o}:${or(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sw(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Zt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Zt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===Zt?[or(n.children[Zt],!1)]:[`${o}:${or(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${um(n)}/${t[0]}`:`${um(n)}/(${t.join("//")})`}}function ow(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cm(n){return ow(n).replace(/%3B/gi,";")}function lm(n){return ow(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dm(n){return decodeURIComponent(n)}function aw(n){return dm(n.replace(/\+/g,"%20"))}function uw(n){return`${lm(n.path)}${function Wb(n){return Object.keys(n).map(e=>`;${lm(e)}=${lm(n[e])}`).join("")}(n.parameters)}`}const zx=/^[^\/()?;#]+/;function lw(n){const e=n.match(zx);return e?e[0]:""}const Jf=/^[^\/()?;=#]+/,Xf=/^[^=?&#]+/,hw=/^[^&#]+/;class _v{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new bn(e,t)),r}parseSegment(){const e=lw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Qf(dm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function yn(n){const e=n.match(Jf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=lw(this.remaining);o&&(r=o,this.capture(r))}e[dm(t)]=dm(r)}parseQueryParam(e){const t=function dw(n){const e=n.match(Xf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function fw(n){const e=n.match(hw);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=aw(t),u=aw(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lw(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Zt]:new bn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function pw(n){return n.segments.length>0?new bn([],{[Zt]:n}):n}function Ev(n){const e={};for(const r of Object.keys(n.children)){const u=Ev(n.children[r]);if(r===Zt&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function gw(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new bn(n.segments.concat(e.segments),e.children)}return n}(new bn(n.segments,e))}function Ya(n){return n instanceof Dl}function hm(n){let e;const o=pw(function t(u){const l={};for(const _ of u.children){const b=t(_);l[_.outlet]=b}const g=new bn(u.url,l);return u===n&&(e=g),g}(n.root));return e??o}function mw(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return fm(o,o,o,t,r);const u=function wv(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yw(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,b])=>{g[_]="string"==typeof b?b.split("/"):b}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new yw(t,e,r)}(e);if(u.toRoot())return fm(o,o,new bn([],{}),t,r);const l=function qb(n,e,t){if(n.isAbsolute)return new bl(e,!0,0);if(!t)return new bl(e,!1,NaN);if(null===t.parent)return new bl(t,!0,0);const r=Zd(n.commands[0])?0:1;return function Iv(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new bl(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),g=l.processChildren?Tl(l.segmentGroup,l.index,u.commands):rc(l.segmentGroup,l.index,u.commands);return fm(o,l.segmentGroup,g,t,r)}function Zd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Kd(n){return"object"==typeof n&&null!=n&&n.outlets}function fm(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([_,b])=>{u[_]=Array.isArray(b)?b.map(S=>`${S}`):`${b}`}),l=n===e?t:nc(n,e,t);const g=pw(Ev(l));return new Dl(g,u,o)}function nc(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:nc(u,e,t)}),new bn(n.segments,r)}class yw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zd(r[0]))throw new h.vHH(4003,!1);const o=r.find(Kd);if(o&&o!==qd(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function rc(n,e,t){if(n||(n=new bn([],{})),0===n.segments.length&&n.hasChildren())return Tl(n,e,t);const r=function Dv(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],g=t[r];if(Kd(g))break;const _=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!Sl(_,b,l))return u;r+=2}else{if(!Sl(_,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new bn(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new bn(n.segments.slice(r.pathIndex),n.children),Tl(u,0,o)}return r.match&&0===o.length?new bn(n.segments,{}):r.match&&!n.hasChildren()?Cv(n,e,t):r.match?Tl(n,0,o):Cv(n,e,t)}function Tl(n,e,t){if(0===t.length)return new bn(n.segments,{});{const r=function pm(n){return Kd(n[0])?n[0].outlets:{[Zt]:n}}(t),o={};if(!r[Zt]&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const u=Tl(n.children[Zt],e,t);return new bn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=rc(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new bn(n.segments,o)}}function Cv(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Kd(u)){const _=Zb(u.outlets);return new bn(r,_)}if(0===o&&Zd(t[0])){r.push(new Qf(n.segments[e].path,bv(t[0]))),o++;continue}const l=Kd(u)?u.outlets[Zt]:`${u}`,g=o<t.length-1?t[o+1]:null;l&&g&&Zd(g)?(r.push(new Qf(l,bv(g))),o+=2):(r.push(new Qf(l,{})),o++)}return new bn(r,{})}function Zb(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Cv(new bn([],{}),0,r))}),e}function bv(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Sl(n,e,t){return n==t.path&&ao(e,t.parameters)}const ep="imperative";class aa{constructor(e,t){this.id=e,this.url=t}}class Tv extends aa{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qa extends aa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tp extends aa{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class np extends aa{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class gm extends aa{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sv extends aa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wx extends aa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qx extends aa{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kb extends aa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yb extends aa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zx{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kx{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mm{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Av{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mv{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xv{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ja,this.attachRef=null}}let Ja=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xv,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Al(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Al(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ym(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ym(e,this._root).map(t=>t.value)}}function Al(n,e){if(n===e.value)return e;for(const t of e.children){const r=Al(n,t);if(r)return r}return null}function ym(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ym(n,t);if(r.length)return r.unshift(e),r}return[]}class Ro{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Jb extends rp{constructor(e,t){super(e),this.snapshot=t,Ov(this,e)}toString(){return this.snapshot.toString()}}function vm(n,e){const t=function Rv(n,e){const l=new ip([],{},{},"",{},Zt,e,null,{});return new Nv("",new Ro(l,[]))}(0,e),r=new xs.X([new Qf("",{})]),o=new xs.X({}),u=new xs.X({}),l=new xs.X({}),g=new xs.X(""),_=new Ml(r,o,l,g,u,Zt,e,t.root);return _.snapshot=t.root,new Jb(new Ro(_,[]),t)}class Ml{constructor(e,t,r,o,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,Lt.U)(b=>b[Gd]))??(0,Ct.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(e=>Wd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(e=>Wd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _w(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Xb(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ip{get title(){return this.data?.[Gd]}constructor(e,t,r,o,u,l,g,_,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nv extends rp{constructor(e,t){super(t),this.url=e,Ov(this,t)}toString(){return Ew(this._root)}}function Ov(n,e){e.value._routerState=n,e.children.forEach(t=>Ov(n,t))}function Ew(n){const e=n.children.length>0?` { ${n.children.map(Ew).join(", ")} } `:"";return`${n.value}${e}`}function ww(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ao(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ao(e.params,t.params)||n.paramsSubject.next(t.params),function jb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ao(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ao(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Pv(n,e){const t=ao(n.params,e.params)&&function Gb(n,e){return Cl(n,e)&&n.every((t,r)=>ao(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Pv(n.parent,e.parent))}let sp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Ja),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(_m,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new kv(t,g,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class kv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ml?this.route:e===Ja?this.childContexts:this.parent.get(e,t)}}const _m=new h.OlP("");let Fv=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=hv([r.queryParams,r.params,r.data]).pipe((0,Rr.w)(([u,l,g],_)=>(g={...u,...l,...g},0===_?(0,Ct.of)(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ic(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function eT(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ic(n,r,o);return ic(n,r)})}(n,e,t);return new Ro(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>ic(n,g)),l}}const r=function Iw(n){return new Ml(new xs.X(n.url),new xs.X(n.params),new xs.X(n.queryParams),new xs.X(n.fragment),new xs.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ic(n,u));return new Ro(r,o)}}const Vv="ngNavigationCancelingError";function Uv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ya(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=tT(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function tT(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Vv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Dw(n){return op(n)&&Ya(n.url)}function op(n){return n&&n[Vv]}let Cw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[sp],encapsulation:2}),n})();function ap(n){const e=n.children&&n.children.map(ap),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=Cw),t}function Qi(n){return n.outlet||Zt}function wm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Im{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ww(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Xa(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Xa(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Xa(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=Xa(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Mv(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Qb(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ww(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),ww(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=wm(o.snapshot);l.attachRef=null,l.route=o,l.injector=g,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Bv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class up{constructor(e,t){this.component=e,this.route=t}}function iT(n,e,t){const r=n._root;return cp(r,e?e._root:null,t,[r.value])}function Xd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function cp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Xa(e);return n.children.forEach(l=>{(function oT(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function aT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Cl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Cl(n.url,e.url)||!ao(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pv(n,e)||!ao(n.queryParams,e.queryParams);default:return!Pv(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new Bv(r)):(u.data=l.data,u._resolvedData=l._resolvedData),cp(n,e,u.component?g?g.children:null:t,r,o),_&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new up(g.outlet.component,l))}else l&&eh(e,g,o),o.canActivateChecks.push(new Bv(r)),cp(n,null,u.component?g?g.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>eh(g,t.getContext(l),o)),o}function eh(n,e,t){const r=Xa(n),o=n.value;Object.entries(r).forEach(([u,l])=>{eh(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new up(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function ua(n){return"function"==typeof n}function lT(n){return n instanceof rm||"EmptyError"===n?.name}const lp=Symbol("INITIAL_VALUE");function tu(){return(0,Rr.w)(n=>hv(n.map(e=>e.pipe(Za(1),Zf(lp)))).pipe((0,Lt.U)(e=>{for(const t of e)if(!0!==t){if(t===lp)return lp;if(!1===t||t instanceof Dl)return t}return!0}),Rs(e=>e!==lp),Za(1)))}function Lw(n){return(0,$d.z)((0,yi.b)(e=>{if(Ya(e))throw Uv(0,e)}),(0,Lt.U)(e=>!0===e))}class dp{constructor(e){this.segmentGroup=e||null}}class Vw{constructor(e){this.urlTree=e}}function xl(n){return Hd(new dp(n))}function Uw(n){return Hd(new Vw(n))}class Bw{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,Ct.of)(r);if(o.numberOfChildren>1||!o.children[Zt])return Hd(new h.vHH(4e3,!1));o=o.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Dl(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[o]=t[g]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,o)}),new bn(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const Dm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sc(n,e,t,r,o){const u=oc(n,e,t);return u.matched?(r=function Qd(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function hT(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,Ct.of)(!0);const u=o.map(l=>{const g=Xd(l,n);return Ka(function tR(n){return n&&ua(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,Ct.of)(u).pipe(tu(),Lw())}(r,e,t).pipe((0,Lt.U)(l=>!0===l?u:{...Dm}))):(0,Ct.of)(u)}function oc(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Dm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Bb)(t,n,e);if(!o)return{...Dm};const u={};Object.entries(o.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function jv(n,e,t,r){return t.length>0&&function th(n,e,t){return t.some(r=>ac(n,e,r)&&Qi(r)!==Zt)}(n,t,r)?{segmentGroup:new bn(e,Cm(r,new bn(t,n.children))),slicedSegments:[]}:0===t.length&&function $v(n,e,t){return t.some(r=>ac(n,e,r))}(n,t,r)?{segmentGroup:new bn(n.segments,pT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new bn(n.segments,n.children),slicedSegments:t}}function pT(n,e,t,r,o){const u={};for(const l of r)if(ac(n,t,l)&&!o[Qi(l)]){const g=new bn([],{});u[Qi(l)]=g}return{...o,...u}}function Cm(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&Qi(r)!==Zt){const o=new bn([],{});t[Qi(r)]=o}return t}function ac(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Gv{constructor(e,t,r,o,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new Bw(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=jv(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe(Oi(t=>{if(t instanceof Vw)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof dp?this.noMatchError(t):t}),(0,Lt.U)(t=>{const r=new ip([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,{}),o=new Ro(r,t),u=new Nv("",o),l=function Gx(n,e,t=null,r=null){return mw(hm(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Zt).pipe(Oi(r=>{throw r instanceof dp?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=_w(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,En.D)(o).pipe(zd(u=>{const l=r.children[u],g=function Sw(n,e){const t=n.filter(r=>Qi(r)===e);return t.push(...n.filter(r=>Qi(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),sm((u,l)=>(u.push(...l),u)),Kf(null),function jx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rs((o,u)=>n(o,u,r)):Ud.y,rw(1),t?Kf(e):nw(()=>new rm))}(),(0,Ni.z)(u=>{if(null===u)return xl(r);const l=Hw(u);return function $w(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,Ct.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,En.D)(t).pipe(zd(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,o,u,l).pipe(Oi(_=>{if(_ instanceof dp)return(0,Ct.of)(null);throw _}))),ec(g=>!!g),Oi(g=>{if(lT(g))return function Hv(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,Ct.of)([]):xl(r);throw g}))}processSegmentAgainstRoute(e,t,r,o,u,l,g){return function jw(n,e,t,r){return!!(Qi(n)===r||r!==Zt&&ac(e,t,n))&&("**"===n.path||oc(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):xl(o):xl(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Uw(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Ni.z)(l=>{const g=new bn(l,{});return this.processSegment(e,t,g,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:g,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=oc(t,o,u);if(!g)return xl(t);const N=this.applyRedirects.applyRedirectCommands(_,o.redirectTo,S);return o.redirectTo.startsWith("/")?Uw(N):this.applyRedirects.lineralizeSegments(o,N).pipe((0,Ni.z)(G=>this.processSegment(e,r,t,G.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let g;if("**"===r.path){const _=o.length>0?qd(o).parameters:{},b=new ip(o,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zw(r),Qi(r),r.component??r._loadedComponent??null,r,qv(r));g=(0,Ct.of)({snapshot:b,consumedSegments:[],remainingSegments:[]}),t.children={}}else g=sc(t,r,o,e).pipe((0,Lt.U)(({matched:_,consumedSegments:b,remainingSegments:S,parameters:N})=>_?{snapshot:new ip(b,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zw(r),Qi(r),r.component??r._loadedComponent??null,r,qv(r)),consumedSegments:b,remainingSegments:S}:null));return g.pipe((0,Rr.w)(_=>null===_?xl(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,Rr.w)(({routes:b})=>{const S=r._loadedInjector??e,{snapshot:N,consumedSegments:G,remainingSegments:ne}=_,{segmentGroup:ve,slicedSegments:De}=jv(t,G,ne,b);if(0===De.length&&ve.hasChildren())return this.processChildren(S,b,ve).pipe((0,Lt.U)(lt=>null===lt?null:[new Ro(N,lt)]));if(0===b.length&&0===De.length)return(0,Ct.of)([new Ro(N,[])]);const Me=Qi(r)===u;return this.processSegment(S,b,ve,De,Me?Zt:u,!0).pipe((0,Lt.U)(lt=>[new Ro(N,lt)]))}))))}getChildConfig(e,t,r){return t.children?(0,Ct.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Ct.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Fw(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,Ct.of)(!0);const u=o.map(l=>{const g=Xd(l,n);return Ka(function Mw(n){return n&&ua(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,Ct.of)(u).pipe(tu(),Lw())}(e,t,r).pipe((0,Ni.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,yi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function rR(n){return Hd(tT(!1,3))}())):(0,Ct.of)({routes:[],injector:e})}}function Wv(n){const e=n.value.routeConfig;return e&&""===e.path}function Hw(n){const e=[],t=new Set;for(const r of n){if(!Wv(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Hw(r.children);e.push(new Ro(r.value,o))}return e.filter(r=>!t.has(r))}function zw(n){return n.data||{}}function qv(n){return n.resolve||{}}function qw(n){return"string"==typeof n.title||null===n.title}function Zv(n){return(0,Rr.w)(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,Lt.U)(()=>e)):(0,Ct.of)(e)})}const li=new h.OlP("ROUTES");let Kv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Ct.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ka(t.loadComponent()).pipe((0,Lt.U)(ET),(0,yi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),om(()=>{this.componentLoaders.delete(t)})),o=new tw(r,()=>new xo.x).pipe(qf());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Ct.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Lt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b;return Array.isArray(g)?b=g:(_=g.create(t).injector,b=_.get(li,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:b.map(ap),injector:_}}),om(()=>{this.childrenLoaders.delete(r)})),l=new tw(u,()=>new xo.x).pipe(qf());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ka(t()).pipe((0,Lt.U)(ET),(0,Ni.z)(r=>r instanceof h.YKP||Array.isArray(r)?(0,Ct.of)(r):(0,En.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ET(n){return function _T(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let nh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new xo.x,this.configLoader=(0,h.f3M)(Kv),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(tc),this.rootContexts=(0,h.f3M)(Ja),this.inputBindingEnabled=null!==(0,h.f3M)(_m,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ct.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Kx(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Zx(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new xs.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ep,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rs(r=>0!==r.id),(0,Lt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Rr.w)(r=>{let o=!1,u=!1;return(0,Ct.of)(r).pipe((0,yi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Rr.w)(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new np(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Xu.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Yv(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,Ct.of)(l).pipe((0,Rr.w)(S=>{const N=this.transitions?.getValue();return this.events.next(new Tv(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Xu.E:Promise.resolve(S)}),function gT(n,e,t,r,o,u){return(0,Ni.z)(l=>function zv(n,e,t,r,o,u,l="emptyOnly"){return new Gv(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Lt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,yi.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,r.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const G=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(G,S)}t.browserUrlTree=S.urlAfterRedirects}const N=new Sv(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:N,source:G,restoredState:ne,extras:ve}=l,De=new Tv(S,this.urlSerializer.serialize(N),G,ne);this.events.next(De);const Me=vm(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:Me,urlAfterRedirects:N,extras:{...ve,skipLocationChange:!1,replaceUrl:!1}},(0,Ct.of)(r)}{const S="";return this.events.next(new np(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Xu.E}}),(0,yi.b)(l=>{const g=new Wx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,Lt.U)(l=>r={...l,guards:iT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Rw(n,e){return(0,Ni.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,Ct.of)({...t,guardsResult:!0}):function Nw(n,e,t,r){return(0,En.D)(n).pipe((0,Ni.z)(o=>function dT(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Ct.of)(!0);const l=u.map(g=>{const _=wm(e)??o,b=Xd(g,_);return Ka(function eR(n){return n&&ua(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(ec())});return(0,Ct.of)(l).pipe(tu())}(o.component,o.route,t,e,r)),ec(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Ni.z)(g=>g&&function eu(n){return"boolean"==typeof n}(g)?function Ow(n,e,t,r){return(0,En.D)(e).pipe(zd(o=>jd(function Pw(n,e){return null!==n&&e&&e(new mm(n)),(0,Ct.of)(!0)}(o.route.parent,r),function Ht(n,e){return null!==n&&e&&e(new Av(n)),(0,Ct.of)(!0)}(o.route,r),function nR(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function sT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>im(()=>{const g=l.guards.map(_=>{const b=wm(l.node)??t,S=Xd(_,b);return Ka(function uT(n){return n&&ua(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(ec())});return(0,Ct.of)(g).pipe(tu())}));return(0,Ct.of)(u).pipe(tu())}(n,o.path,t),function kw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ct.of)(!0);const o=r.map(u=>im(()=>{const l=wm(e)??t,g=Xd(u,l);return Ka(function Xx(n){return n&&ua(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(ec())}));return(0,Ct.of)(o).pipe(tu())}(n,o.route,t))),ec(o=>!0!==o,!0))}(r,u,n,e):(0,Ct.of)(g)),(0,Lt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,yi.b)(l=>{if(r.guardsResult=l.guardsResult,Ya(l.guardsResult))throw Uv(0,l.guardsResult);const g=new qx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),Rs(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Zv(l=>{if(l.guards.canActivateChecks.length)return(0,Ct.of)(l).pipe((0,yi.b)(g=>{const _=new Kb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),(0,Rr.w)(g=>{let _=!1;return(0,Ct.of)(g).pipe(function mT(n,e){return(0,Ni.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,Ct.of)(t);let u=0;return(0,En.D)(o).pipe(zd(l=>function yT(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!qw(o)&&(u[Gd]=o.title),function vT(n,e,t,r){const o=function Gw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,Ct.of)({});const u={};return(0,En.D)(o).pipe((0,Ni.z)(l=>function Ww(n,e,t,r){const o=wm(e)??r,u=Xd(n,o);return Ka(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(ec(),(0,yi.b)(g=>{u[l]=g}))),rw(1),function $x(n){return(0,Lt.U)(()=>n)}(u),Oi(l=>lT(l)?Xu.E:Hd(l)))}(u,n,e,r).pipe((0,Lt.U)(l=>(n._resolvedData=l,n.data=_w(n,t).resolve,o&&qw(o)&&(n.data[Gd]=o.title),null)))}(l.route,r,n,e)),(0,yi.b)(()=>u++),rw(1),(0,Ni.z)(l=>u===o.length?(0,Ct.of)(t):Xu.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,yi.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,yi.b)(g=>{const _=new Yb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),Zv(l=>{const g=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,yi.b)(S=>{_.component=S}),(0,Lt.U)(()=>{})));for(const S of _.children)b.push(...g(S));return b};return hv(g(l.targetSnapshot.root)).pipe(Kf(),Za(1))}),Zv(()=>this.afterPreactivation()),(0,Lt.U)(l=>{const g=function Lv(n,e,t){const r=ic(n,e._root,t?t._root:void 0);return new Jb(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,yi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Lt.U)(o=>(new Im(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Za(1),(0,yi.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Qa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),om(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Oi(l=>{if(u=!0,op(l)){Dw(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new tp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),Dw(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Yv(r.source)};t.scheduleNavigation(_,ep,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new gm(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Xu.E}))}))}cancelNavigationTransition(t,r,o){const u=new tp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yv(n){return n!==ep}let Zw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Gd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wT)},providedIn:"root"}),n})(),wT=(()=>{class n extends Zw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(DT)},providedIn:"root"}),n})();class Kw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let DT=(()=>{class n extends Kw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bm=new h.OlP("",{providedIn:"root",factory:()=>({})});let Qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(CT)},providedIn:"root"}),n})(),CT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ns=(()=>((Ns=Ns||{})[Ns.COMPLETE=0]="COMPLETE",Ns[Ns.FAILED=1]="FAILED",Ns[Ns.REDIRECTING=2]="REDIRECTING",Ns))();function Yw(n,e){n.events.pipe(Rs(t=>t instanceof Qa||t instanceof tp||t instanceof gm||t instanceof np),(0,Lt.U)(t=>t instanceof Qa||t instanceof np?Ns.COMPLETE:t instanceof tp&&(0===t.code||1===t.code)?Ns.REDIRECTING:Ns.FAILED),Rs(t=>t!==Ns.REDIRECTING),Za(1)).subscribe(()=>{e()})}function bT(n){throw n}function TT(n,e,t){return e.parse("/")}const ca={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(bm,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||bT,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||TT,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(Qv),this.routeReuseStrategy=(0,h.f3M)(IT),this.titleStrategy=(0,h.f3M)(Zw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(li,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(nh),this.urlSerializer=(0,h.f3M)(tc),this.location=(0,h.f3M)(qe),this.componentInputBindingEnabled=!!(0,h.f3M)(_m,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vm(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ep,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const _={...o};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ap),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,b=_?this.currentUrlTree.fragment:l;let N,S=null;switch(g){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}null!==S&&(S=this.removeEmptyProps(S));try{N=hm(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),N=this.currentUrlTree.root}return mw(N,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ya(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,ep,null,r)}navigate(t,r={skipLocationChange:!1}){return function Qw(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...ca}:!1===r?{...Jv}:r,Ya(t))return $b(this.currentUrlTree,t,o);const u=this.parseUrl(t);return $b(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,b;l?(g=l.resolve,_=l.reject,b=l.promise):b=new Promise((N,G)=>{g=N,_=G});const S=this.pendingTasks.add();return Yw(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tm=(()=>{class n{constructor(t,r,o,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=g,this.href=null,this.commands=null,this.onChanges=new xo.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof Qa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Pi),h.Y36(Ml),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ke))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",h.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",h.VuI],replaceUrl:["replaceUrl","replaceUrl",h.VuI],routerLink:"routerLink"},standalone:!0,features:[h.Xq5,h.TTD]}),n})(),Xv=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,o,u,l){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof Qa&&this.update()})}ngAfterContentInit(){(0,Ct.of)(this.links.changes,(0,Ct.of)(null)).pipe((0,Bd.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,En.D)(t).pipe((0,Bd.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Jw(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Pi),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Tm,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&h.Suo(o,Tm,5),2&t){let u;h.iGM(u=h.CRH())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class hp{}let eI=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Rs(t=>t instanceof Qa),zd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,En.D)(o).pipe((0,Bd.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Ct.of)(null);const u=o.pipe((0,Ni.z)(l=>null===l?(0,Ct.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,En.D)([u,l]).pipe((0,Bd.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(hp),h.LFG(Kv))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sm=new h.OlP("");let e_=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof np&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Yd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function vi(n,e){return{\u0275kind:n,\u0275providers:e}}function nI(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Pi),o=n.get(rI);1===n.get(iI)&&r.initialNavigation(),n.get(rh,null,h.XFs.Optional)?.setUpPreloading(),n.get(Sm,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const rI=new h.OlP("",{factory:()=>new xo.x}),iI=new h.OlP("",{providedIn:"root",factory:()=>1}),rh=new h.OlP("");function Mm(n){return vi(0,[{provide:rh,useExisting:eI},{provide:hp,useExisting:n}])}const aI=new h.OlP("ROUTER_FORROOT_GUARD"),uI=[qe,{provide:tc,useClass:mv},Pi,Ja,{provide:Ml,useFactory:function Am(n){return n.routerState.root},deps:[Pi]},Kv,[]];function cI(){return new h.PXZ("Router",Pi)}let ih=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uI,[],{provide:li,multi:!0,useValue:t},{provide:aI,useFactory:NT,deps:[[Pi,new h.FiY,new h.tp0]]},{provide:bm,useValue:r||{}},r?.useHash?{provide:ke,useClass:xe}:{provide:ke,useClass:We},{provide:Sm,useFactory:()=>{const n=(0,h.f3M)(yo),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(bm),r=(0,h.f3M)(nh),o=(0,h.f3M)(tc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new e_(o,r,n,e,t)}},r?.preloadingStrategy?Mm(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:cI},r?.initialNavigation?OT(r):[],r?.bindToComponentInputs?vi(8,[Fv,{provide:_m,useExisting:Fv}]).\u0275providers:[],[{provide:sh,useFactory:nI},{provide:h.tb,multi:!0,useExisting:sh}]]}}static forChild(t){return{ngModule:n,providers:[{provide:li,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(aI,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function NT(n){return"guarded"}function OT(n){return["disabled"===n.initialNavigation?vi(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Pi);return()=>{e.setUpLocationChangeListener()}}},{provide:iI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vi(2,[{provide:iI,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Se,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Pi),u=e.get(rI);Yw(o,()=>{r(!0)}),e.get(nh).afterPreactivation=()=>(r(!0),u.closed?(0,Ct.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const sh=new h.OlP("");let kT=(()=>{class n{constructor(){this.posts={userData:{name:"Manas Khandelwal",displayPicture:"https://random.imagecdn.app/500/150"},postText:"Lorem  Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam quasi eligendi hic. Dolorum ad ipsa, corrupti voluptates illo saepe debitis earum repudiandae rerum perspiciatis, amet aut nesciunt assumenda at ab neque impedit similique iure. lorem343 ipsum dolor sit amet consectetur adipisicing elit. Doloremque ipsum accusantium dolor sapiente! Ducimus illo libero facilis repellat quia laborum odit dignissimos cum, quo autem tempore doloremque ratione veritatis vel animi rerum itaque ex delectus. Asperiores dignissimos impedit natus fugiat sint incidunt, beatae libero aliquam veniam expedita accusamus neque adipisci obcaecati hic accusantium sit!",postImage:"https://source.unsplash.com/random",timeStamp:new Date}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:58,vars:44,consts:[[1,"col-md-5"],[1,"container"],[1,"cards"],[1,"userDets"],[3,"src","alt"],["width","90%","height","60%","alt","User Post",1,"card-img-top",2,"object-fit","contain",3,"src"],[1,"card-body"],[1,"card-text"],[1,"timeStamp"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h._UZ(4,"img",4),h.TgZ(5,"span"),h._uU(6),h.ALo(7,"uppercase"),h.qZA()(),h._UZ(8,"img",5),h.TgZ(9,"div",6)(10,"p",7),h._uU(11),h._UZ(12,"br"),h.TgZ(13,"li",8),h._uU(14),h.ALo(15,"date"),h.qZA()()()(),h.TgZ(16,"div",2)(17,"div",3),h._UZ(18,"img",4),h.TgZ(19,"span"),h._uU(20),h.ALo(21,"uppercase"),h.qZA()(),h._UZ(22,"img",5),h.TgZ(23,"div",6)(24,"p",7),h._uU(25),h._UZ(26,"br"),h.TgZ(27,"li",8),h._uU(28),h.ALo(29,"date"),h.qZA()()()(),h.TgZ(30,"div",2)(31,"div",3),h._UZ(32,"img",4),h.TgZ(33,"span"),h._uU(34),h.ALo(35,"uppercase"),h.qZA()(),h._UZ(36,"img",5),h.TgZ(37,"div",6)(38,"p",7),h._uU(39),h._UZ(40,"br"),h.TgZ(41,"li",8),h._uU(42),h.ALo(43,"date"),h.qZA()()()(),h.TgZ(44,"div",2)(45,"div",3),h._UZ(46,"img",4),h.TgZ(47,"span"),h._uU(48),h.ALo(49,"uppercase"),h.qZA()(),h._UZ(50,"img",5),h.TgZ(51,"div",6)(52,"p",7),h._uU(53),h._UZ(54,"br"),h.TgZ(55,"li",8),h._uU(56),h.ALo(57,"date"),h.qZA()()()()()()),2&t&&(h.xp6(4),h.s9C("src",r.posts.userData.displayPicture,h.LSH),h.MGl("alt","PFP of ",r.posts.userData.name,""),h.xp6(2),h.hij(" ",h.lcZ(7,24,r.posts.userData.name)," "),h.xp6(2),h.s9C("src",r.posts.postImage,h.LSH),h.xp6(3),h.hij(" ",r.posts.postText," "),h.xp6(3),h.Oqu(h.xi3(15,26,r.posts.timeStamp,"medium")),h.xp6(4),h.s9C("src",r.posts.userData.displayPicture,h.LSH),h.MGl("alt","PFP of ",r.posts.userData.name,""),h.xp6(2),h.hij(" ",h.lcZ(21,29,r.posts.userData.name)," "),h.xp6(2),h.s9C("src",r.posts.postImage,h.LSH),h.xp6(3),h.hij(" ",r.posts.postText," "),h.xp6(3),h.Oqu(h.xi3(29,31,r.posts.timeStamp,"medium")),h.xp6(4),h.s9C("src",r.posts.userData.displayPicture,h.LSH),h.MGl("alt","PFP of ",r.posts.userData.name,""),h.xp6(2),h.hij(" ",h.lcZ(35,34,r.posts.userData.name)," "),h.xp6(2),h.s9C("src",r.posts.postImage,h.LSH),h.xp6(3),h.hij(" ",r.posts.postText," "),h.xp6(3),h.Oqu(h.xi3(43,36,r.posts.timeStamp,"medium")),h.xp6(4),h.s9C("src",r.posts.userData.displayPicture,h.LSH),h.MGl("alt","PFP of ",r.posts.userData.name,""),h.xp6(2),h.hij(" ",h.lcZ(49,39,r.posts.userData.name)," "),h.xp6(2),h.s9C("src",r.posts.postImage,h.LSH),h.xp6(3),h.hij(" ",r.posts.postText," "),h.xp6(3),h.Oqu(h.xi3(57,41,r.posts.timeStamp,"medium")))},dependencies:[Oc,Mn],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;background-color:#fff;padding:5px}.cards[_ngcontent-%COMP%]{margin:2px;background-color:#f0f8ff;width:100%;height:100%}.card-body[_ngcontent-%COMP%]{border:1px solid black;padding:20px;border-radius:0 0 10px 10px}.cards[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){border:1px solid #000000}.cards[_ngcontent-%COMP%]   .userDets[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px solid black;display:flex;width:40px;height:40px}.userDets[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;display:flex;padding:.5vh;border:1px solid black;border-bottom:none;font-weight:900}.userDets[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto 0;padding-left:.2vw}.timeStamp[_ngcontent-%COMP%]{font-size:xx-small;display:inline;margin:auto 0;list-style:none;font-weight:900}"]}),n})(),FT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-upload"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"upload works!"),h.qZA())}}),n})();class n_{constructor(e,t,r,o){this.email=e,this.id=t,this._token=r,this._tokenExpirationDate=o}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}class oh{}class xm{}class Os{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Os?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Os;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Os?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class LT{encodeKey(e){return hI(e)}encodeValue(e){return hI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const UT=/%(\d[a-f0-9])/gi,BT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hI(n){return encodeURIComponent(n).replace(UT,(e,t)=>BT[t]??e)}function Rm(n){return`${n}`}class nu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new LT,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function VT(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[l,g]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(Rm):[Rm(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new nu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Rm(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Rm(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class $T{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function r_(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function i_(n){return typeof Blob<"u"&&n instanceof Blob}function HT(n){return typeof FormData<"u"&&n instanceof FormData}class fp{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function gR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Os),this.context||(this.context=new $T),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new nu,this.urlWithParams=t}serializeBody(){return null===this.body?null:r_(this.body)||i_(this.body)||HT(this.body)||function Nm(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||HT(this.body)?null:i_(this.body)?this.body.type||null:r_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,b=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((N,G)=>N.set(G,e.setHeaders[G]),_)),e.setParams&&(b=Object.keys(e.setParams).reduce((N,G)=>N.set(G,e.setParams[G]),b)),new fp(t,r,u,{params:b,headers:_,context:S,reportProgress:g,responseType:o,withCredentials:l})}}var $r=(()=>(($r=$r||{})[$r.Sent=0]="Sent",$r[$r.UploadProgress=1]="UploadProgress",$r[$r.ResponseHeader=2]="ResponseHeader",$r[$r.DownloadProgress=3]="DownloadProgress",$r[$r.Response=4]="Response",$r[$r.User=5]="User",$r))();class pp{constructor(e,t=200,r="OK"){this.headers=e.headers||new Os,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class s_ extends pp{constructor(e={}){super(e),this.type=$r.ResponseHeader}clone(e={}){return new s_({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ji extends pp{constructor(e={}){super(e),this.type=$r.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ji({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ah extends pp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function di(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let uc=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof fp)u=t;else{let _,b;_=o.headers instanceof Os?o.headers:new Os(o.headers),o.params&&(b=o.params instanceof nu?o.params:new nu({fromObject:o.params})),u=new fp(t,r,void 0!==o.body?o.body:null,{headers:_,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const l=(0,Ct.of)(u).pipe(zd(_=>this.handler.handle(_)));if(t instanceof fp||"events"===o.observe)return l;const g=l.pipe(Rs(_=>_ instanceof Ji));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Lt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,Lt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,Lt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,Lt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new nu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,di(o,r))}post(t,r,o={}){return this.request("POST",t,di(o,r))}put(t,r,o={}){return this.request("PUT",t,di(o,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ol(n,e){return e(n)}function uh(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const lh=new h.OlP(""),la=new h.OlP(""),a_=new h.OlP("");function pI(){let n=null;return(e,t)=>{null===n&&(n=((0,h.f3M)(lh,{optional:!0})??[]).reduceRight(uh,Ol));const r=(0,h.f3M)(h.HDt),o=r.add();return n(e,t).pipe(om(()=>r.remove(o)))}}let u_=(()=>{class n extends oh{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,h.f3M)(h.HDt)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(la),...this.injector.get(a_,[])]));this.chain=o.reduceRight((u,l)=>function ch(n,e,t){return(r,o)=>t.runInContext(()=>e(r,u=>n(u,o)))}(u,l,this.injector),Ol)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(om(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xm),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const JT=/^\)\]\}',?\n/;let gI=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new h.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,En.D)(r.\u0275loadImpl()):(0,Ct.of)(null)).pipe((0,Rr.w)(()=>new gi.y(u=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((De,Me)=>l.setRequestHeader(De,Me.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const De=t.detectContentTypeHeader();null!==De&&l.setRequestHeader("Content-Type",De)}if(t.responseType){const De=t.responseType.toLowerCase();l.responseType="json"!==De?De:"text"}const g=t.serializeBody();let _=null;const b=()=>{if(null!==_)return _;const De=l.statusText||"OK",Me=new Os(l.getAllResponseHeaders()),lt=function vR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return _=new s_({headers:Me,status:l.status,statusText:De,url:lt}),_},S=()=>{let{headers:De,status:Me,statusText:lt,url:Mt}=b(),ot=null;204!==Me&&(ot=typeof l.response>"u"?l.responseText:l.response),0===Me&&(Me=ot?200:0);let xt=Me>=200&&Me<300;if("json"===t.responseType&&"string"==typeof ot){const $t=ot;ot=ot.replace(JT,"");try{ot=""!==ot?JSON.parse(ot):null}catch(on){ot=$t,xt&&(xt=!1,ot={error:on,text:ot})}}xt?(u.next(new Ji({body:ot,headers:De,status:Me,statusText:lt,url:Mt||void 0})),u.complete()):u.error(new ah({error:ot,headers:De,status:Me,statusText:lt,url:Mt||void 0}))},N=De=>{const{url:Me}=b(),lt=new ah({error:De,status:l.status||0,statusText:l.statusText||"Unknown Error",url:Me||void 0});u.error(lt)};let G=!1;const ne=De=>{G||(u.next(b()),G=!0);let Me={type:$r.DownloadProgress,loaded:De.loaded};De.lengthComputable&&(Me.total=De.total),"text"===t.responseType&&l.responseText&&(Me.partialText=l.responseText),u.next(Me)},ve=De=>{let Me={type:$r.UploadProgress,loaded:De.loaded};De.lengthComputable&&(Me.total=De.total),u.next(Me)};return l.addEventListener("load",S),l.addEventListener("error",N),l.addEventListener("timeout",N),l.addEventListener("abort",N),t.reportProgress&&(l.addEventListener("progress",ne),null!==g&&l.upload&&l.upload.addEventListener("progress",ve)),l.send(g),u.next({type:$r.Sent}),()=>{l.removeEventListener("error",N),l.removeEventListener("abort",N),l.removeEventListener("load",S),l.removeEventListener("timeout",N),t.reportProgress&&(l.removeEventListener("progress",ne),null!==g&&l.upload&&l.upload.removeEventListener("progress",ve)),l.readyState!==l.DONE&&l.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ar))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mI=new h.OlP("XSRF_ENABLED"),yI=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Om=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class dh{}let l_=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(h.Lbi),h.LFG(yI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Pm(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(mI)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(dh).getToken(),o=(0,h.f3M)(Om);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var On=(()=>((On=On||{})[On.Interceptors=0]="Interceptors",On[On.LegacyInterceptors=1]="LegacyInterceptors",On[On.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",On[On.NoXsrfProtection=3]="NoXsrfProtection",On[On.JsonpSupport=4]="JsonpSupport",On[On.RequestsMadeViaParent=5]="RequestsMadeViaParent",On[On.Fetch=6]="Fetch",On))();function cc(n,e){return{\u0275kind:n,\u0275providers:e}}function nS(...n){const e=[uc,gI,u_,{provide:oh,useExisting:u_},{provide:xm,useExisting:gI},{provide:la,useValue:Pm,multi:!0},{provide:mI,useValue:!0},{provide:dh,useClass:l_}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const vI=new h.OlP("LEGACY_INTERCEPTOR_FN");let iS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[nS(cc(On.LegacyInterceptors,[{provide:vI,useFactory:pI},{provide:la,useExisting:vI,multi:!0}]))]}),n})();var II=L(6321),wn=L(8186);function f_(){return(0,oo.e)((n,e)=>{let t,r=!1;n.subscribe((0,jr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var it,cS=L(3997),p_=(L(6365),L(3106)),_e=L(5861),ru=L(534),Pl=L(4537),No=L(7879),an=L(9058),DI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oo={},g_=g_||{},Vt=DI||self;function fh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ph(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var m_="closure_uid_"+(1e9*Math.random()>>>0),dS=0;function bI(n,e,t){return n.call.apply(n.bind,arguments)}function y_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function _i(n,e,t){return(_i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bI:y_).apply(null,arguments)}function gh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Jr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[o].apply(r,l)}}function lc(){this.s=this.s,this.o=this.o}lc.prototype.s=!1,lc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function CI(n){Object.prototype.hasOwnProperty.call(n,m_)&&n[m_]||(n[m_]=++dS)}(this)},lc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const v_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Fm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function __(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(fh(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function ki(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ki.prototype.h=function(){this.defaultPrevented=!0};var hS=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",()=>{},e),Vt.removeEventListener("test",()=>{},e)}catch{}return n}();function yp(n){return/^[\s\xa0]*$/.test(n)}function mh(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function Ps(n){return-1!=mh().indexOf(n)}function Lm(n){return Lm[" "](n),n}Lm[" "]=function(){};var da,n,AI=Ps("Opera"),kl=Ps("Trident")||Ps("MSIE"),E_=Ps("Edge"),Vm=E_||kl,w_=Ps("Gecko")&&!(-1!=mh().toLowerCase().indexOf("webkit")&&!Ps("Edge"))&&!(Ps("Trident")||Ps("MSIE"))&&!Ps("Edge"),MI=-1!=mh().toLowerCase().indexOf("webkit")&&!Ps("Edge");function vp(){var n=Vt.document;return n?n.documentMode:void 0}e:{var I_="",D_=(n=mh(),w_?/rv:([^\);]+)(\)|;)/.exec(n):E_?/Edge\/([\d\.]+)/.exec(n):kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):MI?/WebKit\/(\S+)/.exec(n):AI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(D_&&(I_=D_?D_[1]:""),kl){var _p=vp();if(null!=_p&&_p>parseFloat(I_)){da=String(_p);break e}}da=I_}var fS=Vt.document&&kl&&(vp()||parseInt(da,10))||void 0;function Fl(n,e){if(ki.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(w_){e:{try{Lm(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fl.$.h.call(this)}}Jr(Fl,ki);var IR={2:"touch",3:"pen",4:"mouse"};Fl.prototype.h=function(){Fl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bm="closure_listenable_"+(1e6*Math.random()|0),pS=0;function gS(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++pS,this.fa=this.ia=!1}function Ep(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function C_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function b_(n){const e={};for(const t in n)e[t]=n[t];return e}const xI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<xI.length;u++)t=xI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function wp(n){this.src=n,this.g={},this.h=0}function T_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=v_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Ep(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jm(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}wp.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=jm(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new gS(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var $m="closure_lm_"+(1e6*Math.random()|0),dc={};function NI(n,e,t,r,o){if(r&&r.once)return kI(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)NI(n,e[u],t,r,o);return null}return t=R_(t),n&&n[Bm]?n.O(e,t,ph(r)?!!r.capture:!!r,o):OI(n,e,t,!1,r,o)}function OI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=ph(o)?!!o.capture:!!o,g=co(n);if(g||(n[$m]=g=new wp(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function PI(){const e=M_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hS||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(A_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kI(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)kI(n,e[u],t,r,o);return null}return t=R_(t),n&&n[Bm]?n.P(e,t,ph(r)?!!r.capture:!!r,o):OI(n,e,t,!0,r,o)}function S_(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)S_(n,e[u],t,r,o);else r=ph(r)?!!r.capture:!!r,t=R_(t),n&&n[Bm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jm(u=n.g[e],t,r,o))&&(Ep(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=co(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jm(e,t,r,o)),(t=-1<n?e[n]:null)&&FI(t))}function FI(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Bm])T_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(A_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=co(e))?(T_(t,n),0==t.h&&(t.src=null,e[$m]=null)):Ep(n)}}}function A_(n){return n in dc?dc[n]:dc[n]="on"+n}function M_(n,e){if(n.fa)n=!0;else{e=new Fl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&FI(n),n=t.call(r,e)}return n}function co(n){return(n=n[$m])instanceof wp?n:null}var x_="__closure_events_fn_"+(1e9*Math.random()>>>0);function R_(n){return"function"==typeof n?n:(n[x_]||(n[x_]=function(e){return n.handleEvent(e)}),n[x_])}function Vn(){lc.call(this),this.i=new wp(this),this.S=this,this.J=null}function Un(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ki(e,n);else if(e instanceof ki)e.target=e.target||n;else{var o=e;RI(e=new ki(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=gs(l,r,!0,e)&&o}if(o=gs(l=e.g=n,r,!0,e)&&o,o=gs(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=gs(l=e.g=t[u],r,!1,e)&&o}function gs(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&T_(n.i,l),o=!1!==g.call(_,r)&&o}}return o&&!r.defaultPrevented}Jr(Vn,lc),Vn.prototype[Bm]=!0,Vn.prototype.removeEventListener=function(n,e,t,r){S_(this,n,e,t,r)},Vn.prototype.N=function(){if(Vn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ep(t[r]);delete n.g[e],n.h--}}this.J=null},Vn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hm=Vt.JSON.stringify;function mS(){var n=O_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var VI=new class LI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new vS,n=>n.reset());class vS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function N_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Ip(n){Vt.setTimeout(()=>{throw n},0)}let Dp,yh=!1,O_=new class yS{constructor(){this.h=this.g=null}add(e,t){const r=VI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},UI=()=>{const n=Vt.Promise.resolve(void 0);Dp=()=>{n.then(BI)}};var BI=()=>{for(var n;n=mS();){try{n.h.call(n.g)}catch(t){Ip(t)}var e=VI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yh=!1};function Cp(n,e){Vn.call(this),this.h=n||1,this.g=e||Vt,this.j=_i(this.qb,this),this.l=Date.now()}function vh(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function P_(n,e,t){if("function"==typeof n)t&&(n=_i(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_i(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function k_(n){n.g=P_(()=>{n.g=null,n.i&&(n.i=!1,k_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jr(Cp,Vn),(it=Cp.prototype).ga=!1,it.T=null,it.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Un(this,"tick"),this.ga&&(vh(this),this.start()))}},it.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.N=function(){Cp.$.N.call(this),vh(this),delete this.g};class jI extends lc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:k_(this)}N(){super.N(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _h(n){lc.call(this),this.h=n,this.g={}}Jr(_h,lc);var $I=[];function HI(n,e,t,r){Array.isArray(t)||(t&&($I[0]=t.toString()),t=$I);for(var o=0;o<t.length;o++){var u=NI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function zm(n){C_(n.g,function(e,t){this.g.hasOwnProperty(t)&&FI(e)},n),n.g={}}function Ll(){this.g=!0}function Vl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Hm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}_h.prototype.N=function(){_h.$.N.call(this),zm(this)},_h.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ll.prototype.Ea=function(){this.g=!1},Ll.prototype.info=function(){};var hc={},F_=null;function bp(){return F_=F_||new Vn}function ZI(n){ki.call(this,hc.Ta,n)}function Tp(n){const e=bp();Un(e,new ZI(e))}function KI(n,e){ki.call(this,hc.STAT_EVENT,n),this.stat=e}function Xi(n){const e=bp();Un(e,new KI(e,n))}function YI(n,e){ki.call(this,hc.Ua,n),this.size=e}function Sp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}hc.Ta="serverreachability",Jr(ZI,ki),hc.STAT_EVENT="statevent",Jr(KI,ki),hc.Ua="timingevent",Jr(YI,ki);var Gm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},QI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function L_(){}function XI(){}L_.prototype.h=null;var B_,Ap={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function V_(){ki.call(this,"d")}function U_(){ki.call(this,"c")}function Wm(){}function Mp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new _h(this),this.P=tD,this.V=new Cp(n=Vm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new eD}function eD(){this.i=null,this.g="",this.h=!1}Jr(V_,ki),Jr(U_,ki),Jr(Wm,L_),Wm.prototype.g=function(){return new XMLHttpRequest},Wm.prototype.i=function(){return{}},B_=new Wm;var tD=45e3,qm={},xp={};function Zm(n,e,t){n.L=1,n.v=su(pc(e)),n.s=t,n.S=!0,j_(n,null)}function j_(n,e){n.G=Date.now(),Eh(n),n.A=pc(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),aD(t.i,"t",r),n.C=0,t=n.l.J,n.h=new eD,n.g=CD(n.l,t?e:null,!n.s),0<n.O&&(n.M=new jI(_i(n.Pa,n,n.g),n.O)),HI(n.U,n.g,"readystatechange",n.nb),e=n.I?b_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Tp(),function zI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var b=g[_].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");l=2<=N.length&&"type"==N[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function $_(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function H_(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=nD(n,t),o==xp){4==e&&(n.o=4,Xi(14),r=!1),Vl(n.j,n.m,null,"[Incomplete Response]");break}if(o==qm){n.o=4,Xi(15),Vl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vl(n.j,n.m,o,null),G_(n,o)}$_(n)&&o!=xp&&o!=qm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),$p(e),e.M=!0,Xi(11))):(Vl(n.j,n.m,t,"[Invalid Chunked Response]"),Ul(n),Po(n))}function nD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xp:(t=Number(e.substring(t,r)),isNaN(t)?qm:(r+=1)+t>e.length?xp:(e=e.slice(r,r+t),n.C=r+t,e))}function Eh(n){n.Y=Date.now()+n.P,z_(n,n.P)}function z_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sp(_i(n.lb,n),e)}function Rp(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Po(n){0==n.l.H||n.J||X_(n.l,n)}function Ul(n){Rp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,vh(n.V),zm(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function G_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Jm(t.i,n)))if(!n.K&&Jm(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Hp(t),ny(t)}J_(t),Xi(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=Sp(_i(t.ib,t),6e3));if(1>=Pp(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Bl(t,11)}else if((n.K||t.g==n)&&Hp(t),!yp(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const S=b[3];null!=S&&(t.ra=S,t.l.info("VER="+t.ra));const N=b[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const G=b[5];null!=G&&"number"==typeof G&&0<G&&(t.L=r=1.5*G,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const ne=n.g;if(ne){const ve=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ve){var u=r.i;u.g||-1==ve.indexOf("spdy")&&-1==ve.indexOf("quic")&&-1==ve.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Xm(u,u.h),u.h=null))}if(r.F){const De=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;De&&(r.Da=De,Jn(r.I,r.F,De))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=iy(r,r.J?r.pa:null,r.Y),l.K){Z_(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(Rp(g),Eh(g)),r.g=l}else Q_(r);0<t.j.length&&ry(t)}else"stop"!=b[0]&&"close"!=b[0]||Bl(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Bl(t,7):Y_(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Tp()}catch{}}function Km(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function DR(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function wh(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(it=Mp.prototype).setTimeout=function(n){this.P=n},it.nb=function(n){n=n.target;const e=this.M;e&&3==ha(n)?e.l():this.Pa(n)},it.Pa=function(n){try{if(n==this.g)e:{const S=ha(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||Vm||this.g&&(this.h.h||this.g.ja()||gD(this.g)))){this.J||4!=S||7==e||Tp(),Rp(this);var t=this.g.da();this.ca=t;t:if($_(this)){var r=gD(this.g);n="";var o=r.length,u=4==ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ul(this),Po(this);var l="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function GI(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yp(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Xi(12),Ul(this),Po(this);break e}Vl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,G_(this,t)}this.S?(H_(this,S,l),Vm&&this.i&&3==S&&(HI(this.U,this.V,"tick",this.mb),this.V.start())):(Vl(this.j,this.m,l,null),G_(this,l)),4==S&&Ul(this),this.i&&!this.J&&(4==S?X_(this.l,this):(this.i=!1,Eh(this)))}else(function SS(n){const e={};n=(n.g&&2<=ha(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(yp(n[r]))continue;var t=N_(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function Xr(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),Ul(this),Po(this)}}}catch{}},it.mb=function(){if(this.g){var n=ha(this.g),e=this.g.ja();this.C<e.length&&(Rp(this),H_(this,n,e),this.i&&4!=n&&Eh(this))}},it.cancel=function(){this.J=!0,Ul(this)},it.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function WI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Tp(),Xi(17)),Ul(this),this.o=2,Po(this)):z_(this,this.Y-n)};var _S=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fc){this.h=n.h,Tt(this,n.j),this.s=n.s,this.g=n.g,Ym(this,n.m),this.l=n.l;var e=n.i,t=new Ih;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),iD(this,t),this.o=n.o}else n&&(e=String(n).match(_S))?(this.h=!1,Tt(this,e[1]||"",!0),this.s=Np(e[2]||""),this.g=Np(e[3]||"",!0),Ym(this,e[4]),this.l=Np(e[5]||"",!0),iD(this,e[6]||"",!0),this.o=Np(e[7]||"")):(this.h=!1,this.i=new Ih(null,this.h))}function pc(n){return new fc(n)}function Tt(n,e,t){n.j=t?Np(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ym(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function iD(n,e,t){e instanceof Ih?(n.i=e,function wS(n,e){e&&!n.j&&(ou(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(W_(this,r),aD(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=gc(e,oD)),n.i=new Ih(e,n.h))}function Jn(n,e,t){n.i.set(e,t)}function su(n){return Jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Np(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Qm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Qm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gc(e,pr,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gc(e,pr,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(gc(t,"/"==t.charAt(0)?sD:CR,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gc(t,ES)),n.join("")};var pr=/[#\/\?@]/g,CR=/[#\?:]/g,sD=/[#\?]/g,oD=/[#\?@]/g,ES=/#/g;function Ih(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ou(n){n.g||(n.g=new Map,n.h=0,n.i&&function rD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function W_(n,e){ou(n),e=Dh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function q_(n,e){return ou(n),e=Dh(n,e),n.g.has(e)}function aD(n,e,t){W_(n,e),0<t.length&&(n.i=null,n.g.set(Dh(n,e),Fm(t)),n.h+=t.length)}function Dh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function uD(n){this.l=n||IS,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ka&&Vt.g.Ka()&&Vt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Ih.prototype).add=function(n,e){ou(this),this.i=null,n=Dh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){ou(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},it.ta=function(){ou(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},it.Z=function(n){ou(this);let e=[];if("string"==typeof n)q_(this,n)&&(e=e.concat(this.g.get(Dh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return ou(this),this.i=null,q_(this,n=Dh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var IS=10;function cD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pp(n){return n.h?1:n.g?n.g.size:0}function Jm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Xm(n,e){n.g?n.g.add(e):n.h=e}function Z_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lD(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Fm(n.i)}uD.prototype.cancel=function(){if(this.i=lD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var kp=class{stringify(n){return Vt.JSON.stringify(n,void 0)}parse(n){return Vt.JSON.parse(n,void 0)}};function Fp(){this.g=new kp}function DS(n,e,t){const r=t||"";try{Km(n,function(o,u){let l=o;ph(o)&&(l=Hm(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function ey(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Ch(n){this.l=n.fc||null,this.j=n.ob||!1}function Lp(n,e){Vn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ty,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jr(Ch,L_),Ch.prototype.g=function(){return new Lp(this.l,this.j)},Ch.prototype.i=function(n){return function(){return n}}({}),Jr(Lp,Vn);var ty=0;function dD(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function bh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vp(n)}function Vp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Lp.prototype).open=function(n,e){if(this.readyState!=ty)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vp(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bh(this)),this.readyState=ty},it.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vp(this)),this.g&&(this.readyState=3,Vp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dD(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},it.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bh(this):Vp(this),3==this.readyState&&dD(this)}},it.Za=function(n){this.g&&(this.response=this.responseText=n,bh(this))},it.Ya=function(n){this.g&&(this.response=n,bh(this))},it.ka=function(){this.g&&bh(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Lp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var bS=Vt.JSON.parse;function Nr(n){Vn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=TS,this.L=this.M=!1}Jr(Nr,Vn);var TS="",bR=/^https?$/i,TR=["POST","PUT"];function Up(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fD(n),Bp(n)}function fD(n){n.F||(n.F=!0,Un(n,"complete"),Un(n,"error"))}function pD(n){if(n.h&&typeof g_<"u"&&(!n.C[1]||4!=ha(n)||2!=n.da()))if(n.v&&4==ha(n))P_(n.La,0,n);else if(Un(n,"readystatechange"),4==ha(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(_S)[1]||null;!o&&Vt.self&&Vt.self.location&&(o=Vt.self.location.protocol.slice(0,-1)),r=!bR.test(o?o.toLowerCase():"")}t=r}if(t)Un(n,"complete"),Un(n,"success");else{n.m=6;try{var u=2<ha(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",fD(n)}}finally{Bp(n)}}}function Bp(n,e){if(n.g){Th(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Un(n,"ready");try{t.onreadystatechange=r}catch{}}}function Th(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function ha(n){return n.g?n.g.readyState:0}function gD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case TS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mD(n){let e="";return C_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function yD(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=mD(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Jn(n,e,t))}function jp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function K_(n){this.Ga=0,this.j=[],this.l=new Ll,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jp("baseRetryDelayMs",5e3,n),this.hb=jp("retryDelaySeedMs",1e4,n),this.eb=jp("forwardChannelMaxRetries",2,n),this.xa=jp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new uD(n&&n.concurrentRequestLimit),this.Ja=new Fp,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Y_(n){if(Sh(n),3==n.H){var e=n.W++,t=pc(n.I);if(Jn(t,"SID",n.K),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),Ah(n,t),(e=new Mp(n,n.l,e)).L=2,e.v=su(pc(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon)try{t=Vt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=CD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Eh(e)}DD(n)}function ny(n){n.g&&($p(n),n.g.cancel(),n.g=null)}function Sh(n){ny(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Hp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function ry(n){if(!cD(n.i)&&!n.m){n.m=!0;var e=n.Na;Dp||UI(),yh||(Dp(),yh=!0),O_.add(e,n),n.C=0}}function _D(n,e){var t;t=e?e.m:n.W++;const r=pc(n.I);Jn(r,"SID",n.K),Jn(r,"RID",t),Jn(r,"AID",n.V),Ah(n,r),n.o&&n.s&&yD(r,n.o,n.s),t=new Mp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ED(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Xm(n.i,t),Zm(t,r,e)}function Ah(n,e){n.na&&C_(n.na,function(t,r){Jn(e,r,t)}),n.h&&Km({},function(t,r){Jn(e,r,t)})}function ED(n,e,t){t=Math.min(n.j.length,t);var r=n.h?_i(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let b=o[_].g;const S=o[_].map;if(b-=u,0>b)u=Math.max(0,o[_].g-100),g=!1;else try{DS(S,l,"req"+b+"_")}catch{r&&r(S)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Q_(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Dp||UI(),yh||(Dp(),yh=!0),O_.add(e,n),n.A=0}}function J_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Sp(_i(n.Ma,n),ID(n,n.A)),n.A++,0))}function $p(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function wD(n){n.g=new Mp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=pc(n.wa);Jn(e,"RID","rpc"),Jn(e,"SID",n.K),Jn(e,"AID",n.V),Jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Jn(e,"TO",n.qa),Jn(e,"TYPE","xmlhttp"),Ah(n,e),n.o&&n.s&&yD(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=su(pc(e)),t.s=null,t.S=!0,j_(t,n)}function Hp(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function X_(n,e){var t=null;if(n.g==e){Hp(n),$p(n),n.g=null;var r=2}else{if(!Jm(n.i,e))return;t=e.F,Z_(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Un(r=bp(),new YI(r,t)),ry(n)}else Q_(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function vD(n,e){return!(Pp(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Sp(_i(n.Na,n,e),ID(n,n.C)),n.C++,0)))}(n,e)||2==r&&J_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Bl(n,5);break;case 4:Bl(n,10);break;case 3:Bl(n,6);break;default:Bl(n,2)}}function ID(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Bl(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=_i(n.pb,n);t||(t=new fc("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Tt(t,"https"),su(t)),function CS(n,e){const t=new Ll;if(Vt.Image){const r=new Image;r.onload=gh(ey,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gh(ey,t,r,"TestLoadImage: error",!1,e),r.onabort=gh(ey,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gh(ey,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xi(2);n.H=0,n.h&&n.h.za(e),DD(n),Sh(n)}function DD(n){if(n.H=0,n.ma=[],n.h){const e=lD(n.i);(0!=e.length||0!=n.j.length)&&(__(n.ma,e),__(n.ma,n.j),n.i.i.length=0,Fm(n.j),n.j.length=0),n.h.ya()}}function iy(n,e,t){var r=t instanceof fc?pc(t):new fc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Ym(r,r.m);else{var o=Vt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new fc(null);r&&Tt(u,r),e&&(u.g=e),o&&Ym(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Jn(r,t,e),Jn(r,"VER",n.ra),Ah(n,r),r}function CD(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nr(t&&n.Ha&&!n.va?new Ch({ob:!0}):n.va)).Oa(n.J),e}function e0(){}function sy(){if(kl&&!(10<=Number(fS)))throw Error("Environmental error: no available transport.")}function ks(n,e){Vn.call(this),this.g=new K_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!yp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mh(this)}function bD(n){V_.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function TD(){U_.call(this),this.status=1}function Mh(n){this.g=n}function ko(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function t0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function In(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(it=Nr.prototype).Oa=function(n){this.M=n},it.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():B_.g(),this.C=function JI(n){return n.h||(n.h=n.i())}(this.u?this.u:B_),this.g.onreadystatechange=_i(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Up(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Vt.FormData&&n instanceof Vt.FormData,!(0<=v_(TR,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Th(this),0<this.B&&((this.L=function hD(n){return kl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_i(this.ua,this)):this.A=P_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Up(this,u)}},it.ua=function(){typeof g_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Un(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Un(this,"complete"),Un(this,"abort"),Bp(this))},it.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bp(this,!0)),Nr.$.N.call(this)},it.La=function(){this.s||(this.G||this.v||this.l?pD(this):this.kb())},it.kb=function(){pD(this)},it.isActive=function(){return!!this.g},it.da=function(){try{return 2<ha(this)?this.g.status:-1}catch{return-1}},it.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),bS(e)}},it.Ia=function(){return this.m},it.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=K_.prototype).ra=8,it.H=1,it.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Mp(this,this.l,n);let u=this.s;if(this.U&&(u?(u=b_(u),RI(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ED(this,o,e),Jn(t=pc(this.I),"RID",n),Jn(t,"CVER",22),this.F&&Jn(t,"X-HTTP-Session-Id",this.F),Ah(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(mD(u)))+"&"+e:this.o&&yD(t,this.o,u)),Xm(this.i,o),this.bb&&Jn(t,"TYPE","init"),this.P?(Jn(t,"$req",e),Jn(t,"SID","null"),o.aa=!0,Zm(o,t,null)):Zm(o,t,e),this.H=2}}else 3==this.H&&(n?_D(this,n):0==this.j.length||cD(this.i)||_D(this))},it.Ma=function(){if(this.u=null,wD(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Sp(_i(this.jb,this),n)}},it.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xi(10),ny(this),wD(this))},it.ib=function(){null!=this.v&&(this.v=null,ny(this),J_(this),Xi(19))},it.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Xi(2)):(this.l.info("Failed to ping google.com"),Xi(1))},it.isActive=function(){return!!this.h&&this.h.isActive(this)},(it=e0.prototype).Ba=function(){},it.Aa=function(){},it.za=function(){},it.ya=function(){},it.isActive=function(){return!0},it.Va=function(){},sy.prototype.g=function(n,e){return new ks(n,e)},Jr(ks,Vn),ks.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Xi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=iy(n,null,n.Y),ry(n)},ks.prototype.close=function(){Y_(this.g)},ks.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hm(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ry(e)},ks.prototype.N=function(){this.g.h=null,delete this.j,Y_(this.g),delete this.g,ks.$.N.call(this)},Jr(bD,V_),Jr(TD,U_),Jr(Mh,e0),Mh.prototype.Ba=function(){Un(this.g,"a")},Mh.prototype.Aa=function(n){Un(this.g,new bD(n))},Mh.prototype.za=function(n){Un(this.g,new TD)},Mh.prototype.ya=function(){Un(this.g,"b")},Jr(ko,function AS(){this.blockSize=-1}),ko.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ko.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)t0(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){t0(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){t0(this,r),o=0;break}}this.h=o,this.i+=e},ko.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var SD={};function n0(n){return-128<=n&&128>n?function SI(n,e){var t=SD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new In([0|e],0>e?-1:0)}):new In([0|n],0>n?-1:0)}function fa(n){if(isNaN(n)||!isFinite(n))return xh;if(0>n)return ei(fa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=s0;return new In(e,0)}var s0=4294967296,xh=n0(0),o0=n0(1),oy=n0(16777216);function Fo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Fs(n){return-1==n.h}function ei(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new In(t,~n.h).add(o0)}function ay(n,e){return n.add(ei(e))}function uy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function jl(n,e){this.g=n,this.h=e}function cy(n,e){if(Fo(e))throw Error("division by zero");if(Fo(n))return new jl(xh,xh);if(Fs(n))return e=cy(ei(n),e),new jl(ei(e.g),ei(e.h));if(Fs(e))return e=cy(n,ei(e)),new jl(ei(e.g),e.h);if(30<n.g.length){if(Fs(n)||Fs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=o0,r=e;0>=r.X(n);)t=a0(t),r=a0(r);var o=Lo(t,1),u=Lo(r,1);for(r=Lo(r,2),t=Lo(t,2);!Fo(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=Lo(r,1),t=Lo(t,1)}return e=ay(n,o.R(e)),new jl(o,e)}for(o=xh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=fa(t)).R(e);Fs(l)||0<l.X(n);)l=(u=fa(t-=r)).R(e);Fo(u)&&(u=o0),o=o.add(u),n=ay(n,l)}return new jl(o,n)}function a0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new In(t,n.h)}function Lo(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new In(o,n.h)}(it=In.prototype).ea=function(){if(Fs(this))return-ei(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:s0+r)*e,e*=s0}return n},it.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Fo(this))return"0";if(Fs(this))return"-"+ei(this).toString(n);for(var e=fa(Math.pow(n,6)),t=this,r="";;){var o=cy(t,e).g,u=((0<(t=ay(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Fo(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},it.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},it.X=function(n){return Fs(n=ay(this,n))?-1:Fo(n)?0:1},it.abs=function(){return Fs(this)?ei(this):this},it.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new In(t,-2147483648&t[t.length-1]?-1:0)},it.R=function(n){if(Fo(this)||Fo(n))return xh;if(Fs(this))return Fs(n)?ei(this).R(ei(n)):ei(ei(this).R(n));if(Fs(n))return ei(this.R(ei(n)));if(0>this.X(oy)&&0>n.X(oy))return fa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(o)>>>16,_=65535&n.D(o);t[2*r+2*o]+=l*_,uy(t,2*r+2*o),t[2*r+2*o+1]+=u*_,uy(t,2*r+2*o+1),t[2*r+2*o+1]+=l*g,uy(t,2*r+2*o+1),t[2*r+2*o+2]+=u*g,uy(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new In(t,0)},it.gb=function(n){return cy(this,n).h},it.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new In(t,this.h&n.h)},it.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new In(t,this.h|n.h)},it.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new In(t,this.h^n.h)},sy.prototype.createWebChannel=sy.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,Gm.NO_ERROR=0,Gm.TIMEOUT=8,Gm.HTTP_ERROR=6,QI.COMPLETE="complete",XI.EventType=Ap,Ap.OPEN="a",Ap.CLOSE="b",Ap.ERROR="c",Ap.MESSAGE="d",Vn.prototype.listen=Vn.prototype.O,Nr.prototype.listenOnce=Nr.prototype.P,Nr.prototype.getLastError=Nr.prototype.Sa,Nr.prototype.getLastErrorCode=Nr.prototype.Ia,Nr.prototype.getStatus=Nr.prototype.da,Nr.prototype.getResponseJson=Nr.prototype.Wa,Nr.prototype.getResponseText=Nr.prototype.ja,Nr.prototype.send=Nr.prototype.ha,Nr.prototype.setWithCredentials=Nr.prototype.Oa,ko.prototype.digest=ko.prototype.l,ko.prototype.reset=ko.prototype.reset,ko.prototype.update=ko.prototype.j,In.prototype.add=In.prototype.add,In.prototype.multiply=In.prototype.R,In.prototype.modulo=In.prototype.gb,In.prototype.compare=In.prototype.X,In.prototype.toNumber=In.prototype.ea,In.prototype.toString=In.prototype.toString,In.prototype.getBits=In.prototype.D,In.fromNumber=fa,In.fromString=function r0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ei(r0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=fa(Math.pow(e,8)),r=xh,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=fa(Math.pow(e,u)),r=r.R(u).add(fa(l))):r=(r=r.R(t)).add(fa(l))}return r};var AD=Oo.createWebChannelTransport=function(){return new sy},MS=Oo.getStatEventTarget=function(){return bp()},MD=Oo.ErrorCode=Gm,u0=Oo.EventType=QI,c0=Oo.Event=hc,xD=Oo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},RD=Oo.FetchXmlHttpFactory=Ch,zp=Oo.WebChannel=XI,xS=Oo.XhrIo=Nr,ND=Oo.Md5=ko,mc=Oo.Integer=In;const l0="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let $l="9.22.2";const au=new No.Yd("@firebase/firestore");function d0(){return au.logLevel}function Le(n,...e){if(au.logLevel<=No.in.DEBUG){const t=e.map(OD);au.debug(`Firestore (${$l}): ${n}`,...t)}}function Or(n,...e){if(au.logLevel<=No.in.ERROR){const t=e.map(OD);au.error(`Firestore (${$l}): ${n}`,...t)}}function Ls(n,...e){if(au.logLevel<=No.in.WARN){const t=e.map(OD);au.warn(`Firestore (${$l}): ${n}`,...t)}}function OD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function wt(n,e){n||st()}function nt(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class PD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class PS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kS{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ni,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=l;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ni)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new PD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new ti(e)}}class FS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class LS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new FS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new kD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class h0{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=Gp(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function Hl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function f0(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Xn(0,0))}static max(){return new It(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wp{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Wp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends Wp{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const FD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gr extends Wp{construct(e,t,r){return new gr(e,t,r)}static isValidIdentifier(e){return FD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===g?(l=!l,o++):"."!==g||l?(r+=g,o++):(u(),o++)}if(u(),l)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gr(t)}static emptyPath(){return new gr([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(hn.fromString(e))}static fromName(e){return new Je(hn.fromString(e).popFirst(5))}static empty(){return new Je(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new hn(e.slice()))}}class ly{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function p0(n){return n.fields.find(e=>2===e.kind)}function Vo(n){return n.fields.filter(e=>2!==e.kind)}ly.UNKNOWN_ID=-1;class Rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class qp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qp(0,Vs.min())}}function dy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=It.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new Vs(o,Je.empty(),e)}function Nh(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(It.min(),Je.empty(),-1)}static max(){return new Vs(It.max(),Je.empty(),-1)}}function g0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const LD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uu(n){return m0.apply(this,arguments)}function m0(){return m0=(0,_e.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==LD)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),m0.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,l=!1;e.forEach(g=>{++o,g.next(()=>{++u,l&&u===o&&t()},_=>r(_))}),l=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(S=>{l[b]=S,++g,g===u&&r(l)},S=>o(S))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Oh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ni,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ph(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=y0(r.target.error);this.v.reject(new Ph(e,o))}}static open(e,t,r,o){try{return new Oh(t,e.transaction(o,r))}catch(u){throw new Ph(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jS(t)}}class Uo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Uo.S((0,an.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),vc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,an.hl)())return!1;if(Uo.C())return!0;const e=(0,an.z$)(),t=Uo.S(e),r=0<t&&t<10,o=Uo.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Ph(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;o("VersionError"===g.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Ph(e,g))},u.onupgradeneeded=l=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,_e.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=Oh.open(u.db,e,l?"readonly":"readwrite",r),b=o(_).next(S=>(_.P(),S)).catch(S=>(_.abort(S),oe.reject(S))).toPromise();return b.catch(()=>{}),yield _.R,b}catch(_){const b=_,S="FirebaseError"!==b.name&&g<3;if(Le("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return vc(this.L.delete())}}class Ph extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yc(n){return"IndexedDbTransactionError"===n.name}class jS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vc(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),vc(this.store.add(e))}get(e){return vc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),vc(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),vc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const l=y0(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new oe((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void o();const _=new BS(g),b=t(g.primaryKey,g.value,_);if(b instanceof oe){const S=b.catch(N=>(_.done(),oe.reject(N)));r.push(S)}_.isDone?o():null===_.K?g.continue():g.continue(_.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vc(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=y0(r.target.error);t(o)}})}let Kp=!1;function y0(n){const e=Uo.S((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kp||(Kp=!0,setTimeout(()=>{throw r},0)),r}}return n}class $S{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){yc(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield uu(r)}yield t.et(6e4)}))}}class VD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Le("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(g=>{o-=g,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(g=>(Le("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=Nh(u);g0(l,r)>0&&(r=l)}),new Vs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function zl(n){return null==n}function kh(n){return 0===n&&1/n==-1/0}function UD(n){return"number"==typeof n&&Number.isInteger(n)&&!kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jD(e)),e=BD(n.get(t),e);return jD(e)}function BD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function jD(n){return n+"\x01\x01"}function ga(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===o.length?_=g:(o+=g,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:st()}u=l+2}return new hn(r)}const hy=["userId","batchId"];function Fh(n,e){return[n,Ei(e)]}function v0(n,e,t){return[n,Ei(e),t]}const _0={},E0=["prefixPath","collectionGroup","readTime","documentId"],HS=["prefixPath","collectionGroup","documentId"],zS=["collectionGroup","readTime","prefixPath","documentId"],GS=["canonicalId","targetId"],WS=["targetId","path"],$D=["path","targetId"],w0=["collectionId","parent"],HD=["indexId","uid"],qS=["uid","sequenceNumber"],zD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GD=["indexId","uid","orderedDocumentKey"],ZS=["userId","collectionPath","documentId"],WD=["userId","collectionPath","largestBatchId"],qD=["userId","collectionGroup","largestBatchId"],ZD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KD=[...ZD,"documentOverlays"],YD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fi=YD,Lh=[...Fi,"indexConfiguration","indexState","indexEntries"];class I0 extends Zp{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function hi(n,e){const t=nt(n);return Uo.M(t.ht,e)}function KS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function D0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||wi.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _c(this.root,e,this.comparator,!1)}getReverseIterator(){return new _c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _c(this.root,e,this.comparator,!0)}}class _c{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??wi.RED,this.left=o??wi.EMPTY,this.right=u??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new wi(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return wi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1,wi.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QD(this.data.getIterator())}getIteratorFrom(e){return new QD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class QD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wl(n){return n.hasNext()?n.getNext():void 0}class ys{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new ys([])}unionWith(e){let t=new Bn(gr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class JD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JD("Invalid base64 string: "+o):o}}(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const XD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ec(n){if(wt(!!n),"string"==typeof n){let e=0;const t=XD.exec(n);if(wt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bo(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function C0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Yp(n){const e=n.mapValue.fields.__previous_value__;return C0(e)?Yp(e):e}function Qp(n){const e=Ec(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}class eC{constructor(e,t,r,o,u,l,g,_,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=b}}class Us{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Us("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Us&&e.projectId===this.projectId&&e.database===this.database}}const wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jp={nullValue:"NULL_VALUE"};function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C0(n)?4:rC(n)?9007199254740991:10:st()}function cu(n,e){if(n===e)return!0;const t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qp(n).isEqual(Qp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ec(r.timestampValue),l=Ec(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Bo(n.bytesValue).isEqual(Bo(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return er(r.geoPointValue.latitude)===er(o.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return er(r.integerValue)===er(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=er(r.doubleValue),l=er(o.doubleValue);return u===l?kh(u)===kh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Hl(n.arrayValue.values||[],e.arrayValue.values||[],cu);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(KS(u)!==KS(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!cu(u[g],l[g])))return!1;return!0}(n,e);default:return st()}var o}function Xp(n,e){return void 0!==(n.values||[]).find(t=>cu(t,e))}function ql(n,e){if(n===e)return 0;const t=ma(n),r=ma(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=er(o.integerValue||o.doubleValue),g=er(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return tC(n.timestampValue,e.timestampValue);case 4:return tC(Qp(n),Qp(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Bo(o),g=Bo(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const b=Ut(l[_],g[_]);if(0!==b)return b}return Ut(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Ut(er(o.latitude),er(u.latitude));return 0!==l?l:Ut(er(o.longitude),er(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const b=ql(l[_],g[_]);if(b)return b}return Ut(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===wc.mapValue&&u===wc.mapValue)return 0;if(o===wc.mapValue)return 1;if(u===wc.mapValue)return-1;const l=o.fields||{},g=Object.keys(l),_=u.fields||{},b=Object.keys(_);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const N=Ut(g[S],b[S]);if(0!==N)return N;const G=ql(l[g[S]],_[b[S]]);if(0!==G)return G}return Ut(g.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function tC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=Ec(n),r=Ec(e),o=Ut(t.seconds,r.seconds);return 0!==o?o:Ut(t.nanos,r.nanos)}function Vh(n){return b0(n)}function b0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ec(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bo(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=b0(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${b0(r.fields[g])}`;return u+"}"}(n.mapValue):st();var e}function Ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function T0(n){return!!n&&"integerValue"in n}function Uh(n){return!!n&&"arrayValue"in n}function S0(n){return!!n&&"nullValue"in n}function nC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fy(n){return!!n&&"mapValue"in n}function Bh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iC(n){return"nullValue"in n?Jp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ic(Us.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function sC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ic(Us.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wc:st()}function A0(n,e){const t=ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function M0(n,e){const t=ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bh(t)}setAll(e){let t=gr.emptyPath(),r={},o=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=g.popLast()}l?r[g.lastSegment()]=Bh(l):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());fy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];fy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ii(Bh(this.value))}}function oC(n){const e=[];return Gl(n.fields,(t,r)=>{const o=new gr([t]);if(fy(r)){const u=oC(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new ys(e)}class ar{constructor(e,t,r,o,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new ar(e,0,It.min(),It.min(),It.min(),Ii.empty(),0)}static newFoundDocument(e,t,r,o){return new ar(e,1,t,It.min(),r,o,0)}static newNoDocument(e,t){return new ar(e,2,t,It.min(),It.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,It.min(),It.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lu{constructor(e,t){this.position=e,this.inclusive=t}}function QS(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Je.comparator(Je.fromName(l.referenceValue),t.key):ql(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function JS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cu(n.position[t],e.position[t]))return!1;return!0}class tg{constructor(e,t="asc"){this.field=e,this.dir=t}}function AR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class XS{}class un extends XS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new MR(e,t,r):"array-contains"===t?new eA(e,r):"in"===t?new lC(e,r):"not-in"===t?new tA(e,r):"array-contains-any"===t?new NR(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new xR(e,r):new RR(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ql(t,this.value)):null!==t&&ma(this.value)===ma(t)&&this.matchesComparison(ql(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class kn extends XS{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new kn(e,t)}matches(e){return ng(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ng(n){return"and"===n.op}function aC(n){return"or"===n.op}function py(n){return gy(n)&&ng(n)}function gy(n){for(const e of n.filters)if(e instanceof kn)return!1;return!0}function my(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Vh(n.value);if(py(n))return n.filters.map(e=>my(e)).join(",");{const e=n.filters.map(t=>my(t)).join(",");return`${n.op}(${e})`}}function uC(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&cu(t.value,r.value)):n instanceof kn?function(t,r){return r instanceof kn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&uC(u,r.filters[l]),!0)}(n,e):void st();var t,r}function rg(n,e){const t=n.filters.concat(e);return kn.create(t,n.op)}function cC(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${Vh(e.value)}`:n instanceof kn?function(e){return e.op.toString()+" {"+e.getFilters().map(cC).join(" ,")+"}"}(n):"Filter";var e}class MR extends un{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class xR extends un{constructor(e,t){super(e,"in",t),this.keys=x0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RR extends un{constructor(e,t){super(e,"not-in",t),this.keys=x0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function x0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class eA extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uh(t)&&Xp(t.arrayValue,this.value)}}class lC extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xp(this.value.arrayValue,t)}}class tA extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xp(this.value.arrayValue,t)}}class NR extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xp(this.value.arrayValue,r))}}class nA{constructor(e,t=null,r=[],o=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function yy(n,e=null,t=[],r=[],o=null,u=null,l=null){return new nA(n,e,t,r,o,u,l)}function Dc(n){const e=nt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>my(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),zl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),e.dt=t}return e.dt}function vy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JS(n.startAt,e.startAt)&&JS(n.endAt,e.endAt)}function vs(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _y(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function Ey(n,e,t){let r=Jp,o=!0;for(const u of _y(n,e)){let l=Jp,g=!0;switch(u.op){case"<":case"<=":l=iC(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=Jp}A0({value:r,inclusive:o},{value:l,inclusive:g})<0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];A0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function R0(n,e,t){let r=wc,o=!0;for(const u of _y(n,e)){let l=wc,g=!0;switch(u.op){case">=":case">":l=sC(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=wc}M0({value:r,inclusive:o},{value:l,inclusive:g})>0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];M0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class du{constructor(e,t=null,r=[],o=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function rA(n,e,t,r,o,u,l,g){return new du(n,e,t,r,o,u,l,g)}function Hr(n){return new du(n)}function dC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ig(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function N0(n){return null!==n.collectionGroup}function hu(n){const e=nt(n);if(null===e.wt){e.wt=[];const t=wy(e),r=ig(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new tg(t)),e.wt.push(new tg(gr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new tg(gr.keyField(),u))}}}return e.wt}function Li(n){const e=nt(n);if(!e._t)if("F"===e.limitType)e._t=yy(e.path,e.collectionGroup,hu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of hu(e))t.push(new tg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new lu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new lu(e.startAt.position,e.startAt.inclusive):null;e._t=yy(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function Iy(n,e){e.getFirstInequalityField(),wy(n);const t=n.filters.concat([e]);return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Dy(n,e,t){return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jh(n,e){return vy(Li(n),Li(e))&&n.limitType===e.limitType}function O0(n){return`${Dc(Li(n))}|lt:${n.limitType}`}function Cy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>cC(r)).join(", ")}]`),zl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vh(r)).join(",")),`Target(${t})`}(Li(n))}; limitType=${n.limitType})`}function $h(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of hu(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const g=QS(o,u,l);return o.inclusive?g<=0:g<0}(t.startAt,hu(t),r)||t.endAt&&!function(o,u,l){const g=QS(o,u,l);return o.inclusive?g>=0:g>0}(t.endAt,hu(t),r)));var t,r}function hC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function P0(n){return(e,t)=>{let r=!1;for(const o of hu(n)){const u=iA(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function iA(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(o,u,l){const g=u.data.field(o),_=l.data.field(o);return null!==g&&null!==_?ql(g,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return D0(this.inner)}size(){return this.innerSize}}const Cc=new Pn(Je.comparator);function es(){return Cc}const by=new Pn(Je.comparator);function Zl(...n){let e=by;for(const t of n)e=e.insert(t.key,t);return e}function fC(n){let e=by;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fu(){return sg()}function k0(){return sg()}function sg(){return new jo(n=>n.toString(),(n,e)=>n.isEqual(e))}const sA=new Pn(Je.comparator),oA=new Bn(Je.comparator);function Gt(...n){let e=oA;for(const t of n)e=e.add(t);return e}const pC=new Bn(Ut);function gC(){return pC}function F0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function mC(n){return{integerValue:""+n}}function L0(n,e){return UD(e)?mC(e):F0(n,e)}class V0{constructor(){this._=void 0}}function U0(n,e,t){return n instanceof Hh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&C0(o)&&(o=Yp(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof bc?j0(n,e):n instanceof lo?og(n,e):function(r,o){const u=B0(r,o),l=$0(u)+$0(r.gt);return T0(u)&&T0(r.gt)?mC(l):F0(r.serializer,l)}(n,e)}function yC(n,e,t){return n instanceof bc?j0(n,e):n instanceof lo?og(n,e):t}function B0(n,e){return n instanceof Kl?T0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hh extends V0{}class bc extends V0{constructor(e){super(),this.elements=e}}function j0(n,e){const t=vC(e);for(const r of n.elements)t.some(o=>cu(o,r))||t.push(r);return{arrayValue:{values:t}}}class lo extends V0{constructor(e){super(),this.elements=e}}function og(n,e){let t=vC(e);for(const r of n.elements)t=t.filter(o=>!cu(o,r));return{arrayValue:{values:t}}}class Kl extends V0{constructor(e,t){super(),this.serializer=e,this.gt=t}}function $0(n){return er(n.integerValue||n.doubleValue)}function vC(n){return Uh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ag{constructor(e,t){this.field=e,this.transform=t}}class _C{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ty(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class H0{}function aA(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ug(n.key,ur.none()):new Gh(n.key,n.data,ur.none());{const t=n.data,r=Ii.empty();let o=new Bn(gr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Tc(n.key,r,new ys(o.toArray()),ur.none())}}function PR(n,e,t){n instanceof Gh?function(r,o,u){const l=r.value.clone(),g=lA(r.fieldTransforms,o,u.transformResults);l.setAll(g),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Tc?function(r,o,u){if(!Ty(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=lA(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(cA(r)),g.setAll(l),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zh(n,e,t,r){return n instanceof Gh?function(o,u,l,g){if(!Ty(o.precondition,u))return l;const _=o.value.clone(),b=dA(o.fieldTransforms,g,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tc?function(o,u,l,g){if(!Ty(o.precondition,u))return l;const _=dA(o.fieldTransforms,g,u),b=u.data;return b.setAll(cA(o)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Ty(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function uA(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=B0(r.transform,o||null);null!=u&&(null===t&&(t=Ii.empty()),t.set(r.field,u))}return t||null}function EC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Hl(t,r,(o,u)=>function OR(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof bc&&r instanceof bc||t instanceof lo&&r instanceof lo?Hl(t.elements,r.elements,cu):t instanceof Kl&&r instanceof Kl?cu(t.gt,r.gt):t instanceof Hh&&r instanceof Hh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Gh extends H0{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Tc extends H0{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function cA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lA(n,e,t){const r=new Map;wt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,g=e.data.field(u.field);r.set(u.field,yC(l,g,t[o]))}return r}function dA(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,U0(u,l,e))}return r}class ug extends H0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z0 extends H0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wh{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&PR(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=k0();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(o.key)?null:g;const _=aA(l,g);null!==_&&r.set(o.key,_),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,(t,r)=>EC(t,r))&&Hl(this.baseMutations,e.baseMutations,(t,r)=>EC(t,r))}}class G0{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){wt(e.mutations.length===r.length);let o=sA;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new G0(e,t,r,o)}}class W0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yl{constructor(e,t){this.count=e,this.unchangedNames=t}}var kr,rn;function Sy(n){switch(n){default:return st();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function IC(n){if(void 0===n)return Or("GRPC error has no .code"),ue.UNKNOWN;switch(n){case kr.OK:return ue.OK;case kr.CANCELLED:return ue.CANCELLED;case kr.UNKNOWN:return ue.UNKNOWN;case kr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case kr.INTERNAL:return ue.INTERNAL;case kr.UNAVAILABLE:return ue.UNAVAILABLE;case kr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case kr.NOT_FOUND:return ue.NOT_FOUND;case kr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case kr.ABORTED:return ue.ABORTED;case kr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case kr.DATA_LOSS:return ue.DATA_LOSS;default:return st()}}(rn=kr||(kr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class cg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return qh}static getOrCreateInstance(){return null===qh&&(qh=new cg),qh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let qh=null;function lg(){return new TextEncoder}const kR=new mc([4294967295,4294967295],0);function hA(n){const e=lg().encode(n),t=new ND;return t.update(e),new Uint8Array(t.digest())}function fA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mc([t,r],0),new mc([o,u],0)]}class Ay{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new dg(`Invalid padding: ${t}`);if(r<0)throw new dg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new dg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new dg(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=mc.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(mc.fromNumber(r)));return 1===o.compare(kR)&&(o=new mc([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=hA(e),[r,o]=fA(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Ay(u,o,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=hA(e),[r,o]=fA(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class dg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,fg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hg(It.min(),o,new Pn(Ut),es(),Gt())}}class fg{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fg(r,t,Gt(),Gt(),Gt())}}class My{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class q0{constructor(e,t){this.targetId=e,this.Vt=t}}class Z0{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class K0{constructor(){this.St=0,this.Dt=Y0(),this.Ct=Pr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gt(),t=Gt(),r=Gt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new fg(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Y0()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class pA{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=es(),this.zt=DC(),this.Wt=new Pn(Ut)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(vs(l))if(0===o){const g=new Je(l.path);this.Yt(r,g,ar.newNoDocument(g,It.min()))}else wt(1===o);else{const g=this.ie(r);if(g!==o){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=cg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,S,N){var G,ne,ve,De,Me,lt;const Mt={localCacheCount:S,existenceFilterCount:N.count},ot=N.unchangedNames;return ot&&(Mt.bloomFilter={applied:0===b,hashCount:null!==(G=ot?.hashCount)&&void 0!==G?G:0,bitmapLength:null!==(De=null===(ve=null===(ne=ot?.bits)||void 0===ne?void 0:ne.bitmap)||void 0===ve?void 0:ve.length)&&void 0!==De?De:0,padding:null!==(lt=null===(Me=ot?.bits)||void 0===Me?void 0:Me.padding)&&void 0!==lt?lt:0}),Mt}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,b;try{_=Bo(u).toUint8Array()}catch(S){if(S instanceof JD)return Ls("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{b=new Ay(_,l,g)}catch(S){return Ls(S instanceof dg?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&vs(g.target)){const _=new Je(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,ar.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Gt();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const b=this.se(_);return!b||"TargetPurposeLimboResolution"===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new hg(e,t,this.Wt,this.jt,r);return this.jt=es(),this.zt=DC(),this.Wt=new Pn(Ut),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new K0,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Bn(Ut),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new K0),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function DC(){return new Pn(Je.comparator)}function Y0(){return new Pn(Je.comparator)}const Q0={asc:"ASCENDING",desc:"DESCENDING"},FR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CC={and:"AND",or:"OR"};class J0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function X0(n,e){return n.useProto3Json||zl(e)?e:{value:e}}function Zh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LR(n,e){return Zh(n,e.toTimestamp())}function Fr(n){return wt(!!n),It.fromTimestamp(function(e){const t=Ec(e);return new Xn(t.seconds,t.nanos)}(n))}function eE(n,e){return(t=n,new hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bC(n){const e=hn.fromString(n);return wt(wA(e)),e}function pg(n,e){return eE(n.databaseId,e.path)}function $o(n,e){const t=bC(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(Ry(t))}function xy(n,e){return eE(n.databaseId,e)}function mA(n){const e=bC(n);return 4===e.length?hn.emptyPath():Ry(e)}function gg(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ry(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tE(n,e,t){return{name:pg(n,e),fields:t.value.mapValue.fields}}function nE(n,e,t){const r=$o(n,e.name),o=Fr(e.updateTime),u=e.createTime?Fr(e.createTime):It.min(),l=new Ii({mapValue:{fields:e.fields}}),g=ar.newFoundDocument(r,o,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function mg(n,e){let t;if(e instanceof Gh)t={update:tE(n,e.key,e.value)};else if(e instanceof ug)t={delete:pg(n,e.key)};else if(e instanceof Tc)t={update:tE(n,e.key,e.data),updateMask:BR(e.fieldMask)};else{if(!(e instanceof z0))return st();t={verify:pg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Hh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Kl)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:LR(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function iE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ur.updateTime(Fr(o.updateTime)):void 0!==o.exists?ur.exists(o.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let g=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),g=new Hh):"appendMissingElements"in l?g=new bc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new lo(l.removeAllFromArray.values||[]):"increment"in l?g=new Kl(u,l.increment):st();const _=gr.fromServerFormat(l.fieldPath);return new ag(_,g)}(n,o)):[];var o;if(e.update){const o=$o(n,e.update.name),u=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ys((e.updateMask.fieldPaths||[]).map(b=>gr.fromServerFormat(b)));return new Tc(o,u,l,t,r)}return new Gh(o,u,t,r)}if(e.delete){const o=$o(n,e.delete);return new ug(o,t)}if(e.verify){const o=$o(n,e.verify);return new z0(o,t)}return st()}function sE(n,e){return{documents:[xy(n,e.path)]}}function SC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0!==_.length)return EA(kn.create(_,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Sc((S=b).field),direction:_A(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=X0(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function AC(n){let e=mA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){wt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const N=vA(S);return N instanceof kn&&py(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new tg(yg((N=S).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(S){let N;return N="object"==typeof S?S.value:S,zl(N)?null:N}(t.limit));let _=null;var S;t.startAt&&(_=new lu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new lu(S.values||[],!S.before)}(t.endAt)),rA(e,o,l,u,g,"F",_,b)}function vA(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yg(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=yg(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yg(e.unaryFilter.field);return un.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=yg(e.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?un.create(yg((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return kn.create(e.compositeFilter.filters.map(t=>vA(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function _A(n){return Q0[n]}function VR(n){return FR[n]}function UR(n){return CC[n]}function Sc(n){return{fieldPath:n.canonicalString()}}function yg(n){return gr.fromServerFormat(n.fieldPath)}function EA(n){return n instanceof un?function(e){if("=="===e.op){if(nC(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NAN"}};if(S0(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nC(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NOT_NAN"}};if(S0(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sc(e.field),op:VR(e.op),value:e.value}}}(n):n instanceof kn?function(e){const t=e.getFilters().map(r=>EA(r));return 1===t.length?t[0]:{compositeFilter:{op:UR(e.op),filters:t}}}(n):st()}function BR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wA(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ac{constructor(e,t,r,o,u=It.min(),l=It.min(),g=Pr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Ac(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ac(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class MC{constructor(e){this.fe=e}}function IA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:pg(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Zh(o,u.version.toTimestamp()),createTime:Zh(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kh(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Kh(e.version)}}var o,u;return r}function oE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yh(n){const e=new Xn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Ql(n,e){const t=(e.baseMutations||[]).map(u=>iE(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>iE(n.fe,u)),o=Xn.fromMillis(e.localWriteTimeMs);return new Wh(e.batchId,o,t,r)}function Oy(n){const e=Yh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yh(n.lastLimboFreeSnapshotVersion):It.min();let r;var o;return void 0!==n.query.documents?(wt(1===(o=n.query).documents.length),r=Li(Hr(mA(o.documents[0])))):r=Li(AC(n.query)),new Ac(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function i(n,e){const t=Kh(e.snapshotVersion),r=Kh(e.lastLimboFreeSnapshotVersion);let o;o=vs(e.target)?sE(n.fe,e.target):SC(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function s(n){const e=AC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Dy(e,e.limit,"L"):e}function a(n,e){return new W0(e.largestBatchId,iE(n.fe,e.overlayMutation))}function c(n,e){const t=e.path.lastSegment();return[n,Ei(e.path.popLast()),t]}function d(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Kh(r.readTime),documentKey:Ei(r.documentKey.path),largestBatchId:r.largestBatchId}}class f{getBundleMetadata(e,t){return y(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Yh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return y(e).put({bundleId:(r=t).id,createTime:Kh(Fr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return E(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:s(o.bundledQuery),readTime:Yh(o.readTime)};var o})}saveNamedQuery(e,t){return E(e).put({name:(r=t).name,readTime:Kh(Fr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function y(n){return hi(n,"bundles")}function E(n){return hi(n,"namedQueries")}class D{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new D(e,t.uid||"")}getOverlay(e,t){return T(e).get(c(this.userId,t)).next(r=>r?a(this.serializer,r):null)}getOverlays(e,t){const r=fu();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const g=new W0(t,l);o.push(this.we(e,g))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Ei(l.getCollectionPath())));const u=[];return o.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(T(e).J("collectionPathOverlayIndex",g))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=fu(),u=Ei(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return T(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const b=a(this.serializer,_);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=fu();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return T(e).X({index:"collectionGroupOverlayIndex",range:g},(_,b,S)=>{const N=a(this.serializer,b);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):S.done()}).next(()=>u)}we(e,t){return T(e).put(function(r,o,u){const[l,g,_]=c(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:mg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function T(n){return hi(n,"documentOverlays")}class x{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),kh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Bo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?rC(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):st()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Je.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function U(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function q(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=U(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}x.Ve=new x;class X{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=q(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=q(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class we{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ve{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Ke{constructor(){this.je=new X,this.ze=new we(this.je),this.We=new Ve(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ct{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ct(this.indexId,this.documentKey,this.arrayValue,r)}}function Ie(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Bt(n.arrayValue,e.arrayValue),0!==t?t:(t=Bt(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function Bt(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nn{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=p0(e);if(void 0!==t&&!this.en(t))return!1;const r=Vo(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function sn(n){var e,t;if(wt(n instanceof un||n instanceof kn),n instanceof un){if(n instanceof lC){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>un.create(n.field,"==",u)))||[];return kn.create(o,"or")}return n}const r=n.filters.map(o=>sn(o));return kn.create(r,n.op)}function Vi(n){if(0===n.getFilters().length)return[];const e=DA(sn(n));return wt(xC(e)),Qh(e)||aE(e)?[e]:e.getFilters()}function Qh(n){return n instanceof un}function aE(n){return n instanceof kn&&py(n)}function xC(n){return Qh(n)||aE(n)||function(e){if(e instanceof kn&&aC(e)){for(const t of e.getFilters())if(!Qh(t)&&!aE(t))return!1;return!0}return!1}(n)}function DA(n){if(wt(n instanceof un||n instanceof kn),n instanceof un)return n;if(1===n.filters.length)return DA(n.filters[0]);const e=n.filters.map(r=>DA(r));let t=kn.create(e,n.op);return t=RC(t),xC(t)?t:(wt(t instanceof kn),wt(ng(t)),wt(t.filters.length>1),t.filters.reduce((r,o)=>CA(r,o)))}function CA(n,e){let t;return wt(n instanceof un||n instanceof kn),wt(e instanceof un||e instanceof kn),t=n instanceof un?e instanceof un?kn.create([n,e],"and"):$R(n,e):e instanceof un?$R(e,n):function(r,o){if(wt(r.filters.length>0&&o.filters.length>0),ng(r)&&ng(o))return rg(r,o.getFilters());const u=aC(r)?r:o,l=aC(r)?o:r,g=u.filters.map(_=>CA(_,l));return kn.create(g,"or")}(n,e),RC(t)}function $R(n,e){if(ng(e))return rg(e,n.getFilters());{const t=e.filters.map(r=>CA(n,r));return kn.create(t,"or")}}function RC(n){if(wt(n instanceof un||n instanceof kn),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return RC(e[0]);if(gy(n))return n;const t=e.map(o=>RC(o)),r=[];return t.forEach(o=>{o instanceof un?r.push(o):o instanceof kn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:kn.create(r,n.op)}class CP{constructor(){this.rn=new bA}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Vs.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class bA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bn(hn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bn(hn.comparator)).toArray()}}const NC=new Uint8Array(0);class bP{constructor(e,t){this.user=e,this.databaseId=t,this.on=new bA,this.un=new jo(r=>Dc(r),(r,o)=>vy(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ei(o)};return HR(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[f0(t),""],!1,!0);return HR(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ga(l.parent))}return r})}addFieldIndex(e,t){const r=OC(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=cE(e);return u.next(g=>{l.put(d(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=OC(e),o=cE(e),u=uE(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=uE(e);let o=!0;const u=new Map;return oe.forEach(this.cn(t),l=>this.an(e,l).next(g=>{o&&(o=!!g),u.set(l,g)})).next(()=>{if(o){let l=Gt();const g=[];return oe.forEach(u,(_,b)=>{var S;Le("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`} to execute ${Dc(t)}`);const N=function(ot,xt){const $t=p0(xt);if(void 0===$t)return null;for(const on of _y(ot,$t.fieldPath))switch(on.op){case"array-contains-any":return on.value.arrayValue.values||[];case"array-contains":return[on.value]}return null}(b,_),G=function(ot,xt){const $t=new Map;for(const on of Vo(xt))for(const ws of _y(ot,on.fieldPath))switch(ws.op){case"==":case"in":$t.set(on.fieldPath.canonicalString(),ws.value);break;case"not-in":case"!=":return $t.set(on.fieldPath.canonicalString(),ws.value),Array.from($t.values())}return null}(b,_),ne=function(ot,xt){const $t=[];let on=!0;for(const ws of Vo(xt)){const Sg=0===ws.kind?Ey(ot,ws.fieldPath,ot.startAt):R0(ot,ws.fieldPath,ot.startAt);$t.push(Sg.value),on&&(on=Sg.inclusive)}return new lu($t,on)}(b,_),ve=function(ot,xt){const $t=[];let on=!0;for(const ws of Vo(xt)){const Sg=0===ws.kind?R0(ot,ws.fieldPath,ot.endAt):Ey(ot,ws.fieldPath,ot.endAt);$t.push(Sg.value),on&&(on=Sg.inclusive)}return new lu($t,on)}(b,_),De=this.hn(_,b,ne),Me=this.hn(_,b,ve),lt=this.ln(_,b,G),Mt=this.fn(_.indexId,N,De,ne.inclusive,Me,ve.inclusive,lt);return oe.forEach(Mt,ot=>r.H(ot,t.limit).next(xt=>{xt.forEach($t=>{const on=Je.fromSegments($t.documentKey);l.has(on)||(l=l.add(on),g.push(on))})}))}).next(()=>g)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Vi(kn.create(e.filters,"and")).map(r=>yy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let N=0;N<_;++N){const G=t?this.dn(t[N/b]):NC,ne=this.wn(e,G,r[N%b],o),ve=this._n(e,G,u[N%b],l),De=g.map(Me=>this.wn(e,G,Me,!0));S.push(...this.createRange(ne,ve,De))}return S}wn(e,t,r,o){const u=new ct(e,Je.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new ct(e,Je.empty(),t,r);return o?u.Je():u}an(e,t){const r=new nn(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return oe.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Bn(gr.comparator),b=!1;for(const S of g.filters)for(const N of S.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:_=_.add(N.field));for(const S of g.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new Ke;for(const o of Vo(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);x.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Ke;return x.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Ke;return x.Ve._e(Ic(this.databaseId,t),r.He(function(o){const u=Vo(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new Ke);let u=0;for(const l of Vo(e)){const g=r[u++];for(const _ of o)if(this.yn(t,l.fieldPath)&&Uh(g))o=this.pn(o,l,g);else{const b=_.He(l.kind);x.Ve._e(g,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of o){const _=new Ke;_.seed(g.Qe()),x.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=OC(e),o=cE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return oe.forEach(u,g=>o.get([g.indexId,this.uid]).next(_=>{l.push(function(b,S){const N=S?new qp(S.sequenceNumber,new Vs(Yh(S.readTime),new Je(ga(S.documentKey)),S.largestBatchId)):qp.empty(),G=b.fields.map(([ne,ve])=>new Rh(gr.fromServerFormat(ne),ve));return new ly(b.indexId,b.collectionGroup,G,N)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=OC(e),u=cE(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>oe.forEach(g,_=>u.put(d(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),oe.forEach(g,_=>this.En(e,o,_).next(b=>{const S=this.An(u,_);return b.isEqual(S)?oe.resolve():this.vn(e,u,_,b,S)}))))})}Rn(e,t,r,o){return uE(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return uE(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=uE(e);let u=new Bn(Ie);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new ct(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Bn(Ie);const o=this.mn(t,e);if(null==o)return r;const u=p0(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Uh(l))for(const g of l.arrayValue.values||[])r=r.add(new ct(t.indexId,e.key,this.dn(g),o))}else r=r.add(new ct(t.indexId,e.key,NC,o));return r}vn(e,t,r,o,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,b,S,N){const G=g.getIterator(),ne=_.getIterator();let ve=Wl(G),De=Wl(ne);for(;ve||De;){let Me=!1,lt=!1;if(ve&&De){const Mt=b(ve,De);Mt<0?lt=!0:Mt>0&&(Me=!0)}else null!=ve?lt=!0:Me=!0;Me?(S(De),De=Wl(ne)):lt?(N(ve),ve=Wl(G)):(ve=Wl(G),De=Wl(ne))}}(o,u,Ie,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),oe.waitFor(l)}Tn(e){let t=1;return cE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>Ie(l,g)).filter((l,g,_)=>!g||0!==Ie(l,_[g-1]));const o=[];o.push(e);for(const l of r){const g=Ie(l,e),_=Ie(l,t);if(0===g)o[0]=e.Je();else if(g>0&&_<0)o.push(l),o.push(l.Je());else if(_>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,NC,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,NC,[]]))}return u}bn(e,t){return Ie(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zR)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||st())).next(zR)}}function HR(n){return hi(n,"collectionParents")}function uE(n){return hi(n,"indexEntries")}function OC(n){return hi(n,"indexConfiguration")}function cE(n){return hi(n,"indexState")}function zR(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;g0(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Vs(e.readTime,e.documentKey,t)}const GR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _s{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WR(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(S,N,G)=>(g++,G.delete()));u.push(_.next(()=>{wt(1===g)}));const b=[];for(const S of t.mutations){const N=v0(e,S.key.path,t.batchId);u.push(o.delete(N)),b.push(S.key)}return oe.waitFor(u).next(()=>b)}function PC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(41943040,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);class kC{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new kC(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jh(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Py(e),l=Jh(e);return l.add({}).next(g=>{wt("number"==typeof g);const _=new Wh(g,t,r,o),b=function(G,ne,ve){const De=ve.baseMutations.map(lt=>mg(G.fe,lt)),Me=ve.mutations.map(lt=>mg(G.fe,lt));return{userId:ne,batchId:ve.batchId,localWriteTimeMs:ve.localWriteTime.toMillis(),baseMutations:De,mutations:Me}}(this.serializer,this.userId,_),S=[];let N=new Bn((G,ne)=>Ut(G.canonicalString(),ne.canonicalString()));for(const G of o){const ne=v0(this.userId,G.key.path,g);N=N.add(G.key.path.popLast()),S.push(l.put(b)),S.push(u.put(ne,_0))}return N.forEach(G=>{S.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),oe.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return Jh(e).get(t).next(r=>r?(wt(r.userId===this.userId),Ql(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Jh(e).X({index:"userMutationsIndex",range:o},(l,g,_)=>{g.userId===this.userId&&(wt(g.batchId>=r),u=Ql(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jh(e).j("userMutationsIndex",t).next(r=>r.map(o=>Ql(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Fh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Py(e).X({range:o},(l,g,_)=>{const[b,S,N]=l,G=ga(S);if(b===this.userId&&t.path.isEqual(G))return Jh(e).get(N).next(ne=>{if(!ne)throw st();wt(ne.userId===this.userId),u.push(Ql(this.serializer,ne))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Ut);const o=[];return t.forEach(u=>{const l=Fh(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Py(e).X({range:g},(b,S,N)=>{const[G,ne,ve]=b,De=ga(ne);G===this.userId&&u.path.isEqual(De)?r=r.add(ve):N.done()});o.push(_)}),oe.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Fh(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Bn(Ut);return Py(e).X({range:l},(_,b,S)=>{const[N,G,ne]=_,ve=ga(G);N===this.userId&&r.isPrefixOf(ve)?ve.length===o&&(g=g.add(ne)):S.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Jh(e).get(u).next(l=>{if(null===l)throw st();wt(l.userId===this.userId),r.push(Ql(this.serializer,l))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return WR(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Py(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=ga(u[1]);o.push(_)}else g.done()}).next(()=>{wt(0===o.length)})})}containsKey(e,t){return qR(e,this.userId,t)}xn(e){return ZR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qR(n,e,t){const r=Fh(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Py(n).X({range:u,Y:!0},(g,_,b)=>{const[S,N,G]=g;S===e&&N===o&&(l=!0),b.done()}).next(()=>l)}function Jh(n){return hi(n,"mutations")}function Py(n){return hi(n,"documentMutations")}function ZR(n){return hi(n,"mutationQueues")}class vg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vg(0)}static Mn(){return new vg(-1)}}class TP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new vg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>It.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ky(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ky(e).X((l,g)=>{const _=Oy(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ky(e).X((r,o)=>{const u=Oy(o);t(u)})}$n(e){return KR(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return KR(e).put("targetGlobalKey",t)}Fn(e,t){return ky(e).put(i(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ky(e).X({range:o,index:"queryTargetsIndex"},(l,g,_)=>{const b=Oy(g);vy(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Xh(e);return t.forEach(l=>{const g=Ei(l.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=Xh(e);return oe.forEach(t,u=>{const l=Ei(u.path);return oe.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Xh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Xh(e);let u=Gt();return o.X({range:r,Y:!0},(l,g,_)=>{const b=ga(l[1]),S=new Je(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ei(t.path),o=IDBKeyRange.bound([r],[f0(r)],!1,!0);let u=0;return Xh(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,g],_,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return ky(e).get(t).next(r=>r?Oy(r):null)}}function ky(n){return hi(n,"targets")}function KR(n){return hi(n,"targetGlobal")}function Xh(n){return hi(n,"targetDocuments")}function YR([n,e],[t,r]){const o=Ut(n,t);return 0===o?Ut(e,r):o}class SP{constructor(e){this.Ln=e,this.buffer=new Bn(YR),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){yc(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield uu(r)}yield t.Qn(3e5)}))}}class AP{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(ms.ct);const r=new SP(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(GR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GR):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,g,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),d0()<=No.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${o} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class MP{constructor(e,t){this.db=e,this.garbageCollector=function JR(n,e){return new AP(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return FC(e,r)}removeReference(e,t,r){return FC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return FC(e,t)}Xn(e,t){return function(r,o){let u=!1;return ZR(r).Z(l=>qR(r,l,o).next(g=>(g&&(u=!0),oe.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),Xh(e).delete([0,Ei(l.path)])))});o.push(_)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return FC(e,t)}Yn(e,t){const r=Xh(e);let o,u=ms.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:b})=>{0===l?(u!==ms.ct&&t(new Je(ga(o)),u),u=b,o=_):u=ms.ct}).next(()=>{u!==ms.ct&&t(new Je(ga(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function FC(n,e){return Xh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ei(e.path),sequenceNumber:r}));var r}class XR{constructor(){this.changes=new jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _g(e).put(r)}removeEntry(e,t,r){return _g(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oE(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=ar.newInvalidDocument(t);return _g(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lE(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:ar.newInvalidDocument(t)};return _g(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lE(t))},(o,u)=>{r={document:this.ts(t,u),size:PC(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=es(),o=new Pn(Je.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),o=o.insert(u,PC(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let o=new Bn(rN);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(lE(o.first()),lE(o.last())),l=o.getIterator();let g=l.getNext();return _g(e).X({index:"documentKeyIndex",range:u},(_,b,S)=>{const N=Je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&rN(g,N)<0;)r(g,null),g=l.getNext();g&&g.isEqual(N)&&(r(g,b),g=l.hasNext()?l.getNext():null),g?S.G(lE(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),oE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _g(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let b=es();for(const S of _){const N=this.ts(Je.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);N.isFoundDocument()&&($h(t,N)||o.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=es();const l=nN(t,r),g=nN(t,Vs.max());return _g(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,b,S)=>{const N=this.ts(Je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new RP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tN(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return tN(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function jR(n,e){let t;if(e.document)t=nE(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),o=Yh(e.noDocument.readTime);t=ar.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Je.fromSegments(e.unknownDocument.path),o=Yh(e.unknownDocument.version);t=ar.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Xn(r[0],r[1]);return It.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return ar.newInvalidDocument(e)}}function eN(n){return new xP(n)}class RP extends XR{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new jo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Bn((u,l)=>Ut(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=IA(this.os.serializer,l);o=o.add(u.path.popLast());const b=PC(_);r+=b-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=IA(this.os.serializer,l.convertToNoDocument(It.min()));t.push(this.os.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function tN(n){return hi(n,"remoteDocumentGlobal")}function _g(n){return hi(n,"remoteDocumentsV14")}function lE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nN(n,e){const t=e.documentKey.path.toArray();return[n,oE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rN(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ut(t[u],r[u]),o)return o;return o=Ut(t.length,r.length),o||(o=Ut(t[t.length-2],r[r.length-2]),o||Ut(t[t.length-1],r[r.length-1]))}class NP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iN{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&zh(r.mutation,o,ys.empty(),Xn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const o=fu();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Zl();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=fu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,o){let u=es();const l=sg(),g=sg();return t.forEach((_,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof Tc)?u=u.insert(b.key,b):void 0!==S?(l.set(b.key,S.mutation.getFieldMask()),zh(S.mutation,b,S.mutation.getFieldMask(),Xn.now())):l.set(b.key,ys.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var N;return g.set(b,new NP(S,null!==(N=l.get(b))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=sg();let o=new Pn((l,g)=>l-g),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let S=r.get(_)||ys.empty();S=g.applyToLocalView(b,S),r.set(_,S);const N=(o.get(g.batchId)||Gt()).add(_);o=o.insert(g.batchId,N)})}).next(()=>{const l=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),b=_.key,S=_.value,N=k0();S.forEach(G=>{if(!u.has(G)){const ne=aA(t.get(G),r.get(G));null!==ne&&N.set(G,ne),u=u.add(G)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):N0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(fu());let g=-1,_=u;return l.next(b=>oe.forEach(b,(S,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(S)?oe.resolve():this.remoteDocumentCache.getEntry(e,S).next(G=>{_=_.insert(S,G)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,Gt())).next(S=>({batchId:g,changes:fC(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let o=Zl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Zl();return this.indexManager.getCollectionParents(e,o).next(l=>oe.forEach(l,g=>{const _=(b=t,S=g.child(o),new du(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((g,_)=>{const b=_.getKey();null===u.get(b)&&(u=u.insert(b,ar.newInvalidDocument(b)))});let l=Zl();return u.forEach((g,_)=>{const b=o.get(g);void 0!==b&&zh(b.mutation,_,ys.empty(),Xn.now()),$h(t,_)&&(l=l.insert(g,_))}),l})}}class OP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Fr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:s(r.bundledQuery),readTime:Fr(r.readTime)}),oe.resolve();var r}}class PP{constructor(){this.overlays=new Pn(Je.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fu();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=fu(),u=t.length+1,l=new Je(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Pn((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=fu(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const g=fu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>g.set(b,S)),!(g.size()>=o)););return oe.resolve(g)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new W0(t,r));let u=this.ls.get(t);void 0===u&&(u=Gt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class TA{constructor(){this.fs=new Bn(Ui.ds),this.ws=new Bn(Ui._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ui(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Je(new hn([])),r=new Ui(t,e),o=new Ui(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Je(new hn([])),r=new Ui(t,e),o=new Ui(t,e+1);let u=Gt();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Ui(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Je.comparator(e.key,t.key)||Ut(e.As,t.As)}static _s(e,t){return Ut(e.As,t.As)||Je.comparator(e.key,t.key)}}class kP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Bn(Ui.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new Wh(u,t,r,o);this.mutationQueue.push(l);for(const g of o)this.Rs=this.Rs.add(new Ui(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),o=new Ui(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const g=this.Ps(l.As);u.push(g)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Ut);return t.forEach(o=>{const u=new Ui(o,0),l=new Ui(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Je.isDocumentKey(u)||(u=u.child(""));const l=new Ui(new Je(u),0);let g=new Bn(Ut);return this.Rs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(_.As)),!0)},l),oe.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,o=>{const u=new Ui(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ui(t,0),o=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FP{constructor(e){this.Ds=e,this.docs=new Pn(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ar.newInvalidDocument(o))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=es();const l=t.path,g=new Je(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:b,value:{document:S}}=_.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||g0(Nh(S),r)<=0||(o.has(S.key)||$h(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,t,r,o){st()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LP(this)}getSize(e){return oe.resolve(this.size)}}class LP extends XR{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class VP{constructor(e){this.persistence=e,this.xs=new jo(t=>Dc(t),vy),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ns=0,this.ks=new TA,this.targetCount=0,this.Ms=vg.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new vg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class SA{constructor(e,t){this.$s={},this.overlays={},this.Os=new ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new VP(this),this.indexManager=new CP,this.remoteDocumentCache=new FP(r=>this.referenceDelegate.Ls(r)),this.serializer=new MC(t),this.qs=new OP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new kP(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const o=new UP(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class UP extends Zp{constructor(e){super(),this.currentSequenceNumber=e}}class LC{constructor(e){this.persistence=e,this.Qs=new TA,this.js=null}static zs(e){return new LC(e)}get Ws(){if(this.js)return this.js;throw st()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const o=Je.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,It.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class BP{constructor(e){this.serializer=e}O(e,t,r,o){const u=new Oh("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hy,{unique:!0}),g.createObjectStore("documentMutations"),sN(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),sN(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hy,{unique:!0});const S=_.store("mutations"),N=b.map(G=>S.put(G));return oe.waitFor(N)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:ZS});_.createIndex("collectionPathOverlayIndex",WD,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",qD,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:E0});_.createIndex("documentKeyIndex",HS),_.createIndex("collectionGroupIndex",zS)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:HD}).createIndex("sequenceNumberIndex",qS,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:zD}).createIndex("documentKeyIndex",GD,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=PC(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>oe.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>oe.forEach(g,_=>{wt(_.userId===u.userId);const b=Ql(this.serializer,_);return WR(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,g)=>{const _=new hn(l),b=[0,Ei(_)];u.push(t.get(b).next(S=>S?oe.resolve():t.put({targetId:0,path:Ei(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:w0});const r=t.store("collectionParents"),o=new bA,u=l=>{if(o.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:Ei(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new hn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],b)=>{const S=ga(g);return u(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=Oy(o),l=i(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(b=l,b.document?new Je(hn.fromString(b.document.name).popFirst(5)):b.noDocument?Je.fromSegments(b.noDocument.path):b.unknownDocument?Je.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(g.put(S))}).next(()=>oe.waitFor(o))}si(e,t){const r=t.store("mutations"),o=eN(this.serializer),u=new SA(LC.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var b;let S=null!==(b=g.get(_.userId))&&void 0!==b?b:Gt();Ql(this.serializer,_).keys().forEach(N=>S=S.add(N)),g.set(_.userId,S)}),oe.forEach(g,(_,b)=>{const S=new ti(b),N=D.de(this.serializer,S),G=u.getIndexManager(S),ne=kC.de(S,this.serializer,G,u.referenceDelegate);return new iN(o,ne,N,G).recalculateAndSaveOverlaysForDocumentKeys(new I0(t,ms.ct),_).next()})})}}function sN(n){n.createObjectStore("targetDocuments",{keyPath:WS}).createIndex("documentTargetsIndex",$D,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GS,{unique:!0}),n.createObjectStore("targetGlobal")}const AA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MA{constructor(e,t,r,o,u,l,g,_,b,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=b,this.oi=S,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=G=>Promise.resolve(),!MA.D())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MP(this,o),this.di=t+"main",this.serializer=new MC(_),this.wi=new Uo(this.di,this.ui,new BP(this.serializer)),this.Bs=new TP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eN(this.serializer),this.qs=new f,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,AA);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>UC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(yc(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return dE(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return UC(e).delete(this.clientId)}bi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=hi(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return oe.forEach(g,_=>o.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):dE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,AA);return!1}}return!(!this.networkEnabled||!this.inForeground)||UC(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new I0(t,ms.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>UC(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return kC.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bP(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return D.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?Lh:14===l?Fi:13===l?YD:12===l?KD:11===l?ZD:void st();var l;let g;return this.wi.runTransaction(e,o,u,_=>(g=new I0(_,this.Os?this.Os.next():ms.ct),"readwrite-primary"===t?this.Ti(g).next(b=>!!b||this.Ei(g)).next(b=>{if(!b)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ue.FAILED_PRECONDITION,LD);return r(g)}).next(b=>this.vi(g).next(()=>b)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return dE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,AA)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dE(e).put("owner",t)}static D(){return Uo.D()}Ai(e){const t=dE(e);return t.get("owner").next(r=>this.Ri(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,an.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dE(n){return hi(n,"owner")}function UC(n){return hi(n,"clientMetadata")}function xA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class RA{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=Gt(),o=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new RA(e,t.fromCache,r,o)}}class oN{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(dC(t))return oe.resolve(null);let r=Li(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Dy(t,null,"F"),r=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Gt(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.ji(t,g);return this.zi(t,b,l,_.readTime)?this.Ki(e,Dy(t,null,"F")):this.Wi(e,b,t,_)}))})))}Gi(e,t,r,o){return dC(t)||o.isEqual(It.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(d0()<=No.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Cy(t)),this.Wi(e,l,t,dy(o,-1)))})}ji(e,t){let r=new Bn(P0(e));return t.forEach((o,u)=>{$h(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return d0()<=No.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Cy(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vs.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class jP{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Pn(Ut),this.Yi=new jo(u=>Dc(u),vy),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iN(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function aN(n,e,t,r){return new jP(n,e,t,r)}function uN(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,_e.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=Gt();for(const b of o){l.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){g.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(b=>({er:b,removedBatchIds:l,addedBatchIds:g}))})})}),NA.apply(this,arguments)}function cN(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function lN(n,e,t){let r=Gt(),o=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=es();return t.forEach((g,_)=>{const b=u.get(g);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(It.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Le("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)}),{nr:l,sr:o}})}function zP(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fy(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new Ac(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ly(n,e,t){return OA.apply(this,arguments)}function OA(){return OA=(0,_e.Z)(function*(n,e,t){const r=nt(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!yc(l))throw l;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),OA.apply(this,arguments)}function BC(n,e,t){const r=nt(n);let o=It.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,b){const S=nt(g),N=S.Yi.get(b);return void 0!==N?oe.resolve(S.Ji.get(N)):S.Bs.getTargetData(_,b)}(r,l,Li(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:It.min(),t?u:Gt())).next(g=>(fN(r,hC(e),g),{documents:g,ir:u})))}function dN(n,e){const t=nt(n),r=nt(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function hN(n,e){const t=nt(n),r=t.Xi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,dy(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(fN(t,e,o),o))}function fN(n,e,t){let r=n.Xi.get(e)||It.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function PA(){return PA=(0,_e.Z)(function*(n,e,t,r){const o=nt(n);let u=Gt(),l=es();for(const b of t){const S=e.rr(b.metadata.name);b.document&&(u=u.add(S));const N=e.ur(b);N.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(S,N)}const g=o.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Fy(o,(b=r,Li(Hr(hn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>lN(b,g,l).next(S=>(g.apply(b),S)).next(S=>o.Bs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>o.Bs.addMatchingKeys(b,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.nr,S.sr)).next(()=>S.nr)))}),PA.apply(this,arguments)}function WP(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,_e.Z)(function*(n,e,t=Gt()){const r=yield Fy(n,Li(s(e.bundledQuery))),o=nt(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Fr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Pr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(g.targetId,g),o.Bs.updateTargetData(u,g).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),kA.apply(this,arguments)}function pN(n,e){return`firestore_clients_${n}_${e}`}function gN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function FA(n,e){return`firestore_targets_${n}_${e}`}class jC{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Re(o.error.code,o.error.message))),l?new jC(e,t,o.state,u):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new hE(e,r.state,o):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $C{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=gC();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=UD(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new $C(e,u):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class LA{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new LA(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VA{constructor(){this.activeTargetIds=gC()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UA{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(Ut),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=pN(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new VA),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(pN(e.persistenceKey,o));if(u){const l=$C.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(FA(this.persistenceKey,e));if(r){const o=hE.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(FA(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=ms.ct;if(null!=u)try{const g=JSON.parse(u);wt("number"==typeof g),l=g}catch(g){Or("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);o!==ms.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new jC(this.currentUser,e,t,r),u=gN(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=gN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=FA(this.persistenceKey,e),u=new hE(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return $C.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return jC.ar(new ti(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return hE.ar(o,t)}br(e){return LA.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{o.has(_)||l.push(_)}),o.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=gC();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class mN{constructor(){this.Hr=new VA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new VA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qP{Yr(e){}shutdown(){}}class yN{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let HC=null;function BA(){return null===HC?HC=268435456+Math.round(2147483648*Math.random()):HC++,"0x"+HC.toString(16)}const ZP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KP{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Es="WebChannelConnection";class YP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=BA(),g=this.To(e,t);Le("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,o,u),this.Ao(e,g,_,r).then(b=>(Le("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Ls("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",g,"request:",r),b})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$l,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${ZP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=BA();return new Promise((l,g)=>{const _=new xS;_.setWithCredentials(!0),_.listenOnce(u0.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case MD.NO_ERROR:const S=_.getResponseJson();Le(Es,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),l(S);break;case MD.TIMEOUT:Le(Es,`RPC '${e}' ${u} timed out`),g(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case MD.HTTP_ERROR:const N=_.getStatus();if(Le(Es,`RPC '${e}' ${u} failed with status:`,N,"response text:",_.getResponseText()),N>0){let G=_.getResponseJson();Array.isArray(G)&&(G=G[0]);const ne=G?.error;if(ne&&ne.status&&ne.message){const ve=function(De){const Me=De.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Me)>=0?Me:ue.UNKNOWN}(ne.status);g(new Re(ve,ne.message))}else g(new Re(ue.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le(Es,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Le(Es,`RPC '${e}' ${u} sending request:`,o),_.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=BA(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=AD(),g=MS(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(_.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(_.xmlHttpFactory=new RD({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const S=u.join("");Le(Es,`Creating RPC '${e}' stream ${o}: ${S}`,_);const N=l.createWebChannel(S,_);let G=!1,ne=!1;const ve=new KP({ro:Me=>{ne?Le(Es,`Not sending because RPC '${e}' stream ${o} is closed:`,Me):(G||(Le(Es,`Opening RPC '${e}' stream ${o} transport.`),N.open(),G=!0),Le(Es,`RPC '${e}' stream ${o} sending:`,Me),N.send(Me))},oo:()=>N.close()}),De=(Me,lt,Mt)=>{Me.listen(lt,ot=>{try{Mt(ot)}catch(xt){setTimeout(()=>{throw xt},0)}})};return De(N,zp.EventType.OPEN,()=>{ne||Le(Es,`RPC '${e}' stream ${o} transport opened.`)}),De(N,zp.EventType.CLOSE,()=>{ne||(ne=!0,Le(Es,`RPC '${e}' stream ${o} transport closed`),ve.wo())}),De(N,zp.EventType.ERROR,Me=>{ne||(ne=!0,Ls(Es,`RPC '${e}' stream ${o} transport errored:`,Me),ve.wo(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),De(N,zp.EventType.MESSAGE,Me=>{var lt;if(!ne){const Mt=Me.data[0];wt(!!Mt);const xt=Mt.error||(null===(lt=Mt[0])||void 0===lt?void 0:lt.error);if(xt){Le(Es,`RPC '${e}' stream ${o} received error:`,xt);const $t=xt.status;let on=function(Sg){const vP=kr[Sg];if(void 0!==vP)return IC(vP)}($t),ws=xt.message;void 0===on&&(on=ue.INTERNAL,ws="Unknown error status: "+$t+" with message "+xt.message),ne=!0,ve.wo(new Re(on,ws)),N.close()}else Le(Es,`RPC '${e}' stream ${o} received:`,Mt),ve._o(Mt)}}),De(g,c0.STAT_EVENT,Me=>{Me.stat===xD.PROXY?Le(Es,`RPC '${e}' stream ${o} detected buffering proxy`):Me.stat===xD.NOPROXY&&Le(Es,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{ve.fo()},0),ve}}function vN(){return typeof window<"u"?window:null}function zC(){return typeof document<"u"?document:null}function fE(n){return new J0(n,!0)}class jA{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class _N{constructor(e,t,r,o,u,l,g,_){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new jA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,_e.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,_e.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,_e.Z)(function*(){e.state=0,e.start()}))}tu(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QP extends _N{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function rE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),o=e.targetChange.targetIds||[],u=function(_,b){return _.useProto3Json?(wt(void 0===b||"string"==typeof b),Pr.fromBase64String(b||"")):(wt(void 0===b||b instanceof Uint8Array),Pr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const b=void 0===_.code?ue.UNKNOWN:IC(_.code);return new Re(b,_.message||"")}(l);t=new Z0(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=$o(n,r.document.name),u=Fr(r.document.updateTime),l=r.document.createTime?Fr(r.document.createTime):It.min(),g=new Ii({mapValue:{fields:r.document.fields}}),_=ar.newFoundDocument(o,u,l,g);t=new My(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=$o(n,r.document),u=r.readTime?Fr(r.readTime):It.min(),l=ar.newNoDocument(o,u);t=new My([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=$o(n,r.document);t=new My([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new Yl(o,u);t=new q0(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return It.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?Fr(u.readTime):It.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=gg(this.serializer),t.addTarget=function(o,u){let l;const g=u.target;if(l=vs(g)?{documents:sE(o,g)}:{query:SC(o,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=gA(o,u.resumeToken);const _=X0(o,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(It.min())>0){l.readTime=Zh(o,u.snapshotVersion.toTimestamp());const _=X0(o,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function Ny(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=gg(this.serializer),t.removeTarget=e,this.Wo(t)}}class JP extends _N{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function TC(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,o){let u=Fr(r.updateTime?r.updateTime:o);return u.isEqual(It.min())&&(u=Fr(o)),new _C(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=gg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mg(this.serializer,r))};this.Wo(t)}}class XP extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ue.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ue.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class t1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Or(t),this.mu=!1):Le("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class n1{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;ef(l)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(b){const S=nt(b);S.vu.add(4),yield Vy(S),S.bu.set("Unknown"),S.vu.delete(4),yield pE(S)}),function(b){return _.apply(this,arguments)})(l))}))}),this.bu=new t1(r,o)}}function pE(n){return HA.apply(this,arguments)}function HA(){return HA=(0,_e.Z)(function*(n){if(ef(n))for(const e of n.Ru)yield e(!0)}),HA.apply(this,arguments)}function Vy(n){return zA.apply(this,arguments)}function zA(){return zA=(0,_e.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),zA.apply(this,arguments)}function GC(n,e){const t=nt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),qA(t)?WA(t):By(t).Ko()&&GA(t,e))}function gE(n,e){const t=nt(n),r=By(t);t.Au.delete(e),r.Ko()&&EN(t,e),0===t.Au.size&&(r.Ko()?r.jo():ef(t)&&t.bu.set("Unknown"))}function GA(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}By(n).su(e)}function EN(n,e){n.Vu.qt(e),By(n).iu(e)}function WA(n){n.Vu=new pA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),By(n).start(),n.bu.gu()}function qA(n){return ef(n)&&!By(n).Uo()&&n.Au.size>0}function ef(n){return 0===nt(n).vu.size}function wN(n){n.Vu=void 0}function r1(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,_e.Z)(function*(n){n.Au.forEach((e,t)=>{GA(n,e)})}),ZA.apply(this,arguments)}function i1(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,_e.Z)(function*(n,e){wN(n),qA(n)?(n.bu.Iu(e),WA(n)):n.bu.set("Unknown")}),KA.apply(this,arguments)}function s1(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,_e.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Z0&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,u){const l=u.cause;for(const g of u.targetIds)o.Au.has(g)&&(yield o.remoteSyncer.rejectListen(g,l),o.Au.delete(g),o.Vu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WC(n,r)}else if(e instanceof My?n.Vu.Ht(e):e instanceof q0?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(It.min()))try{const r=yield cN(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.Au.get(_);b&&o.Au.set(_,b.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const b=o.Au.get(g);if(!b)return;o.Au.set(g,b.withResumeToken(Pr.EMPTY_BYTE_STRING,b.snapshotVersion)),EN(o,g);const S=new Ac(b.target,g,_,b.sequenceNumber);GA(o,S)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield WC(n,r)}var r}),YA.apply(this,arguments)}function WC(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,_e.Z)(function*(n,e,t){if(!yc(e))throw e;n.vu.add(1),yield Vy(n),n.bu.set("Offline"),t||(t=()=>cN(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield pE(n)}))}),QA.apply(this,arguments)}function IN(n,e){return e().catch(t=>WC(n,t,e))}function Uy(n){return JA.apply(this,arguments)}function JA(){return JA=(0,_e.Z)(function*(n){const e=nt(n),t=tf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;o1(e);)try{const o=yield zP(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,a1(e,o)}catch(o){yield WC(e,o)}DN(e)&&CN(e)}),JA.apply(this,arguments)}function o1(n){return ef(n)&&n.Eu.length<10}function a1(n,e){n.Eu.push(e);const t=tf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function DN(n){return ef(n)&&!tf(n).Uo()&&n.Eu.length>0}function CN(n){tf(n).start()}function u1(n){return XA.apply(this,arguments)}function XA(){return XA=(0,_e.Z)(function*(n){tf(n).hu()}),XA.apply(this,arguments)}function c1(n){return eM.apply(this,arguments)}function eM(){return eM=(0,_e.Z)(function*(n){const e=tf(n);for(const t of n.Eu)e.uu(t.mutations)}),eM.apply(this,arguments)}function l1(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,_e.Z)(function*(n,e,t){const r=n.Eu.shift(),o=G0.from(r,e,t);yield IN(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Uy(n)}),tM.apply(this,arguments)}function d1(n,e){return nM.apply(this,arguments)}function nM(){return nM=(0,_e.Z)(function*(n,e){var t;e&&tf(n).ou&&(yield(t=(0,_e.Z)(function*(r,o){if(Sy(u=o.code)&&u!==ue.ABORTED){const l=r.Eu.shift();tf(r).Qo(),yield IN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Uy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),DN(n)&&CN(n)}),nM.apply(this,arguments)}function bN(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,_e.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=ef(t);t.vu.add(3),yield Vy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield pE(t)}),rM.apply(this,arguments)}function iM(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,_e.Z)(function*(n,e){const t=nt(n);e?(t.vu.delete(2),yield pE(t)):e||(t.vu.add(2),yield Vy(t),t.bu.set("Unknown"))}),sM.apply(this,arguments)}function By(n){return n.Su||(n.Su=function(e,t,r){const o=nt(e);return o.fu(),new QP(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:r1.bind(null,n),ao:i1.bind(null,n),nu:s1.bind(null,n)}),n.Ru.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Su.Qo(),qA(n)?WA(n):n.bu.set("Unknown")):(yield n.Su.stop(),wN(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function tf(n){return n.Du||(n.Du=function(e,t,r){const o=nt(e);return o.fu(),new JP(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:u1.bind(null,n),ao:d1.bind(null,n),au:c1.bind(null,n),cu:l1.bind(null,n)}),n.Ru.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Du.Qo(),yield Uy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class oM{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,g=new oM(e,t,l,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(n,e){if(Or("AsyncQueue",`${e}: ${n}`),yc(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class $y{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=Zl(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new $y(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $y)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $y;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class TN{constructor(){this.Cu=new Pn(Je.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):st():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hy{constructor(e,t,r,o,u,l,g,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Hy(e,t,$y.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class h1{constructor(){this.Nu=void 0,this.listeners=[]}}class f1{constructor(){this.queries=new jo(e=>O0(e),jh),this.onlineState="Unknown",this.ku=new Set}}function aM(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,_e.Z)(function*(n,e){const t=nt(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new h1),o)try{u.Nu=yield t.onListen(r)}catch(l){const g=jy(l,`Initialization of query '${Cy(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&dM(t)}),uM.apply(this,arguments)}function cM(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,_e.Z)(function*(n,e){const t=nt(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),lM.apply(this,arguments)}function p1(n,e){const t=nt(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const g of l.listeners)g.$u(o)&&(r=!0);l.Nu=o}}r&&dM(t)}function g1(n,e,t){const r=nt(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function dM(n){n.ku.forEach(e=>{e.next()})}class hM{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Hy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Hy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class m1{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class SN{constructor(e){this.serializer=e}rr(e){return $o(this.serializer,e)}ur(e){return e.metadata.exists?nE(this.serializer,e.document,!1):ar.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Fr(e)}}class y1{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=hn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new SN(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const g=(t.get(l)||Gt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function GP(n,e,t,r){return PA.apply(this,arguments)}(e.localStore,new SN(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield WP(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function AN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MN{constructor(e){this.key=e}}class xN{constructor(e){this.key=e}}class RN{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gt(),this.mutatedKeys=Gt(),this.tc=P0(e),this.ec=new $y(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new TN,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,g=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const G=o.get(S),ne=$h(this.query,N)?N:null,ve=!!G&&this.mutatedKeys.has(G.key),De=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let Me=!1;G&&ne?G.data.isEqual(ne.data)?ve!==De&&(r.track({type:3,doc:ne}),Me=!0):this.rc(G,ne)||(r.track({type:2,doc:ne}),Me=!0,(_&&this.tc(ne,_)>0||b&&this.tc(ne,b)<0)&&(g=!0)):!G&&ne?(r.track({type:0,doc:ne}),Me=!0):G&&!ne&&(r.track({type:1,doc:G}),Me=!0,(_||b)&&(g=!0)),Me&&(ne?(l=l.add(ne),u=De?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,S)=>function(N,G){const ne=ve=>{switch(ve){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return ne(N)-ne(G)}(b.type,S.type)||this.tc(b.doc,S.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Hy(this.query,e.ec,o,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new TN,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new xN(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new MN(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Gt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Hy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class v1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _1{constructor(e){this.key=e,this.fc=!1}}class E1{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new jo(g=>O0(g),jh),this._c=new Map,this.mc=new Set,this.gc=new Pn(Je.comparator),this.yc=new Map,this.Ic=new TA,this.Tc={},this.Ec=new Map,this.Ac=vg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function w1(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,_e.Z)(function*(n,e){const t=FM(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Fy(t.localStore,Li(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield pM(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&GC(t.remoteStore,l)}return o}),fM.apply(this,arguments)}function pM(n,e,t,r,o){return gM.apply(this,arguments)}function gM(){return gM=(0,_e.Z)(function*(n,e,t,r,o){n.Rc=(N,G,ne)=>{return(ve=(0,_e.Z)(function*(De,Me,lt,Mt){let ot=Me.view.sc(lt);ot.zi&&(ot=yield BC(De.localStore,Me.query,!1).then(({documents:on})=>Me.view.sc(on,ot)));const xt=Mt&&Mt.targetChanges.get(Me.targetId),$t=Me.view.applyChanges(ot,De.isPrimaryClient,xt);return bM(De,Me.targetId,$t.cc),$t.snapshot}),function(De,Me,lt,Mt){return ve.apply(this,arguments)})(n,N,G,ne);var ve};const u=yield BC(n.localStore,e,!0),l=new RN(e,u.ir),g=l.sc(u.documents),_=fg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(g,n.isPrimaryClient,_);bM(n,t,b.cc);const S=new v1(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),gM.apply(this,arguments)}function I1(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,_e.Z)(function*(n,e){const t=nt(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!jh(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),gE(t.remoteStore,r.targetId),zy(t,r.targetId)}).catch(uu))):(zy(t,r.targetId),yield Ly(t.localStore,r.targetId,!0))}),mM.apply(this,arguments)}function yM(){return yM=(0,_e.Z)(function*(n,e,t){const r=LM(n);try{const o=yield function(u,l){const g=nt(u),_=Xn.now(),b=l.reduce((G,ne)=>G.add(ne.key),Gt());let S,N;return g.persistence.runTransaction("Locally write mutations","readwrite",G=>{let ne=es(),ve=Gt();return g.Zi.getEntries(G,b).next(De=>{ne=De,ne.forEach((Me,lt)=>{lt.isValidDocument()||(ve=ve.add(Me))})}).next(()=>g.localDocuments.getOverlayedDocuments(G,ne)).next(De=>{S=De;const Me=[];for(const lt of l){const Mt=uA(lt,S.get(lt.key).overlayedDocument);null!=Mt&&Me.push(new Tc(lt.key,Mt,oC(Mt.value.mapValue),ur.exists(!0)))}return g.mutationQueue.addMutationBatch(G,_,Me,l)}).next(De=>{N=De;const Me=De.applyToLocalDocumentSet(S,ve);return g.documentOverlayCache.saveOverlays(G,De.batchId,Me)})}).then(()=>({batchId:N.batchId,changes:fC(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new Pn(Ut)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,o.batchId,t),yield Jl(r,o.changes),yield Uy(r.remoteStore)}catch(o){const u=jy(o,"Failed to persist write");t.reject(u)}}),yM.apply(this,arguments)}function NN(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,_e.Z)(function*(n,e){const t=nt(n);try{const r=yield function HP(n,e){const t=nt(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const g=[];e.targetChanges.forEach((S,N)=>{const G=o.get(N);if(!G)return;g.push(t.Bs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,S.addedDocuments,N)));let ne=G.withSequenceNumber(u.currentSequenceNumber);var ve,De,Me;null!==e.targetMismatches.get(N)?ne=ne.withResumeToken(Pr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):S.resumeToken.approximateByteSize()>0&&(ne=ne.withResumeToken(S.resumeToken,r)),o=o.insert(N,ne),De=ne,Me=S,(0===(ve=G).resumeToken.approximateByteSize()||De.snapshotVersion.toMicroseconds()-ve.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,ne))});let _=es(),b=Gt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(lN(u,l,e.documentUpdates).next(S=>{_=S.nr,b=S.sr})),!r.isEqual(It.min())){const S=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return oe.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?wt(l.fc):o.removedDocuments.size>0&&(wt(l.fc),l.fc=!1))}),yield Jl(t,r,e)}catch(r){yield uu(r)}}),vM.apply(this,arguments)}function ON(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&o.push(g.snapshot)}),function(u,l){const g=nt(u);g.onlineState=l;let _=!1;g.queries.forEach((b,S)=>{for(const N of S.listeners)N.Mu(l)&&(_=!0)}),_&&dM(g)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function C1(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,_e.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new Pn(Je.comparator);l=l.insert(u,ar.newNoDocument(u,It.min()));const g=Gt().add(u),_=new hg(It.min(),new Map,new Pn(Ut),l,g);yield NN(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),TM(r)}else yield Ly(r.localStore,e,!1).then(()=>zy(r,e,t)).catch(uu)}),_M.apply(this,arguments)}function b1(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,_e.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const o=yield function $P(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,b){const S=_.batch,N=S.keys();let G=oe.resolve();return N.forEach(ne=>{G=G.next(()=>b.getEntry(g,ne)).next(ve=>{const De=_.docVersions.get(ne);wt(null!==De),ve.version.compareTo(De)<0&&(S.applyToRemoteDocument(ve,_),ve.isValidDocument()&&(ve.setReadTime(_.commitVersion),b.addEntry(ve)))})}),G.next(()=>l.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=Gt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);CM(t,r,null),DM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jl(t,o)}catch(o){yield uu(o)}}),EM.apply(this,arguments)}function T1(n,e,t){return wM.apply(this,arguments)}function wM(){return wM=(0,_e.Z)(function*(n,e,t){const r=nt(n);try{const o=yield function(u,l){const g=nt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return g.mutationQueue.lookupMutationBatch(_,l).next(S=>(wt(null!==S),b=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,b,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>g.localDocuments.getDocuments(_,b))})}(r.localStore,e);CM(r,e,t),DM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jl(r,o)}catch(o){yield uu(o)}}),wM.apply(this,arguments)}function IM(){return IM=(0,_e.Z)(function*(n,e){const t=nt(n);ef(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=nt(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=jy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),IM.apply(this,arguments)}function DM(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function CM(n,e,t){const r=nt(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function zy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||PN(n,r)})}function PN(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(gE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),TM(n))}function bM(n,e,t){for(const r of t)r instanceof MN?(n.Ic.addReference(r.key,e),A1(n,r)):r instanceof xN?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||PN(n,r.key)):st()}function A1(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.mc.add(r),TM(n))}function TM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Je(hn.fromString(e)),r=n.Ac.next();n.yc.set(r,new _1(t)),n.gc=n.gc.insert(t,r),GC(n.remoteStore,new Ac(Li(Hr(t.path)),r,"TargetPurposeLimboResolution",ms.ct))}}function Jl(n,e,t){return SM.apply(this,arguments)}function SM(){return SM=(0,_e.Z)(function*(n,e,t){const r=nt(n),o=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const S=RA.Li(_.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.dc.nu(o),yield(g=(0,_e.Z)(function*(_,b){const S=nt(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>oe.forEach(b,G=>oe.forEach(G.Fi,ne=>S.persistence.referenceDelegate.addReference(N,G.targetId,ne)).next(()=>oe.forEach(G.Bi,ne=>S.persistence.referenceDelegate.removeReference(N,G.targetId,ne)))))}catch(N){if(!yc(N))throw N;Le("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const G=N.targetId;if(!N.fromCache){const ne=S.Ji.get(G),De=ne.withLastLimboFreeSnapshotVersion(ne.snapshotVersion);S.Ji=S.Ji.insert(G,De)}}}),function(_,b){return g.apply(this,arguments)})(r.localStore,u))}),SM.apply(this,arguments)}function M1(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,_e.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield uN(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jl(t,r.er)}var o}),AM.apply(this,arguments)}function x1(n,e){const t=nt(n),r=t.yc.get(e);if(r&&r.fc)return Gt().add(r.key);{let o=Gt();const u=t._c.get(e);if(!u)return o;for(const l of u){const g=t.wc.get(l);o=o.unionWith(g.view.nc)}return o}}function R1(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,_e.Z)(function*(n,e){const t=nt(n),r=yield BC(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&bM(t,e.targetId,o.cc),o}),MM.apply(this,arguments)}function N1(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,_e.Z)(function*(n,e){const t=nt(n);return hN(t.localStore,e).then(r=>Jl(t,r))}),xM.apply(this,arguments)}function O1(n,e,t,r){return RM.apply(this,arguments)}function RM(){return RM=(0,_e.Z)(function*(n,e,t,r){const o=nt(n),u=yield function(l,g){const _=nt(l),b=nt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Sn(S,g).next(N=>N?_.localDocuments.getDocuments(S,N):oe.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Uy(o.remoteStore):"acknowledged"===t||"rejected"===t?(CM(o,e,r||null),DM(o,e),g=e,nt(nt(o.localStore).mutationQueue).Cn(g)):st(),yield Jl(o,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),RM.apply(this,arguments)}function NM(){return NM=(0,_e.Z)(function*(n,e){const t=nt(n);if(FM(t),LM(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kN(t,r.toArray());t.vc=!0,yield iM(t.remoteStore,!0);for(const u of o)GC(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(zy(t,l),Ly(t.localStore,l,!0))),gE(t.remoteStore,l)}),yield o,yield kN(t,r),function(u){const l=nt(u);l.yc.forEach((g,_)=>{gE(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pn(Je.comparator)}(t),t.vc=!1,yield iM(t.remoteStore,!1)}}),NM.apply(this,arguments)}function kN(n,e,t){return OM.apply(this,arguments)}function OM(){return OM=(0,_e.Z)(function*(n,e,t){const r=nt(n),o=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield Fy(r.localStore,Li(_[0]));for(const b of _){const S=r.wc.get(b),N=yield R1(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield dN(r.localStore,l);g=yield Fy(r.localStore,b),yield pM(r,FN(b),l,!1,g.resumeToken)}o.push(g)}return r.dc.nu(u),o}),OM.apply(this,arguments)}function FN(n){return rA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function k1(n){const e=nt(n);return nt(nt(e.localStore).persistence).$i()}function F1(n,e,t,r){return PM.apply(this,arguments)}function PM(){return PM=(0,_e.Z)(function*(n,e,t,r){const o=nt(n);if(o.vc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield hN(o.localStore,hC(u[0])),g=hg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Pr.EMPTY_BYTE_STRING);yield Jl(o,l,g);break}case"rejected":yield Ly(o.localStore,e,!0),zy(o,e,r);break;default:st()}}),PM.apply(this,arguments)}function L1(n,e,t){return kM.apply(this,arguments)}function kM(){return kM=(0,_e.Z)(function*(n,e,t){const r=FM(n);if(r.vc){for(const o of e){if(r._c.has(o)){Le("SyncEngine","Adding an already active target "+o);continue}const u=yield dN(r.localStore,o),l=yield Fy(r.localStore,u);yield pM(r,FN(u),l.targetId,!1,l.resumeToken),GC(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield Ly(r.localStore,o,!1).then(()=>{gE(r.remoteStore,o),zy(r,o)}).catch(uu))}}),kM.apply(this,arguments)}function FM(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C1.bind(null,e),e.dc.nu=p1.bind(null,e.eventManager),e.dc.Pc=g1.bind(null,e.eventManager),e}function LM(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T1.bind(null,e),e}class mE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.serializer=fE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return aN(this.persistence,new oN,e.initialUser,this.serializer)}createPersistence(e){return new SA(LC.zs,this.serializer)}createSharedClientState(e){return new mN}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VM extends mE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield LM(r.Vc.syncEngine),yield Uy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return aN(this.persistence,new oN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new QR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new VD(t,this.persistence);return new $S(e.asyncQueue,r)}createPersistence(e){const t=xA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new MA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vN(),zC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new mN}}class LN extends VM{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof UA&&(r.sharedClientState.syncEngine={jr:O1.bind(null,o),zr:F1.bind(null,o),Wr:L1.bind(null,o),$i:k1.bind(null,o),Qr:N1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,_e.Z)(function*(l){yield function P1(n,e){return NM.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=vN();if(!UA.D(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=xA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new UA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gy{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ON(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=M1.bind(null,r.syncEngine),yield iM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f1}createDatastore(e){const t=fE(e.databaseInfo.databaseId),r=new YP(e.databaseInfo);return new XP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>ON(this.syncEngine,g,0),l=yN.D()?new yN:new qP,new n1(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,g,_,b){const S=new E1(r,o,u,l,g,_);return b&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=nt(t);Le("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Vy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function VN(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class qC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class B1{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ni,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new m1(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,_e.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class j1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(u,l){const g=nt(u),_=gg(g.serializer)+"/documents",b={documents:l.map(ne=>pg(g.serializer,ne))},S=yield g.vo("BatchGetDocuments",_,b,l.length),N=new Map;S.forEach(ne=>{const ve=function yA(n,e){return"found"in e?function(t,r){wt(!!r.found);const o=$o(t,r.found.name),u=Fr(r.found.updateTime),l=r.found.createTime?Fr(r.found.createTime):It.min(),g=new Ii({mapValue:{fields:r.found.fields}});return ar.newFoundDocument(o,u,l,g)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const o=$o(t,r.missing),u=Fr(r.readTime);return ar.newNoDocument(o,u)}(n,e):st()}(g.serializer,ne);N.set(ve.key.toString(),ve)});const G=[];return l.forEach(ne=>{const ve=N.get(ne.toString());wt(!!ve),G.push(ve)}),G}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ug(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Je.fromPath(o);e.mutations.push(new z0(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(o,u){const l=nt(o),g=gg(l.serializer)+"/documents",_={writes:u.map(b=>mg(l.serializer,b))};yield l.Io("Commit",g,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?ur.exists(!1):ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new jA(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,_e.Z)(function*(){const t=new j1(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!zl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Sy(t)}return!1}}class H1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ti.UNAUTHENTICATED,this.clientId=h0.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(g){Le("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Le("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=jy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function ZC(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(u){r.isEqual(u)||(yield uN(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),UM.apply(this,arguments)}function BM(n,e){return jM.apply(this,arguments)}function jM(){return jM=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield $M(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>bN(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>bN(e.remoteStore,u)),n._onlineComponents=e}),jM.apply(this,arguments)}function UN(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function $M(n){return HM.apply(this,arguments)}function HM(){return HM=(0,_e.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ZC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!UN(t))throw t;Ls("Error using user provided cache. Falling back to memory cache: "+t),yield ZC(n,new mE)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield ZC(n,new mE);return n._offlineComponents}),HM.apply(this,arguments)}function KC(n){return zM.apply(this,arguments)}function zM(){return zM=(0,_e.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield BM(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield BM(n,new Gy))),n._onlineComponents}),zM.apply(this,arguments)}function BN(n){return $M(n).then(e=>e.persistence)}function YC(n){return $M(n).then(e=>e.localStore)}function jN(n){return KC(n).then(e=>e.remoteStore)}function GM(n){return KC(n).then(e=>e.syncEngine)}function Wy(n){return WM.apply(this,arguments)}function WM(){return WM=(0,_e.Z)(function*(n){const e=yield KC(n),t=e.eventManager;return t.onListen=w1.bind(null,e.syncEngine),t.onUnlisten=I1.bind(null,e.syncEngine),t}),WM.apply(this,arguments)}function HN(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,l,g,_){const b=new qC({next:N=>{u.enqueueAndForget(()=>cM(o,S));const G=N.docs.has(l);!G&&N.fromCache?_.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&N.fromCache&&g&&"server"===g.source?_.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),S=new hM(Hr(l.path),b,{includeMetadataChanges:!0,Ku:!0});return aM(o,S)}(yield Wy(n),n.asyncQueue,e,t,r)})),r.promise}function zN(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,l,g,_){const b=new qC({next:N=>{u.enqueueAndForget(()=>cM(o,S)),N.fromCache&&"server"===g.source?_.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),S=new hM(l,b,{includeMetadataChanges:!0,Ku:!0});return aM(o,S)}(yield Wy(n),n.asyncQueue,e,t,r)})),r.promise}function GN(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const WN=new Map;function qM(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qN(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZN(n){if(!Je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KN(n){if(Je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QC(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YN(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class QN{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=GN(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yE{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new OS;switch(t.type){case"firstParty":return new LS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WN.get(e);t&&(Le("ComponentProvider","Removing Datastore"),WN.delete(e),t.terminate())}(this),Promise.resolve()}}function JN(n,e,t,r={}){var o;const u=(n=cn(n,yE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=ti.MOCK_USER;else{g=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ti(b)}n._authCredentials=new PS(new PD(g,_))}}class mr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Mc extends ts{constructor(e,t,r){super(e,t,Hr(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new Je(e))}withConverter(e){return new Mc(this.firestore,e,this._path)}}function XN(n,e,...t){if(n=(0,an.m9)(n),qM("collection","path",e),n instanceof yE){const r=hn.fromString(e,...t);return KN(r),new Mc(n,null,r)}{if(!(n instanceof mr||n instanceof Mc))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return KN(r),new Mc(n.firestore,null,r)}}function JC(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=h0.A()),qM("doc","path",e),n instanceof yE){const r=hn.fromString(e,...t);return ZN(r),new mr(n,null,new Je(r))}{if(!(n instanceof mr||n instanceof Mc))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return ZN(r),new mr(n.firestore,n instanceof Mc?n.converter:null,new Je(r))}}function eO(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof mr||n instanceof Mc)&&(e instanceof mr||e instanceof Mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZM(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&jh(n._query,e._query)&&n.converter===e.converter}class X1{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new jA(this,"async_queue_retry"),this.Xc=()=>{const t=zC();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=zC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=zC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ni;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!yc(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Or("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=oM.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&st()}verifyOperationInProgress(){}sa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function KM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class ek{constructor(){this._progressObserver={},this._taskCompletionResolver=new ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yr extends yE{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new X1,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tO(this),this._firestoreClient.terminate()}}function nk(n,e){const t="object"==typeof n?n:(0,ru.getApp)(),r="string"==typeof n?n:e||"(default)",o=(0,ru._getProvider)(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=(0,an.P0)("firestore");u&&JN(o,...u)}return o}function ri(n){return n._firestoreClient||tO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tO(n){var e,t,r;const o=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new eC(n._databaseId,g,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,GN(b.experimentalLongPollingOptions),b.useFetchStreams));var g,b;n._firestoreClient=new H1(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function nO(n,e,t){const r=new ni;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield ZC(n,t),yield BM(n,e),r.resolve()}catch(o){const u=o;if(!UN(u))throw u;Ls("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function rO(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xc(Pr.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xc(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._methodName=e}}class XC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const hk=/^__.*__$/;class fk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Tc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gh(e,this.data,t,this.fieldTransforms)}}class iO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class eb{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new eb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return rb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(sO(this.ca)&&hk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class pk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fE(e)}ya(e,t,r,o=!1){return new eb({ca:e,methodName:t,ga:r,path:gr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=fE(n._databaseId);return new pk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tb(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);XM("Data must be an object, but it was:",l,r);const g=uO(r,l);let _,b;if(u.merge)_=new ys(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const G=EE(e,N,t);if(!l.contains(G))throw new Re(ue.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);lO(S,G)||S.push(G)}_=new ys(S),b=l.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,b=l.fieldTransforms;return new fk(new Ii(g),_,b)}class _E extends Eg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _E}}function oO(n,e,t){return new eb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class YM extends Eg{_toFieldTransform(e){return new ag(e.path,new Hh)}isEqual(e){return e instanceof YM}}class gk extends Eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oO(this,e,!0),r=this.pa.map(u=>Ig(u,t)),o=new bc(r);return new ag(e.path,o)}isEqual(e){return this===e}}class mk extends Eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oO(this,e,!0),r=this.pa.map(u=>Ig(u,t)),o=new lo(r);return new ag(e.path,o)}isEqual(e){return this===e}}class yk extends Eg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Kl(e.serializer,L0(e.serializer,this.Ia));return new ag(e.path,t)}isEqual(e){return this===e}}function QM(n,e,t,r){const o=n.ya(1,e,t);XM("Data must be an object, but it was:",o,r);const u=[],l=Ii.empty();Gl(r,(_,b)=>{const S=nb(e,_,t);b=(0,an.m9)(b);const N=o.da(S);if(b instanceof _E)u.push(S);else{const G=Ig(b,N);null!=G&&(u.push(S),l.set(S,G))}});const g=new ys(u);return new iO(l,g,o.fieldTransforms)}function JM(n,e,t,r,o,u){const l=n.ya(1,e,t),g=[EE(e,r,t)],_=[o];if(u.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)g.push(EE(e,u[G])),_.push(u[G+1]);const b=[],S=Ii.empty();for(let G=g.length-1;G>=0;--G)if(!lO(b,g[G])){const ne=g[G];let ve=_[G];ve=(0,an.m9)(ve);const De=l.da(ne);if(ve instanceof _E)b.push(ne);else{const Me=Ig(ve,De);null!=Me&&(b.push(ne),S.set(ne,Me))}}const N=new ys(b);return new iO(S,N,l.fieldTransforms)}function aO(n,e,t,r=!1){return Ig(t,n.ya(r?4:3,e))}function Ig(n,e){if(cO(n=(0,an.m9)(n)))return XM("Unsupported field value:",e,n),uO(n,e);if(n instanceof Eg)return function(t,r){if(!sO(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let g=Ig(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return L0(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Xn.fromDate(t);return{timestampValue:Zh(r.serializer,o)}}if(t instanceof Xn){const o=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zh(r.serializer,o)}}if(t instanceof XC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xc)return{bytesValue:gA(r.serializer,t._byteString)};if(t instanceof mr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${QC(t)}`)}(n,e)}function uO(n,e){const t={};return D0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,o)=>{const u=Ig(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function cO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof XC||n instanceof xc||n instanceof mr||n instanceof Eg)}function XM(n,e,t){if(!cO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QC(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function EE(n,e,t){if((e=(0,an.m9)(e))instanceof Xl)return e._internalPath;if("string"==typeof e)return nb(n,e);throw rb("Field path arguments must be of type string or ",n,!1,void 0,t)}const vk=new RegExp("[~\\*/\\[\\]]");function nb(n,e,t){if(e.search(vk)>=0)throw rb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xl(...e.split("."))._internalPath}catch{throw rb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rb(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${o}`),_+=")"),new Re(ue.INVALID_ARGUMENT,g+n+_)}function lO(n,e){return n.some(t=>t.isEqual(e))}class wE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _k(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ib("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _k extends wE{data(){return super.data()}}function ib(n,e){return"string"==typeof e?nb(n,e):e instanceof Xl?e._internalPath:e._delegate._internalPath}function dO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ex{}class IE extends ex{}function nf(n,e,...t){let r=[];e instanceof ex&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof qy).length,l=o.filter(g=>g instanceof DE).length;if(u>1||u>0&&l>0)throw new Re(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class DE extends IE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new DE(e,t,r)}_apply(e){const t=this._parse(e);return gO(e._query,t),new ts(e.firestore,e.converter,Iy(e._query,t))}_parse(e){const t=wg(e.firestore);return function(o,u,l,g,_,b,S){let N;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){pO(S,b);const G=[];for(const ne of S)G.push(fO(g,o,ne));N={arrayValue:{values:G}}}else N=fO(g,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||pO(S,b),N=aO(l,"where",S,"in"===b||"not-in"===b);return un.create(_,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qy extends ex{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const g of l)gO(u,g),u=Iy(u,g)}(e._query,t),new ts(e.firestore,e.converter,Iy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tx extends IE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tx(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new tg(o,u);return function(g,_){if(null===ig(g)){const b=wy(g);null!==b&&mO(0,b,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new du(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sb extends IE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sb(e,t,r)}_apply(e){return new ts(e.firestore,e.converter,Dy(e._query,this._limit,this._limitType))}}class ob extends IE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ob(e,t,r)}_apply(e){const t=hO(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(o=t,new du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ab extends IE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ab(e,t,r)}_apply(e){const t=hO(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(o=t,new du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function hO(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof wE)return function(o,u,l,g,_){if(!g)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of hu(o))if(S.field.isKeyField())b.push(Ic(u,g.key));else{const N=g.data.field(S.field);if(C0(N))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const G=S.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}b.push(N)}return new lu(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=wg(n.firestore);return function(u,l,g,_,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let ne=0;ne<b.length;ne++){const ve=b[ne];if(N[ne].field.isKeyField()){if("string"!=typeof ve)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ve}`);if(!N0(u)&&-1!==ve.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ve}' contains a slash.`);const De=u.path.child(hn.fromString(ve));if(!Je.isDocumentKey(De))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${De}' is not because it contains an odd number of segments.`);const Me=new Je(De);G.push(Ic(l,Me))}else{const De=aO(g,_,ve);G.push(De)}}return new lu(G,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function fO(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N0(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!Je.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ic(n,new Je(r))}if(t instanceof mr)return Ic(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QC(t)}.`)}function pO(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gO(n,e){if(e.isInequality()){const r=wy(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=ig(n);null!==u&&mO(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function mO(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nx{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gl(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new XC(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qp(e));default:return null}}convertTimestamp(e){const t=Ec(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);wt(wA(r));const o=new Us(r.get(1),r.get(3)),u=new Je(r.popFirst(5));return o.isEqual(t)||Or(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ub(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ak extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}class Dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ed extends wE{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new CE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ib("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class CE extends ed{data(e={}){return super.data(e)}}class rf{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Dg(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new CE(this._firestore,this._userDataWriter,r.key,r,new Dg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new CE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Dg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const g=new CE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Dg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:xk(l.type),doc:g,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function vO(n,e){return n instanceof ed&&e instanceof ed?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rf&&e instanceof rf&&n._firestore===e._firestore&&ZM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class sf extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}function _O(n,e,t){n=cn(n,mr);const r=cn(n.firestore,yr),o=ub(n.converter,e,t);return Zy(r,[tb(wg(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,ur.none())])}function EO(n,e,t,...r){n=cn(n,mr);const o=cn(n.firestore,yr),u=wg(o);let l;return l="string"==typeof(e=(0,an.m9)(e))||e instanceof Xl?JM(u,"updateDoc",n._key,e,t,r):QM(u,"updateDoc",n._key,e),Zy(o,[l.toMutation(n._key,ur.exists(!0))])}function wO(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||KM(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(KM(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let _,b,S;if(n instanceof mr)b=cn(n.firestore,yr),S=Hr(n._key.path),_={next:N=>{e[l]&&e[l](rx(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=cn(n,ts);b=cn(N.firestore,yr),S=N._query;const G=new sf(b);_={next:ne=>{e[l]&&e[l](new rf(b,G,N,ne))},error:e[l+1],complete:e[l+2]},dO(n._query)}return function(N,G,ne,ve){const De=new qC(ve),Me=new hM(G,De,ne);return N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return aM(yield Wy(N),Me)})),()=>{De.Dc(),N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return cM(yield Wy(N),Me)}))}}(ri(b),S,g,_)}function Zy(n,e){return function(t,r){const o=new ni;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function D1(n,e,t){return yM.apply(this,arguments)}(yield GM(t),r,o)})),o.promise}(ri(n),e)}function rx(n,e,t){const r=t.docs.get(e._key),o=new sf(n);return new ed(n,o,e._key,r,new Dg(t.hasPendingWrites,t.fromCache),e.converter)}const Zk={maxAttempts:5};class IO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,t,r){this._verifyNotCommitted();const o=af(e,this._firestore),u=ub(o.converter,t,r),l=tb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,ur.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=af(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof Xl?JM(this._dataReader,"WriteBatch.update",u._key,t,r,o):QM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=af(e,this._firestore);return this._mutations=this._mutations.concat(new ug(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function af(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Kk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=af(e,this._firestore),r=new Ak(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new wE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new wE(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=af(e,this._firestore),u=ub(o.converter,t,r),l=tb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=af(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof Xl?JM(this._dataReader,"Transaction.update",u._key,t,r,o):QM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=af(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=af(e,this._firestore),r=new sf(this._firestore);return super.get(e).then(o=>new ed(this._firestore,r,t._key,o._document,new Dg(!1,!1),t.converter))}}function ix(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function CO(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function bO(){if(!function YS(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$l=ru.SDK_VERSION,(0,ru._registerComponent)(new Pl.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new yr(new kS(t.getProvider("auth-internal")),new VS(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(g.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,ru.registerVersion)(l0,"3.12.2",n),(0,ru.registerVersion)(l0,"3.12.2","esm2017")}();class bE{constructor(e){this._delegate=e}static fromBase64String(e){return bO(),new bE(xc.fromBase64String(e))}static fromUint8Array(e){return CO(),new bE(xc.fromUint8Array(e))}toBase64(){return bO(),this._delegate.toBase64()}toUint8Array(){return CO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sx(n){return function iF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class sF{enableIndexedDbPersistence(e,t){return function rk(n,e){rO(n=cn(n,yr));const t=ri(n);if(t._uninitializedComponentsProvider)throw new Re(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ls("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Gy;return nO(t,o,new VM(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ik(n){rO(n=cn(n,yr));const e=ri(n);if(e._uninitializedComponentsProvider)throw new Re(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ls("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Gy;return nO(e,r,new LN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sk(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ni;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Uo.D())return Promise.resolve();const o=r+"main";yield Uo.delete(o)}),function(r){return t.apply(this,arguments)})(xA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Us||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ls("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){JN(this._delegate,e,t,r)}enableNetwork(){return function ak(n){return function z1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield BN(n),t=yield jN(n);return e.setNetworkEnabled(!0),function(r){const o=nt(r);return o.vu.delete(0),pE(o)}(t)}))}(ri(n=cn(n,yr)))}(this._delegate)}disableNetwork(){return function uk(n){return function G1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield BN(n),t=yield jN(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const u=nt(o);u.vu.add(0),yield Vy(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(ri(n=cn(n,yr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,qN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ok(n){return function(e){const t=new ni;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function S1(n,e){return IM.apply(this,arguments)}(yield GM(e),t)})),t.promise}(ri(n=cn(n,yr)))}(this._delegate)}onSnapshotsInSync(e){return function Uk(n,e){return function Z1(n,e){const t=new qC(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Wy(n),o=t,nt(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Wy(n),o=t,void nt(r).ku.delete(o);var r,o}))}}(ri(n=cn(n,yr)),KM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ky(this,XN(this._delegate,e))}catch(t){throw Bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ya(this,JC(this._delegate,e))}catch(t){throw Bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new js(this,function J1(n,e){if(n=cn(n,yE),qM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new du(hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Yk(n,e,t){n=cn(n,yr);const r=Object.assign(Object.assign({},Zk),t);return function(o){if(o.maxAttempts<1)throw new Re(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const g=new ni;return o.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function $N(n){return KC(n).then(e=>e.datastore)}(o);new $1(o.asyncQueue,_,l,u,g).run()})),g.promise}(ri(n),o=>e(new Kk(n,o)),r)}(this._delegate,t=>e(new SO(this,t)))}batch(){return ri(this._delegate),new AO(new IO(this._delegate,e=>Zy(this._delegate,e)))}loadBundle(e){return function ck(n,e){const t=ri(n=cn(n,yr)),r=new ek;return function K1(n,e,t,r){const o=function(u,l){let g;return g="string"==typeof u?lg().encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return VN(_,b);if(_ instanceof ArrayBuffer)return VN(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new B1(_,l);var _}(t,fE(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function V1(n,e,t){const r=nt(n);var o;(o=(0,_e.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(G,ne){const ve=nt(G),De=Fr(ne.createTime);return ve.persistence.runTransaction("hasNewerBundle","readonly",Me=>ve.qs.getBundleMetadata(Me,ne.id)).then(Me=>!!Me&&Me.createTime.compareTo(De)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(G=_).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);g._updateProgress(AN(_));const b=new y1(_,u.localStore,l.serializer);let S=yield l.bc();for(;S;){const G=yield b.zu(S);G&&g._updateProgress(G),S=yield l.bc()}const N=yield b.complete();return yield Jl(u,N.Ju,void 0),yield function(G,ne){const ve=nt(G);return ve.persistence.runTransaction("Save bundle","readwrite",De=>ve.qs.saveBundleMetadata(De,ne))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Hu)}catch(_){return Ls("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var G}),function(u,l,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield GM(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function lk(n,e){return function Y1(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=nt(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield YC(n),e)}))}(ri(n=cn(n,yr)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new js(this,t):null)}}class cb extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new bE(new xc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ya.forKey(t,this.firestore,null)}}class SO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cb(e)}get(e){const t=bg(e);return this._delegate.get(t).then(r=>new TE(this._firestore,new ed(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=bg(e);return r?(ix("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bg(e);return this._delegate.delete(t),this}}class AO{constructor(e){this._delegate=e}set(e,t,r){const o=bg(e);return r?(ix("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new CE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new SE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cg.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Cg(e,new cb(e),t),o.set(t,u)),u}}Cg.INSTANCES=new WeakMap;class ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ya(t,new mr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new ya(t,new mr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ky(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ky(this.firestore,XN(this._delegate,e))}catch(t){throw Bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof mr&&eO(this._delegate,e)}set(e,t){t=ix("DocumentReference.set",t);try{return t?_O(this._delegate,e,t):_O(this._delegate,e)}catch(r){throw Bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EO(this._delegate,e):EO(this._delegate,e,t,...r)}catch(o){throw Bs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Lk(n){return Zy(cn(n.firestore,yr),[new ug(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=MO(e),r=xO(e,o=>new TE(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return wO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Nk(n){n=cn(n,mr);const e=cn(n.firestore,yr),t=ri(e),r=new sf(e);return function W1(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,l){try{const g=yield function(_,b){const S=nt(_);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(o,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=jy(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield YC(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ed(e,r,n._key,o,new Dg(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Ok(n){n=cn(n,mr);const e=cn(n.firestore,yr);return HN(ri(e),n._key,{source:"server"}).then(t=>rx(e,n,t))}(this._delegate):function Rk(n){n=cn(n,mr);const e=cn(n.firestore,yr);return HN(ri(e),n._key).then(t=>rx(e,n,t))}(this._delegate),t.then(r=>new TE(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ya(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}function Bs(n,e,t){return n.message=n.message.replace(e,t),n}function MO(n){for(const e of n)if("object"==typeof e&&!sx(e))return e;return{}}function xO(n,e){var t,r;let o;return o=sx(n[0])?n[0]:sx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class TE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vO(this._delegate,e._delegate)}}class SE extends TE{data(e){const t=this._delegate.data(e);return function NS(n,e){n||st()}(void 0!==t),t}}class js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cb(e)}where(e,t,r){try{return new js(this.firestore,nf(this._delegate,function Ek(n,e,t){const r=e,o=ib("where",n);return DE._create(o,r,t)}(e,t,r)))}catch(o){throw Bs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new js(this.firestore,nf(this._delegate,function wk(n,e="asc"){const t=e,r=ib("orderBy",n);return tx._create(r,t)}(e,t)))}catch(r){throw Bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new js(this.firestore,nf(this._delegate,function Ik(n){return YN("limit",n),sb._create("limit",n,"F")}(e)))}catch(t){throw Bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new js(this.firestore,nf(this._delegate,function Dk(n){return YN("limitToLast",n),sb._create("limitToLast",n,"L")}(e)))}catch(t){throw Bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new js(this.firestore,nf(this._delegate,function Ck(...n){return ob._create("startAt",n,!0)}(...e)))}catch(t){throw Bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new js(this.firestore,nf(this._delegate,function bk(...n){return ob._create("startAfter",n,!1)}(...e)))}catch(t){throw Bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new js(this.firestore,nf(this._delegate,function Tk(...n){return ab._create("endBefore",n,!1)}(...e)))}catch(t){throw Bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new js(this.firestore,nf(this._delegate,function Sk(...n){return ab._create("endAt",n,!0)}(...e)))}catch(t){throw Bs(t,"endAt()","Query.endAt()")}}isEqual(e){return ZM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function kk(n){n=cn(n,ts);const e=cn(n.firestore,yr),t=ri(e),r=new sf(e);return function q1(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,l){try{const g=yield BC(o,u,!0),_=new RN(u,g.ir),b=_.sc(g.documents),S=_.applyChanges(b,!1);l.resolve(S.snapshot)}catch(g){const _=jy(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield YC(n),e,t);var r})),t.promise}(t,n._query).then(o=>new rf(e,r,n,o))}(this._delegate):"server"===e?.source?function Fk(n){n=cn(n,ts);const e=cn(n.firestore,yr),t=ri(e),r=new sf(e);return zN(t,n._query,{source:"server"}).then(o=>new rf(e,r,n,o))}(this._delegate):function Pk(n){n=cn(n,ts);const e=cn(n.firestore,yr),t=ri(e),r=new sf(e);return dO(n._query),zN(t,n._query).then(o=>new rf(e,r,n,o))}(this._delegate),t.then(r=>new ox(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=MO(e),r=xO(e,o=>new ox(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return wO(this._delegate,t,r)}withConverter(e){return new js(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}class aF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new SE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ox{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new SE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new aF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new SE(this._firestore,r))})}isEqual(e){return vO(this._delegate,e._delegate)}}class Ky extends js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ya(this.firestore,e):null}doc(e){try{return new ya(this.firestore,void 0===e?JC(this._delegate):JC(this._delegate,e))}catch(t){throw Bs(t,"doc()","CollectionReference.doc()")}}add(e){return function Vk(n,e){const t=cn(n.firestore,yr),r=JC(n),o=ub(n.converter,e);return Zy(t,[tb(wg(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ya(this.firestore,t))}isEqual(e){return eO(this._delegate,e._delegate)}withConverter(e){return new Ky(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}function bg(n){return cn(n,mr)}class ax{constructor(...e){this._delegate=new Xl(...e)}static documentId(){return new ax(gr.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Xl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Jk(){return new YM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tg(e)}static delete(){const e=function Qk(){return new _E("deleteField")}();return e._methodName="FieldValue.delete",new Tg(e)}static arrayUnion(...e){const t=function Xk(...n){return new gk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tg(t)}static arrayRemove(...e){const t=function eF(...n){return new mk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tg(t)}static increment(e){const t=function tF(n){return new yk("increment",n)}(e);return t._methodName="FieldValue.increment",new Tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uF={Firestore:TO,GeoPoint:XC,Timestamp:Xn,Blob:bE,Transaction:SO,WriteBatch:AO,DocumentReference:ya,DocumentSnapshot:TE,Query:js,QueryDocumentSnapshot:SE,QuerySnapshot:ox,CollectionReference:Ky,FieldPath:ax,FieldValue:Tg,setLogLevel:function oF(n){!function RS(n){au.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function lF(n){(function cF(n,e){n.INTERNAL.registerComponent(new Pl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},uF)))})(n,(e,t)=>new TO(e,t,new sF)),n.registerVersion("@firebase/firestore-compat","0.3.11")}(p_.Z);var dF=L(3019),lb=L(3093),hF=L(4552);class fF extends xo.x{constructor(e=1/0,t=1/0,r=hF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var pF=L(3020);function RO(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,pF.B)({connector:()=>new fF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function NO(n,e){return(0,Vd.m)(e)?(0,Rr.w)(()=>n,e):(0,Rr.w)(()=>n)}var ux=L(5137),uf=L(3182);class Yy{constructor(e){return e}}class cx{constructor(){return(0,uf.C6)()}}const lx=new h.OlP("angularfire2._apps"),mF={provide:Yy,useFactory:function gF(n){return n&&1===n.length?n[0]:new Yy((0,uf.Mq)())},deps:[[new h.FiY,lx]]},yF={provide:cx,deps:[[new h.FiY,lx]]};function vF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Yy(r)}}let _F=(()=>{class n{constructor(t){(0,uf.KN)("angularfire",wn.q4.full,"core"),(0,uf.KN)("angularfire",wn.q4.full,"app"),(0,uf.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[mF,yF]}),n})();function EF(n,...e){return{ngModule:_F,providers:[{provide:lx,useFactory:vF(n),multi:!0,deps:[h.R0b,h.zs3,wn.HU,...e]}]}}const wF=(0,wn.u3)(uf.ZF,!0),dx=new Map,OO={activated:!1,tokenObservers:[]},IF={initialized:!1,enabled:!1};function zr(n){return dx.get(n)||Object.assign({},OO)}function db(){return IF}const hx="https://content-firebaseappcheck.googleapis.com/v1",TF="exchangeDebugToken",PO={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class AF{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function MF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ns=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fx(n){if(!zr(n).activated)throw ns.create("use-before-activation",{appName:n.name})}function pb(n,e){return gx.apply(this,arguments)}function gx(){return gx=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(N){throw ns.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw ns.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(N){throw ns.create("fetch-parse-error",{originalErrorMessage:N?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(_[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),gx.apply(this,arguments)}function kO(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${hx}/projects/${t}/apps/${r}:${TF}?key=${o}`,body:{debug_token:e}}}const OF="firebase-app-check-database",PF=1,AE="firebase-app-check-store";let gb=null;function mx(){return mx=(0,_e.Z)(function*(n,e){const r=(yield function LO(){return gb||(gb=new Promise((n,e)=>{try{const t=indexedDB.open(OF,PF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ns.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(AE,{keyPath:"compositeKey"})}}catch(t){e(ns.create("storage-open",{originalErrorMessage:t?.message}))}}),gb)}()).transaction(AE,"readwrite"),u=r.objectStore(AE).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var b;g(ns.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),mx.apply(this,arguments)}const ME=new No.Yd("@firebase/app-check");function _x(n,e){return(0,an.hl)()?function FF(n,e){return function VO(n,e){return mx.apply(this,arguments)}(function BO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ME.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wx(){return db().enabled}function Ix(){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,_e.Z)(function*(){const n=db();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Dx.apply(this,arguments)}const $F={error:"UNKNOWN_ERROR"};function HF(n){return an.US.encodeString(JSON.stringify(n),!1)}function mb(n){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,_e.Z)(function*(n,e=!1){const t=n.app;fx(t);const r=zr(t);let u,o=r.token;if(o&&!Qy(o)&&(r.token=void 0,o=void 0),!o){const _=yield r.cachedTokenPromise;_&&(Qy(_)?o=_:yield _x(t,void 0))}if(!e&&o&&Qy(o))return{token:o.token};let g,l=!1;if(wx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pb(kO(t,yield Ix()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield _x(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield zr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?ME.warn(_.message):ME.error(_),u=_}return o?u?g=Qy(o)?{token:o.token,internalError:u}:zO(u):(g={token:o.token},r.token=o,yield _x(t,o)):g=zO(u),l&&function HO(n,e){const t=zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),Cx.apply(this,arguments)}function bx(){return bx=(0,_e.Z)(function*(n){const e=n.app;fx(e);const{provider:t}=zr(e);if(wx()){const r=yield Ix(),{token:o}=yield pb(kO(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),bx.apply(this,arguments)}function Sx(n,e){const t=zr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $O(n){const{app:e}=n,t=zr(e);let r=t.tokenRefresher;r||(r=function zF(n){const{app:e}=n;return new AF((0,_e.Z)(function*(){let r;if(r=zr(e).token?yield mb(n,!0):yield mb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},PO.RETRIAL_MIN_WAIT,PO.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Qy(n){return n.expireTimeMillis-Date.now()>0}function zO(n){return{token:HF($F),error:n}}class GF{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=zr(this.app);for(const t of e)Sx(this.app,t.next);return Promise.resolve()}}const JO="app-check-internal";!function sL(){(0,ru._registerComponent)(new Pl.wA("app-check",n=>function WF(n,e){return new GF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JO).initialize()})),(0,ru._registerComponent)(new Pl.wA(JO,n=>function qF(n){return{getToken:e=>mb(n,e),getLimitedUseToken:()=>function jO(n){return bx.apply(this,arguments)}(n),addTokenListener:e=>function Tx(n,e,t,r){const{app:o}=n,u=zr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Qy(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),$O(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$O(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ru.registerVersion)("@firebase/app-check","0.8.0")}();class xE{constructor(){return(0,wn.vb)("app-check")}}typeof window<"u"&&window,L(7142);const eP=new h.OlP("angularfire2.auth.use-emulator"),tP=new h.OlP("angularfire2.auth.settings"),nP=new h.OlP("angularfire2.auth.tenant-id"),rP=new h.OlP("angularfire2.auth.langugage-code"),iP=new h.OlP("angularfire2.auth.use-device-language"),sP=new h.OlP("angularfire.auth.persistence"),oP=(n,e,t,r,o,u,l,g)=>(0,Ri.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))_.settings[b]=S;return g&&_.setPersistence(g),_},[t,r,o,u,l,g]);let aP=(()=>{class n{constructor(t,r,o,u,l,g,_,b,S,N,G,ne){const ve=new xo.x,De=(0,Ct.of)(void 0).pipe((0,lb.Q)(l.outsideAngular),(0,Rr.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,6365)))),(0,Lt.U)(()=>(0,Ri.on)(t,u,r)),(0,Lt.U)(Me=>oP(Me,u,g,b,S,N,_,G)),RO({bufferSize:1,refCount:!1}));if(Hi(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ct.of)(null);else{De.pipe(ec()).subscribe();const lt=De.pipe((0,Rr.w)(xt=>xt.getRedirectResult().then($t=>$t,()=>null)),wn.iC,RO({bufferSize:1,refCount:!1})),Mt=De.pipe((0,Rr.w)(xt=>new gi.y($t=>({unsubscribe:u.runOutsideAngular(()=>xt.onAuthStateChanged(on=>$t.next(on),on=>$t.error(on),()=>$t.complete()))})))),ot=De.pipe((0,Rr.w)(xt=>new gi.y($t=>({unsubscribe:u.runOutsideAngular(()=>xt.onIdTokenChanged(on=>$t.next(on),on=>$t.error(on),()=>$t.complete()))}))));this.authState=lt.pipe(NO(Mt),(0,ux.R)(l.outsideAngular),(0,lb.Q)(l.insideAngular)),this.user=lt.pipe(NO(ot),(0,ux.R)(l.outsideAngular),(0,lb.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Rr.w)(xt=>xt?(0,En.D)(xt.getIdToken()):(0,Ct.of)(null))),this.idTokenResult=this.user.pipe((0,Rr.w)(xt=>xt?(0,En.D)(xt.getIdTokenResult()):(0,Ct.of)(null))),this.credential=(0,dF.T)(lt,ve,this.authState.pipe(Rs(xt=>!xt))).pipe((0,Lt.U)(xt=>xt?.user?xt:null),(0,ux.R)(l.outsideAngular),(0,lb.Q)(l.insideAngular))}return(0,Ri.pX)(this,De,u,{spy:{apply:(Me,lt,Mt)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&Mt.then(ot=>ve.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(wn.HU),h.LFG(eP,8),h.LFG(tP,8),h.LFG(nP,8),h.LFG(rP,8),h.LFG(iP,8),h.LFG(sP,8),h.LFG(xE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function uP(n,e){return function dL(n,e=II.z){return new gi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Nx(n,e){return uP(n,e).pipe((0,Lt.U)(t=>({payload:t,type:"query"})))}function vb(n,e){return Nx(n,e).pipe(Zf(void 0),f_(),(0,Lt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=o.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function cP(n,e,t){return vb(n,t).pipe(sm((r,o)=>function fL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function pL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ox(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ox(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ox(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,cS.x)(),(0,Lt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Ox(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function lP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Lt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Zf(void 0),f_(),Rs(([r,o])=>o.length>0||!r),(0,Lt.U)(([r,o])=>o),wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(sm((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lP(e);return cP(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return Nx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),wn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(wn.iC)}add(e){return this.ref.add(e)}doc(e){return new hP(this.ref.doc(e),this.afs)}}class hP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=fP(r,t);return new dP(o,u,this.afs)}snapshotChanges(){return function hL(n,e){return uP(n,e).pipe(Zf(void 0),f_(),(0,Lt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(wn.iC)}}class gL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Rs(t=>t.length>0),wn.iC):vb(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(sm((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lP(e);return cP(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return Nx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),wn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(wn.iC)}}const mL=new h.OlP("angularfire2.enableFirestorePersistence"),yL=new h.OlP("angularfire2.firestore.persistenceSettings"),vL=new h.OlP("angularfire2.firestore.settings"),_L=new h.OlP("angularfire2.firestore.use-emulator");function fP(n,e=(t=>t)){return{query:e(n),ref:n}}let EL=(()=>{class n{constructor(t,r,o,u,l,g,_,b,S,N,G,ne,ve,De,Me,lt,Mt){this.schedulers=_;const ot=(0,Ri.on)(t,g,r),xt=S;N&&oP(ot,g,G,ve,De,Me,ne,lt),[this.firestore,this.persistenceEnabled$]=(0,Ri.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const $t=g.runOutsideAngular(()=>ot.firestore());if(u&&$t.settings(u),xt&&$t.useEmulator(...xt),o&&!Hi(l)){const on=()=>{try{return(0,En.D)($t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ws){return typeof console<"u"&&console.warn(ws),(0,Ct.of)(!1)}};return[$t,g.runOutsideAngular(on)]}return[$t,(0,Ct.of)(!1)]},[u,xt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=fP(o,r),g=this.schedulers.ngZone.run(()=>u);return new dP(g,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new gL(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new hP(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(mL,8),h.LFG(vL,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(wn.HU),h.LFG(yL,8),h.LFG(_L,8),h.LFG(aP,8),h.LFG(eP,8),h.LFG(tP,8),h.LFG(nP,8),h.LFG(rP,8),h.LFG(iP,8),h.LFG(sP,8),h.LFG(xE,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_b=(()=>{class n{constructor(t,r,o){this.http=t,this.firestore=r,this.router=o,this.user=new xs.X(null)}signup(t,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCgZpa69S4Mt_o_x8QIrm6S7mYE-QWbE1o",{email:t,password:r,returnSecureToken:!0}).pipe(Oi(this.handleError),(0,yi.b)(o=>{this.handleAuth(o.email,o.localId,o.idToken,+o.expiresIn),console.log(o)}))}login(t,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCgZpa69S4Mt_o_x8QIrm6S7mYE-QWbE1o",{email:t,password:r,returnSecureToken:!0}).pipe(Oi(this.handleError),(0,yi.b)(o=>this.handleAuth(o.email,o.localId,o.idToken,+o.expiresIn)))}storeUser(t){return this.firestore.collection("UserData").add({name:t.name,email:t.email})}getUser(t){return console.log(t),this.firestore.collection("UserData",r=>r.where("email","==",t)).valueChanges()}handleError(t){return Hd(t.error.error.message)}handleAuth(t,r,o,u){const l=new Date((new Date).getTime()+1e3*u),g=new n_(t,r,o,l);this.user.next(g),this.autoLogout(1e3*u),localStorage.setItem("loggedData",JSON.stringify(g))}autoLogin(){const t=localStorage.getItem("loggedData"),r=t?JSON.parse(t):null;if(!r)return;const o=new n_(r.email,r.userId,r._token,new Date(r._tokenExpirationDate));if(o.token){this.user.next(o);const u=new Date(r._tokenExpirationDate).getTime()-(new Date).getTime();this.autoLogout(u)}}autoLogout(t){this.tokenExpirationTimer=setTimeout(()=>{this.logout()},t)}logout(){this.user.next(null),this.router.navigate(["/auth"]),localStorage.removeItem("loggedData"),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uc),h.LFG(EL),h.LFG(Pi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-logo"]],decls:1,vars:0,consts:[["src","../../assets/Screenshot_2023-06-17_183301-removebg-preview.png","alt",""]],template:function(t,r){1&t&&h._UZ(0,"img",0)},styles:["img[_ngcontent-%COMP%]{margin:auto}*[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:30%}"]}),n})();function IL(n,e){1&n&&(h.TgZ(0,"div",5)(1,"label",15),h._uU(2,"NAME"),h.qZA(),h._UZ(3,"input",16),h.qZA())}const DL=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:kT},{path:"upload",component:FT,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.user.pipe(Za(1),(0,Lt.U)(o=>!!o||this.router.createUrlTree(["/auth"])))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_b),h.LFG(Pi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"auth",component:(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.isLoginMode=!0,this.name="",this.email=""}onSignup(){this.isLoginMode=!this.isLoginMode}onSubmit(t){console.log(t.value);const r=t.value.email,o=t.value.password,l={email:r,name:t.value.name};this.isLoginMode?this.auth.login(r,o).subscribe(()=>{this.auth.getUser(r).subscribe(g=>{this.name=g[0].name,this.email=g[0].email,console.log(this.name,this.email),this.router.navigate(["/upload"])})}):this.auth.signup(r,o).subscribe(()=>{this.auth.storeUser(l)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_b),h.Y36(Pi))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-auth"]],decls:25,vars:4,consts:[[1,"row"],[1,"col-xs-8","col-md-6","col-md-offset-3"],[3,"ngSubmit"],["authForm","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","email","ngModel","","name","email","placeholder","EMAIL","required","","email","",1,"form-control"],["for","password"],["type","password","ngModel","","name","password","placeholder","PASSWORD","required","","password","",1,"form-control"],["type","submit",1,"btn","btn-dark",3,"disabled"],[1,"divi"],["for","sign up"],["type","button",1,"btn","btn-dark",3,"click"],[1,"col-xs-4","col-md-6",2,"height","60vh","margin-top","20vh","align-content","center"],["for","username"],["type","text","ngModel","","name","name","placeholder","NAME","required","",1,"form-control"]],template:function(t,r){if(1&t){const o=h.EpF();h.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),h.NdJ("ngSubmit",function(){h.CHM(o);const l=h.MAs(3);return h.KtG(r.onSubmit(l))}),h.YNc(4,IL,4,0,"div",4),h.TgZ(5,"div",5)(6,"label",6),h._uU(7,"EMAIL"),h.qZA(),h._UZ(8,"input",7),h.qZA(),h.TgZ(9,"div",5)(10,"label",8),h._uU(11,"PASSWORD"),h.qZA(),h._UZ(12,"input",9),h.qZA(),h.TgZ(13,"div")(14,"button",10),h._uU(15),h.qZA(),h.TgZ(16,"span",11),h._uU(17,"|"),h.qZA(),h._uU(18,"\xa0 "),h.TgZ(19,"label",12),h._uU(20,"NEW USER?"),h.qZA(),h.TgZ(21,"button",13),h.NdJ("click",function(){return r.onSignup()}),h._uU(22),h.qZA()()()(),h.TgZ(23,"div",14),h._UZ(24,"app-logo"),h.qZA()()}if(2&t){const o=h.MAs(3);h.xp6(4),h.Q6J("ngIf",!r.isLoginMode),h.xp6(10),h.Q6J("disabled",!o.valid),h.xp6(1),h.Oqu(r.isLoginMode?"Login":"Sign Up"),h.xp6(7),h.Oqu(r.isLoginMode?"Sign Up":"Login")}},dependencies:[Ho,NE,to,Rf,Cn,em,tm,rv,vl,wL],styles:["*[_ngcontent-%COMP%]{color:#fff}form[_ngcontent-%COMP%]{width:90%}button[_ngcontent-%COMP%]{border:1px white solid;margin:1vh}button[_ngcontent-%COMP%]:disabled{border:1px white solid}.divi[_ngcontent-%COMP%]{font-size:4vh}label[_ngcontent-%COMP%]{font-size:1.5vh}input[_ngcontent-%COMP%]{color:#000}"]}),n})()},{path:"profile",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-user-profile"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-xs-12"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"table")(3,"thead")(4,"th"),h._uU(5," HSJkl "),h.qZA()()()()())}}),n})()}];let CL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ih.forRoot(DL),ih]}),n})();function bL(n,e){1&n&&(h.TgZ(0,"a",17),h._uU(1,"Login/Sign Up"),h.qZA())}function TL(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"a",18),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.logout())}),h._uU(1,"Logout"),h.qZA()}}function SL(n,e){1&n&&(h.TgZ(0,"a",19),h._UZ(1,"img",20),h.qZA())}let AL=(()=>{class n{constructor(t){this.auth=t,this.isAuth=!1}ngOnInit(){this.userSub=this.auth.user.subscribe(t=>{this.isAuth=!!t,console.log(this.isAuth),console.log(this.auth)})}ngOnDestroy(){this.userSub.unsubscribe()}logout(){this.auth.logout()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header-component"]],decls:22,vars:3,consts:[[1,"header"],[1,"navbar","fixed-top","navbar-expand-lg"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","../../assets/Screenshot_2023-06-17_183301-removebg-preview.png","alt","",2,"width","70px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","btn-nav-accordion"],[1,"navbar-toggler-icon","navbar-dark"],[1,"fas","fa-chevron-down"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","coll"],[1,"nav-item"],["routerLink","home","routerLinkActive","active","aria-current","page",1,"nav-link","active"],["routerLinkActive","active",1,"nav-item"],["routerLink","/upload",1,"nav-link"],["routerLink","/auth","class","nav-link",4,"ngIf"],["style","cursor: pointer;","class","nav-link",3,"click",4,"ngIf"],["class","nav-link","routerLink","profile",4,"ngIf"],["routerLink","/auth",1,"nav-link"],[1,"nav-link",2,"cursor","pointer",3,"click"],["routerLink","profile",1,"nav-link"],["src","https://source.unsplash.com/random","alt","",2,"width","50px","height","50px","border-radius","50%","border","1px solid black"]],template:function(t,r){1&t&&(h.TgZ(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),h._UZ(4,"img",4),h.qZA(),h.TgZ(5,"button",5),h._UZ(6,"span",6)(7,"i",7),h.qZA()(),h.TgZ(8,"div",8)(9,"ul",9)(10,"li",10)(11,"a",11),h._uU(12,"Home"),h.qZA()(),h.TgZ(13,"li",12)(14,"a",13),h._uU(15,"Upload"),h.qZA()(),h.TgZ(16,"li",12),h.YNc(17,bL,2,0,"a",14),h.qZA(),h.TgZ(18,"li",10),h.YNc(19,TL,2,0,"a",15),h.qZA(),h.TgZ(20,"li",10),h.YNc(21,SL,2,0,"a",16),h.qZA()()()()()),2&t&&(h.xp6(17),h.Q6J("ngIf",!r.isAuth),h.xp6(2),h.Q6J("ngIf",r.isAuth),h.xp6(2),h.Q6J("ngIf",r.isAuth))},dependencies:[Ho,Tm,Xv],styles:[".navbar[_ngcontent-%COMP%]{background-color:#303030}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-weight:900}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:ease-in .15s}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{transform:scale(.9);transition:ease-in .15s}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:auto}.collapse[_ngcontent-%COMP%]{width:40%;flex-flow:row-reverse}.active[_ngcontent-%COMP%]{background-color:#252525}"]}),n})(),ML=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.title="MindShare"}ngOnInit(){this.auth.autoLogin()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_b),h.Y36(Pi))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12"]],template:function(t,r){1&t&&(h._UZ(0,"app-header-component"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2),h._UZ(4,"router-outlet"),h.qZA()()())},dependencies:[sp,AL],styles:[".container[_ngcontent-%COMP%]{padding-top:15vh}"]}),n})();const pP_firebase={apiKey:"AIzaSyCgZpa69S4Mt_o_x8QIrm6S7mYE-QWbE1o",authDomain:"mindshare-3ab39.firebaseapp.com",databaseURL:"https://mindshare-3ab39-default-rtdb.firebaseio.com",projectId:"mindshare-3ab39",storageBucket:"mindshare-3ab39.appspot.com",messagingSenderId:"1026892817254",appId:"1:1026892817254:web:34f55c8c9e0fe7e3d6dea7",measurementId:"G-K32GDX0Z5Y"};var xL=L(6878);class Px{constructor(e){return e}}class mP{constructor(){return(0,wn.vb)("auth")}}const kx=new h.OlP("angularfire2.auth-instances");function NL(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Px(r)}}const OL={provide:mP,deps:[[new h.FiY,kx]]},PL={provide:Px,useFactory:function RL(n,e){const t=(0,wn.JM)("auth",n,e);return t&&new Px(t)},deps:[[new h.FiY,kx],Yy]};let kL=(()=>{class n{constructor(){(0,uf.KN)("angularfire",wn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[PL,OL]}),n})();function FL(n,...e){return{ngModule:kL,providers:[{provide:kx,useFactory:NL(n),multi:!0,deps:[h.R0b,h.zs3,wn.HU,cx,[new h.FiY,xE],...e]}]}}const LL=(0,wn.u3)(xL.o,!0);class Fx{constructor(e){return e}}const yP="firestore",Lx=new h.OlP("angularfire2.firestore-instances");function BL(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Fx(r)}}const jL={provide:class VL{constructor(){return(0,wn.vb)(yP)}},deps:[[new h.FiY,Lx]]},$L={provide:Fx,useFactory:function UL(n,e){const t=(0,wn.JM)(yP,n,e);return t&&new Fx(t)},deps:[[new h.FiY,Lx],Yy]};let HL=(()=>{class n{constructor(){(0,uf.KN)("angularfire",wn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[$L,jL]}),n})();function zL(n,...e){return{ngModule:HL,providers:[{provide:Lx,useFactory:BL(n),multi:!0,deps:[h.R0b,h.zs3,wn.HU,cx,[new h.FiY,mP],[new h.FiY,xE],...e]}]}}const GL=(0,wn.u3)(nk,!0);let WL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[ML]}),n.\u0275inj=h.cJS({imports:[iS,il,Ri.hO,CL,QE,EF(()=>wF(pP_firebase)),FL(()=>LL()),zL(()=>GL()),Ri.hO.initializeApp(pP_firebase)]}),n})();Pu().bootstrapModule(WL).catch(n=>console.error(n))},5619:(pt,Ce,L)=>{L.d(Ce,{X:()=>B});var h=L(8645);class B extends h.x{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const ie=super._subscribe(Y);return!ie.closed&&Y.next(this._value),ie}getValue(){const{hasError:Y,thrownError:ie,_value:fe}=this;if(Y)throw ie;return this._throwIfClosed(),fe}next(Y){super.next(this._value=Y)}}},5592:(pt,Ce,L)=>{L.d(Ce,{y:()=>Se});var h=L(1887),B=L(7394),O=L(4850),Y=L(8407),ie=L(2653),fe=L(4674),ge=L(1441);let Se=(()=>{class te{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const We=new te;return We.source=this,We.operator=Ae,We}subscribe(Ae,We,xe){const qe=function z(te){return te&&te instanceof h.Lv||function $(te){return te&&(0,fe.m)(te.next)&&(0,fe.m)(te.error)&&(0,fe.m)(te.complete)}(te)&&(0,B.Nn)(te)}(Ae)?Ae:new h.Hp(Ae,We,xe);return(0,ge.x)(()=>{const{operator:Oe,source:yt}=this;qe.add(Oe?Oe.call(qe,yt):yt?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(We){Ae.error(We)}}forEach(Ae,We){return new(We=pe(We))((xe,qe)=>{const Oe=new h.Hp({next:yt=>{try{Ae(yt)}catch(ut){qe(ut),Oe.unsubscribe()}},error:qe,complete:xe});this.subscribe(Oe)})}_subscribe(Ae){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,Y.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((We,xe)=>{let qe;this.subscribe(Oe=>qe=Oe,Oe=>xe(Oe),()=>We(qe))})}}return te.create=ke=>new te(ke),te})();function pe(te){var ke;return null!==(ke=te??ie.config.Promise)&&void 0!==ke?ke:Promise}},8645:(pt,Ce,L)=>{L.d(Ce,{x:()=>ge});var h=L(5592),B=L(7394);const Y=(0,L(2306).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(9039),fe=L(1441);let ge=(()=>{class pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const te=new Se(this,this);return te.operator=z,te}_throwIfClosed(){if(this.closed)throw new Y}next(z){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(z)}})}error(z){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:te}=this;for(;te.length;)te.shift().error(z)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:te,isStopped:ke,observers:Ae}=this;return te||ke?B.Lc:(this.currentObservers=null,Ae.push(z),new B.w0(()=>{this.currentObservers=null,(0,ie.P)(Ae,z)}))}_checkFinalizedStatuses(z){const{hasError:te,thrownError:ke,isStopped:Ae}=this;te?z.error(ke):Ae&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return pe.create=($,z)=>new Se($,z),pe})();class Se extends ge{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,te;null===(te=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===te||te.call(z,$)}error($){var z,te;null===(te=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===te||te.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,te;return null!==(te=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==te?te:B.Lc}}},1887:(pt,Ce,L)=>{L.d(Ce,{Hp:()=>xe,Lv:()=>te});var h=L(4674),B=L(7394),O=L(2653),Y=L(3894);function ie(){}const fe=pe("C",void 0,void 0);function pe(ee,Ee,se){return{kind:ee,value:Ee,error:se}}var $=L(7599),z=L(1441);class te extends B.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,B.Nn)(Ee)&&Ee.add(this)):this.destination=ut}static create(Ee,se,he){return new xe(Ee,se,he)}next(Ee){this.isStopped?yt(function Se(ee){return pe("N",ee,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?yt(function ge(ee){return pe("E",void 0,ee)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?yt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Ae(ee,Ee){return ke.call(ee,Ee)}class We{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:se}=this;if(se.next)try{se.next(Ee)}catch(he){qe(he)}}error(Ee){const{partialObserver:se}=this;if(se.error)try{se.error(Ee)}catch(he){qe(he)}else qe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(se){qe(se)}}}class xe extends te{constructor(Ee,se,he){let Ne;if(super(),(0,h.m)(Ee)||!Ee)Ne={next:Ee??void 0,error:se??void 0,complete:he??void 0};else{let J;this&&O.config.useDeprecatedNextContext?(J=Object.create(Ee),J.unsubscribe=()=>this.unsubscribe(),Ne={next:Ee.next&&Ae(Ee.next,J),error:Ee.error&&Ae(Ee.error,J),complete:Ee.complete&&Ae(Ee.complete,J)}):Ne=Ee}this.destination=new We(Ne)}}function qe(ee){O.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(ee):(0,Y.h)(ee)}function yt(ee,Ee){const{onStoppedNotification:se}=O.config;se&&$.z.setTimeout(()=>se(ee,Ee))}const ut={closed:!0,next:ie,error:function Oe(ee){throw ee},complete:ie}},7394:(pt,Ce,L)=>{L.d(Ce,{Lc:()=>fe,w0:()=>ie,Nn:()=>ge});var h=L(4674);const O=(0,L(2306).d)(pe=>function(z){pe(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((te,ke)=>`${ke+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var Y=L(9039);class ie{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ae of z)Ae.remove(this);else z.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(Ae){$=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Ae of ke)try{Se(Ae)}catch(We){$=$??[],We instanceof O?$=[...$,...We.errors]:$.push(We)}}if($)throw new O($)}}add($){var z;if($&&$!==this)if(this.closed)Se($);else{if($ instanceof ie){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,Y.P)(z,$)}remove($){const{_finalizers:z}=this;z&&(0,Y.P)(z,$),$ instanceof ie&&$._removeParent(this)}}ie.EMPTY=(()=>{const pe=new ie;return pe.closed=!0,pe})();const fe=ie.EMPTY;function ge(pe){return pe instanceof ie||pe&&"closed"in pe&&(0,h.m)(pe.remove)&&(0,h.m)(pe.add)&&(0,h.m)(pe.unsubscribe)}function Se(pe){(0,h.m)(pe)?pe():pe.unsubscribe()}},2653:(pt,Ce,L)=>{L.d(Ce,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(pt,Ce,L)=>{L.d(Ce,{E:()=>B});const B=new(L(5592).y)(ie=>ie.complete())},2459:(pt,Ce,L)=>{L.d(Ce,{D:()=>Ee});var h=L(4829),B=L(3093),O=L(5137),fe=L(5592),Se=L(4971),pe=L(4674),$=L(7103);function te(se,he){if(!se)throw new Error("Iterable cannot be null");return new fe.y(Ne=>{(0,$.f)(Ne,he,()=>{const J=se[Symbol.asyncIterator]();(0,$.f)(Ne,he,()=>{J.next().then(Xe=>{Xe.done?Ne.complete():Ne.next(Xe.value)})},0,!0)})})}var ke=L(8382),Ae=L(4026),We=L(4266),xe=L(3664),qe=L(5726),Oe=L(9853),yt=L(541);function Ee(se,he){return he?function ee(se,he){if(null!=se){if((0,ke.c)(se))return function Y(se,he){return(0,h.Xf)(se).pipe((0,O.R)(he),(0,B.Q)(he))}(se,he);if((0,We.z)(se))return function ge(se,he){return new fe.y(Ne=>{let J=0;return he.schedule(function(){J===se.length?Ne.complete():(Ne.next(se[J++]),Ne.closed||this.schedule())})})}(se,he);if((0,Ae.t)(se))return function ie(se,he){return(0,h.Xf)(se).pipe((0,O.R)(he),(0,B.Q)(he))}(se,he);if((0,qe.D)(se))return te(se,he);if((0,xe.T)(se))return function z(se,he){return new fe.y(Ne=>{let J;return(0,$.f)(Ne,he,()=>{J=se[Se.h](),(0,$.f)(Ne,he,()=>{let Xe,$e;try{({value:Xe,done:$e}=J.next())}catch(Kt){return void Ne.error(Kt)}$e?Ne.complete():Ne.next(Xe)},0,!0)}),()=>(0,pe.m)(J?.return)&&J.return()})}(se,he);if((0,yt.L)(se))return function ut(se,he){return te((0,yt.Q)(se),he)}(se,he)}throw(0,Oe.z)(se)}(se,he):(0,h.Xf)(se)}},4829:(pt,Ce,L)=>{L.d(Ce,{Xf:()=>ke});var h=L(7582),B=L(4266),O=L(4026),Y=L(5592),ie=L(8382),fe=L(5726),ge=L(9853),Se=L(3664),pe=L(541),$=L(4674),z=L(3894),te=L(4850);function ke(ee){if(ee instanceof Y.y)return ee;if(null!=ee){if((0,ie.c)(ee))return function Ae(ee){return new Y.y(Ee=>{const se=ee[te.L]();if((0,$.m)(se.subscribe))return se.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,B.z)(ee))return function We(ee){return new Y.y(Ee=>{for(let se=0;se<ee.length&&!Ee.closed;se++)Ee.next(ee[se]);Ee.complete()})}(ee);if((0,O.t)(ee))return function xe(ee){return new Y.y(Ee=>{ee.then(se=>{Ee.closed||(Ee.next(se),Ee.complete())},se=>Ee.error(se)).then(null,z.h)})}(ee);if((0,fe.D)(ee))return Oe(ee);if((0,Se.T)(ee))return function qe(ee){return new Y.y(Ee=>{for(const se of ee)if(Ee.next(se),Ee.closed)return;Ee.complete()})}(ee);if((0,pe.L)(ee))return function yt(ee){return Oe((0,pe.Q)(ee))}(ee)}throw(0,ge.z)(ee)}function Oe(ee){return new Y.y(Ee=>{(function ut(ee,Ee){var se,he,Ne,J;return(0,h.mG)(this,void 0,void 0,function*(){try{for(se=(0,h.KL)(ee);!(he=yield se.next()).done;)if(Ee.next(he.value),Ee.closed)return}catch(Xe){Ne={error:Xe}}finally{try{he&&!he.done&&(J=se.return)&&(yield J.call(se))}finally{if(Ne)throw Ne.error}}Ee.complete()})})(ee,Ee).catch(se=>Ee.error(se))})}},3019:(pt,Ce,L)=>{L.d(Ce,{T:()=>fe});var h=L(7537),B=L(4829),O=L(6232),Y=L(4564),ie=L(2459);function fe(...ge){const Se=(0,Y.yG)(ge),pe=(0,Y._6)(ge,1/0),$=ge;return $.length?1===$.length?(0,B.Xf)($[0]):(0,h.J)(pe)((0,ie.D)($,Se)):O.E}},2096:(pt,Ce,L)=>{L.d(Ce,{of:()=>O});var h=L(4564),B=L(2459);function O(...Y){const ie=(0,h.yG)(Y);return(0,B.D)(Y,ie)}},8251:(pt,Ce,L)=>{L.d(Ce,{x:()=>B});var h=L(1887);function B(Y,ie,fe,ge,Se){return new O(Y,ie,fe,ge,Se)}class O extends h.Lv{constructor(ie,fe,ge,Se,pe,$){super(ie),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=fe?function(z){try{fe(z)}catch(te){ie.error(te)}}:super._next,this._error=Se?function(z){try{Se(z)}catch(te){ie.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(z){ie.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},3997:(pt,Ce,L)=>{L.d(Ce,{x:()=>Y});var h=L(2737),B=L(9360),O=L(8251);function Y(fe,ge=h.y){return fe=fe??ie,(0,B.e)((Se,pe)=>{let $,z=!0;Se.subscribe((0,O.x)(pe,te=>{const ke=ge(te);(z||!fe($,ke))&&(z=!1,$=ke,pe.next(te))}))})}function ie(fe,ge){return fe===ge}},7398:(pt,Ce,L)=>{L.d(Ce,{U:()=>O});var h=L(9360),B=L(8251);function O(Y,ie){return(0,h.e)((fe,ge)=>{let Se=0;fe.subscribe((0,B.x)(ge,pe=>{ge.next(Y.call(ie,pe,Se++))}))})}},7537:(pt,Ce,L)=>{L.d(Ce,{J:()=>O});var h=L(1631),B=L(2737);function O(Y=1/0){return(0,h.z)(B.y,Y)}},1631:(pt,Ce,L)=>{L.d(Ce,{z:()=>Se});var h=L(7398),B=L(4829),O=L(9360),Y=L(7103),ie=L(8251),ge=L(4674);function Se(pe,$,z=1/0){return(0,ge.m)($)?Se((te,ke)=>(0,h.U)((Ae,We)=>$(te,Ae,ke,We))((0,B.Xf)(pe(te,ke))),z):("number"==typeof $&&(z=$),(0,O.e)((te,ke)=>function fe(pe,$,z,te,ke,Ae,We,xe){const qe=[];let Oe=0,yt=0,ut=!1;const ee=()=>{ut&&!qe.length&&!Oe&&$.complete()},Ee=he=>Oe<te?se(he):qe.push(he),se=he=>{Ae&&$.next(he),Oe++;let Ne=!1;(0,B.Xf)(z(he,yt++)).subscribe((0,ie.x)($,J=>{ke?.(J),Ae?Ee(J):$.next(J)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Oe--;qe.length&&Oe<te;){const J=qe.shift();We?(0,Y.f)($,We,()=>se(J)):se(J)}ee()}catch(J){$.error(J)}}))};return pe.subscribe((0,ie.x)($,Ee,()=>{ut=!0,ee()})),()=>{xe?.()}}(te,ke,pe,z)))}},3093:(pt,Ce,L)=>{L.d(Ce,{Q:()=>Y});var h=L(7103),B=L(9360),O=L(8251);function Y(ie,fe=0){return(0,B.e)((ge,Se)=>{ge.subscribe((0,O.x)(Se,pe=>(0,h.f)(Se,ie,()=>Se.next(pe),fe),()=>(0,h.f)(Se,ie,()=>Se.complete(),fe),pe=>(0,h.f)(Se,ie,()=>Se.error(pe),fe)))})}},3020:(pt,Ce,L)=>{L.d(Ce,{B:()=>ie});var h=L(4829),B=L(8645),O=L(1887),Y=L(9360);function ie(ge={}){const{connector:Se=(()=>new B.x),resetOnError:pe=!0,resetOnComplete:$=!0,resetOnRefCountZero:z=!0}=ge;return te=>{let ke,Ae,We,xe=0,qe=!1,Oe=!1;const yt=()=>{Ae?.unsubscribe(),Ae=void 0},ut=()=>{yt(),ke=We=void 0,qe=Oe=!1},ee=()=>{const Ee=ke;ut(),Ee?.unsubscribe()};return(0,Y.e)((Ee,se)=>{xe++,!Oe&&!qe&&yt();const he=We=We??Se();se.add(()=>{xe--,0===xe&&!Oe&&!qe&&(Ae=fe(ee,z))}),he.subscribe(se),!ke&&xe>0&&(ke=new O.Hp({next:Ne=>he.next(Ne),error:Ne=>{Oe=!0,yt(),Ae=fe(ut,pe,Ne),he.error(Ne)},complete:()=>{qe=!0,yt(),Ae=fe(ut,$),he.complete()}}),(0,h.Xf)(Ee).subscribe(ke))})(te)}}function fe(ge,Se,...pe){if(!0===Se)return void ge();if(!1===Se)return;const $=new O.Hp({next:()=>{$.unsubscribe(),ge()}});return(0,h.Xf)(Se(...pe)).subscribe($)}},5137:(pt,Ce,L)=>{L.d(Ce,{R:()=>B});var h=L(9360);function B(O,Y=0){return(0,h.e)((ie,fe)=>{fe.add(O.schedule(()=>ie.subscribe(fe),Y))})}},4664:(pt,Ce,L)=>{L.d(Ce,{w:()=>Y});var h=L(4829),B=L(9360),O=L(8251);function Y(ie,fe){return(0,B.e)((ge,Se)=>{let pe=null,$=0,z=!1;const te=()=>z&&!pe&&Se.complete();ge.subscribe((0,O.x)(Se,ke=>{pe?.unsubscribe();let Ae=0;const We=$++;(0,h.Xf)(ie(ke,We)).subscribe(pe=(0,O.x)(Se,xe=>Se.next(fe?fe(ke,xe,We,Ae++):xe),()=>{pe=null,te()}))},()=>{z=!0,te()}))})}},9397:(pt,Ce,L)=>{L.d(Ce,{b:()=>ie});var h=L(4674),B=L(9360),O=L(8251),Y=L(2737);function ie(fe,ge,Se){const pe=(0,h.m)(fe)||ge||Se?{next:fe,error:ge,complete:Se}:fe;return pe?(0,B.e)(($,z)=>{var te;null===(te=pe.subscribe)||void 0===te||te.call(pe);let ke=!0;$.subscribe((0,O.x)(z,Ae=>{var We;null===(We=pe.next)||void 0===We||We.call(pe,Ae),z.next(Ae)},()=>{var Ae;ke=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),z.complete()},Ae=>{var We;ke=!1,null===(We=pe.error)||void 0===We||We.call(pe,Ae),z.error(Ae)},()=>{var Ae,We;ke&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(We=pe.finalize)||void 0===We||We.call(pe)}))}):Y.y}},1954:(pt,Ce,L)=>{L.d(Ce,{o:()=>ie});var h=L(7394);class B extends h.w0{constructor(ge,Se){super()}schedule(ge,Se=0){return this}}const O={setInterval(fe,ge,...Se){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(fe,ge,...Se):setInterval(fe,ge,...Se)},clearInterval(fe){const{delegate:ge}=O;return(ge?.clearInterval||clearInterval)(fe)},delegate:void 0};var Y=L(9039);class ie extends B{constructor(ge,Se){super(ge,Se),this.scheduler=ge,this.work=Se,this.pending=!1}schedule(ge,Se=0){var pe;if(this.closed)return this;this.state=ge;const $=this.id,z=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(z,$,Se)),this.pending=!0,this.delay=Se,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(z,this.id,Se),this}requestAsyncId(ge,Se,pe=0){return O.setInterval(ge.flush.bind(ge,this),pe)}recycleAsyncId(ge,Se,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return Se;null!=Se&&O.clearInterval(Se)}execute(ge,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ge,Se);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Se){let $,pe=!1;try{this.work(ge)}catch(z){pe=!0,$=z||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Se}=this,{actions:pe}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(pe,this),null!=ge&&(this.id=this.recycleAsyncId(Se,ge,null)),this.delay=null,super.unsubscribe()}}}},2631:(pt,Ce,L)=>{L.d(Ce,{v:()=>O});var h=L(4552);class B{constructor(ie,fe=B.now){this.schedulerActionCtor=ie,this.now=fe}schedule(ie,fe=0,ge){return new this.schedulerActionCtor(this,ie).schedule(ge,fe)}}B.now=h.l.now;class O extends B{constructor(ie,fe=B.now){super(ie,fe),this.actions=[],this._active=!1}flush(ie){const{actions:fe}=this;if(this._active)return void fe.push(ie);let ge;this._active=!0;do{if(ge=ie.execute(ie.state,ie.delay))break}while(ie=fe.shift());if(this._active=!1,ge){for(;ie=fe.shift();)ie.unsubscribe();throw ge}}}},6321:(pt,Ce,L)=>{L.d(Ce,{z:()=>O});var h=L(1954);const O=new(L(2631).v)(h.o)},4552:(pt,Ce,L)=>{L.d(Ce,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},7599:(pt,Ce,L)=>{L.d(Ce,{z:()=>h});const h={setTimeout(B,O,...Y){const{delegate:ie}=h;return ie?.setTimeout?ie.setTimeout(B,O,...Y):setTimeout(B,O,...Y)},clearTimeout(B){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(B)},delegate:void 0}},4971:(pt,Ce,L)=>{L.d(Ce,{h:()=>B});const B=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(pt,Ce,L)=>{L.d(Ce,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(pt,Ce,L)=>{L.d(Ce,{_6:()=>fe,jO:()=>Y,yG:()=>ie});var h=L(4674);function O(ge){return ge[ge.length-1]}function Y(ge){return(0,h.m)(O(ge))?ge.pop():void 0}function ie(ge){return function B(ge){return ge&&(0,h.m)(ge.schedule)}(O(ge))?ge.pop():void 0}function fe(ge,Se){return"number"==typeof O(ge)?ge.pop():Se}},9039:(pt,Ce,L)=>{function h(B,O){if(B){const Y=B.indexOf(O);0<=Y&&B.splice(Y,1)}}L.d(Ce,{P:()=>h})},2306:(pt,Ce,L)=>{function h(B){const Y=B(ie=>{Error.call(ie),ie.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}L.d(Ce,{d:()=>h})},1441:(pt,Ce,L)=>{L.d(Ce,{O:()=>Y,x:()=>O});var h=L(2653);let B=null;function O(ie){if(h.config.useDeprecatedSynchronousErrorHandling){const fe=!B;if(fe&&(B={errorThrown:!1,error:null}),ie(),fe){const{errorThrown:ge,error:Se}=B;if(B=null,ge)throw Se}}else ie()}function Y(ie){h.config.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ie)}},7103:(pt,Ce,L)=>{function h(B,O,Y,ie=0,fe=!1){const ge=O.schedule(function(){Y(),fe?B.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(B.add(ge),!fe)return ge}L.d(Ce,{f:()=>h})},2737:(pt,Ce,L)=>{function h(B){return B}L.d(Ce,{y:()=>h})},4266:(pt,Ce,L)=>{L.d(Ce,{z:()=>h});const h=B=>B&&"number"==typeof B.length&&"function"!=typeof B},5726:(pt,Ce,L)=>{L.d(Ce,{D:()=>B});var h=L(4674);function B(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},4674:(pt,Ce,L)=>{function h(B){return"function"==typeof B}L.d(Ce,{m:()=>h})},8382:(pt,Ce,L)=>{L.d(Ce,{c:()=>O});var h=L(4850),B=L(4674);function O(Y){return(0,B.m)(Y[h.L])}},3664:(pt,Ce,L)=>{L.d(Ce,{T:()=>O});var h=L(4971),B=L(4674);function O(Y){return(0,B.m)(Y?.[h.h])}},4026:(pt,Ce,L)=>{L.d(Ce,{t:()=>B});var h=L(4674);function B(O){return(0,h.m)(O?.then)}},541:(pt,Ce,L)=>{L.d(Ce,{L:()=>Y,Q:()=>O});var h=L(7582),B=L(4674);function O(ie){return(0,h.FC)(this,arguments,function*(){const ge=ie.getReader();try{for(;;){const{value:Se,done:pe}=yield(0,h.qq)(ge.read());if(pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Se)}}finally{ge.releaseLock()}})}function Y(ie){return(0,B.m)(ie?.getReader)}},9360:(pt,Ce,L)=>{L.d(Ce,{A:()=>B,e:()=>O});var h=L(4674);function B(Y){return(0,h.m)(Y?.lift)}function O(Y){return ie=>{if(B(ie))return ie.lift(function(fe){try{return Y(fe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},8407:(pt,Ce,L)=>{L.d(Ce,{U:()=>O,z:()=>B});var h=L(2737);function B(...Y){return O(Y)}function O(Y){return 0===Y.length?h.y:1===Y.length?Y[0]:function(fe){return Y.reduce((ge,Se)=>Se(ge),fe)}}},3894:(pt,Ce,L)=>{L.d(Ce,{h:()=>O});var h=L(2653),B=L(7599);function O(Y){B.z.setTimeout(()=>{const{onUnhandledError:ie}=h.config;if(!ie)throw Y;ie(Y)})}},9853:(pt,Ce,L)=>{function h(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ce,{z:()=>h})},5879:(pt,Ce,L)=>{L.d(Ce,{$8M:()=>qu,$WT:()=>Cs,$Z:()=>jv,AFp:()=>tp,ALo:()=>It,AaK:()=>te,CHM:()=>nl,CRH:()=>GD,EJc:()=>cC,EpF:()=>bI,F4k:()=>_i,FYo:()=>nT,FiY:()=>hs,GfV:()=>bw,Gpc:()=>We,HDt:()=>x0,JOm:()=>ia,KtG:()=>Nu,LFG:()=>An,LSH:()=>vv,Lbi:()=>Sv,Lck:()=>MS,MAs:()=>lS,MGl:()=>Ps,MMx:()=>zp,MR2:()=>_v,NdJ:()=>gh,Ojb:()=>Kb,OlP:()=>yn,Oqu:()=>zm,P3R:()=>cw,PXZ:()=>sA,Q6J:()=>p_,QGY:()=>y_,Qsj:()=>Qx,R0b:()=>Hr,RDi:()=>tw,Rgc:()=>Nh,SBq:()=>Em,Sil:()=>lC,Suo:()=>zD,TTD:()=>Su,TgZ:()=>Pl,VuI:()=>Sc,X6Q:()=>Ty,XFs:()=>Ze,Xpm:()=>zo,Xq5:()=>i_,Xts:()=>Xf,Y36:()=>oc,YKP:()=>AD,YNc:()=>wI,Yjl:()=>df,Yz7:()=>Yt,Z0I:()=>jn,ZZ4:()=>Q0,_Bn:()=>a0,_UZ:()=>an,_c5:()=>Fr,_uU:()=>jI,aQg:()=>J0,c2e:()=>my,cJS:()=>dr,cg1:()=>Km,dDg:()=>hC,dqk:()=>zt,eFA:()=>F0,eJc:()=>Pn,ekj:()=>M_,eoX:()=>P0,f3M:()=>qt,g9A:()=>gm,h0i:()=>Lo,hGG:()=>eE,hij:()=>Ll,iGM:()=>HD,ifc:()=>vt,ip1:()=>py,jDz:()=>ND,kL8:()=>rD,lG2:()=>mu,lcZ:()=>FD,lqb:()=>rc,lri:()=>Cy,n5z:()=>Ba,oAB:()=>Ea,oxw:()=>__,q4F:()=>Tw,qFp:()=>Ql,qLn:()=>Jd,qOj:()=>oh,qZA:()=>No,rWj:()=>$h,rg0:()=>Ng,s9C:()=>mh,sBO:()=>uA,s_b:()=>Kp,soG:()=>rg,tb:()=>Zl,tp0:()=>fs,uIk:()=>fI,vHH:()=>ee,vpe:()=>pa,wAp:()=>Tt,xi3:()=>gr,xp6:()=>Pw,z2F:()=>lo,zSh:()=>wv,zs3:()=>sc});var h=L(8645),B=L(7394),O=L(5619),Y=L(5592),ie=L(3019),fe=L(2096),ge=L(3020),Se=L(4664),pe=L(3997);function $(i){for(let s in i)if(i[s]===$)return s;throw Error("Could not find renamed property on target object.")}function z(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function te(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(te).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ke(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ae=$({__forward_ref__:$});function We(i){return i.__forward_ref__=We,i.toString=function(){return te(this())},i}function xe(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(Ae)&&i.__forward_ref__===We}function Oe(i){return i&&!!i.\u0275providers}const ut="https://g.co/ng/security#xss";class ee extends Error{constructor(s,a){super(function Ee(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function se(i){return"string"==typeof i?i:null==i?"":String(i)}function $e(i,s){throw new ee(-201,!1)}function et(i,s){null==i&&function gt(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function dr(i){return{providers:i.providers||[],imports:i.imports||[]}}function tr(i){return Di(i,Dr)||Di(i,Wr)}function jn(i){return null!==tr(i)}function Di(i,s){return i.hasOwnProperty(s)?i[s]:null}function Bi(i){return i&&(i.hasOwnProperty($n)||i.hasOwnProperty(rs))?i[$n]:null}const Dr=$({\u0275prov:$}),$n=$({\u0275inj:$}),Wr=$({ngInjectableDef:$}),rs=$({ngInjectorDef:$});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let dt;function Wt(i){const s=dt;return dt=i,s}function nr(i,s,a){const c=tr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==s?s:void $e(te(i))}const zt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Lr={},Pt="__NG_DI_FLAG__",Ln="ngTempTokenPath",Ds=/\n/gm,Hn="__source";let vn;function Sn(i){const s=vn;return vn=i,s}function rr(i,s=Ze.Default){if(void 0===vn)throw new ee(-203,!1);return null===vn?nr(i,void 0,s):vn.get(i,s&Ze.Optional?null:void 0,s)}function An(i,s=Ze.Default){return(function Et(){return dt}()||rr)(xe(i),s)}function qt(i,s=Ze.Default){return An(i,H(s))}function H(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function j(i){const s=[];for(let a=0;a<i.length;a++){const c=xe(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ee(900,!1);let d,f=Ze.Default;for(let y=0;y<c.length;y++){const E=c[y],D=F(E);"number"==typeof D?-1===D?d=E.token:f|=D:d=E}s.push(An(d,f))}else s.push(An(c))}return s}function k(i,s){return i[Pt]=s,i.prototype[Pt]=s,i}function F(i){return i[Pt]}function me(i){return{toString:i}.toString()}var Ge=(()=>((Ge=Ge||{})[Ge.OnPush=0]="OnPush",Ge[Ge.Default=1]="Default",Ge))(),vt=(()=>{return(i=vt||(vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",vt;var i})();const mt={},ht=[],At=$({\u0275cmp:$}),pn=$({\u0275dir:$}),kt=$({\u0275pipe:$}),vr=$({\u0275mod:$}),br=$({\u0275fac:$}),de=$({__NG_ELEMENT_ID__:$}),re=$({__NG_ENV_ID__:$});function Fe(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function ft(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],E=a[c++];i.setAttribute(s,y,E,f)}else{const f=d,y=a[++c];jt(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function Rt(i){return 3===i||4===i||6===i}function jt(i){return 64===i.charCodeAt(0)}function Xt(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||_r(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function _r(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const zn="ng-template";function $s(i,s,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==Fe(y.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function fo(i){return 4===i.type&&i.value!==zn}function va(i,s,a){return s===(4!==i.type||a?i.value:zn)}function td(i,s,a){let c=4;const d=i.attrs||[],f=function Rc(i){for(let s=0;s<i.length;s++)if(Rt(i[s]))return s;return i.length}(d);let y=!1;for(let E=0;E<s.length;E++){const D=s[E];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!va(i,D,a)||""===D&&1===s.length){if(si(c))return!1;y=!0}}else{const T=8&c?D:s[++E];if(8&c&&null!==i.attrs){if(!$s(i.attrs,T,a)){if(si(c))return!1;y=!0}continue}const U=Hs(8&c?"class":D,d,fo(i),a);if(-1===U){if(si(c))return!1;y=!0;continue}if(""!==T){let q;q=U>f?"":d[U+1].toLowerCase();const X=8&c?q:null;if(X&&-1!==Fe(X,T,0)||2&c&&T!==q){if(si(c))return!1;y=!0}}}}else{if(!y&&!si(c)&&!si(D))return!1;if(y&&si(D))continue;y=!1,c=D|1&c}}return si(c)||y}function si(i){return 0==(1&i)}function Hs(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Yn(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function po(i,s,a=!1){for(let c=0;c<s.length;c++)if(td(i,s[c],a))return!0;return!1}function Ho(i,s){return i?":not("+s.trim()+")":s}function Mg(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!si(y)&&(s+=Ho(f,d),d=""),c=y,f=f||!si(c);a++}return""!==d&&(s+=Ho(f,d)),s}function zo(i){return me(()=>{const s=id(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||vt.Emulated,styles:i.styles||ht,_:null,schemas:i.schemas||null,tView:null,id:""};wa(a);const c=i.dependencies;return a.directiveDefs=Go(c,!1),a.pipeDefs=Go(c,!0),a.id=function Oc(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function lf(i){return Ft(i)||Er(i)}function _a(i){return null!==i}function Ea(i){return me(()=>({type:i.type,bootstrap:i.bootstrap||ht,declarations:i.declarations||ht,imports:i.imports||ht,exports:i.exports||ht,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function gu(i,s){if(null==i)return mt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}function mu(i){return me(()=>{const s=id(i);return wa(s),s})}function df(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ft(i){return i[At]||null}function Er(i){return i[pn]||null}function dn(i){return i[kt]||null}function Cs(i){const s=Ft(i)||Er(i)||dn(i);return null!==s&&s.standalone}function Zr(i,s){const a=i[vr]||null;if(!a&&!0===s)throw new Error(`Type ${te(i)} does not have '\u0275mod' property.`);return a}function id(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||mt,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ht,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:gu(i.inputs,s),outputs:gu(i.outputs)}}function wa(i){i.features?.forEach(s=>s(i))}function Go(i,s){if(!i)return null;const a=s?dn:lf;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(_a)}const Qn=0,tt=1,Nt=2,Mn=3,Kr=4,yu=5,Tr=6,bs=7,gn=8,$i=9,go=10,Dt=11,Da=12,vu=13,zs=14,xn=15,_u=16,mo=17,ss=18,Wo=19,Eu=20,Sr=21,Yr=22,Pc=23,Hi=24,tn=25,os=1,yo=2,fi=7,qo=9,Ar=11;function Vr(i){return Array.isArray(i)&&"object"==typeof i[os]}function Ur(i){return Array.isArray(i)&&!0===i[os]}function kc(i){return 0!=(4&i.flags)}function zi(i){return i.componentOffset>-1}function Gs(i){return 1==(1&i.flags)}function _n(i){return!!i.template}function Ko(i){return 0!=(512&i[Nt])}function Ws(i,s){return i.hasOwnProperty(br)?i[br]:null}let Ta=zt.WeakRef??class ba{constructor(s){this.ref=s}deref(){return this.ref}},Du=0,Ci=null,Cu=!1;function Wn(i){const s=Ci;return Ci=i,s}class pi{constructor(){this.id=Du++,this.ref=function mf(i){return new Ta(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(s),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=Cu;Cu=!0;try{for(const[a,c]of this.consumers){const d=c.consumerNode.deref();void 0!==d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{Cu=s}}producerAccessed(){if(Cu)throw new Error("");if(null===Ci)return;let s=Ci.producers.get(this.id);void 0===s?(s={consumerNode:Ci.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Ci.trackingVersion},Ci.producers.set(this.id,s),this.consumers.set(Ci.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=Ci.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Ci?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let dd=null;function Ng(i){const s=Wn(null);try{return i()}finally{Wn(s)}}const Sa=()=>{};class _f extends pi{constructor(s,a,c){super(),this.watch=s,this.schedule=a,this.dirty=!1,this.cleanupFn=Sa,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=Wn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Sa,this.watch(this.registerOnCleanup)}finally{Wn(s)}}cleanup(){this.cleanupFn()}}class Aa{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Su(){return Yo}function Yo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Zc),qc}function qc(){const i=Kc(this),s=i?.current;if(s){const a=i.previous;if(a===mt)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Zc(i,s,a,c){const d=this.declaredInputs[a],f=Kc(i)||function fd(i,s){return i[Ef]=s}(i,{previous:mt,current:null}),y=f.current||(f.current={}),E=f.previous,D=E[d];y[d]=new Aa(D&&D.currentValue,s,E===mt),i[c]=s}Su.ngInherit=!0;const Ef="__ngSimpleChanges__";function Kc(i){return i[Ef]||null}const Gi=function(i,s,a){};function mn(i){for(;Array.isArray(i);)i=i[Qn];return i}function Qo(i,s){return mn(s[i])}function Br(i,s){return mn(s[i.index])}function pd(i,s){return i.data[s]}function Ks(i,s){return i[s]}function bi(i,s){const a=s[i];return Vr(a)?a:a[Qn]}function us(i,s){return null==s?null:i[s]}function yd(i){i[mo]=0}function Xc(i){1024&i[Nt]||(i[Nt]|=1024,Xo(i,1))}function Mu(i){1024&i[Nt]&&(i[Nt]&=-1025,Xo(i,-1))}function Xo(i,s){let a=i[Mn];if(null===a)return;a[yu]+=s;let c=a;for(a=a[Mn];null!==a&&(1===s&&1===c[yu]||-1===s&&0===c[yu]);)a[yu]+=s,c=a,a=a[Mn]}const St={lFrame:sl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ma(){return St.bindingsEnabled}function Te(){return St.lFrame.lView}function Qt(){return St.lFrame.tView}function nl(i){return St.lFrame.contextLView=i,i[gn]}function Nu(i){return St.lFrame.contextLView=null,i}function hr(){let i=bf();for(;null!==i&&64===i.type;)i=i.parent;return i}function bf(){return St.lFrame.currentTNode}function Qr(i,s){const a=St.lFrame;a.currentTNode=i,a.isParent=s}function Tf(){return St.lFrame.isParent}function Mr(){const i=St.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Rn(){return St.lFrame.bindingIndex++}function Ra(i,s){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Id(s)}function Id(i){St.lFrame.currentDirectiveIndex=i}function Fu(){return St.lFrame.currentQueryIndex}function Ys(i){St.lFrame.currentQueryIndex=i}function Qs(i){const s=i[tt];return 2===s.type?s.declTNode:1===s.type?i[Tr]:null}function ea(i,s,a){if(a&Ze.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=Qs(f),null===d||(f=f[zs],10&d.type))););if(null===d)return!1;s=d,i=f}const c=St.lFrame=Vu();return c.currentTNode=s,c.lView=i,!0}function Lu(i){const s=Vu(),a=i[tt];St.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Vu(){const i=St.lFrame,s=null===i?null:i.child;return null===s?sl(i):s}function sl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Pg(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dd=Pg;function Cd(){const i=Pg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ai(){return St.lFrame.selectedIndex}function Js(i){St.lFrame.selectedIndex=i}function Dn(){const i=St.lFrame;return pd(i.tView,i.selectedIndex)}let ol=!0;function Oa(){return ol}function Io(i){ol=i}function Uu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=f;y&&(i.contentHooks??=[]).push(-a,y),E&&((i.contentHooks??=[]).push(a,E),(i.contentCheckHooks??=[]).push(a,E)),D&&(i.viewHooks??=[]).push(-a,D),T&&((i.viewHooks??=[]).push(a,T),(i.viewCheckHooks??=[]).push(a,T)),null!=x&&(i.destroyHooks??=[]).push(a,x)}}function Pa(i,s,a){En(i,s,3,a)}function al(i,s,a,c){(3&i[Nt])===a&&En(i,s,a,c)}function Bu(i,s){let a=i[Nt];(3&a)===s&&(a&=8191,a+=1,i[Nt]=a)}function En(i,s,a,c){const f=c??-1,y=s.length-1;let E=0;for(let D=void 0!==c?65535&i[mo]:0;D<y;D++)if("number"==typeof s[D+1]){if(E=s[D],null!=c&&E>=c)break}else s[D]<0&&(i[mo]+=65536),(E<f||-1==f)&&(ul(i,a,s,D),i[mo]=(4294901760&i[mo])+D+2),D++}function gi(i,s){Gi(4,i,s);const a=Wn(null);try{s.call(i)}finally{Wn(a),Gi(5,i,s)}}function ul(i,s,a,c){const d=a[c]<0,f=a[c+1],E=i[d?-a[c]:a[c]];d?i[Nt]>>13<i[mo]>>16&&(3&i[Nt])===s&&(i[Nt]+=8192,gi(E,f)):gi(E,f)}const Xs=-1;class Do{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function ju(i){return i!==Xs}function ui(i){return 32767&i}function Va(i,s){let a=function ll(i){return i>>16}(i),c=s;for(;a>0;)c=c[zs],a--;return c}let Ts=!0;function Si(i){const s=Ts;return Ts=i,s}const qi=255,bo=5;let Fg=0;const Ai={};function to(i,s){const a=dl(i,s);if(-1!==a)return a;const c=s[tt];c.firstCreatePass&&(i.injectorIndex=s.length,Mi(c.data,i),Mi(s,null),Mi(c.blueprint,null));const d=Nn(i,s),f=i.injectorIndex;if(ju(d)){const y=ui(d),E=Va(d,s),D=E[tt].data;for(let T=0;T<8;T++)s[f+T]=E[y+T]|D[y+T]}return s[f+8]=d,f}function Mi(i,s){i.push(0,0,0,0,0,0,0,0,s)}function dl(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Nn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Wu(d),null===c)return Xs;if(a++,d=d[zs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Xs}function Ss(i,s,a){!function Af(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(de)&&(c=a[de]),null==c&&(c=a[de]=Fg++);const d=c&qi;s.data[i+(d>>bo)]|=1<<d}(i,s,a)}function Ua(i,s,a){if(a&Ze.Optional||void 0!==i)return i;$e()}function $u(i,s,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),!(a&(Ze.Self|Ze.Host))){const d=i[$i],f=Wt(void 0);try{return d?d.get(s,c,a&Ze.Optional):nr(s,c,a&Ze.Optional)}finally{Wt(f)}}return Ua(c,0,a)}function Hu(i,s,a,c=Ze.Default,d){if(null!==i){if(2048&s[Nt]&&!(c&Ze.Self)){const y=function Mf(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&2048&y[Nt]&&!(512&y[Nt]);){const E=Rd(f,y,a,c|Ze.Self,Ai);if(E!==Ai)return E;let D=f.parent;if(!D){const T=y[Eu];if(T){const x=T.get(a,Ai,c);if(x!==Ai)return x}D=Wu(y),y=y[zs]}f=D}return d}(i,s,a,c,Ai);if(y!==Ai)return y}const f=Rd(i,s,a,c,Ai);if(f!==Ai)return f}return $u(s,a,c,d)}function Rd(i,s,a,c,d){const f=function hl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(de)?i[de]:void 0;return"number"==typeof s?s>=0?s&qi:Od:s}(a);if("function"==typeof f){if(!ea(s,i,c))return c&Ze.Host?Ua(d,0,c):$u(s,a,c,d);try{const y=f(c);if(null!=y||c&Ze.Optional)return y;$e()}finally{Dd()}}else if("number"==typeof f){let y=null,E=dl(i,s),D=Xs,T=c&Ze.Host?s[xn][Tr]:null;for((-1===E||c&Ze.SkipSelf)&&(D=-1===E?Nn(i,s):s[E+8],D!==Xs&&To(c,!1)?(y=s[tt],E=ui(D),s=Va(D,s)):E=-1);-1!==E;){const x=s[tt];if(zu(f,E,x.data)){const U=Nd(E,s,a,y,c,T);if(U!==Ai)return U}D=s[E+8],D!==Xs&&To(c,s[tt].data[E+8]===T)&&zu(f,E,s)?(y=x,E=ui(D),s=Va(D,s)):E=-1}}return d}function Nd(i,s,a,c,d,f){const y=s[tt],E=y.data[i+8],x=ta(E,y,a,null==c?zi(E)&&Ts:c!=y&&0!=(3&E.type),d&Ze.Host&&f===E);return null!==x?no(s,y,x,E):Ai}function ta(i,s,a,c,d){const f=i.providerIndexes,y=s.data,E=1048575&f,D=i.directiveStart,x=f>>20,q=d?E+x:i.directiveEnd;for(let X=c?E:E+x;X<q;X++){const we=y[X];if(X<D&&a===we||X>=D&&we.type===a)return X}if(d){const X=y[D];if(X&&_n(X)&&X.type===a)return D}return null}function no(i,s,a,c){let d=i[a];const f=s.data;if(function cl(i){return i instanceof Do}(d)){const y=d;y.resolving&&function Ne(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():se(i)}(f[a]));const E=Si(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?Wt(y.injectImpl):null;ea(i,c,Ze.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function xd(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=Yo(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],s)}finally{null!==D&&Wt(D),Si(E),y.resolving=!1,Dd()}}return d}function zu(i,s,a){return!!(a[s+(i>>bo)]&1<<i)}function To(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class So{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Hu(this._tNode,this._lView,s,H(c),a)}}function Od(){return new So(hr(),Te())}function Ba(i){return me(()=>{const s=i.prototype.constructor,a=s[br]||Gu(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[br]||Gu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Gu(i){return qe(i)?()=>{const s=Gu(xe(i));return s&&s()}:Ws(i)}function Wu(i){const s=i[tt],a=s.type;return 2===a?s.declTNode:1===a?i[Tr]:null}function qu(i){return function Lg(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Rt(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(hr(),i)}const As="__parameters__";function Ms(i,s,a){return me(()=>{const c=function na(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(D,T,x){const U=D.hasOwnProperty(As)?D[As]:Object.defineProperty(D,As,{value:[]})[As];for(;U.length<=x;)U.push(null);return(U[x]=U[x]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function za(i,s){i.forEach(a=>Array.isArray(a)?za(a,s):s(a))}function Mo(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Pd(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function w(i,s,a){let c=A(i,s);return c>=0?i[1|c]=a:(c=~c,function Ug(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function C(i,s){const a=A(i,s);if(a>=0)return i[1|a]}function A(i,s){return function W(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const hs=k(Ms("Optional"),8),fs=k(Ms("SkipSelf"),4);function Gg(i){return 128==(128&i.flags)}var ia=(()=>((ia=ia||{})[ia.Important=1]="Important",ia[ia.DashCase=2]="DashCase",ia))();const Wg=new Map;let Eb=0;const Zg="__ngContext__";function xi(i,s){Vr(s)?(i[Zg]=s[Wo],function PE(i){Wg.set(i[Wo],i)}(s)):i[Zg]=s}let Gf;function iv(i,s){return Gf(i,s)}function Fd(i){const s=i[Mn];return Ur(s)?s[Mn]:s}function Qg(i){return sv(i[Da])}function zE(i){return sv(i[Kr])}function sv(i){for(;null!==i&&!Ur(i);)i=i[Kr];return i}function Il(i,s,a,c,d){if(null!=c){let f,y=!1;Ur(c)?f=c:Vr(c)&&(y=!0,c=c[Qn]);const E=mn(c);0===i&&null!==a?null==d?Rb(s,a,E):Ld(s,a,E,d||null,!0):1===i&&null!==a?Ld(s,a,E,d||null,!0):2===i?function Ct(i,s,a){const c=cv(i,s);c&&function Nb(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=f&&function XE(i,s,a,c,d){const f=a[fi];f!==mn(a)&&Il(s,i,c,f,d);for(let E=Ar;E<a.length;E++){const D=a[E];Wf(D[tt],D,i,s,c,f)}}(s,i,f,a,d)}}function Xg(i,s,a){return i.createElement(s,a)}function tm(i,s){const a=i[qo],c=a.indexOf(s);Mu(s),a.splice(c,1)}function ov(i,s){if(i.length<=Ar)return;const a=Ar+s,c=i[a];if(c){const d=c[_u];null!==d&&d!==i&&tm(d,c),s>0&&(i[a-1][Kr]=c[Kr]);const f=Pd(i,Ar+s);!function WE(i,s){Wf(i,s,s[Dt],2,null,null),s[Qn]=null,s[Tr]=null}(c[tt],c);const y=f[ss];null!==y&&y.detachView(f[tt]),c[Mn]=null,c[Kr]=null,c[Nt]&=-129}return c}function av(i,s){if(!(256&s[Nt])){const a=s[Dt];s[Pc]?.destroy(),s[Hi]?.destroy(),a.destroyNode&&Wf(i,s,a,3,null,null),function em(i){let s=i[Da];if(!s)return uv(i[tt],i);for(;s;){let a=null;if(Vr(s))a=s[Da];else{const c=s[Ar];c&&(a=c)}if(!a){for(;s&&!s[Kr]&&s!==i;)Vr(s)&&uv(s[tt],s),s=s[Mn];null===s&&(s=i),Vr(s)&&uv(s[tt],s),a=s&&s[Kr]}s=a}}(s)}}function uv(i,s){if(!(256&s[Nt])){s[Nt]&=-129,s[Nt]|=256,function Mb(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Do)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],D=f[y+1];Gi(4,E,D);try{D.call(E)}finally{Gi(5,E,D)}}else{Gi(4,d,f);try{f.call(d)}finally{Gi(5,d,f)}}}}}(i,s),function ZE(i,s){const a=i.cleanup,c=s[bs];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(s[bs]=null);const d=s[Sr];if(null!==d){s[Sr]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,s),1===s[tt].type&&s[Dt].destroy();const a=s[_u];if(null!==a&&Ur(s[Mn])){a!==s[Mn]&&tm(a,s);const c=s[ss];null!==c&&c.detachView(i)}!function FE(i){Wg.delete(i[Wo])}(s)}}function nm(i,s,a){return function xb(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Qn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===vt.None||f===vt.Emulated)return null}return Br(c,a)}}(i,s.parent,a)}function Ld(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Rb(i,s,a){i.appendChild(s,a)}function KE(i,s,a,c,d){null!==c?Ld(i,s,a,c,d):Rb(i,s,a)}function cv(i,s){return i.parentNode(s)}let YE,qf,Rr,kb=function Pb(i,s,a){return 40&i.type?Br(i,a):null};function lv(i,s,a,c){const d=nm(i,c,s),f=s[Dt],E=function Ob(i,s,a){return kb(i,s,a)}(c.parent||s[Tr],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)KE(f,d,a[D],E,!1);else KE(f,d,a,E,!1);void 0!==YE&&YE(f,c,s,a,d)}function Ri(i,s){if(null!==s){const a=s.type;if(3&a)return Br(s,i);if(4&a)return dv(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Ri(i,c);{const d=i[s.index];return Ur(d)?dv(-1,d):mn(d)}}if(32&a)return iv(s,i)()||mn(i[s.index]);{const c=Vd(i,s);return null!==c?Array.isArray(c)?c[0]:Ri(Fd(i[xn]),c):Ri(i,s.next)}}return null}function Vd(i,s){return null!==s?i[xn][Tr].projection[s.projection]:null}function dv(i,s){const a=Ar+i+1;if(a<s.length){const c=s[a],d=c[tt].firstChild;if(null!==d)return Ri(c,d)}return s[fi]}function Ud(i,s,a,c,d,f,y){for(;null!=a;){const E=c[a.index],D=a.type;if(y&&0===s&&(E&&xi(mn(E),c),a.flags|=2),32!=(32&a.flags))if(8&D)Ud(i,s,a.child,c,d,f,!1),Il(s,i,d,E,f);else if(32&D){const T=iv(a,c);let x;for(;x=T();)Il(s,i,d,x,f);Il(s,i,d,E,f)}else 16&D?JE(i,s,c,a,d,f):Il(s,i,d,E,f);a=y?a.projectionNext:a.next}}function Wf(i,s,a,c,d,f){Ud(a,c,i.firstChild,s,d,f,!1)}function JE(i,s,a,c,d,f){const y=a[xn],D=y[Tr].projection[c.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)Il(s,i,d,D[T],f);else{let T=D;const x=y[Mn];Gg(c)&&(T.flags|=128),Ud(i,s,T,x,d,f,!0)}}function Bd(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function ew(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&ft(i,s,c),null!==d&&Bd(i,s,d),null!==f&&function rm(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function tw(i){qf=i}function Ni(i){return function Za(){if(void 0===Rr&&(Rr=null,zt.trustedTypes))try{Rr=zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Rr}()?.createScriptURL(i)||i}class Kf{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function Oi(i){return i instanceof Kf?i.changingThisBreaksApplicationSecurity:i}function Yf(i,s){const a=function sm(i){return i instanceof Kf&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${ut})`)}return a===s}const jb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var or=(()=>((or=or||{})[or.NONE=0]="NONE",or[or.HTML=1]="HTML",or[or.STYLE=2]="STYLE",or[or.SCRIPT=3]="SCRIPT",or[or.URL=4]="URL",or[or.RESOURCE_URL=5]="RESOURCE_URL",or))();function vv(i){const s=Jf();return s?s.sanitize(or.URL,i)||"":Yf(i,"URL")?Oi(i):function ao(i){return(i=String(i)).match(jb)?i:"unsafe:"+i}(se(i))}function lm(i){const s=Jf();if(s)return Ni(s.sanitize(or.RESOURCE_URL,i)||"");if(Yf(i,"ResourceURL"))return Ni(Oi(i));throw new ee(904,!1)}function cw(i,s,a){return function Wb(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?lm:vv}(s,a)(i)}function Jf(){const i=Te();return i&&i[go].sanitizer}class yn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Xf=new yn("ENVIRONMENT_INITIALIZER"),dw=new yn("INJECTOR",-1),hw=new yn("INJECTOR_DEF_TYPES");class fw{get(s,a=Lr){if(a===Lr){const c=new Error(`NullInjectorError: No provider for ${te(s)}!`);throw c.name="NullInjectorError",c}return a}}function _v(i){return{\u0275providers:i}}function pw(...i){return{\u0275providers:Ev(0,i),\u0275fromNgModule:!0}}function Ev(i,...s){const a=[],c=new Set;let d;return za(s,f=>{const y=f;Ya(y,a,[],c)&&(d||=[],d.push(y))}),void 0!==d&&gw(d,a),a}function gw(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];hm(d,f=>{s.push(f)})}}function Ya(i,s,a,c){if(!(i=xe(i)))return!1;let d=null,f=Bi(i);const y=!f&&Ft(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(f=Bi(D),!f)return!1;d=D}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of D)Ya(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let T;c.add(d);try{za(f.imports,x=>{Ya(x,s,a,c)&&(T||=[],T.push(x))})}finally{}void 0!==T&&gw(T,s)}if(!E){const T=Ws(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:ht},{provide:hw,useValue:d,multi:!0},{provide:Xf,useValue:()=>An(d),multi:!0})}const D=f.providers;null==D||E||hm(D,x=>{s.push(x)})}}return d!==i&&void 0!==i.providers}function hm(i,s){for(let a of i)Oe(a)&&(a=a.\u0275providers),Array.isArray(a)?hm(a,s):s(a)}const mw=$({provide:String,useValue:$});function Zd(i){return null!==i&&"object"==typeof i&&mw in i}function nc(i){return"function"==typeof i}const wv=new yn("Set Injector scope."),bl={},qb={};let Iv;function pm(){return void 0===Iv&&(Iv=new fw),Iv}class rc{}class Tl extends rc{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qa(s,y=>this.processProvider(y)),this.records.set(dw,Sl(void 0,this)),d.has("environment")&&this.records.set(rc,Sl(void 0,this));const f=this.records.get(wv);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(hw.multi,ht,Ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=Sn(this),c=Wt(void 0);try{return s()}finally{Sn(a),Wt(c)}}get(s,a=Lr,c=Ze.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(re))return s[re](this);c=H(c);const d=Sn(this),f=Wt(void 0);try{if(!(c&Ze.SkipSelf)){let E=this.records.get(s);if(void 0===E){const D=function Tv(i){return"function"==typeof i||"object"==typeof i&&i instanceof yn}(s)&&tr(s);E=D&&this.injectableDefInScope(D)?Sl(Dv(s),bl):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&Ze.Self?pm():this.parent).get(s,a=c&Ze.Optional&&a===Lr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ln]=y[Ln]||[]).unshift(te(s)),d)throw y;return function R(i,s,a,c){const d=i[Ln];throw s[Hn]&&d.unshift(s[Hn]),i.message=function Q(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=te(s);if(Array.isArray(s))d=s.map(te).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):te(E)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Ds,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Ln]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Wt(f),Sn(d)}}resolveInjectorInitializers(){const s=Sn(this),a=Wt(void 0);try{const c=this.get(Xf.multi,ht,Ze.Self);for(const d of c)d()}finally{Sn(s),Wt(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(te(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(s){let a=nc(s=xe(s))?s:xe(s&&s.provide);const c=function Zb(i){return Zd(i)?Sl(void 0,i.useValue):Sl(bv(i),bl)}(s);if(nc(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Sl(void 0,bl,!0),d.factory=()=>j(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===bl&&(a.value=qb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function aa(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=xe(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Dv(i){const s=tr(i),a=null!==s?s.factory:Ws(i);if(null!==a)return a;if(i instanceof yn)throw new ee(204,!1);if(i instanceof Function)return function Cv(i){const s=i.length;if(s>0)throw function gl(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new ee(204,!1);const a=function ho(i){return i&&(i[Dr]||i[Wr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ee(204,!1)}function bv(i,s,a){let c;if(nc(i)){const d=xe(i);return Ws(d)||Dv(d)}if(Zd(i))c=()=>xe(i.useValue);else if(function fm(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...j(i.deps||[]));else if(function Kd(i){return!(!i||!i.useExisting)}(i))c=()=>An(xe(i.useExisting));else{const d=xe(i&&(i.useClass||i.provide));if(!function ep(i){return!!i.deps}(i))return Ws(d)||Dv(d);c=()=>new d(...j(i.deps))}return c}function Sl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Qa(i,s){for(const a of i)Array.isArray(a)?Qa(a,s):a&&Oe(a)?Qa(a.\u0275providers,s):s(a)}const tp=new yn("AppId",{providedIn:"root",factory:()=>np}),np="ng",gm=new yn("Platform Initializer"),Sv=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kb=new yn("CSP nonce",{providedIn:"root",factory:()=>function xo(){if(void 0!==qf)return qf;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ml=(i,s)=>null;function ip(i,s){return Ml(i,s)}class eT{}class Iw{}class Dw{resolveComponentFactory(s){throw function Vv(i){const s=Error(`No component factory found for ${te(i)}.`);return s.ngComponent=i,s}(s)}}let op=(()=>{class i{}return i.NULL=new Dw,i})();function Cw(){return Qd(hr(),Te())}function Qd(i,s){return new Em(Br(i,s))}let Em=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Cw,i})();function Yx(i){return i instanceof Em?i.nativeElement:i}class nT{}let Qx=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function rT(){const i=Te(),a=bi(hr().index,i);return(Vr(a)?a:i)[Dt]}(),i})(),Jx=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class bw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Tw=new bw("16.1.1"),ap={};function Qi(i){for(;i;){i[Nt]|=64;const s=Fd(i);if(Ko(i)&&!s)return i;i=s}return null}function Aw(i){return i.ngOriginalError}class Jd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Aw(s);for(;a&&Aw(a);)a=Aw(a);return a||null}}const up=new yn("",{providedIn:"root",factory:()=>!1});function eu(i){return i instanceof Function?i():i}class lp extends pi{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){Qi(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,a,c){const d=Wn(this);this.trackingVersion++;try{s(a,c)}finally{Wn(d)}}destroy(){this.trackingVersion++}}let tu=null;function Rw(){return tu??=new lp,tu}function Nw(i,s){return i[s]??Rw()}function Ow(i,s){const a=Rw();a.hasReadASignal&&(i[s]=tu,a.lView=i,tu=new lp)}const Ht={};function Pw(i){kw(Qt(),Te(),ai()+i,!1)}function kw(i,s,a,c){if(!c)if(3==(3&s[Nt])){const f=i.preOrderCheckHooks;null!==f&&Pa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&al(s,f,0,a)}Js(a)}function Bw(i,s=null,a=null,c){const d=Dm(i,s,a,c);return d.resolveInjectorInitializers(),d}function Dm(i,s=null,a=null,c,d=new Set){const f=[a||ht,pw(i)];return c=c||("object"==typeof i?void 0:te(i)),new Tl(f,s||pm(),c||null,d)}let sc=(()=>{class i{static create(a,c){if(Array.isArray(a))return Bw({name:""},c,a,"");{const d=a.name??"";return Bw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Lr,i.NULL=new fw,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>An(dw)}),i.__NG_ELEMENT_ID__=-1,i})();function oc(i,s=Ze.Default){const a=Te();return null===a?An(i,s):Hu(hr(),a,xe(i),s)}function jv(){throw new Error("invalid")}function Cm(i,s,a,c,d,f,y,E,D,T,x){const U=s.blueprint.slice();return U[Qn]=d,U[Nt]=140|c,(null!==T||i&&2048&i[Nt])&&(U[Nt]|=2048),yd(U),U[Mn]=U[zs]=i,U[gn]=a,U[go]=y||i&&i[go],U[Dt]=E||i&&i[Dt],U[$i]=D||i&&i[$i]||null,U[Tr]=f,U[Wo]=function Vx(){return Eb++}(),U[Yr]=x,U[Eu]=T,U[xn]=2==s.type?i[xn]:U,U}function th(i,s,a,c,d){let f=i.data[s];if(null===f)f=function $v(i,s,a,c,d){const f=bf(),y=Tf(),D=i.data[s]=function vT(i,s,a,c,d,f){let y=s?s.injectorIndex:-1,E=0;return function Wi(){return null!==St.skipHydrationRootTNode}()&&(E|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==f&&(y?null==f.child&&null!==D.parent&&(f.child=D):null===f.next&&(f.next=D,D.prev=f)),D}(i,s,a,c,d),function fr(){return St.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function Ou(){const i=St.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Qr(f,!0),f}function ac(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function jw(i,s,a,c,d){const f=Nw(s,Pc),y=ai(),E=2&c;try{if(Js(-1),E&&s.length>tn&&kw(i,s,tn,!1),Gi(E?2:0,d),E)f.runInContext(a,c,d);else{const T=Wn(null);try{a(c,d)}finally{Wn(T)}}}finally{E&&null===s[Pc]&&Ow(s,Pc),Js(y),Gi(E?3:1,d)}}function Hv(i,s,a){if(kc(s)){const c=Wn(null);try{const f=s.directiveEnd;for(let y=s.directiveStart;y<f;y++){const E=i.data[y];E.contentQueries&&E.contentQueries(1,a[y],y)}}finally{Wn(c)}}}function zv(i,s,a){Ma()&&(function IT(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;zi(a)&&function TT(i,s,a){const c=Br(s,i),d=$w(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const E=hp(i,Cm(i,d,null,y,c,s,null,i[go].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=E}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||to(a,s),xi(c,s);const y=a.initialInputs;for(let E=d;E<f;E++){const D=i.data[E],T=no(s,i,E,a);xi(T,s),null!==y&&Pi(0,E-d,T,D,0,y),_n(D)&&(bi(a.index,s)[gn]=no(s,i,E,a))}}(i,s,a,Br(a,s)),64==(64&a.flags)&&Kw(i,s,a))}function Gv(i,s,a=Br){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?a(s,i):i[y];i[d++]=E}}}function $w(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Wv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function Wv(i,s,a,c,d,f,y,E,D,T,x){const U=tn+c,q=U+d,X=function Hw(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ht);return a}(U,q),we="function"==typeof T?T():T;return X[tt]={type:i,blueprint:X,template:a,queries:null,viewQuery:E,declTNode:s,data:X.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:we,incompleteFirstPass:!1,ssrId:x}}let qv=i=>null;function Gw(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?Ww(a,s,d,f):c.hasOwnProperty(d)&&Ww(a,s,c[d],f)}return a}function Ww(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function li(i,s,a,c,d,f,y,E){const D=Br(s,a);let x,T=s.inputs;!E&&null!=T&&(x=T[c])?(Am(i,a,x,c,d),zi(s)&&function Kv(i,s){const a=bi(s,i);16&a[Nt]||(a[Nt]|=64)}(a,s.index)):3&s.type&&(c=function Zv(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(D,c,d))}function nh(i,s,a,c){if(Ma()){const d=null===c?null:{"":-1},f=function bm(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(po(s,y.selectors,!1))if(c||(c=[]),_n(y))if(null!==y.findHostDirectiveDefs){const E=[];d=d||new Map,y.findHostDirectiveDefs(y,E,d),c.unshift(...E,y),Qv(i,s,E.length)}else c.unshift(y),Qv(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,E;null===f?y=E=null:[y,E]=f,null!==y&&Yv(i,s,a,y,d,E),d&&function CT(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new ee(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=Xt(a.mergedAttrs,a.attrs)}function Yv(i,s,a,c,d,f){for(let T=0;T<c.length;T++)Ss(to(a,s),i,c[T].type);!function Yw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let y=!1,E=!1,D=ac(i,s,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=Xt(a.mergedAttrs,x.hostAttrs),bT(i,a,s,D,x),Ns(D,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const U=x.type.prototype;!y&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!E&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),E=!0),D++}!function qw(i,s,a){const d=s.directiveEnd,f=i.data,y=s.attrs,E=[];let D=null,T=null;for(let x=s.directiveStart;x<d;x++){const U=f[x],q=a?a.get(U):null,we=q?q.outputs:null;D=Gw(U.inputs,x,D,q?q.inputs:null),T=Gw(U.outputs,x,T,we);const Ve=null===D||null===y||fo(s)?null:Tm(D,x,y);E.push(Ve)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=D,s.outputs=T}(i,a,f)}function Kw(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function ku(){return St.lFrame.currentDirectiveIndex}();try{Js(f);for(let E=c;E<d;E++){const D=i.data[E],T=s[E];Id(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&DT(D,T)}}finally{Js(-1),Id(y)}}function DT(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Qv(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function Ns(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;_n(s)&&(a[""]=i)}}function bT(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=Ws(d.type)),y=new Do(f,_n(d),oc);i.blueprint[c]=y,a[c]=y,function Zw(i,s,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const E=~s.index;(function wT(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,c,f)}}(i,s,c,ac(i,a,d.hostVars,Ht),d)}function ca(i,s,a,c,d,f){const y=Br(i,s);!function Jv(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const E=null==y?se(f):y(f,c||"",d);i.setAttribute(s,d,E,a)}}(s[Dt],y,f,i.value,a,c,d)}function Pi(i,s,a,c,d,f){const y=f[s];if(null!==y)for(let E=0;E<y.length;)Qw(c,a,y[E++],y[E++],y[E++])}function Qw(i,s,a,c,d){const f=Wn(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(s,d)),null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{Wn(f)}}function Tm(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let E=0;E<y.length;E+=2)if(y[E]===s){c.push(f,y[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Xv(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function Jw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];Ys(a[c]),y.contentQueries(2,s[f],f)}}}function hp(i,s){return i[Da]?i[vu][Kr]=s:i[Da]=s,i[vu]=s,s}function Xw(i,s,a){Ys(0);const c=Wn(null);try{s(i,a)}finally{Wn(c)}}function eI(i){return i[bs]||(i[bs]=[])}function Sm(i){return i.cleanup||(i.cleanup=[])}function ST(i,s){const a=i[$i],c=a?a.get(Jd,null):null;c&&c.handleError(s)}function Am(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],E=a[f++];Qw(i.data[y],s[y],c,E,d)}}function AT(i,s){const a=bi(s,i),c=a[tt];!function sR(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[Qn];null!==d&&null===a[Yr]&&(a[Yr]=ip(d,a[$i])),tI(c,a,a[gn])}function tI(i,s,a){Lu(s);try{const c=i.viewQuery;null!==c&&Xw(1,c,a);const d=i.template;null!==d&&jw(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Jw(i,s),i.staticViewQueries&&Xw(2,i.viewQuery,a);const f=i.components;null!==f&&function oR(i,s){for(let a=0;a<s.length;a++)AT(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Nt]&=-5,Cd()}}let sI=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=new _f(a,T=>{this.all.has(T)&&this.queue.set(T,f)},d);let E;this.all.add(y),y.notify();const D=()=>{y.cleanup(),E?.(),this.all.delete(y),this.queue.delete(y)};return E=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>new i}),i})();function t_(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?f=E:1==f?d=ke(d,E):2==f&&(c=ke(c,E+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function rh(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(mn(f)),Ur(f)){for(let E=Ar;E<f.length;E++){const D=f[E],T=D[tt].firstChild;null!==T&&rh(D[tt],D,T,c)}f[fi]!==f[Qn]&&c.push(f[fi])}const y=a.type;if(8&y)rh(i,s,a.child,c);else if(32&y){const E=iv(a,s);let D;for(;D=E();)c.push(D)}else if(16&y){const E=Vd(s,a);if(Array.isArray(E))c.push(...E);else{const D=Fd(s[xn]);rh(D[tt],D,E,c,!0)}}a=d?a.projectionNext:a.next}return c}function Mm(i,s,a,c=!0){const d=s[go].rendererFactory;d.begin&&d.begin();try{xT(i,s,i.template,a)}catch(y){throw c&&ST(s,y),y}finally{d.end&&d.end(),s[go].effectManager?.flush()}}function xT(i,s,a,c){const d=s[Nt];if(256!=(256&d)){s[go].effectManager?.flush(),Lu(s);try{yd(s),function Pu(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jw(i,s,a,2,c);const y=3==(3&d);if(y){const T=i.preOrderCheckHooks;null!==T&&Pa(s,T,null)}else{const T=i.preOrderHooks;null!==T&&al(s,T,0,null),Bu(s,0)}if(function uR(i){for(let s=Qg(i);null!==s;s=zE(s)){if(!s[yo])continue;const a=s[qo];for(let c=0;c<a.length;c++){Xc(a[c])}}}(s),oI(s,2),null!==i.contentQueries&&Jw(i,s),y){const T=i.contentCheckHooks;null!==T&&Pa(s,T)}else{const T=i.contentHooks;null!==T&&al(s,T,1),Bu(s,1)}!function pT(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=Nw(s,Hi);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)Js(~f);else{const y=f,E=a[++d],D=a[++d];Ra(E,y),c.runInContext(D,2,s[y])}}}finally{null===s[Hi]&&Ow(s,Hi),Js(-1)}}(i,s);const E=i.components;null!==E&&cI(s,E,0);const D=i.viewQuery;if(null!==D&&Xw(2,D,c),y){const T=i.viewCheckHooks;null!==T&&Pa(s,T)}else{const T=i.viewHooks;null!==T&&al(s,T,2),Bu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Nt]&=-73,Mu(s)}finally{Cd()}}}function oI(i,s){for(let a=Qg(i);null!==a;a=zE(a))for(let c=Ar;c<a.length;c++)uI(a[c],s)}function aI(i,s,a){uI(bi(s,i),a)}function uI(i,s){if(!function gd(i){return 128==(128&i[Nt])}(i))return;const a=i[tt];if(80&i[Nt]&&0===s||1024&i[Nt]||2===s)xT(a,i,a.template,i[gn]);else if(i[yu]>0){oI(i,1);const d=i[tt].components;null!==d&&cI(i,d,1)}}function cI(i,s,a){for(let c=0;c<s.length;c++)aI(i,s[c],a)}class ih{get rootNodes(){const s=this._lView,a=s[tt];return rh(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(s){this._lView[gn]=s}get destroyed(){return 256==(256&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Mn];if(Ur(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(ov(s,c),Pd(a,c))}this._attachedToViewContainer=!1}av(this._lView[tt],this._lView)}onDestroy(s){!function Ti(i,s){if(256==(256&i[Nt]))throw new ee(911,!1);null===i[Sr]&&(i[Sr]=[]),i[Sr].push(s)}(this._lView,s)}markForCheck(){Qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-129}reattach(){this._lView[Nt]|=128}detectChanges(){Mm(this._lView[tt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sb(i,s){Wf(i,s,s[Dt],2,null,null)}(this._lView[tt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=s}}class RT extends ih{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Mm(s[tt],s,s[gn],!1)}checkNoChanges(){}get context(){return null}}class lI extends op{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ft(s);return new sh(a,this.ngModule)}}function dI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class OT{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=H(c);const d=this.injector.get(s,ap,c);return d!==ap||a===ap?d:this.parentInjector.get(s,a,c)}}class sh extends Iw{get inputs(){return dI(this.componentDef.inputs)}get outputs(){return dI(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function nd(i){return i.map(Mg).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof rc?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new OT(s,f):s,E=y.get(nT,null);if(null===E)throw new ee(407,!1);const x={rendererFactory:E,sanitizer:y.get(Jx,null),effectManager:y.get(sI,null)},U=E.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",X=c?function iR(i,s,a,c){const f=c.get(up,!1)||a===vt.ShadowDom,y=i.selectRootElement(s,f);return function zw(i){qv(i)}(y),y}(U,c,this.componentDef.encapsulation,y):Xg(U,q,function NT(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(q)),Ke=this.componentDef.signals?4608:this.componentDef.onPush?576:528,ct=Wv(0,null,null,1,0,null,null,null,null,null,null),Ie=Cm(null,ct,null,Ke,null,null,x,U,y,null,null);let Bt,nn;Lu(Ie);try{const sn=this.componentDef;let Vi,Qh=null;sn.findHostDirectiveDefs?(Vi=[],Qh=new Map,sn.findHostDirectiveDefs(sn,Vi,Qh),Vi.push(sn)):Vi=[sn];const aE=function cR(i,s){const a=i[tt],c=tn;return i[c]=s,th(a,c,2,"#host",null)}(Ie,X),xC=function lR(i,s,a,c,d,f,y){const E=d[tt];!function dR(i,s,a,c){for(const d of i)s.mergedAttrs=Xt(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(t_(s,s.mergedAttrs,!0),null!==a&&ew(c,a,s))}(c,i,s,y);let D=null;null!==s&&(D=ip(s,d[$i]));const T=f.rendererFactory.createRenderer(s,a);let x=16;a.signals?x=4096:a.onPush&&(x=64);const U=Cm(d,$w(a),null,x,d[i.index],i,f,T,null,null,D);return E.firstCreatePass&&Qv(E,i,c.length-1),hp(d,U),d[i.index]=U}(aE,X,sn,Vi,Ie,x,U);nn=pd(ct,tn),X&&function fR(i,s,a,c){if(c)ft(i,a,["ng-version",Tw.full]);else{const{attrs:d,classes:f}=function pu(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!si(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&ft(i,a,d),f&&f.length>0&&Bd(i,a,f.join(" "))}}(U,sn,X,c),void 0!==a&&function kT(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(nn,this.ngContentSelectors,a),Bt=function hR(i,s,a,c,d,f){const y=hr(),E=d[tt],D=Br(y,d);Yv(E,d,y,a,null,c);for(let x=0;x<a.length;x++)xi(no(d,E,y.directiveStart+x,y),d);Kw(E,d,y),D&&xi(D,d);const T=no(d,E,y.directiveStart+y.componentOffset,y);if(i[gn]=d[gn]=T,null!==f)for(const x of f)x(T,s);return Hv(E,y,i),T}(xC,sn,Vi,Qh,Ie,[FT]),tI(ct,Ie,null)}finally{Cd()}return new PT(this.componentType,Bt,Qd(nn,Ie),Ie,nn)}}class PT extends eT{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new RT(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const f=this._rootLView;Am(f[tt],f,d,s,a),this.previousInputValues.set(s,a),Qi(bi(this._tNode.index,f))}}get injector(){return new So(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function FT(){const i=hr();Uu(Te()[tt],i)}function oh(i){let s=function n_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(_n(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ee(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Os(i.inputs),y.inputTransforms=Os(i.inputTransforms),y.declaredInputs=Os(i.declaredInputs),y.outputs=Os(i.outputs);const E=d.hostBindings;E&&VT(i,E);const D=d.viewQuery,T=d.contentQueries;if(D&&pR(i,D),T&&LT(i,T),z(i.inputs,d.inputs),z(i.declaredInputs,d.declaredInputs),z(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),z(y.inputTransforms,d.inputTransforms)),_n(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const E=f[y];E&&E.ngInherit&&E(i),E===oh&&(a=!1)}}s=Object.getPrototypeOf(s)}!function xm(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=Xt(d.hostAttrs,a=Xt(a,d.hostAttrs))}}(c)}function Os(i){return i===mt?{}:i===ht?[]:i}function pR(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function LT(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function VT(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function i_(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const d=s[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function Nm(i){return!!pp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function pp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ji(i,s,a){return i[s]=a}function di(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function fI(i,s,a,c){const d=Te();return di(d,Rn(),s)&&(Qt(),ca(Dn(),d,i,s,a,c)),fI}function gp(i,s,a,c){return di(i,Rn(),a)?s+se(a)+c:Ht}function wI(i,s,a,c,d,f,y,E){const D=Te(),T=Qt(),x=i+tn,U=T.firstCreatePass?function aS(i,s,a,c,d,f,y,E,D){const T=s.consts,x=th(s,i,4,y||null,us(T,E));nh(s,a,x,us(T,D)),Uu(s,x);const U=x.tView=Wv(2,x,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T,null);return null!==s.queries&&(s.queries.template(s,x),U.queries=s.queries.embeddedTView(x)),x}(x,T,D,s,a,c,d,f,y):T.data[x];Qr(U,!1);const q=uS(T,D,U,i);Oa()&&lv(T,D,q,U),xi(q,D),hp(D,D[x]=Xv(q,D,q,U)),Gs(U)&&zv(T,D,U),null!=y&&Gv(D,U,E)}let uS=function II(i,s,a,c){return Io(!0),s[Dt].createComment("")};function lS(i){return Ks(function rl(){return St.lFrame.contextLView}(),tn+i)}function p_(i,s,a){const c=Te();return di(c,Rn(),s)&&li(Qt(),Dn(),c,i,s,c[Dt],a,!1),p_}function _e(i,s,a,c,d){const y=d?"class":"style";Am(i,a,s.inputs[y],y,c)}function Pl(i,s,a,c){const d=Te(),f=Qt(),y=tn+i,E=d[Dt],D=f.firstCreatePass?function ru(i,s,a,c,d,f){const y=s.consts,D=th(s,i,2,c,us(y,d));return nh(s,a,D,us(y,f)),null!==D.attrs&&t_(D,D.attrs,!1),null!==D.mergedAttrs&&t_(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,f,d,s,a,c):f.data[y],T=DI(f,d,D,E,s,i);d[y]=T;const x=Gs(D);return Qr(D,!0),ew(E,T,D),32!=(32&D.flags)&&Oa()&&lv(f,d,T,D),0===function Og(){return St.lFrame.elementDepthCount}()&&xi(T,d),function tl(){St.lFrame.elementDepthCount++}(),x&&(zv(f,d,D),Hv(f,D,d)),null!==c&&Gv(d,D),Pl}function No(){let i=hr();Tf()?function qn(){St.lFrame.isParent=!1}():(i=i.parent,Qr(i,!1));const s=i;(function Ru(i){return St.skipHydrationRootTNode===i})(s)&&function Cf(){St.skipHydrationRootTNode=null}(),function If(){St.lFrame.elementDepthCount--}();const a=Qt();return a.firstCreatePass&&(Uu(a,i),kc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function La(i){return 0!=(8&i.flags)}(s)&&_e(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function jr(i){return 0!=(16&i.flags)}(s)&&_e(a,s,Te(),s.stylesWithoutHost,!1),No}function an(i,s,a,c){return Pl(i,s,a,c),No(),an}let DI=(i,s,a,c,d,f)=>(Io(!0),Xg(c,d,function Md(){return St.lFrame.currentNamespace}()));function bI(){return Te()}function y_(i){return!!i&&"function"==typeof i.then}function _i(i){return!!i&&"function"==typeof i.subscribe}function gh(i,s,a,c){const d=Te(),f=Qt(),y=hr();return function TI(i,s,a,c,d,f,y){const E=Gs(c),T=i.firstCreatePass&&Sm(i),x=s[gn],U=eI(s);let q=!0;if(3&c.type||y){const Ve=Br(c,s),Ke=y?y(Ve):Ve,ct=U.length,Ie=y?nn=>y(mn(nn[c.index])):c.index;let Bt=null;if(!y&&E&&(Bt=function lc(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const E=s[bs],D=d[f+2];return E.length>D?E[D]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=f,Bt.__ngLastListenerFn__=f,q=!1;else{f=Fm(c,s,x,f,!1);const nn=a.listen(Ke,d,f);U.push(f,nn),T&&T.push(d,Ie,ct,ct+1)}}else f=Fm(c,s,x,f,!1);const X=c.outputs;let we;if(q&&null!==X&&(we=X[d])){const Ve=we.length;if(Ve)for(let Ke=0;Ke<Ve;Ke+=2){const sn=s[we[Ke]][we[Ke+1]].subscribe(f),Vi=U.length;U.push(f,sn),T&&T.push(d,c.index,Vi,-(Vi+1))}}}(f,d,d[Dt],y,i,s,c),gh}function v_(i,s,a,c){try{return Gi(6,s,a),!1!==a(c)}catch(d){return ST(i,d),!1}finally{Gi(7,s,a)}}function Fm(i,s,a,c,d){return function f(y){if(y===Function)return c;Qi(i.componentOffset>-1?bi(i.index,s):s);let D=v_(s,a,c,y),T=f.__ngNextListenerFn__;for(;T;)D=v_(s,a,T,y)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function __(i=1){return function bd(i){return(St.lFrame.contextLView=function kg(i,s){for(;i>0;)s=s[zs],i--;return s}(i,St.lFrame.contextLView))[gn]}(i)}function mh(i,s,a){return Ps(i,"",s,"",a),mh}function Ps(i,s,a,c,d){const f=Te(),y=gp(f,s,a,c);return y!==Ht&&li(Qt(),Dn(),f,i,y,f[Dt],d,!1),Ps}function vp(i,s){return i<<17|s<<2}function da(i){return i>>17&32767}function _p(i){return 2|i}function iu(i){return(131068&i)>>2}function Um(i,s){return-131069&i|s<<2}function Fl(i){return 1|i}function Ep(i,s,a,c,d){const f=i[a+1],y=null===s;let E=c?da(f):iu(f),D=!1;for(;0!==E&&(!1===D||y);){const x=i[E+1];C_(i[E],s)&&(D=!0,i[E+1]=c?Fl(x):_p(x)),E=c?da(x):iu(x)}D&&(i[a+1]=c?_p(f):Fl(f))}function C_(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&A(i,s)>=0}function M_(i,s){return function Un(i,s,a,c){const d=Te(),f=Qt(),y=function ls(i){const s=St.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function LI(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[ai()],y=function Hm(i,s){return s>=i.expandoStartIndex}(i,a);(function k_(i,s){return 0!=(i.flags&(s?8:16))})(f,c)&&null===s&&!y&&(s=!1),s=function mS(i,s,a,c){const d=function Na(i){const s=St.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Ip(a=N_(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=N_(d,i,s,a,c),null===f){let D=function yS(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==iu(c))return i[da(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=N_(null,i,s,D[1],c),D=Ip(D,s.attrs,c),function VI(i,s,a,c){i[da(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else f=function vS(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=Ip(c,i[f].hostAttrs,a);return Ip(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function pS(i,s,a,c,d,f){let y=f?s.classBindings:s.styleBindings,E=da(y),D=iu(y);i[c]=a;let x,T=!1;if(Array.isArray(a)?(x=a[1],(null===x||A(a,x)>0)&&(T=!0)):x=a,d)if(0!==D){const q=da(i[E+1]);i[c+1]=vp(q,E),0!==q&&(i[q+1]=Um(i[q+1],c)),i[E+1]=function D_(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=vp(E,0),0!==E&&(i[E+1]=Um(i[E+1],c)),E=c;else i[c+1]=vp(D,0),0===E?E=c:i[D+1]=Um(i[D+1],c),D=c;T&&(i[c+1]=_p(i[c+1])),Ep(i,x,c,!0),Ep(i,x,c,!1),function gS(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&A(f,s)>=0&&(a[c+1]=Fl(a[c+1]))}(s,x,i,c,f),y=vp(E,D),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,c)}}(f,i,y,c),s!==Ht&&di(d,y,s)&&function BI(i,s,a,c,d,f,y,E){if(!(3&s.type))return;const D=i.data,T=D[E+1],x=function fS(i){return 1==(1&i)}(T)?Cp(D,s,a,d,iu(T),y):void 0;vh(x)||(vh(f)||function I_(i){return 2==(2&i)}(T)&&(f=Cp(D,null,a,d,E,y)),function Fb(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:ia.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=ia.Important),i.setStyle(a,c,d,f))}}(c,y,Qo(ai(),a),d,f))}(f,f.data[ai()],d,d[Dt],i,d[y+1]=function P_(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=te(Oi(i)))),i}(s,a),c,y)}(i,s,null,!0),M_}function N_(i,s,a,c,d){let f=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(f=s[E],c=Ip(c,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Ip(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),w(i,y,!!a||s[++f]))}return void 0===i?null:i}function Cp(i,s,a,c,d,f){const y=null===s;let E;for(;d>0;){const D=i[d],T=Array.isArray(D),x=T?D[1]:D,U=null===x;let q=a[d+1];q===Ht&&(q=U?ht:void 0);let X=U?C(q,c):x===c?q:void 0;if(T&&!vh(X)&&(X=C(D,c)),vh(X)&&(E=X,y))return E;const we=i[d+1];d=y?da(we):iu(we)}if(null!==s){let D=f?s.residualClasses:s.residualStyles;null!=D&&(E=C(D,c))}return E}function vh(i){return void 0!==i}function jI(i,s=""){const a=Te(),c=Qt(),d=i+tn,f=c.firstCreatePass?th(c,d,1,s,null):c.data[d],y=_h(c,a,f,s,i);a[d]=y,Oa()&&lv(c,a,y,f),Qr(f,!1)}let _h=(i,s,a,c,d)=>(Io(!0),function sa(i,s){return i.createText(s)}(s[Dt],c));function zm(i){return Ll("",i,""),zm}function Ll(i,s,a){const c=Te(),d=gp(c,i,s,a);return d!==Ht&&function vi(i,s,a){const c=Qo(s,i);!function GE(i,s,a){i.setValue(s,a)}(i[Dt],c,a)}(c,ai(),d),Ll}const Po=void 0;var G_=["en",[["a","p"],["AM","PM"],Po],[["AM","PM"],Po,Po],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Po,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Po,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Po,"{1} 'at' {0}",Po],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ul(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let wh={};function Km(i){const s=function Ym(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=fc(s);if(a)return a;const c=s.split("-")[0];if(a=fc(c),a)return a;if("en"===c)return G_;throw new ee(701,!1)}function rD(i){return Km(i)[Tt.PluralCase]}function fc(i){return i in wh||(wh[i]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[i]),wh[i]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const su="en-US";let sD=su;function oy(i,s,a,c,d){if(i=xe(i),Array.isArray(i))for(let f=0;f<i.length;f++)oy(i[f],s,a,c,d);else{const f=Qt(),y=Te();let E=nc(i)?i:xe(i.provide),D=bv(i);const T=hr(),x=1048575&T.providerIndexes,U=T.directiveStart,q=T.providerIndexes>>20;if(nc(i)||!i.multi){const X=new Do(D,d,oc),we=ei(E,s,d?x:x+q,U);-1===we?(Ss(to(T,y),f,E),Fo(f,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(X),y.push(X)):(a[we]=X,y[we]=X)}else{const X=ei(E,s,x+q,U),we=ei(E,s,x,x+q),Ke=we>=0&&a[we];if(d&&!Ke||!d&&!(X>=0&&a[X])){Ss(to(T,y),f,E);const ct=function cy(i,s,a,c,d){const f=new Do(i,a,oc);return f.multi=[],f.index=s,f.componentProviders=0,Fs(f,d,c&&!a),f}(d?uy:ay,a.length,d,c,D);!d&&Ke&&(a[we].providerFactory=ct),Fo(f,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ct),y.push(ct)}else Fo(f,i,X>-1?X:we,Fs(a[d?we:X],D,!d&&c));!d&&c&&Ke&&a[we].componentProviders++}}}function Fo(i,s,a,c){const d=nc(s),f=function yw(i){return!!i.useClass}(s);if(d||f){const D=(f?xe(s.useClass):s).prototype.ngOnDestroy;if(D){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,D]):T[x+1].push(c,D)}else T.push(a,D)}}}function Fs(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function ei(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function ay(i,s,a,c){return jl(this.multi,[])}function uy(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=no(a,a[tt],this.providerFactory.index,c);f=E.slice(0,y),jl(d,f);for(let D=y;D<E.length;D++)f.push(E[D])}else f=[],jl(d,f);return f}function jl(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function a0(i,s=[]){return a=>{a.providersResolver=(c,d)=>function o0(i,s,a){const c=Qt();if(c.firstCreatePass){const d=_n(i);oy(a,c.data,c.blueprint,d,!0),oy(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Lo{}class AD{}function MS(i,s){return new u0(i,s??null,[])}class u0 extends Lo{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lI(this);const d=Zr(s);this._bootstrapComponents=eu(d.bootstrap),this._r3Injector=Dm(s,a,[{provide:Lo,useValue:this},{provide:op,useValue:this.componentFactoryResolver},...c],te(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class c0 extends AD{constructor(s){super(),this.moduleType=s}create(s){return new u0(this.moduleType,s,[])}}class RD extends Lo{constructor(s){super(),this.componentFactoryResolver=new lI(this),this.instance=null;const a=new Tl([...s.providers,{provide:Lo,useValue:this},{provide:op,useValue:this.componentFactoryResolver}],s.parent||pm(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function zp(i,s,a=null){return new RD({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let xS=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Ev(0,a.type),d=c.length>0?zp([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Yt({token:i,providedIn:"environment",factory:()=>new i(An(rc))}),i})();function ND(i){i.getStandaloneInjector=s=>s.get(xS).getOrCreateStandaloneInjector(i)}function Gp(i,s){const a=i[s];return a===Ht?void 0:a}function Ut(i,s,a,c,d,f,y){const E=s+a;return function uc(i,s,a,c){const d=di(i,s,a);return di(i,s+1,c)||d}(i,E,d,f)?Ji(i,E+2,y?c.call(y,d,f):c(d,f)):Gp(i,E+2)}function It(i,s){const a=Qt();let c;const d=i+tn;a.firstCreatePass?(c=function Wp(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks??=[]).push(d,c.onDestroy)):c=a.data[d];const f=c.factory||(c.factory=Ws(c.type)),y=Wt(oc);try{const E=Si(!1),D=f();return Si(E),function cS(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Te(),d,D),D}finally{Wt(y)}}function FD(i,s,a){const c=i+tn,d=Te(),f=Ks(d,c);return Vo(d,c)?function h0(i,s,a,c,d,f){const y=s+a;return di(i,y,d)?Ji(i,y+1,f?c.call(f,d):c(d)):Gp(i,y+1)}(d,Mr(),s,f.transform,a,f):f.transform(a)}function gr(i,s,a,c){const d=i+tn,f=Te(),y=Ks(f,d);return Vo(f,d)?Ut(f,Mr(),s,y.transform,a,c,y):y.transform(a,c)}function Vo(i,s){return i[tt].data[s].pure}function Rh(i){return s=>{setTimeout(i,void 0,s)}}const pa=class US extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),f=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(f=Rh(f),d&&(d=Rh(d)),y&&(y=Rh(y)));const E=super.subscribe({next:d,error:f,complete:y});return s instanceof B.w0&&s.add(E),E}};function qp(){return this._results[Symbol.iterator]()}class dy{get changes(){return this._changes||(this._changes=new pa)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=dy.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=qp)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function ir(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Yu(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nh=(()=>{class i{}return i.__NG_ELEMENT_ID__=LD,i})();const Vs=Nh,g0=class extends Vs{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a,null)}createEmbeddedViewImpl(s,a,c){const y=this._declarationTContainer.tView,E=Cm(this._declarationLView,y,s,4096&this._declarationLView[Nt]?4096:16,null,y.declTNode,null,null,null,a||null,c||null);E[_u]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[ss];return null!==T&&(E[ss]=T.createEmbeddedView(y)),tI(y,E,s),new ih(E)}};function LD(){return Zp(hr(),Te())}function Zp(i,s){return 4&i.type?new g0(s,i,Qd(i,s)):null}let Kp=(()=>{class i{}return i.__NG_ELEMENT_ID__=y0,i})();function y0(){return kh(hr(),Te())}const $S=Kp,VD=class extends $S{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Qd(this._hostTNode,this._hostLView)}get injector(){return new So(this._hostTNode,this._hostLView)}get parentInjector(){const s=Nn(this._hostTNode,this._hostLView);if(ju(s)){const a=Va(s,this._hostLView),c=ui(s);return new So(a[tt].data[c+8],a)}return new So(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ms(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-Ar}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const E=s.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(E,d,false),E}createComponent(s,a,c,d,f){const y=s&&!function ro(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const Ve=a||{};E=Ve.index,c=Ve.injector,d=Ve.projectableNodes,f=Ve.environmentInjector||Ve.ngModuleRef}const D=y?s:new sh(Ft(s)),T=c||this.parentInjector;if(!f&&null==D.ngModule){const Ke=(y?T:this.parentInjector).get(rc,null);Ke&&(f=Ke)}Ft(D.componentType??{});const X=D.create(T,d,null,f);return this.insertImpl(X.hostView,E,false),X}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView,f=d[tt];if(function md(i){return Ur(i[Mn])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const T=d[Mn],x=new VD(T,T[Tr],T[Mn]);x.detach(x.indexOf(s))}}const y=this._adjustIndex(a),E=this._lContainer;if(function qE(i,s,a,c){const d=Ar+c,f=a.length;c>0&&(a[d-1][Kr]=s),c<f-Ar?(s[Kr]=a[d],Mo(a,Ar+c,s)):(a.push(s),s[Kr]=null),s[Mn]=a;const y=s[_u];null!==y&&a!==y&&function Ab(i,s){const a=i[qo];s[xn]!==s[Mn][Mn][xn]&&(i[yo]=!0),null===a?i[qo]=[s]:a.push(s)}(y,s);const E=s[ss];null!==E&&E.insertView(i),s[Nt]|=128}(f,d,E,y),!c){const D=dv(y,E),T=d[Dt],x=cv(T,E[fi]);null!==x&&function Tb(i,s,a,c,d,f){c[Qn]=d,c[Tr]=s,Wf(i,c,a,1,d,f)}(f,E[Tr],T,d,x,D)}return s.attachToViewContainerRef(),Mo(zl(E),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ms(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=ov(this._lContainer,a);c&&(Pd(zl(this._lContainer),a),av(c[tt],c))}detach(s){const a=this._adjustIndex(s,-1),c=ov(this._lContainer,a);return c&&null!=Pd(zl(this._lContainer),a)?new ih(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function ms(i){return i[8]}function zl(i){return i[8]||(i[8]=[])}function kh(i,s){let a;const c=s[i.index];return Ur(c)?a=c:(a=Xv(c,s,null,i),s[i.index]=a,hp(s,a)),Ei(a,s,i,c),new VD(a,i,s)}let Ei=function BD(i,s,a,c){if(i[fi])return;let d;d=8&a.type?mn(c):function UD(i,s){const a=i[Dt],c=a.createComment(""),d=Br(s,i);return Ld(a,cv(a,d),c,function Bx(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[fi]=d};class hy{constructor(s){this.queryList=s,this.matches=null}clone(){return new hy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fh{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Fh(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==KD(s,a).matches&&this.queries[a].setDirty()}}class v0{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class _0{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new _0(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class E0{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new E0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,HS(a,f)),this.matchTNodeWithReadOption(s,a,ta(a,s,f,!1,!1))}else c===Nh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ta(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Em||d===Kp||d===Nh&&4&a.type)this.addMatch(a.index,-2);else{const f=ta(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function HS(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function GS(i,s,a,c){return-1===a?function zS(i,s){return 11&i.type?Qd(i,s):4&i.type?Zp(i,s):null}(s,i):-2===a?function WS(i,s,a){return a===Em?Qd(s,i):a===Nh?Zp(s,i):a===Kp?kh(s,i):void 0}(i,s,c):no(i,i[tt],a,s)}function $D(i,s,a,c){const d=s[ss].queries[c];if(null===d.matches){const f=i.data,y=a.matches,E=[];for(let D=0;D<y.length;D+=2){const T=y[D];E.push(T<0?null:GS(s,f[T],y[D+1],a.metadata.read))}d.matches=E}return d.matches}function w0(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=$D(i,s,d,a);for(let E=0;E<f.length;E+=2){const D=f[E];if(D>0)c.push(y[E/2]);else{const T=f[E+1],x=s[-D];for(let U=Ar;U<x.length;U++){const q=x[U];q[_u]===q[Mn]&&w0(q[tt],q,T,c)}if(null!==x[qo]){const U=x[qo];for(let q=0;q<U.length;q++){const X=U[q];w0(X[tt],X,T,c)}}}}}return c}function HD(i){const s=Te(),a=Qt(),c=Fu();Ys(c+1);const d=KD(a,c);if(i.dirty&&function wf(i){return 4==(4&i[Nt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?w0(a,s,c,[]):$D(a,s,d,c);i.reset(f,Yx),i.notifyOnChanges()}return!0}return!1}function zD(i,s,a,c){const d=Qt();if(d.firstCreatePass){const f=hr();(function qD(i,s,a){null===i.queries&&(i.queries=new _0),i.queries.track(new E0(s,a))})(d,new v0(s,a,c),f.index),function ZD(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function WD(i,s,a){const c=new dy(4==(4&a));(function yT(i,s,a,c){const d=eI(s);d.push(a),i.firstCreatePass&&Sm(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[ss]&&(s[ss]=new Fh),s[ss].queries.push(new hy(c))}(d,Te(),a)}function GD(){return function ZS(i,s){return i[ss].queries[s].queryList}(Te(),Fu())}function KD(i,s){return i.queries.getByIndex(s)}function Pn(i){return!!Zr(i)}const py=new yn("Application Initializer");let gy=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=qt(py,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(y_(f))a.push(f);else if(_i(f)){const y=new Promise((E,D)=>{f.subscribe({complete:E,error:D})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),my=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const rg=new yn("LocaleId",{providedIn:"root",factory:()=>qt(rg,Ze.Optional|Ze.SkipSelf)||function uC(){return typeof $localize<"u"&&$localize.locale||su}()}),cC=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let x0=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new O.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class eA{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let lC=(()=>{class i{compileModuleSync(a){return new c0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=eu(Zr(a).declarations).reduce((y,E)=>{const D=Ft(E);return D&&y.push(new sh(D)),y},[]);return new eA(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _y=(()=>Promise.resolve(0))();function Ey(i){typeof Zone>"u"?_y.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}function R0(...i){}class Hr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pa(!1),this.onMicrotaskEmpty=new pa(!1),this.onStable=new pa(!1),this.onError=new pa(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function du(){let i=zt.requestAnimationFrame,s=zt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function N0(i){const s=()=>{!function wy(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(zt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,hu(i),i.isCheckStableRunning=!0,ig(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),hu(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,E)=>{try{return Li(i),a.invokeTask(d,f,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Iy(i)}},onInvoke:(a,c,d,f,y,E,D)=>{try{return Li(i),a.invoke(d,f,y,E,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),Iy(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,hu(i),ig(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Hr.isInAngularZone())throw new ee(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,dC,R0,R0);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const dC={};function ig(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function hu(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Li(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Iy(i){i._nesting--,ig(i)}class Dy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pa,this.onMicrotaskEmpty=new pa,this.onStable=new pa,this.onError=new pa}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const jh=new yn("",{providedIn:"root",factory:O0});function O0(){const i=qt(Hr);let s=!0;const a=new Y.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new Y.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Hr.assertNotInAngularZone(),Ey(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Hr.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ie.T)(a,c.pipe((0,ge.B)()))}const Cy=new yn(""),$h=new yn("");let jo,hC=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jo||(function iA(i){jo=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hr.assertNotInAngularZone(),Ey(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ey(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(An(Hr),An(P0),An($h))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),P0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return jo?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Cc=null;const es=new yn("AllowMultipleToken"),by=new yn("PlatformDestroyListeners"),Zl=new yn("appBootstrapListener");class sA{constructor(s,a){this.name=s,this.token=a}}function F0(i,s,a=[]){const c=`Platform: ${s}`,d=new yn(c);return(f=[])=>{let y=U0();if(!y||y.injector.get(es,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function oA(i){if(Cc&&!Cc.get(es,!1))throw new ee(400,!1);(function k0(){!function hd(i){dd=i}(()=>{throw new ee(600,!1)})})(),Cc=i;const s=i.get(yC);(function pC(i){i.get(gm,null)?.forEach(a=>a())})(i)}(function L0(i=[],s){return sc.create({name:s,providers:[{provide:wv,useValue:"platform"},{provide:by,useValue:new Set([()=>Cc=null])},...i]})}(E,c))}return function mC(i){const s=U0();if(!s)throw new ee(401,!1);return s}()}}function U0(){return Cc?.get(yC)??null}let yC=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Hh(i="zone.js",s){return"noop"===i?new Dy:"zone.js"===i?new Hr(s):i}(c?.ngZone,function B0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function xD(i,s,a){return new u0(i,s,a)}(a.moduleType,this.injector,function _C(i){return[{provide:Hr,useFactory:i},{provide:Xf,multi:!0,useFactory:()=>{const s=qt(ag,{optional:!0});return()=>s.initialize()}},{provide:$0,useFactory:vC},{provide:jh,useFactory:O0}]}(()=>d)),y=f.injector.get(Jd,null);return d.runOutsideAngular(()=>{const E=d.onError.subscribe({next:D=>{y.handleError(D)}});f.onDestroy(()=>{og(this._modules,f),E.unsubscribe()})}),function bc(i,s,a){try{const c=a();return y_(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const E=f.injector.get(gy);return E.runInitializers(),E.donePromise.then(()=>(function oD(i){et(i,"Expected localeId to be defined"),"string"==typeof i&&(sD=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(rg,su)||su),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=j0({},c);return function fC(i,s,a){const c=new c0(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(lo);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ee(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(by,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(An(sc))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function j0(i,s){return Array.isArray(s)?s.reduce(j0,i):{...i,...s}}let lo=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qt($0),this.zoneIsStable=qt(jh),this.componentTypes=[],this.components=[],this.isStable=qt(x0).hasPendingTasks.pipe((0,Se.w)(a=>a?(0,fe.of)(!1):this.zoneIsStable),(0,pe.x)(),(0,ge.B)()),this._injector=qt(rc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Iw;if(!this._injector.get(gy).done)throw!d&&Cs(a),new ee(405,!1);let y;y=d?a:this._injector.get(op).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function sg(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Lo),T=y.create(sc.NULL,[],c||y.selector,E),x=T.location.nativeElement,U=T.injector.get(Cy,null);return U?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),og(this.components,T),U?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;og(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Zl,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>og(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function og(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const $0=new yn("",{providedIn:"root",factory:()=>qt(Jd).handleError.bind(void 0)});function vC(){const i=qt(Hr),s=qt(Jd);return a=>i.runOutsideAngular(()=>s.handleError(a))}let ag=(()=>{class i{constructor(){this.zone=qt(Hr),this.applicationRef=qt(lo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ty(){return!1}let uA=(()=>{class i{}return i.__NG_ELEMENT_ID__=EC,i})();function EC(i){return function Gh(i,s,a){if(zi(i)&&!a){const c=bi(i.index,s);return new ih(c,c)}return 47&i.type?new ih(s[xn],s):null}(hr(),Te(),16==(16&i))}class Ay{constructor(){}supports(s){return Nm(s)}create(s){return new hg(s)}}const dg=(i,s)=>s;class hg{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||dg}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<Z0(c,d,f)?a:c,E=Z0(y,d,f),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const T=E-d,x=D-d;if(T!=x){for(let q=0;q<T;q++){const X=q<f.length?f[q]:f[q]=0,we=X+q;x<=we&&we<T&&(f[q]=X+1)}f[y.previousIndex]=x-T}}E!==D&&s(y,E,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Nm(s))throw new ee(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),c=!0),a=a._next}else d=0,function $r(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new fg(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new q0),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new q0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class fg{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class My{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class q0{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new My,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Z0(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class K0{constructor(){}supports(s){return s instanceof Map||pp(s)}create(){return new pA}}class pA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||pp(s)))throw new ee(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new DC(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class DC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Y0(){return new Q0([new Ay])}let Q0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Y0()),deps:[[i,new fs,new hs]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ee(901,!1)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:Y0}),i})();function CC(){return new J0([new K0])}let J0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||CC()),deps:[[i,new fs,new hs]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ee(901,!1)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:CC}),i})();const Fr=F0(null,"core",[]);let eE=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(An(lo))},i.\u0275mod=Ea({type:i}),i.\u0275inj=dr({}),i})();function Sc(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function Ql(i){const s=Ft(i);if(!s)return null;const a=new sh(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3106:(pt,Ce,L)=>{L.d(Ce,{Z:()=>We});var h=L(9058),B=L(4537),O=L(534),Y=L(7879);class ie{constructor(qe,Oe){this._delegate=qe,this.firebase=Oe,(0,O._addComponent)(qe,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(qe,Oe=O._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(qe);return!ut.isInitialized()&&"EXPLICIT"===(null===(yt=ut.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:Oe})}_removeServiceInstance(qe,Oe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Oe)}_addComponent(qe){(0,O._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,O._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const xe=function Se(xe){const qe={},Oe={__esModule:!0,initializeApp:function ee(Ne,J={}){const Xe=O.initializeApp(Ne,J);if((0,h.r3)(qe,Xe.name))return qe[Xe.name];const $e=new xe(Xe,Oe);return qe[Xe.name]=$e,$e},app:ut,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function se(Ne){const J=Ne.name,Xe=J.replace("-compat","");if(O._registerComponent(Ne)&&"PUBLIC"===Ne.type){const $e=(Kt=ut())=>{if("function"!=typeof Kt[Xe])throw ge.create("invalid-app-argument",{appName:J});return Kt[Xe]()};void 0!==Ne.serviceProps&&(0,h.ZB)($e,Ne.serviceProps),Oe[Xe]=$e,xe.prototype[Xe]=function(...Kt){return this._getService.bind(this,J).apply(this,Ne.multipleInstances?Kt:[])}}return"PUBLIC"===Ne.type?Oe[Xe]:null},removeApp:function yt(Ne){delete qe[Ne]},useAsService:function he(Ne,J){return"serverAuth"===J?null:J},modularAPIs:O}};function ut(Ne){if(!(0,h.r3)(qe,Ne=Ne||O._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Ne});return qe[Ne]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Ee(){return Object.keys(qe).map(Ne=>qe[Ne])}}),ut.App=xe,Oe}(ie);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function qe(Oe){(0,h.ZB)(xe,Oe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),xe}(),z=new Y.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=$;!function Ae(xe){(0,O.registerVersion)("@firebase/app-compat","0.2.12",xe)}()},534:(pt,Ce,L)=>{L.r(Ce),L.d(Ce,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>Ze,_addComponent:()=>nr,_addOrOverwriteComponent:()=>ii,_apps:()=>Et,_clearComponents:()=>ln,_components:()=>Wt,_getProvider:()=>Zn,_registerComponent:()=>zt,_removeServiceInstance:()=>is,deleteApp:()=>vn,getApp:()=>Cr,getApps:()=>Hn,initializeApp:()=>Ds,onLog:()=>rr,registerVersion:()=>Sn,setLogLevel:()=>An});var h=L(5861),B=L(4537),O=L(7879),Y=L(9058);const ie=(de,re)=>re.some(Fe=>de instanceof Fe);let fe,ge;const $=new WeakMap,z=new WeakMap,te=new WeakMap,ke=new WeakMap,Ae=new WeakMap;let qe={get(de,re,Fe){if(de instanceof IDBTransaction){if("done"===re)return z.get(de);if("objectStoreNames"===re)return de.objectStoreNames||te.get(de);if("store"===re)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return ee(de[re])},set:(de,re,Fe)=>(de[re]=Fe,!0),has:(de,re)=>de instanceof IDBTransaction&&("done"===re||"store"===re)||re in de};function ut(de){return"function"==typeof de?function yt(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...re){return de.apply(Ee(this),re),ee($.get(this))}:function(...re){return ee(de.apply(Ee(this),re))}:function(re,...Fe){const ft=de.call(Ee(this),re,...Fe);return te.set(ft,re.sort?re.sort():[re]),ee(ft)}}(de):(de instanceof IDBTransaction&&function xe(de){if(z.has(de))return;const re=new Promise((Fe,ft)=>{const Rt=()=>{de.removeEventListener("complete",jt),de.removeEventListener("error",Xt),de.removeEventListener("abort",Xt)},jt=()=>{Fe(),Rt()},Xt=()=>{ft(de.error||new DOMException("AbortError","AbortError")),Rt()};de.addEventListener("complete",jt),de.addEventListener("error",Xt),de.addEventListener("abort",Xt)});z.set(de,re)}(de),ie(de,function Se(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,qe):de)}function ee(de){if(de instanceof IDBRequest)return function We(de){const re=new Promise((Fe,ft)=>{const Rt=()=>{de.removeEventListener("success",jt),de.removeEventListener("error",Xt)},jt=()=>{Fe(ee(de.result)),Rt()},Xt=()=>{ft(de.error),Rt()};de.addEventListener("success",jt),de.addEventListener("error",Xt)});return re.then(Fe=>{Fe instanceof IDBCursor&&$.set(Fe,de)}).catch(()=>{}),Ae.set(re,de),re}(de);if(ke.has(de))return ke.get(de);const re=ut(de);return re!==de&&(ke.set(de,re),Ae.set(re,de)),re}const Ee=de=>Ae.get(de),Ne=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],Xe=new Map;function $e(de,re){if(!(de instanceof IDBDatabase)||re in de||"string"!=typeof re)return;if(Xe.get(re))return Xe.get(re);const Fe=re.replace(/FromIndex$/,""),ft=re!==Fe,Rt=J.includes(Fe);if(!(Fe in(ft?IDBIndex:IDBObjectStore).prototype)||!Rt&&!Ne.includes(Fe))return;const jt=function(){var Xt=(0,h.Z)(function*(_r,...zn){const $s=this.transaction(_r,Rt?"readwrite":"readonly");let fo=$s.store;return ft&&(fo=fo.index(zn.shift())),(yield Promise.all([fo[Fe](...zn),Rt&&$s.done]))[0]});return function(zn){return Xt.apply(this,arguments)}}();return Xe.set(re,jt),jt}!function Oe(de){qe=de(qe)}(de=>({...de,get:(re,Fe,ft)=>$e(re,Fe)||de.get(re,Fe,ft),has:(re,Fe)=>!!$e(re,Fe)||de.has(re,Fe)}));class Kt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function cr(de){const re=de.getComponent();return"VERSION"===re?.type}(Fe)){const ft=Fe.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(Fe=>Fe).join(" ")}}const Gr="@firebase/app",ae=new O.Yd("@firebase/app"),Ze="[DEFAULT]",dt={[Gr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,Wt=new Map;function nr(de,re){try{de.container.addComponent(re)}catch(Fe){ae.debug(`Component ${re.name} failed to register with FirebaseApp ${de.name}`,Fe)}}function ii(de,re){de.container.addOrOverwriteComponent(re)}function zt(de){const re=de.name;if(Wt.has(re))return ae.debug(`There were multiple attempts to register component ${re}.`),!1;Wt.set(re,de);for(const Fe of Et.values())nr(Fe,de);return!0}function Zn(de,re){const Fe=de.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),de.container.getProvider(re)}function is(de,re,Fe=Ze){Zn(de,re).clearInstance(Fe)}function ln(){Wt.clear()}const Pt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ln{constructor(re,Fe,ft){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const ji="9.22.2";function Ds(de,re={}){let Fe=de;"object"!=typeof re&&(re={name:re});const ft=Object.assign({name:Ze,automaticDataCollectionEnabled:!1},re),Rt=ft.name;if("string"!=typeof Rt||!Rt)throw Pt.create("bad-app-name",{appName:String(Rt)});if(Fe||(Fe=(0,Y.aH)()),!Fe)throw Pt.create("no-options");const jt=Et.get(Rt);if(jt){if((0,Y.vZ)(Fe,jt.options)&&(0,Y.vZ)(ft,jt.config))return jt;throw Pt.create("duplicate-app",{appName:Rt})}const Xt=new B.H0(Rt);for(const zn of Wt.values())Xt.addComponent(zn);const _r=new Ln(Fe,ft,Xt);return Et.set(Rt,_r),_r}function Cr(de=Ze){const re=Et.get(de);if(!re&&de===Ze&&(0,Y.aH)())return Ds();if(!re)throw Pt.create("no-app",{appName:de});return re}function Hn(){return Array.from(Et.values())}function vn(de){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(de){const re=de.name;Et.has(re)&&(Et.delete(re),yield Promise.all(de.container.getProviders().map(Fe=>Fe.delete())),de.isDeleted=!0)})).apply(this,arguments)}function Sn(de,re,Fe){var ft;let Rt=null!==(ft=dt[de])&&void 0!==ft?ft:de;Fe&&(Rt+=`-${Fe}`);const jt=Rt.match(/\s|\//),Xt=re.match(/\s|\//);if(jt||Xt){const _r=[`Unable to register library "${Rt}" with version "${re}":`];return jt&&_r.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),jt&&Xt&&_r.push("and"),Xt&&_r.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void ae.warn(_r.join(" "))}zt(new B.wA(`${Rt}-version`,()=>({library:Rt,version:re}),"VERSION"))}function rr(de,re){if(null!==de&&"function"!=typeof de)throw Pt.create("invalid-log-argument");(0,O.Am)(de,re)}function An(de){(0,O.Ub)(de)}const qr="firebase-heartbeat-database",qt=1,H="firebase-heartbeat-store";let j=null;function k(){return j||(j=function se(de,re,{blocked:Fe,upgrade:ft,blocking:Rt,terminated:jt}={}){const Xt=indexedDB.open(de,re),_r=ee(Xt);return ft&&Xt.addEventListener("upgradeneeded",zn=>{ft(ee(Xt.result),zn.oldVersion,zn.newVersion,ee(Xt.transaction),zn)}),Fe&&Xt.addEventListener("blocked",zn=>Fe(zn.oldVersion,zn.newVersion,zn)),_r.then(zn=>{jt&&zn.addEventListener("close",()=>jt()),Rt&&zn.addEventListener("versionchange",$s=>Rt($s.oldVersion,$s.newVersion,$s))}).catch(()=>{}),_r}(qr,qt,{upgrade:(de,re)=>{0===re&&de.createObjectStore(H)}}).catch(de=>{throw Pt.create("idb-open",{originalErrorMessage:de.message})})),j}function R(){return(R=(0,h.Z)(function*(de){try{return yield(yield k()).transaction(H).objectStore(H).get(Ge(de))}catch(re){if(re instanceof Y.ZR)ae.warn(re.message);else{const Fe=Pt.create("idb-get",{originalErrorMessage:re?.message});ae.warn(Fe.message)}}})).apply(this,arguments)}function Q(de,re){return me.apply(this,arguments)}function me(){return(me=(0,h.Z)(function*(de,re){try{const ft=(yield k()).transaction(H,"readwrite");yield ft.objectStore(H).put(re,Ge(de)),yield ft.done}catch(Fe){if(Fe instanceof Y.ZR)ae.warn(Fe.message);else{const ft=Pt.create("idb-set",{originalErrorMessage:Fe?.message});ae.warn(ft.message)}}})).apply(this,arguments)}function Ge(de){return`${de.name}!${de.options.appId}`}class ht{constructor(re){this.container=re,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new kt(Fe),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var re=this;return(0,h.Z)(function*(){const ft=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=At();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!re._heartbeatsCache.heartbeats.some(jt=>jt.date===Rt))return re._heartbeatsCache.heartbeats.push({date:Rt,agent:ft}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(jt=>{const Xt=new Date(jt.date).valueOf();return Date.now()-Xt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,h.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Fe=At(),{heartbeatsToSend:ft,unsentEntries:Rt}=function pn(de,re=1024){const Fe=[];let ft=de.slice();for(const Rt of de){const jt=Fe.find(Xt=>Xt.agent===Rt.agent);if(jt){if(jt.dates.push(Rt.date),vr(Fe)>re){jt.dates.pop();break}}else if(Fe.push({agent:Rt.agent,dates:[Rt.date]}),vr(Fe)>re){Fe.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:ft}}(re._heartbeatsCache.heartbeats),jt=(0,Y.L)(JSON.stringify({version:2,heartbeats:ft}));return re._heartbeatsCache.lastSentHeartbeatDate=Fe,Rt.length>0?(re._heartbeatsCache.heartbeats=Rt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),jt})()}}function At(){return(new Date).toISOString().substring(0,10)}class kt{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,h.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function F(de){return R.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Fe=this;return(0,h.Z)(function*(){var ft;if(yield Fe._canUseIndexedDBPromise){const jt=yield Fe.read();return Q(Fe.app,{lastSentHeartbeatDate:null!==(ft=re.lastSentHeartbeatDate)&&void 0!==ft?ft:jt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Fe=this;return(0,h.Z)(function*(){var ft;if(yield Fe._canUseIndexedDBPromise){const jt=yield Fe.read();return Q(Fe.app,{lastSentHeartbeatDate:null!==(ft=re.lastSentHeartbeatDate)&&void 0!==ft?ft:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...re.heartbeats]})}})()}}function vr(de){return(0,Y.L)(JSON.stringify({version:2,heartbeats:de})).length}!function br(de){zt(new B.wA("platform-logger",re=>new Kt(re),"PRIVATE")),zt(new B.wA("heartbeat",re=>new ht(re),"PRIVATE")),Sn(Gr,"0.9.12",de),Sn(Gr,"0.9.12","esm2017"),Sn("fire-js","")}("")},4537:(pt,Ce,L)=>{L.d(Ce,{H0:()=>Se,wA:()=>O});var h=L(5861),B=L(9058);class O{constructor($,z,te){this.name=$,this.instanceFactory=z,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const Y="[DEFAULT]";class ie{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const te=new B.BH;if(this.instancesDeferred.set(z,te),this.isInitialized(z)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:z});ke&&te.resolve(ke)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const te=this.normalizeInstanceIdentifier($?.identifier),ke=null!==(z=$?.optional)&&void 0!==z&&z;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ae){if(ke)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ge(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[z,te]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(z);try{const Ae=this.getOrInitializeService({instanceIdentifier:ke});te.resolve(Ae)}catch{}}}}clearInstance($=Y){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...z.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=Y){return this.instances.has($)}getOptions($=Y){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,te=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:te,options:z});for(const[Ae,We]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ae)&&We.resolve(ke);return ke}onInit($,z){var te;const ke=this.normalizeInstanceIdentifier(z),Ae=null!==(te=this.onInitCallbacks.get(ke))&&void 0!==te?te:new Set;Ae.add($),this.onInitCallbacks.set(ke,Ae);const We=this.instances.get(ke);return We&&$(We,ke),()=>{Ae.delete($)}}invokeOnInitCallbacks($,z){const te=this.onInitCallbacks.get(z);if(te)for(const ke of te)try{ke($,z)}catch{}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let te=this.instances.get($);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===Y?void 0:pe),options:z}),this.instances.set($,te),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(te,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,te)}catch{}var pe;return te||null}normalizeInstanceIdentifier($=Y){return this.component?this.component.multipleInstances?$:Y:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new ie($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},7879:(pt,Ce,L)=>{L.d(Ce,{Am:()=>pe,Ub:()=>Se,Yd:()=>ge,in:()=>B});const h=[];var B=(()=>((B=B||{})[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B))();const O={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Y=B.INFO,ie={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},fe=($,z,...te)=>{if(z<$.logLevel)return;const ke=(new Date).toISOString(),Ae=ie[z];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ae](`[${ke}]  ${$.name}:`,...te)};class ge{constructor(z){this.name=z,this._logLevel=Y,this._logHandler=fe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in B))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...z),this._logHandler(this,B.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...z),this._logHandler(this,B.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,B.INFO,...z),this._logHandler(this,B.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,B.WARN,...z),this._logHandler(this,B.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...z),this._logHandler(this,B.ERROR,...z)}}function Se($){h.forEach(z=>{z.setLogLevel($)})}function pe($,z){for(const te of h){let ke=null;z&&z.level&&(ke=O[z.level]),te.userLogHandler=null===$?null:(Ae,We,...xe)=>{const qe=xe.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");We>=(ke??Ae.logLevel)&&$({level:B[We].toLowerCase(),message:qe,args:xe,type:Ae.name})}}}},3182:(pt,Ce,L)=>{L.d(Ce,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=L(534);(0,h.registerVersion)("firebase","9.22.2","app")},7142:(pt,Ce,L)=>{L.d(Ce,{Z:()=>h.Z});var h=L(3106);h.Z.registerVersion("firebase","9.22.2","app-compat")},6365:(pt,Ce,L)=>{L.r(Ce);var h=L(5861),B=L(3106),O=L(6878),Y=L(9058),ge=(L(534),L(7879),L(4537));function Se(){return window}function z(){return z=(0,h.Z)(function*(k,F,R){var Q;const{BuildInfo:me}=Se();(0,O.as)(F.sessionId,"AuthEvent did not contain a session ID");const Ge=yield function Oe(k){return yt.apply(this,arguments)}(F.sessionId),vt={};return(0,O.at)()?vt.ibi=me.packageName:(0,O.au)()?vt.apn=me.packageName:(0,O.av)(k,"operation-not-supported-in-this-environment"),me.displayName&&(vt.appDisplayName=me.displayName),vt.sessionId=Ge,(0,O.aw)(k,R,F.type,void 0,null!==(Q=F.eventId)&&void 0!==Q?Q:void 0,vt)}),z.apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(k){const{BuildInfo:F}=Se(),R={};(0,O.at)()?R.iosBundleId=F.packageName:(0,O.au)()?R.androidPackageName=F.packageName:(0,O.av)(k,"operation-not-supported-in-this-environment"),yield(0,O.ax)(k,R)})).apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(k,F,R){const{cordova:Q}=Se();let me=()=>{};try{yield new Promise((Ge,vt)=>{let mt=null;function ht(){var kt;Ge();const vr=null===(kt=Q.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof vr&&vr(),"function"==typeof R?.close&&R.close()}function At(){mt||(mt=window.setTimeout(()=>{vt((0,O.az)(k,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===document?.visibilityState&&At()}F.addPassiveListener(ht),document.addEventListener("resume",At,!1),(0,O.au)()&&document.addEventListener("visibilitychange",pn,!1),me=()=>{F.removePassiveListener(ht),document.removeEventListener("resume",At,!1),document.removeEventListener("visibilitychange",pn,!1),mt&&window.clearTimeout(mt)}})}finally{me()}})).apply(this,arguments)}function yt(){return(yt=(0,h.Z)(function*(k){const F=function ut(k){if((0,O.as)(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const F=new ArrayBuffer(k.length),R=new Uint8Array(F);for(let Q=0;Q<k.length;Q++)R[Q]=k.charCodeAt(Q);return R}(k),R=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(R)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ee extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(F)),super.onEvent(F)}initialized(){var F=this;return(0,h.Z)(function*(){yield F.initPromise})()}}function Ne(k){return J.apply(this,arguments)}function J(){return(J=(0,h.Z)(function*(k){const F=yield Kt()._get(cr(k));return F&&(yield Kt()._remove(cr(k))),F})).apply(this,arguments)}function $e(){const k=[];for(let R=0;R<20;R++){const Q=Math.floor(62*Math.random());k.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Q))}return k.join("")}function Kt(){return(0,O.aC)(O.b)}function cr(k){return(0,O.aD)("authEvent",k.config.apiKey,k.name)}function ae(k){if(!k?.includes("?"))return{};const[F,...R]=k.split("?");return(0,Y.zd)(R.join("?"))}const Pe=class be{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(F){var R=this;return(0,h.Z)(function*(){const Q=F._key();let me=R.eventManagers.get(Q);return me||(me=new Ee(F),R.eventManagers.set(Q,me),R.attachCallbackListeners(F,me)),me})()}_openPopup(F){(0,O.av)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,R,Q,me){var Ge=this;return(0,h.Z)(function*(){!function qe(k){var F,R,Q,me,Ge,vt,mt,ht,At,pn;const kt=Se();(0,O.aA)("function"==typeof(null===(F=kt?.universalLinks)||void 0===F?void 0:F.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(R=kt?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(Ge=null===(me=null===(Q=kt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ge?void 0:Ge.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(ht=null===(mt=null===(vt=kt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===ht?void 0:ht.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(pn=null===(At=kt?.cordova)||void 0===At?void 0:At.InAppBrowser)||void 0===pn?void 0:pn.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const vt=yield Ge._initialize(F);yield vt.initialized(),vt.resetRedirect(),(0,O.aG)(),yield Ge._originValidation(F);const mt=function se(k,F,R=null){return{type:F,eventId:R,urlResponse:null,sessionId:$e(),postBody:null,tenantId:k.tenantId,error:(0,O.az)(k,"no-auth-event")}}(F,Q,me);yield function he(k,F){return Kt()._set(cr(k),F)}(F,mt);const ht=yield function $(k,F,R){return z.apply(this,arguments)}(F,mt,R),At=yield function Ae(k){const{cordova:F}=Se();return new Promise(R=>{F.plugins.browsertab.isAvailable(Q=>{let me=null;Q?F.plugins.browsertab.openUrl(k):me=F.InAppBrowser.open(k,(0,O.ay)()?"_blank":"_system","location=yes"),R(me)})})}(ht);return function We(k,F,R){return xe.apply(this,arguments)}(F,vt,At)})()}_isIframeWebStorageSupported(F,R){throw new Error("Method not implemented.")}_originValidation(F){const R=F._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function te(k){return ke.apply(this,arguments)}(F)),this.originValidationPromises[R]}attachCallbackListeners(F,R){const{universalLinks:Q,handleOpenURL:me,BuildInfo:Ge}=Se(),vt=setTimeout((0,h.Z)(function*(){yield Ne(F),R.onEvent(He())}),500),mt=function(){var pn=(0,h.Z)(function*(kt){clearTimeout(vt);const vr=yield Ne(F);let br=null;vr&&kt?.url&&(br=function Xe(k,F){var R,Q;const me=function Is(k){const F=ae(k),R=F.link?decodeURIComponent(F.link):void 0,Q=ae(R).link,me=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return ae(me).link||me||Q||R||k}(F);if(me.includes("/__/auth/callback")){const Ge=ae(me),vt=Ge.firebaseError?function Gr(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent(Ge.firebaseError)):null,mt=null===(Q=null===(R=vt?.code)||void 0===R?void 0:R.split("auth/"))||void 0===Q?void 0:Q[1],ht=mt?(0,O.az)(mt):null;return ht?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:ht,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:me,postBody:null}}return null}(vr,kt.url)),R.onEvent(br||He())});return function(vr){return pn.apply(this,arguments)}}();typeof Q<"u"&&"function"==typeof Q.subscribe&&Q.subscribe(null,mt);const ht=me,At=`${Ge.packageName.toLowerCase()}://`;Se().handleOpenURL=function(){var pn=(0,h.Z)(function*(kt){if(kt.toLowerCase().startsWith(At)&&mt({url:kt}),"function"==typeof ht)try{ht(kt)}catch(vr){console.error(vr)}});return function(kt){return pn.apply(this,arguments)}}()}};function He(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function et(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function en(k=(0,Y.z$)()){return!("file:"!==et()&&"ionic:"!==et()&&"capacitor:"!==et()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function dr(){try{const k=self.localStorage,F=O.aL();if(k)return k.setItem(F,"1"),k.removeItem(F),!function lr(k=(0,Y.z$)()){return function Fn(){return(0,Y.w1)()&&11===document?.documentMode}()||function Yt(k=(0,Y.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,Y.hl)()}catch{return tr()&&(0,Y.hl)()}return!1}function tr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function gt(){return"http:"===et()||"https:"===et()}()||(0,Y.ru)()||en())&&!function fn(){return(0,Y.b$)()||(0,Y.UG)()}()&&dr()&&!tr()}function Di(){return en()&&typeof document<"u"}function Bi(){return(Bi=(0,h.Z)(function*(){return!!Di()&&new Promise(k=>{const F=setTimeout(()=>{k(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),k(!0)})})})).apply(this,arguments)}const $n={LOCAL:"local",NONE:"none",SESSION:"session"},Wr=O.aA,rs="persistence";function dt(k){return Et.apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(k){yield k._initializationPromise;const F=nr(),R=O.aD(rs,k.config.apiKey,k.name);F&&F.setItem(R,k._getPersistence())})).apply(this,arguments)}function nr(){var k;try{return(null===(k=function Dr(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const ii=O.aA;class zt{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(Pe),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(F){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,R,Q,me){var Ge=this;return(0,h.Z)(function*(){return yield Ge.selectUnderlyingResolver(),Ge.assertedUnderlyingResolver._openPopup(F,R,Q,me)})()}_openRedirect(F,R,Q,me){var Ge=this;return(0,h.Z)(function*(){return yield Ge.selectUnderlyingResolver(),Ge.assertedUnderlyingResolver._openRedirect(F,R,Q,me)})()}_isIframeWebStorageSupported(F,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,R)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return Di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ii(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,h.Z)(function*(){if(F.underlyingResolver)return;const R=yield function ho(){return Bi.apply(this,arguments)}();F.underlyingResolver=R?F.cordovaResolver:F.browserResolver})()}}function Zn(k){return k.unwrap()}function ln(k){return Pt(k)}function Pt(k){const{_tokenResponse:F}=k instanceof Y.ZR?k.customData:k;if(!F)return null;if(!(k instanceof Y.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return O.P.credentialFromResult(k);const R=F.providerId;if(!R||R===O.p.PASSWORD)return null;let Q;switch(R){case O.p.GOOGLE:Q=O.V;break;case O.p.FACEBOOK:Q=O.U;break;case O.p.GITHUB:Q=O.W;break;case O.p.TWITTER:Q=O.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Ge,oauthTokenSecret:vt,pendingToken:mt,nonce:ht}=F;return Ge||vt||me||mt?mt?R.startsWith("saml.")?O.aO._create(R,mt):O.L._fromParams({providerId:R,signInMethod:R,pendingToken:mt,idToken:me,accessToken:Ge}):new O.X(R).credential({idToken:me,accessToken:Ge,rawNonce:ht}):null}return k instanceof Y.ZR?Q.credentialFromError(k):Q.credentialFromResult(k)}function Ln(k,F){return F.catch(R=>{throw R instanceof Y.ZR&&function Lr(k,F){var R;const Q=null===(R=F.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Cr(k,O.aq(k,F));else if(Q){const me=Pt(F),Ge=F;me&&(Ge.credential=me,Ge.tenantId=Q.tenantId||void 0,Ge.email=Q.email||void 0,Ge.phoneNumber=Q.phoneNumber||void 0)}}(k,R),R}).then(R=>{const me=R.user;return{operationType:R.operationType,credential:ln(R),additionalUserInfo:O.ao(R),user:Hn.getOrCreate(me)}})}function ji(k,F){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(k,F){const R=yield F;return{verificationId:R.verificationId,confirm:Q=>Ln(k,R.confirm(Q))}})).apply(this,arguments)}class Cr{constructor(F,R){this.resolver=R,this.auth=function is(k){return k.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return Ln(Zn(this.auth),this.resolver.resolveSignIn(F))}}class Hn{constructor(F){this._delegate=F,this.multiFactor=O.ar(F)}static getOrCreate(F){return Hn.USER_MAP.has(F)||Hn.USER_MAP.set(F,new Hn(F)),Hn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var R=this;return(0,h.Z)(function*(){return Ln(R.auth,O.a0(R._delegate,F))})()}linkWithPhoneNumber(F,R){var Q=this;return(0,h.Z)(function*(){return ji(Q.auth,O.l(Q._delegate,F,R))})()}linkWithPopup(F){var R=this;return(0,h.Z)(function*(){return Ln(R.auth,O.d(R._delegate,F,zt))})()}linkWithRedirect(F){var R=this;return(0,h.Z)(function*(){return yield dt(O.aH(R.auth)),O.g(R._delegate,F,zt)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var R=this;return(0,h.Z)(function*(){return Ln(R.auth,O.a1(R._delegate,F))})()}reauthenticateWithPhoneNumber(F,R){return ji(this.auth,O.r(this._delegate,F,R))}reauthenticateWithPopup(F){return Ln(this.auth,O.e(this._delegate,F,zt))}reauthenticateWithRedirect(F){var R=this;return(0,h.Z)(function*(){return yield dt(O.aH(R.auth)),O.h(R._delegate,F,zt)})()}sendEmailVerification(F){return O.ae(this._delegate,F)}unlink(F){var R=this;return(0,h.Z)(function*(){return yield O.an(R._delegate,F),R})()}updateEmail(F){return O.aj(this._delegate,F)}updatePassword(F){return O.ak(this._delegate,F)}updatePhoneNumber(F){return O.u(this._delegate,F)}updateProfile(F){return O.ai(this._delegate,F)}verifyBeforeUpdateEmail(F,R){return O.af(this._delegate,F,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Hn.USER_MAP=new WeakMap;const vn=O.aA;let Kn=(()=>{class k{constructor(R,Q){if(this.app=R,Q.isInitialized())return this._delegate=Q.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=R.options;vn(me,"invalid-api-key",{appName:R.name}),vn(me,"invalid-api-key",{appName:R.name});const Ge=typeof window<"u"?zt:void 0;this._delegate=Q.initialize({options:{persistence:rr(me,R.name),popupRedirectResolver:Ge}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,Q){O.I(this._delegate,R,Q)}applyActionCode(R){return O.a5(this._delegate,R)}checkActionCode(R){return O.a6(this._delegate,R)}confirmPasswordReset(R,Q){return O.a4(this._delegate,R,Q)}createUserWithEmailAndPassword(R,Q){var me=this;return(0,h.Z)(function*(){return Ln(me._delegate,O.a8(me._delegate,R,Q))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return O.ad(this._delegate,R)}isSignInWithEmailLink(R){return O.ab(this._delegate,R)}getRedirectResult(){var R=this;return(0,h.Z)(function*(){vn(jn(),R._delegate,"operation-not-supported-in-this-environment");const Q=yield O.j(R._delegate,zt);return Q?Ln(R._delegate,Promise.resolve(Q)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function Ue(k,F){(0,O.aH)(k)._logFramework(F)}(this._delegate,R)}onAuthStateChanged(R,Q,me){const{next:Ge,error:vt,complete:mt}=Sn(R,Q,me);return this._delegate.onAuthStateChanged(Ge,vt,mt)}onIdTokenChanged(R,Q,me){const{next:Ge,error:vt,complete:mt}=Sn(R,Q,me);return this._delegate.onIdTokenChanged(Ge,vt,mt)}sendSignInLinkToEmail(R,Q){return O.aa(this._delegate,R,Q)}sendPasswordResetEmail(R,Q){return O.a3(this._delegate,R,Q||void 0)}setPersistence(R){var Q=this;return(0,h.Z)(function*(){let me;switch(function Ze(k,F){Wr(Object.values($n).includes(F),k,"invalid-persistence-type"),(0,Y.b$)()?Wr(F!==$n.SESSION,k,"unsupported-persistence-type"):(0,Y.UG)()?Wr(F===$n.NONE,k,"unsupported-persistence-type"):tr()?Wr(F===$n.NONE||F===$n.LOCAL&&(0,Y.hl)(),k,"unsupported-persistence-type"):Wr(F===$n.NONE||dr(),k,"unsupported-persistence-type")}(Q._delegate,R),R){case $n.SESSION:me=O.a;break;case $n.LOCAL:me=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case $n.NONE:me=O.N;break;default:return O.av("argument-error",{appName:Q._delegate.name})}return Q._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Ln(this._delegate,O._(this._delegate))}signInWithCredential(R){return Ln(this._delegate,O.$(this._delegate,R))}signInWithCustomToken(R){return Ln(this._delegate,O.a2(this._delegate,R))}signInWithEmailAndPassword(R,Q){return Ln(this._delegate,O.a9(this._delegate,R,Q))}signInWithEmailLink(R,Q){return Ln(this._delegate,O.ac(this._delegate,R,Q))}signInWithPhoneNumber(R,Q){return ji(this._delegate,O.s(this._delegate,R,Q))}signInWithPopup(R){var Q=this;return(0,h.Z)(function*(){return vn(jn(),Q._delegate,"operation-not-supported-in-this-environment"),Ln(Q._delegate,O.c(Q._delegate,R,zt))})()}signInWithRedirect(R){var Q=this;return(0,h.Z)(function*(){return vn(jn(),Q._delegate,"operation-not-supported-in-this-environment"),yield dt(Q._delegate),O.f(Q._delegate,R,zt)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return O.a7(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=$n,k})();function Sn(k,F,R){let Q=k;"function"!=typeof k&&({next:Q,error:F,complete:R}=k);const me=Q;return{next:vt=>me(vt&&Hn.getOrCreate(vt)),error:F,complete:R}}function rr(k,F){const R=function Wt(k,F){const R=nr();if(!R)return[];const Q=O.aD(rs,k,F);switch(R.getItem(Q)){case $n.NONE:return[O.N];case $n.LOCAL:return[O.i,O.a];case $n.SESSION:return[O.a];default:return[]}}(k,F);if(typeof self<"u"&&!R.includes(O.i)&&R.push(O.i),typeof window<"u")for(const Q of[O.b,O.a])R.includes(Q)||R.push(Q);return R.includes(O.N)||R.push(O.N),R}class An{constructor(){this.providerId="phone",this._delegate=new O.P(Zn(B.Z.auth()))}static credential(F,R){return O.P.credential(F,R)}verifyPhoneNumber(F,R){return this._delegate.verifyPhoneNumber(F,R)}unwrap(){return this._delegate}}An.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,An.PROVIDER_ID=O.P.PROVIDER_ID;const qr=O.aA;class qt{constructor(F,R,Q=B.Z.app()){var me;qr(null===(me=Q.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:Q.name}),this._delegate=new O.R(F,R,Q.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(k){k.INTERNAL.registerComponent(new ge.wA("auth-compat",F=>{const R=F.getProvider("app-compat").getImmediate(),Q=F.getProvider("auth");return new Kn(R,Q)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:An,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:qt,TwitterAuthProvider:O.Z,Auth:Kn,AuthCredential:O.J,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},5861:(pt,Ce,L)=>{function h(O,Y,ie,fe,ge,Se,pe){try{var $=O[Se](pe),z=$.value}catch(te){return void ie(te)}$.done?Y(z):Promise.resolve(z).then(fe,ge)}function B(O){return function(){var Y=this,ie=arguments;return new Promise(function(fe,ge){var Se=O.apply(Y,ie);function pe(z){h(Se,fe,ge,pe,$,"next",z)}function $(z){h(Se,fe,ge,pe,$,"throw",z)}pe(void 0)})}}L.d(Ce,{Z:()=>B})},7582:(pt,Ce,L)=>{function Y(ae,ye){var be={};for(var Pe in ae)Object.prototype.hasOwnProperty.call(ae,Pe)&&ye.indexOf(Pe)<0&&(be[Pe]=ae[Pe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Pe=Object.getOwnPropertySymbols(ae);He<Pe.length;He++)ye.indexOf(Pe[He])<0&&Object.prototype.propertyIsEnumerable.call(ae,Pe[He])&&(be[Pe[He]]=ae[Pe[He]])}return be}function te(ae,ye,be,Pe){return new(be||(be=Promise))(function(Ue,Ye){function rt(gt){try{et(Pe.next(gt))}catch(en){Ye(en)}}function Tn(gt){try{et(Pe.throw(gt))}catch(en){Ye(en)}}function et(gt){gt.done?Ue(gt.value):function He(Ue){return Ue instanceof be?Ue:new be(function(Ye){Ye(Ue)})}(gt.value).then(rt,Tn)}et((Pe=Pe.apply(ae,ye||[])).next())})}function ee(ae){return this instanceof ee?(this.v=ae,this):new ee(ae)}function Ee(ae,ye,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Pe=be.apply(ae,ye||[]),Ue=[];return He={},Ye("next"),Ye("throw"),Ye("return"),He[Symbol.asyncIterator]=function(){return this},He;function Ye(fn){Pe[fn]&&(He[fn]=function(Fn){return new Promise(function(Yt,lr){Ue.push([fn,Fn,Yt,lr])>1||rt(fn,Fn)})})}function rt(fn,Fn){try{!function Tn(fn){fn.value instanceof ee?Promise.resolve(fn.value.v).then(et,gt):en(Ue[0][2],fn)}(Pe[fn](Fn))}catch(Yt){en(Ue[0][3],Yt)}}function et(fn){rt("next",fn)}function gt(fn){rt("throw",fn)}function en(fn,Fn){fn(Fn),Ue.shift(),Ue.length&&rt(Ue[0][0],Ue[0][1])}}function he(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,ye=ae[Symbol.asyncIterator];return ye?ye.call(ae):(ae=function xe(ae){var ye="function"==typeof Symbol&&Symbol.iterator,be=ye&&ae[ye],Pe=0;if(be)return be.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&Pe>=ae.length&&(ae=void 0),{value:ae&&ae[Pe++],done:!ae}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),be={},Pe("next"),Pe("throw"),Pe("return"),be[Symbol.asyncIterator]=function(){return this},be);function Pe(Ue){be[Ue]=ae[Ue]&&function(Ye){return new Promise(function(rt,Tn){!function He(Ue,Ye,rt,Tn){Promise.resolve(Tn).then(function(et){Ue({value:et,done:rt})},Ye)}(rt,Tn,(Ye=ae[Ue](Ye)).done,Ye.value)})}}}L.d(Ce,{FC:()=>Ee,KL:()=>he,_T:()=>Y,mG:()=>te,qq:()=>ee})}},pt=>{pt(pt.s=5665)}]);