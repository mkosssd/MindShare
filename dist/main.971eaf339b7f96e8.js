"use strict";(self.webpackChunkMindShare=self.webpackChunkMindShare||[]).push([[179],{6304:(pt,De,L)=>{L.d(De,{Dh:()=>Ae,GT:()=>pe,cc:()=>Me,hO:()=>ke,on:()=>$,pX:()=>ie,xv:()=>ge});var d=L(5879),B=L(7142),P=L(8186);pt=L.hmd(pt);const J=["ngOnDestroy"],ie=(Pe,vt,lt,te={})=>new Proxy(Pe,{get:(Ce,se)=>lt.runOutsideAngular(()=>{var fe;if(Pe[se])return!(null===(fe=te?.spy)||void 0===fe)&&fe.get&&te.spy.get(se,Pe[se]),Pe[se];if(J.indexOf(se)>-1)return()=>{};const Ne=vt.toPromise().then(ee=>{const et=ee&&ee[se];return"function"==typeof et?et.bind(ee):et&&et.then?et.then(He=>lt.run(()=>He)):lt.run(()=>et)});return new Proxy(()=>{},{get:(ee,et)=>Ne[et],apply:(ee,et,He)=>Ne.then(Jt=>{var cr;const Gr=Jt&&Jt(...He);return!(null===(cr=te?.spy)||void 0===cr)&&cr.apply&&te.spy.apply(se,He,Gr),Gr})})})}),pe=(Pe,vt)=>{vt.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(te=>{Object.defineProperty(Pe.prototype,te,Object.getOwnPropertyDescriptor(lt.prototype||lt,te))})})};class _e{constructor(vt){return vt}}const Ae=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function $(Pe,vt,lt){const Ce="object"==typeof lt&&lt||{};Ce.name=Ce.name||"string"==typeof lt&&lt||"[DEFAULT]";const fe=B.Z.apps.filter(Ne=>Ne&&Ne.name===Ce.name)[0]||vt.runOutsideAngular(()=>B.Z.initializeApp(Pe,Ce));try{JSON.stringify(Pe)!==JSON.stringify(fe.options)&&G("error",`${fe.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(fe)}const G=(Pe,...vt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Pe](...vt)},ne={provide:_e,useFactory:$,deps:[Ae,d.R0b,[new d.FiY,ge]]};let ke=(()=>{class Pe{constructor(lt){B.Z.registerVersion("angularfire",P.q4.full,"core"),B.Z.registerVersion("angularfire",P.q4.full,"app-compat"),B.Z.registerVersion("angular",d.q4F.full,lt.toString())}static initializeApp(lt,te){return{ngModule:Pe,providers:[{provide:Ae,useValue:lt},{provide:ge,useValue:te}]}}}return Pe.\u0275fac=function(lt){return new(lt||Pe)(d.LFG(d.Lbi))},Pe.\u0275mod=d.oAB({type:Pe}),Pe.\u0275inj=d.cJS({providers:[ne]}),Pe})();function Me(Pe,vt,lt,te,Ce){const[,se,fe]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===Pe)||[];if(se)return function qe(Pe,vt){try{return Pe.toString()===vt.toString()}catch{return Pe===vt}}(Ce,fe)||(Ze("error",`${vt} was already initialized on the ${lt} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Ce,was:fe})),se;{const Ne=te();return globalThis.\u0275AngularfireInstanceCache.push([Pe,Ne,Ce]),Ne}}const xe=!!pt.hot,Ze=(Pe,...vt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Pe](...vt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(pt,De,L)=>{L.d(De,{q4:()=>ua,iC:()=>up,fc:()=>Ol,HU:()=>lc,vb:()=>Pl,JM:()=>ap,u3:()=>cp});var d=L(5879),B=L(3182),P=L(5861),J=L(534),ie=L(9058),pe=L(4537),_e=L(7879);const Ae=(E,b)=>b.some(A=>E instanceof A);let ge,$;const ke=new WeakMap,Me=new WeakMap,qe=new WeakMap,xe=new WeakMap,Ze=new WeakMap;let lt={get(E,b,A){if(E instanceof IDBTransaction){if("done"===b)return Me.get(E);if("objectStoreNames"===b)return E.objectStoreNames||qe.get(E);if("store"===b)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return fe(E[b])},set:(E,b,A)=>(E[b]=A,!0),has:(E,b)=>E instanceof IDBTransaction&&("done"===b||"store"===b)||b in E};function se(E){return"function"==typeof E?function Ce(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...b){return E.apply(Ne(this),b),fe(ke.get(this))}:function(...b){return fe(E.apply(Ne(this),b))}:function(b,...A){const U=E.call(Ne(this),b,...A);return qe.set(U,b.sort?b.sort():[b]),fe(U)}}(E):(E instanceof IDBTransaction&&function vt(E){if(Me.has(E))return;const b=new Promise((A,U)=>{const W=()=>{E.removeEventListener("complete",Y),E.removeEventListener("error",de),E.removeEventListener("abort",de)},Y=()=>{A(),W()},de=()=>{U(E.error||new DOMException("AbortError","AbortError")),W()};E.addEventListener("complete",Y),E.addEventListener("error",de),E.addEventListener("abort",de)});Me.set(E,b)}(E),Ae(E,function G(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,lt):E)}function fe(E){if(E instanceof IDBRequest)return function Pe(E){const b=new Promise((A,U)=>{const W=()=>{E.removeEventListener("success",Y),E.removeEventListener("error",de)},Y=()=>{A(fe(E.result)),W()},de=()=>{U(E.error),W()};E.addEventListener("success",Y),E.addEventListener("error",de)});return b.then(A=>{A instanceof IDBCursor&&ke.set(A,E)}).catch(()=>{}),Ze.set(b,E),b}(E);if(xe.has(E))return xe.get(E);const b=se(E);return b!==E&&(xe.set(E,b),Ze.set(b,E)),b}const Ne=E=>Ze.get(E),He=["get","getKey","getAll","getAllKeys","count"],Jt=["put","add","delete","clear"],cr=new Map;function Gr(E,b){if(!(E instanceof IDBDatabase)||b in E||"string"!=typeof b)return;if(cr.get(b))return cr.get(b);const A=b.replace(/FromIndex$/,""),U=b!==A,W=Jt.includes(A);if(!(A in(U?IDBIndex:IDBObjectStore).prototype)||!W&&!He.includes(A))return;const Y=function(){var de=(0,P.Z)(function*(ze,...je){const ct=this.transaction(ze,W?"readwrite":"readonly");let Ot=ct.store;return U&&(Ot=Ot.index(je.shift())),(yield Promise.all([Ot[A](...je),W&&ct.done]))[0]});return function(je){return de.apply(this,arguments)}}();return cr.set(b,Y),Y}!function te(E){lt=E(lt)}(E=>({...E,get:(b,A,U)=>Gr(b,A)||E.get(b,A,U),has:(b,A)=>!!Gr(b,A)||E.has(b,A)}));const Ts="@firebase/installations",ae="0.6.4",we=1e4,Te=`w:${ae}`,Oe="FIS_v2",$e="https://firebaseinstallations.googleapis.com/v1",Ve=36e5,tt=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(E){return E instanceof ie.ZR&&E.code.includes("request-failed")}function rn({projectId:E}){return`${$e}/projects/${E}/installations`}function yn(E){return{token:E.token,requestStatus:2,expiresIn:Ai(E.expiresIn),creationTime:Date.now()}}function Ln(E,b){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,P.Z)(function*(E,b){const U=(yield b.json()).error;return tt.create("request-failed",{requestName:E,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function lr({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function tr(E){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,P.Z)(function*(E){const b=yield E();return b.status>=500&&b.status<600?E():b})).apply(this,arguments)}function Ai(E){return Number(E.replace("s","000"))}function Ar(){return(Ar=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:b},{fid:A}){const U=rn(E),W=lr(E),Y=b.getImmediate({optional:!0});if(Y){const ct=yield Y.getHeartbeatsHeader();ct&&W.append("x-firebase-client",ct)}const ze={method:"POST",headers:W,body:JSON.stringify({fid:A,authVersion:Oe,appId:E.appId,sdkVersion:Te})},je=yield tr(()=>fetch(U,ze));if(je.ok){const ct=yield je.json();return{fid:ct.fid||A,registrationStatus:2,refreshToken:ct.refreshToken,authToken:yn(ct.authToken)}}throw yield Ln("Create Installation",je)})).apply(this,arguments)}function jn(E){return new Promise(b=>{setTimeout(b,E)})}const os=/^[cdef][\w-]{21}$/,Ke="";function dt(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function Ct(E){return function Wr(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return os.test(A)?A:Ke}catch{return Ke}}function Kt(E){return`${E.appName}!${E.appId}`}const nr=new Map;function ni(E,b){const A=Kt(E);as(A,b),function pn(E,b){const A=function kt(){return!Ur&&"BroadcastChannel"in self&&(Ur=new BroadcastChannel("[Firebase] FID Change"),Ur.onmessage=E=>{as(E.data.key,E.data.fid)}),Ur}();A&&A.postMessage({key:E,fid:b}),function Un(){0===nr.size&&Ur&&(Ur.close(),Ur=null)}()}(A,b)}function as(E,b){const A=nr.get(E);if(A)for(const U of A)U(b)}let Ur=null;const Wi="firebase-installations-database",Ss=1,Mr="firebase-installations-store";let Hn=null;function Cn(){return Hn||(Hn=function ee(E,b,{blocked:A,upgrade:U,blocking:W,terminated:Y}={}){const de=indexedDB.open(E,b),ze=fe(de);return U&&de.addEventListener("upgradeneeded",je=>{U(fe(de.result),je.oldVersion,je.newVersion,fe(de.transaction))}),A&&de.addEventListener("blocked",()=>A()),ze.then(je=>{Y&&je.addEventListener("close",()=>Y()),W&&je.addEventListener("versionchange",()=>W())}).catch(()=>{}),ze}(Wi,Ss,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Mr)}})),Hn}function Zn(E,b){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,P.Z)(function*(E,b){const A=Kt(E),W=(yield Cn()).transaction(Mr,"readwrite"),Y=W.objectStore(Mr),de=yield Y.get(A);return yield Y.put(b,A),yield W.done,(!de||de.fid!==b.fid)&&ni(E,b.fid),b})).apply(this,arguments)}function rr(E){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*(E){const b=Kt(E),U=(yield Cn()).transaction(Mr,"readwrite");yield U.objectStore(Mr).delete(b),yield U.done})).apply(this,arguments)}function qr(E,b){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,P.Z)(function*(E,b){const A=Kt(E),W=(yield Cn()).transaction(Mr,"readwrite"),Y=W.objectStore(Mr),de=yield Y.get(A),ze=b(de);return void 0===ze?yield Y.delete(A):yield Y.put(ze,A),yield W.done,ze&&(!de||de.fid!==ze.fid)&&ni(E,ze.fid),ze})).apply(this,arguments)}function z(E){return j.apply(this,arguments)}function j(){return j=(0,P.Z)(function*(E){let b;const A=yield qr(E.appConfig,U=>{const W=function k(E){return yt(E||{fid:dt(),registrationStatus:0})}(U),Y=function F(E,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(tt.create("app-offline"))};const A={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},U=function N(E,b){return X.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:U}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:ve(E)}:{installationEntry:b}}(E,W);return b=Y.registrationPromise,Y.installationEntry});return A.fid===Ke?{installationEntry:yield b}:{installationEntry:A,registrationPromise:b}}),j.apply(this,arguments)}function X(){return X=(0,P.Z)(function*(E,b){try{const A=yield function Gi(E,b){return Ar.apply(this,arguments)}(E,b);return Zn(E.appConfig,A)}catch(A){throw gt(A)&&409===A.customData.serverCode?yield rr(E.appConfig):yield Zn(E.appConfig,{fid:b.fid,registrationStatus:0}),A}}),X.apply(this,arguments)}function ve(E){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(E){let b=yield wt(E.appConfig);for(;1===b.registrationStatus;)yield jn(100),b=yield wt(E.appConfig);if(0===b.registrationStatus){const{installationEntry:A,registrationPromise:U}=yield z(E);return U||A}return b})).apply(this,arguments)}function wt(E){return qr(E,b=>{if(!b)throw tt.create("installation-not-found");return yt(b)})}function yt(E){return function ht(E){return 1===E.registrationStatus&&E.registrationTime+we<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function _n(){return(_n=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:b},A){const U=function Lt(E,{fid:b}){return`${rn(E)}/${b}/authTokens:generate`}(E,A),W=function dr(E,{refreshToken:b}){const A=lr(E);return A.append("Authorization",function Eo(E){return`${Oe} ${E}`}(b)),A}(E,A),Y=b.getImmediate({optional:!0});if(Y){const ct=yield Y.getHeartbeatsHeader();ct&&W.append("x-firebase-client",ct)}const ze={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Te,appId:E.appId}})},je=yield tr(()=>fetch(U,ze));if(je.ok)return yn(yield je.json());throw yield Ln("Generate Auth Token",je)})).apply(this,arguments)}function _r(E){return xr.apply(this,arguments)}function xr(){return xr=(0,P.Z)(function*(E,b=!1){let A;const U=yield qr(E.appConfig,Y=>{if(!jt(Y))throw tt.create("not-registered");const de=Y.authToken;if(!b&&function nn(E){return 2===E.requestStatus&&!function vr(E){const b=Date.now();return b<E.creationTime||E.creationTime+E.expiresIn<b+Ve}(E)}(de))return Y;if(1===de.requestStatus)return A=function he(E,b){return re.apply(this,arguments)}(E,b),Y;{if(!navigator.onLine)throw tt.create("app-offline");const ze=function $n(E){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:b})}(Y);return A=function ft(E,b){return Rt.apply(this,arguments)}(E,ze),ze}});return A?yield A:U.authToken}),xr.apply(this,arguments)}function re(){return(re=(0,P.Z)(function*(E,b){let A=yield Fe(E.appConfig);for(;1===A.authToken.requestStatus;)yield jn(100),A=yield Fe(E.appConfig);const U=A.authToken;return 0===U.requestStatus?_r(E,b):U})).apply(this,arguments)}function Fe(E){return qr(E,b=>{if(!jt(b))throw tt.create("not-registered");return function Ks(E){return 1===E.requestStatus&&E.requestTime+we<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Rt(){return Rt=(0,P.Z)(function*(E,b){try{const A=yield function xt(E,b){return _n.apply(this,arguments)}(E,b),U=Object.assign(Object.assign({},b),{authToken:A});return yield Zn(E.appConfig,U),A}catch(A){if(!gt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const U=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Zn(E.appConfig,U)}else yield rr(E.appConfig);throw A}}),Rt.apply(this,arguments)}function jt(E){return void 0!==E&&2===E.registrationStatus}function xa(){return(xa=(0,P.Z)(function*(E){const b=E,{installationEntry:A,registrationPromise:U}=yield z(b);return U?U.catch(console.error):_r(b).catch(console.error),A.fid})).apply(this,arguments)}function ri(){return ri=(0,P.Z)(function*(E,b=!1){const A=E;return yield function Ys(E){return Co.apply(this,arguments)}(A),(yield _r(A,b)).token}),ri.apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(E){const{registrationPromise:b}=yield z(E);b&&(yield b)})).apply(this,arguments)}function Yo(E){return tt.create("missing-app-config-values",{valueName:E})}const Qc="installations",Na=E=>{const b=E.getProvider("app").getImmediate(),A=function Au(E){if(!E||!E.options)throw Yo("App Configuration");if(!E.name)throw Yo("App Name");const b=["projectId","apiKey","appId"];for(const A of b)if(!E.options[A])throw Yo(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(b);return{app:b,appConfig:A,heartbeatServiceProvider:(0,J._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Pa=E=>{const b=E.getProvider("app").getImmediate(),A=(0,J._getProvider)(b,Qc).getImmediate();return{getId:()=>function Io(E){return xa.apply(this,arguments)}(A),getToken:W=>function Ad(E){return ri.apply(this,arguments)}(A,W)}};(function xd(){(0,J._registerComponent)(new pe.wA(Qc,Na,"PUBLIC")),(0,J._registerComponent)(new pe.wA("installations-internal",Pa,"PRIVATE"))})(),(0,J.registerVersion)(Ts,ae),(0,J.registerVersion)(Ts,ae,"esm2017");const Mu="@firebase/remote-config",gn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class La{constructor(b,A,U,W){this.client=b,this.storage=A,this.storageCache=U,this.logger=W}isCachedDataFresh(b,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-A,W=U<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var A=this;return(0,P.Z)(function*(){const[U,W]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(W&&A.isCachedDataFresh(b.cacheMaxAgeMillis,U))return W;b.eTag=W&&W.eTag;const Y=yield A.client.fetch(b),de=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&de.push(A.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(de),Y})()}}function Nu(E=navigator){return E.languages&&E.languages[0]||E.language}class Qs{constructor(b,A,U,W,Y,de){this.firebaseInstallations=b,this.sdkVersion=A,this.namespace=U,this.projectId=W,this.apiKey=Y,this.appId=de}fetch(b){var A=this;return(0,P.Z)(function*(){const[U,W]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},je={sdk_version:A.sdkVersion,app_instance_id:U,app_instance_id_token:W,app_id:A.appId,language_code:Nu()},ct={method:"POST",headers:ze,body:JSON.stringify(je)},Ot=fetch(de,ct),St=new Promise((Ei,vs)=>{b.signal.addEventListener(()=>{const Fl=new Error("The operation was aborted.");Fl.name="AbortError",vs(Fl)})});let Fr;try{yield Promise.race([Ot,St]),Fr=yield Ot}catch(Ei){let vs="fetch-client-network";throw"AbortError"===Ei?.name&&(vs="fetch-timeout"),gn.create(vs,{originalErrorMessage:Ei?.message})}let sr=Fr.status;const ys=Fr.headers.get("ETag")||void 0;let dc,_s;if(200===Fr.status){let Ei;try{Ei=yield Fr.json()}catch(vs){throw gn.create("fetch-client-parse",{originalErrorMessage:vs?.message})}dc=Ei.entries,_s=Ei.state}if("INSTANCE_STATE_UNSPECIFIED"===_s?sr=500:"NO_CHANGE"===_s?sr=304:("NO_TEMPLATE"===_s||"EMPTY_CONFIG"===_s)&&(dc={}),304!==sr&&200!==sr)throw gn.create("fetch-status",{httpStatus:sr});return{status:sr,eTag:ys,config:dc}})()}}class bo{constructor(b,A){this.client=b,this.storage=A}fetch(b){var A=this;return(0,P.Z)(function*(){const U=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(b,U)})()}attemptFetch(b,{throttleEndTimeMillis:A,backoffCount:U}){var W=this;return(0,P.Z)(function*(){yield function On(E,b){return new Promise((A,U)=>{const W=Math.max(b-Date.now(),0),Y=setTimeout(A,W);E.addEventListener(()=>{clearTimeout(Y),U(gn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,A);try{const Y=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function Pu(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Y))throw Y;const de={throttleEndTimeMillis:Date.now()+(0,ie.$s)(U),backoffCount:U+1};return yield W.storage.setThrottleMetadata(de),W.attemptFetch(b,de)}})()}}class Ou{constructor(b,A,U,W,Y){this.app=b,this._client=A,this._storageCache=U,this._storage=W,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nr(E,b){const A=E.target.error||void 0;return gn.create(b,{originalErrorMessage:A&&A?.message})}const Yr="app_namespace_store";class $f{constructor(b,A,U,W=function sn(){return new Promise((E,b)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=U=>{b(Nr(U,"storage-open"))},A.onsuccess=U=>{E(U.target.result)},A.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Yr,{keyPath:"compositeKey"})}}catch(A){b(gn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=b,this.appName=A,this.namespace=U,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var A=this;return(0,P.Z)(function*(){const U=yield A.openDbPromise;return new Promise((W,Y)=>{const ze=U.transaction([Yr],"readonly").objectStore(Yr),je=A.createCompositeKey(b);try{const ct=ze.get(je);ct.onerror=Ot=>{Y(Nr(Ot,"storage-get"))},ct.onsuccess=Ot=>{const St=Ot.target.result;W(St?St.value:void 0)}}catch(ct){Y(gn.create("storage-get",{originalErrorMessage:ct?.message}))}})})()}set(b,A){var U=this;return(0,P.Z)(function*(){const W=yield U.openDbPromise;return new Promise((Y,de)=>{const je=W.transaction([Yr],"readwrite").objectStore(Yr),ct=U.createCompositeKey(b);try{const Ot=je.put({compositeKey:ct,value:A});Ot.onerror=St=>{de(Nr(St,"storage-set"))},Ot.onsuccess=()=>{Y()}}catch(Ot){de(gn.create("storage-set",{originalErrorMessage:Ot?.message}))}})})()}delete(b){var A=this;return(0,P.Z)(function*(){const U=yield A.openDbPromise;return new Promise((W,Y)=>{const ze=U.transaction([Yr],"readwrite").objectStore(Yr),je=A.createCompositeKey(b);try{const ct=ze.delete(je);ct.onerror=Ot=>{Y(Nr(Ot,"storage-delete"))},ct.onsuccess=()=>{W()}}catch(ct){Y(gn.create("storage-delete",{originalErrorMessage:ct?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class ls{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const A=b.storage.getLastFetchStatus(),U=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),Y=yield A;Y&&(b.lastFetchStatus=Y);const de=yield U;de&&(b.lastSuccessfulFetchTimestampMillis=de);const ze=yield W;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Xo(){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function To(){(0,J._registerComponent)(new pe.wA("remote-config",function E(b,{instanceIdentifier:A}){const U=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gn.create("registration-window");if(!(0,ie.hl)())throw gn.create("indexed-db-unavailable");const{projectId:Y,apiKey:de,appId:ze}=U.options;if(!Y)throw gn.create("registration-project-id");if(!de)throw gn.create("registration-api-key");if(!ze)throw gn.create("registration-app-id");const je=new $f(ze,U.name,A=A||"firebase"),ct=new ls(je),Ot=new _e.Yd(Mu);Ot.logLevel=_e.in.ERROR;const St=new Qs(W,J.SDK_VERSION,A,Y,de,ze),Fr=new bo(St,je),sr=new La(Fr,je,ct,Ot),ys=new Ou(U,sr,ct,je,Ot);return function Pt(E){const b=(0,ie.m9)(E);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(ys),ys},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(Mu,"0.4.4"),(0,J.registerVersion)(Mu,"0.4.4","esm2017")}();const Pr=(E,b)=>b.some(A=>E instanceof A);let Ua,Vr;const Ki=new WeakMap,Js=new WeakMap,Dn=new WeakMap,ta=new WeakMap,Nd=new WeakMap;let nl={get(E,b,A){if(E instanceof IDBTransaction){if("done"===b)return Js.get(E);if("objectStoreNames"===b)return E.objectStoreNames||Dn.get(E);if("store"===b)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return ds(E[b])},set:(E,b,A)=>(E[b]=A,!0),has:(E,b)=>E instanceof IDBTransaction&&("done"===b||"store"===b)||b in E};function Pd(E){return"function"==typeof E?function em(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xc(){return Vr||(Vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...b){return E.apply(rl(this),b),ds(Ki.get(this))}:function(...b){return ds(E.apply(rl(this),b))}:function(b,...A){const U=E.call(rl(this),b,...A);return Dn.set(U,b.sort?b.sort():[b]),ds(U)}}(E):(E instanceof IDBTransaction&&function tl(E){if(Js.has(E))return;const b=new Promise((A,U)=>{const W=()=>{E.removeEventListener("complete",Y),E.removeEventListener("error",de),E.removeEventListener("abort",de)},Y=()=>{A(),W()},de=()=>{U(E.error||new DOMException("AbortError","AbortError")),W()};E.addEventListener("complete",Y),E.addEventListener("error",de),E.addEventListener("abort",de)});Js.set(E,b)}(E),Pr(E,function Br(){return Ua||(Ua=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,nl):E)}function ds(E){if(E instanceof IDBRequest)return function el(E){const b=new Promise((A,U)=>{const W=()=>{E.removeEventListener("success",Y),E.removeEventListener("error",de)},Y=()=>{A(ds(E.result)),W()},de=()=>{U(E.error),W()};E.addEventListener("success",Y),E.addEventListener("error",de)});return b.then(A=>{A instanceof IDBCursor&&Ki.set(A,E)}).catch(()=>{}),Nd.set(b,E),b}(E);if(ta.has(E))return ta.get(E);const b=Pd(E);return b!==E&&(ta.set(E,b),Nd.set(b,E)),b}const rl=E=>Nd.get(E);function il(E,b,{blocked:A,upgrade:U,blocking:W,terminated:Y}={}){const de=indexedDB.open(E,b),ze=ds(de);return U&&de.addEventListener("upgradeneeded",je=>{U(ds(de.result),je.oldVersion,je.newVersion,ds(de.transaction))}),A&&de.addEventListener("blocked",()=>A()),ze.then(je=>{Y&&je.addEventListener("close",()=>Y()),W&&je.addEventListener("versionchange",()=>W())}).catch(()=>{}),ze}function ku(E,{blocked:b}={}){const A=indexedDB.deleteDatabase(E);return b&&A.addEventListener("blocked",()=>b()),ds(A).then(()=>{})}const Gf=["get","getKey","getAll","getAllKeys","count"],Od=["put","add","delete","clear"],kd=new Map;function Fd(E,b){if(!(E instanceof IDBDatabase)||b in E||"string"!=typeof b)return;if(kd.get(b))return kd.get(b);const A=b.replace(/FromIndex$/,""),U=b!==A,W=Od.includes(A);if(!(A in(U?IDBIndex:IDBObjectStore).prototype)||!W&&!Gf.includes(A))return;const Y=function(){var de=(0,P.Z)(function*(ze,...je){const ct=this.transaction(ze,W?"readwrite":"readonly");let Ot=ct.store;return U&&(Ot=Ot.index(je.shift())),(yield Promise.all([Ot[A](...je),W&&ct.done]))[0]});return function(je){return de.apply(this,arguments)}}();return kd.set(b,Y),Y}!function zf(E){nl=E(nl)}(E=>({...E,get:(b,A,U)=>Fd(b,A)||E.get(b,A,U),has:(b,A)=>!!Fd(b,A)||E.has(b,A)}));const sl="/firebase-messaging-sw.js",Ld="/firebase-cloud-messaging-push-scope",Fu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ol="https://fcmregistrations.googleapis.com/v1",Wf="google.c.a.c_id",zn="google.c.a.c_l",X_="google.c.a.ts";var eo=(()=>((eo=eo||{}).PUSH_RECEIVED="push-received",eo.NOTIFICATION_CLICKED="notification-clicked",eo))();function ii(E){const b=new Uint8Array(E);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function al(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(A),W=new Uint8Array(U.length);for(let Y=0;Y<U.length;++Y)W[Y]=U.charCodeAt(Y);return W}const Va="fcm_token_details_db",Ba=5,qf="fcm_token_object_Store";function Lu(){return Lu=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Va))return null;let b=null;return(yield il(Va,Ba,{upgrade:(U=(0,P.Z)(function*(W,Y,de,ze){var je;if(Y<2||!W.objectStoreNames.contains(qf))return;const ct=ze.objectStore(qf),Ot=yield ct.index("fcmSenderId").get(E);if(yield ct.clear(),Ot)if(2===Y){const St=Ot;if(!St.auth||!St.p256dh||!St.endpoint)return;b={token:St.fcmToken,createTime:null!==(je=St.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:ii(St.vapidKey)}}}else if(3===Y){const St=Ot;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ii(St.auth),p256dh:ii(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ii(St.vapidKey)}}}else if(4===Y){const St=Ot;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ii(St.auth),p256dh:ii(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ii(St.vapidKey)}}}}),function(Y,de,ze,je){return U.apply(this,arguments)})})).close(),yield ku(Va),yield ku("fcm_vapid_details_db"),yield ku("undefined"),function Mi(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:b}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var U}),Lu.apply(this,arguments)}const Uu="firebase-messaging-database",Gn=1,wi="firebase-messaging-store";let ul=null;function Vu(){return ul||(ul=il(Uu,Gn,{upgrade:(E,b)=>{0===b&&E.createObjectStore(wi)}})),ul}function Ao(E){return Mo.apply(this,arguments)}function Mo(){return Mo=(0,P.Z)(function*(E){const b=Vd(E),U=yield(yield Vu()).transaction(wi).objectStore(wi).get(b);if(U)return U;{const W=yield function Zf(E){return Lu.apply(this,arguments)}(E.appConfig.senderId);if(W)return yield Bu(E,W),W}}),Mo.apply(this,arguments)}function Bu(E,b){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,P.Z)(function*(E,b){const A=Vd(E),W=(yield Vu()).transaction(wi,"readwrite");return yield W.objectStore(wi).put(b,A),yield W.done,b})).apply(this,arguments)}function to(){return(to=(0,P.Z)(function*(E){const b=Vd(E),U=(yield Vu()).transaction(wi,"readwrite");yield U.objectStore(wi).delete(b),yield U.done})).apply(this,arguments)}function Vd({appConfig:E}){return E.appId}const Er=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ev(E,b){return ll.apply(this,arguments)}function ll(){return(ll=(0,P.Z)(function*(E,b){const A=yield na(E),U=hl(b),W={method:"POST",headers:A,body:JSON.stringify(U)};let Y;try{Y=yield(yield fetch(ju(E.appConfig),W)).json()}catch(de){throw Er.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(Y.error)throw Er.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw Er.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(E,b){const A=yield na(E),U=hl(b.subscriptionOptions),W={method:"PATCH",headers:A,body:JSON.stringify(U)};let Y;try{Y=yield(yield fetch(`${ju(E.appConfig)}/${b.token}`,W)).json()}catch(de){throw Er.create("token-update-failed",{errorInfo:de?.toString()})}if(Y.error)throw Er.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw Er.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Yf(E,b){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,P.Z)(function*(E,b){const U={method:"DELETE",headers:yield na(E)};try{const Y=yield(yield fetch(`${ju(E.appConfig)}/${b}`,U)).json();if(Y.error)throw Er.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(W){throw Er.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function ju({projectId:E}){return`${ol}/projects/${E}/registrations`}function na(E){return dl.apply(this,arguments)}function dl(){return(dl=(0,P.Z)(function*({appConfig:E,installations:b}){const A=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function hl({p256dh:E,auth:b,endpoint:A,vapidKey:U}){const W={web:{endpoint:A,auth:b,p256dh:E}};return U!==Fu&&(W.web.applicationPubKey=U),W}const Qf=6048e5;function Bd(){return Bd=(0,P.Z)(function*(E){const b=yield function Hu(E,b){return ra.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:b.endpoint,auth:ii(b.getKey("auth")),p256dh:ii(b.getKey("p256dh"))},U=yield Ao(E.firebaseDependencies);if(U){if(function jr(E,b){return b.vapidKey===E.vapidKey&&b.endpoint===E.endpoint&&b.auth===E.auth&&b.p256dh===E.p256dh}(U.subscriptionOptions,A))return Date.now()>=U.createTime+Qf?function Yi(E,b){return ml.apply(this,arguments)}(E,{token:U.token,createTime:Date.now(),subscriptionOptions:A}):U.token;try{yield Yf(E.firebaseDependencies,U.token)}catch(W){console.warn(W)}return xo(E.firebaseDependencies,A)}return xo(E.firebaseDependencies,A)}),Bd.apply(this,arguments)}function gl(){return gl=(0,P.Z)(function*(E){const b=yield Ao(E.firebaseDependencies);b&&(yield Yf(E.firebaseDependencies,b.token),yield function Ud(E){return to.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),gl.apply(this,arguments)}function ml(){return ml=(0,P.Z)(function*(E,b){try{const A=yield function nm(E,b){return ja.apply(this,arguments)}(E.firebaseDependencies,b),U=Object.assign(Object.assign({},b),{token:A,createTime:Date.now()});return yield Bu(E.firebaseDependencies,U),A}catch(A){throw yield function pl(E){return gl.apply(this,arguments)}(E),A}}),ml.apply(this,arguments)}function xo(E,b){return wn.apply(this,arguments)}function wn(){return(wn=(0,P.Z)(function*(E,b){const U={token:yield ev(E,b),createTime:Date.now(),subscriptionOptions:b};return yield Bu(E,U),U.token})).apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*(E,b){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:al(b)})})).apply(this,arguments)}function ia(E){const b={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function jd(E,b){if(!b.notification)return;E.notification={};const A=b.notification.title;A&&(E.notification.title=A);const U=b.notification.body;U&&(E.notification.body=U);const W=b.notification.image;W&&(E.notification.image=W);const Y=b.notification.icon;Y&&(E.notification.icon=Y)}(b,E),function no(E,b){b.data&&(E.data=b.data)}(b,E),function xi(E,b){var A,U,W,Y,de;if(!(b.fcmOptions||null!==(A=b.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const ze=null!==(W=null===(U=b.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==W?W:null===(Y=b.notification)||void 0===Y?void 0:Y.click_action;ze&&(E.fcmOptions.link=ze);const je=null===(de=b.fcmOptions)||void 0===de?void 0:de.analytics_label;je&&(E.fcmOptions.analyticsLabel=je)}(b,E),b}function Hd(E,b){const A=[];for(let U=0;U<E.length;U++)A.push(E.charAt(U)),U<b.length&&A.push(b.charAt(U));return A.join("")}function hs(E){return Er.create("missing-app-config-values",{valueName:E})}Hd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Hd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zd{constructor(b,A,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function $d(E){if(!E||!E.options)throw hs("App Configuration Object");if(!E.name)throw hs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const U of b)if(!A[U])throw hs(U);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:A,analyticsProvider:U}}_delete(){return Promise.resolve()}}function $u(){return($u=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(sl,{scope:Ld}),E.swRegistration.update().catch(()=>{})}catch(b){throw Er.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function Ri(){return(Ri=(0,P.Z)(function*(E,b){if(!b&&!E.swRegistration&&(yield function yl(E){return $u.apply(this,arguments)}(E)),b||!E.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Er.create("invalid-sw-registration");E.swRegistration=b}})).apply(this,arguments)}function At(){return(At=(0,P.Z)(function*(E,b){b?E.vapidKey=b:E.vapidKey||(E.vapidKey=Fu)})).apply(this,arguments)}function Gd(){return Gd=(0,P.Z)(function*(E,b){if(!navigator)throw Er.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Er.create("permission-blocked");return yield function zu(E,b){return At.apply(this,arguments)}(E,b?.vapidKey),yield function sa(E,b){return Ri.apply(this,arguments)}(E,b?.serviceWorkerRegistration),function fl(E){return Bd.apply(this,arguments)}(E)}),Gd.apply(this,arguments)}function vl(){return(vl=(0,P.Z)(function*(E,b,A){const U=function Xf(E){switch(E){case eo.NOTIFICATION_CLICKED:return"notification_open";case eo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:A[Wf],message_name:A[zn],message_time:A[X_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qi(){return Qi=(0,P.Z)(function*(E,b){const A=b.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===eo.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(ia(A)):E.onMessageHandler.next(ia(A)));const U=A.data;(function Jf(E){return"object"==typeof E&&!!E&&Wf in E})(U)&&"1"===U["google.c.a.e"]&&(yield function rm(E,b,A){return vl.apply(this,arguments)}(E,A.messageType,U))}),Qi.apply(this,arguments)}const Gu="@firebase/messaging",ep=E=>{const b=new zd(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function $a(E,b){return Qi.apply(this,arguments)}(b,A)),b},Wd=E=>{const b=E.getProvider("messaging").getImmediate();return{getToken:U=>function _l(E,b){return Gd.apply(this,arguments)}(b,U)}};function Se(){return en.apply(this,arguments)}function en(){return(en=(0,P.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tp(){(0,J._registerComponent)(new pe.wA("messaging",ep,"PUBLIC")),(0,J._registerComponent)(new pe.wA("messaging-internal",Wd,"PRIVATE")),(0,J.registerVersion)(Gu,"0.12.4"),(0,J.registerVersion)(Gu,"0.12.4","esm2017")}();const El="analytics",qd="firebase_id",Zd="origin",Or=6e4,fs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zu="https://www.googletagmanager.com/gtag/js",kn=new _e.Yd("@firebase/analytics"),fr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Il(E){if(!E.startsWith(Zu)){const b=fr.create("invalid-gtag-resource",{gtagURL:E});return kn.warn(b.message),""}return E}function Ga(E){return Promise.all(E.map(b=>b.catch(A=>A)))}function ro(){return(ro=(0,P.Z)(function*(E,b,A,U,W,Y){const de=U[W];try{if(de)yield b[de];else{const je=(yield Ga(A)).find(ct=>ct.measurementId===W);je&&(yield b[je.appId])}}catch(ze){kn.error(ze)}E("config",W,Y)})).apply(this,arguments)}function oa(){return(oa=(0,P.Z)(function*(E,b,A,U,W){try{let Y=[];if(W&&W.send_to){let de=W.send_to;Array.isArray(de)||(de=[de]);const ze=yield Ga(A);for(const je of de){const ct=ze.find(St=>St.measurementId===je),Ot=ct&&b[ct.appId];if(!Ot){Y=[];break}Y.push(Ot)}}0===Y.length&&(Y=Object.values(b)),yield Promise.all(Y),E("event",U,W||{})}catch(Y){kn.error(Y)}})).apply(this,arguments)}const im=30,Jd=new class Qd{constructor(b={},A=1e3){this.throttleMetadata=b,this.intervalMillis=A}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,A){this.throttleMetadata[b]=A}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function sm(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function so(){return(so=(0,P.Z)(function*(E){var b;const{appId:A,apiKey:U}=E,W={method:"GET",headers:sm(U)},Y=fs.replace("{app-id}",A),de=yield fetch(Y,W);if(200!==de.status&&304!==de.status){let ze="";try{const je=yield de.json();null!==(b=je.error)&&void 0!==b&&b.message&&(ze=je.error.message)}catch{}throw fr.create("config-fetch-failed",{httpStatus:de.status,responseMessage:ze})}return de.json()})).apply(this,arguments)}function Xd(){return(Xd=(0,P.Z)(function*(E,b=Jd,A){const{appId:U,apiKey:W,measurementId:Y}=E.options;if(!U)throw fr.create("no-app-id");if(!W){if(Y)return{measurementId:Y,appId:U};throw fr.create("no-api-key")}const de=b.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Dl;return setTimeout((0,P.Z)(function*(){ze.abort()}),void 0!==A?A:Or),ip({appId:U,apiKey:W,measurementId:Y},de,ze,b)})).apply(this,arguments)}function ip(E,b,A){return eh.apply(this,arguments)}function eh(){return eh=(0,P.Z)(function*(E,{throttleEndTimeMillis:b,backoffCount:A},U,W=Jd){var Y;const{appId:de,measurementId:ze}=E;try{yield function th(E,b){return new Promise((A,U)=>{const W=Math.max(b-Date.now(),0),Y=setTimeout(A,W);E.addEventListener(()=>{clearTimeout(Y),U(fr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(U,b)}catch(je){if(ze)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:de,measurementId:ze};throw je}try{const je=yield function si(E){return so.apply(this,arguments)}(E);return W.deleteThrottleMetadata(de),je}catch(je){const ct=je;if(!function nh(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ct)){if(W.deleteThrottleMetadata(de),ze)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:de,measurementId:ze};throw je}const Ot=503===Number(null===(Y=ct?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,ie.$s)(A,W.intervalMillis,im):(0,ie.$s)(A,W.intervalMillis),St={throttleEndTimeMillis:Date.now()+Ot,backoffCount:A+1};return W.setThrottleMetadata(de,St),kn.debug(`Calling attemptFetch again in ${Ot} millis`),ip(E,St,U,W)}}),eh.apply(this,arguments)}class Dl{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let qa,Ka;function rh(){return(rh=(0,P.Z)(function*(E,b,A,U,W){if(W&&W.global)E("event",A,U);else{const Y=yield b;E("event",A,Object.assign(Object.assign({},U),{send_to:Y}))}})).apply(this,arguments)}function kr(){return(kr=(0,P.Z)(function*(){if(!(0,ie.hl)())return kn.warn(fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(E){return kn.warn(fr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function ao(){return ao=(0,P.Z)(function*(E,b,A,U,W,Y,de){var ze;const je=function Mn(E){return Xd.apply(this,arguments)}(E);je.then(sr=>{A[sr.measurementId]=sr.appId,E.options.measurementId&&sr.measurementId!==E.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>kn.error(sr)),b.push(je);const ct=function Qa(){return kr.apply(this,arguments)}().then(sr=>{if(sr)return U.getId()}),[Ot,St]=yield Promise.all([je,ct]);(function Cl(E){const b=window.document.getElementsByTagName("script");for(const A of Object.values(b))if(A.src&&A.src.includes(Zu)&&A.src.includes(E))return A;return null})(Y)||function Kd(E,b){const A=function Ku(E,b){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,b)),A}("firebase-js-sdk-policy",{createScriptURL:Il}),U=document.createElement("script"),W=`${Zu}?l=${E}&id=${b}`;U.src=A?A?.createScriptURL(W):W,U.async=!0,document.head.appendChild(U)}(Y,Ot.measurementId),Ka&&(W("consent","default",Ka),function Po(E){Ka=E}(void 0)),W("js",new Date);const Fr=null!==(ze=de?.config)&&void 0!==ze?ze:{};return Fr[Zd]="firebase",Fr.update=!0,null!=St&&(Fr[qd]=St),W("config",Ot.measurementId,Fr),qa&&(W("set",qa),function Ya(E){qa=E}(void 0)),Ot.measurementId}),ao.apply(this,arguments)}class tc{constructor(b){this.app=b}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},Al=[];const Ja={};let gs,Ji,xs="dataLayer",Oo=!1;function sp(E,b,A){!function Pi(){const E=[];if((0,ie.ru)()&&E.push("This is a browser extension environment."),(0,ie.zI)()||E.push("Cookies are not available."),E.length>0){const b=E.map((U,W)=>`(${W+1}) ${U}`).join(" "),A=fr.create("invalid-analytics-context",{errorInfo:b});kn.warn(A.message)}}();const U=E.options.appId;if(!U)throw fr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw fr.create("no-api-key");kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[U])throw fr.create("already-exists",{id:U});if(!Oo){!function Wa(E){let b=[];Array.isArray(window[E])?b=window[E]:window[E]=b}(xs);const{wrappedGtag:Y,gtagCore:de}=function Ju(E,b,A,U,W){let Y=function(...de){window[U].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Y=window[W]),window[W]=function Qu(E,b,A,U){function Y(){return Y=(0,P.Z)(function*(de,...ze){try{if("event"===de){const[je,ct]=ze;yield function io(E,b,A,U,W){return oa.apply(this,arguments)}(E,b,A,je,ct)}else if("config"===de){const[je,ct]=ze;yield function Yu(E,b,A,U,W,Y){return ro.apply(this,arguments)}(E,b,A,U,je,ct)}else if("consent"===de){const[je]=ze;E("consent","update",je)}else if("get"===de){const[je,ct,Ot]=ze;E("get",je,ct,Ot)}else if("set"===de){const[je]=ze;E("set",je)}else E(de,...ze)}catch(je){kn.error(je)}}),Y.apply(this,arguments)}return function W(de){return Y.apply(this,arguments)}}(Y,E,b,A),{gtagCore:Y,wrappedGtag:window[W]}}(ai,Al,Ja,xs,"gtag");Ji=Y,gs=de,Oo=!0}return ai[U]=function Vt(E,b,A,U,W,Y,de){return ao.apply(this,arguments)}(E,Al,Ja,b,gs,xs,A),new tc(E)}function Ml(){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const xl="@firebase/analytics";!function ko(){(0,J._registerComponent)(new pe.wA(El,(b,{options:A})=>sp(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,J._registerComponent)(new pe.wA("analytics-internal",function E(b){try{const A=b.getProvider(El).getImmediate();return{logEvent:(U,W,Y)=>function aa(E,b,A,U){E=(0,ie.m9)(E),function Ro(E,b,A,U,W){return rh.apply(this,arguments)}(Ji,ai[E.app.options.appId],b,A,U).catch(W=>kn.error(W))}(A,U,W,Y)}}catch(A){throw fr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,J.registerVersion)(xl,"0.10.0"),(0,J.registerVersion)(xl,"0.10.0","esm2017")}();var Fo=L(1954),eu=L(2631);const op=new class sc extends eu.v{}(class oh extends Fo.o{constructor(b,A){super(b,A),this.scheduler=b,this.work=A}schedule(b,A=0){return A>0?super.schedule(b,A):(this.delay=A,this.state=b,this.scheduler.flush(this),this)}execute(b,A){return A>0||this.closed?super.execute(b,A):this._execute(b,A)}requestAsyncId(b,A,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(b,A,U):(b.flush(this),0)}});var ac=L(6321),Xi=L(5592),Ns=L(9397),ki=L(3093),tu=L(5137);const ua=new d.GfV("7.6.1"),Ps="__angularfire_symbol__analyticsIsSupportedValue",nu="__angularfire_symbol__analyticsIsSupported",Lo="__angularfire_symbol__remoteConfigIsSupportedValue",uc="__angularfire_symbol__remoteConfigIsSupported",Rl="__angularfire_symbol__messagingIsSupportedValue",cc="__angularfire_symbol__messagingIsSupported";function ap(E,b,A){if(b){if(1===b.length)return b[0];const Y=b.filter(de=>de.app===A);if(1===Y.length)return Y[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[nu]||(globalThis[nu]=Ml().then(E=>globalThis[Ps]=E).catch(()=>globalThis[Ps]=!1)),globalThis[cc]||(globalThis[cc]=Se().then(E=>globalThis[Rl]=E).catch(()=>globalThis[Rl]=!1)),globalThis[uc]||(globalThis[uc]=Xo().then(E=>globalThis[Lo]=E).catch(()=>globalThis[Lo]=!1));const Pl=(E,b)=>{const A=b?[b]:(0,B.C6)(),U=[];return A.forEach(W=>{W.container.getProvider(E).instances.forEach(de=>{U.includes(de)||U.push(de)})}),U};function En(){}class ru{constructor(b,A=op){this.zone=b,this.delegate=A}now(){return this.delegate.now()}schedule(b,A,U){const W=this.zone;return this.delegate.schedule(function(de){W.runGuarded(()=>{b.apply(this,[de])})},A,U)}}class co{constructor(b){this.zone=b,this.task=null}call(b,A){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",En,{},En,En)),A.pipe((0,Ns.b)({next:U,complete:U,error:U})).subscribe(b).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lc=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new ru(Zone.current)),this.insideAngular=A.run(()=>new ru(Zone.current,ac.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(d.LFG(d.R0b))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function ir(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Uo(E){return ir().ngZone.run(()=>E())}function Ol(E){return E.pipe((0,ki.Q)(ir().outsideAngular))}function up(E){return ir(),function tv(E){return function(A){return(A=A.lift(new co(E.ngZone))).pipe((0,tu.R)(E.outsideAngular),(0,ki.Q)(E.insideAngular))}}(ir())(E)}const cm=(E,b)=>function(){const U=arguments;return b&&setTimeout(()=>{"scheduled"===b.state&&b.invoke()},10),Uo(()=>E.apply(void 0,U))},cp=(E,b)=>function(){let A;const U=arguments;for(let Y=0;Y<arguments.length;Y++)"function"==typeof U[Y]&&(b&&(A||(A=Uo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",En,{},En,En)))),U[Y]=cm(U[Y],A));const W=function iu(E){return ir().ngZone.runOutsideAngular(()=>E())}(()=>E.apply(this,U));if(!b){if(W instanceof Xi.y){const Y=ir();return W.pipe((0,tu.R)(Y.outsideAngular),(0,ki.Q)(Y.insideAngular))}return Uo(()=>W)}return W instanceof Xi.y?W.pipe(up):W instanceof Promise?Uo(()=>new Promise((Y,de)=>W.then(ze=>Uo(()=>Y(ze)),ze=>Uo(()=>de(ze))))):"function"==typeof W&&A?function(){return setTimeout(()=>{A&&"scheduled"===A.state&&A.invoke()},10),W.apply(this,arguments)}:Uo(()=>W)}},6878:(pt,De,L)=>{L.d(De,{$:()=>sl,A:()=>G,D:()=>Me,I:()=>Md,J:()=>Na,L:()=>Tt,N:()=>qr,P:()=>Vt,Q:()=>$f,R:()=>bl,U:()=>So,V:()=>Xo,W:()=>ea,X:()=>vi,Y:()=>Br,Z:()=>Xc,_:()=>Nd,a:()=>hr,a0:()=>Fu,a1:()=>Wf,a2:()=>tm,a3:()=>qf,a4:()=>Lu,a5:()=>Uu,a6:()=>wi,a7:()=>Vu,a8:()=>Mo,a9:()=>Kf,aA:()=>ee,aB:()=>nu,aC:()=>rr,aD:()=>Yt,aE:()=>Ns,aF:()=>sh,aG:()=>ih,aH:()=>Kn,aL:()=>Qr,aO:()=>Ua,aa:()=>Ud,ab:()=>Vd,ac:()=>cl,ad:()=>nm,ae:()=>Yf,af:()=>ju,ai:()=>Qf,aj:()=>Bd,ak:()=>pl,an:()=>em,ao:()=>jd,aq:()=>At,ar:()=>Gu,as:()=>He,at:()=>yt,au:()=>ve,av:()=>te,aw:()=>St,ax:()=>cc,ay:()=>ht,az:()=>Ce,b:()=>wl,c:()=>Ji,d:()=>sp,e:()=>om,f:()=>xl,g:()=>sc,h:()=>Fo,i:()=>Yd,j:()=>ac,k:()=>_s,l:()=>oo,m:()=>Fl,o:()=>hm,p:()=>Ae,r:()=>Sl,s:()=>oi,u:()=>Qa});var d=L(5861),B=L(9058),P=L(534),J=L(7582),ie=L(7879),pe=L(4537);const Ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new ie.Yd("@firebase/auth");function lt(v,...p){Pe.logLevel<=ie.in.ERROR&&Pe.error(`Auth (${P.SDK_VERSION}): ${v}`,...p)}function te(v,...p){throw Ne(v,...p)}function Ce(v,...p){return Ne(v,...p)}function se(v,p,m){const I=Object.assign(Object.assign({},qe()),{[p]:m});return new B.LL("auth","Firebase",I).create(p,{appName:v.name})}function fe(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&te(v,"argument-error"),se(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return xe.create(v,...p)}function ee(v,p,...m){if(!v)throw Ne(p,...m)}function et(v){const p="INTERNAL ASSERTION FAILED: "+v;throw lt(p),new Error(p)}function He(v,p){v||et(p)}function Jt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function cr(){return"http:"===Gr()||"https:"===Gr()}function Gr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class we{constructor(p,m){this.shortDelay=p,this.longDelay=m,He(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Ts(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(cr()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Te(v,p){He(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Oe{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ve=new we(3e4,6e4);function Ye(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function ot(v,p,m,I){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(v,p,m,I,M={}){return tt(v,M,(0,d.Z)(function*(){let O={},Z={};I&&("GET"===p?Z=I:O={body:JSON.stringify(I)});const le=(0,B.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),Oe.fetch()(Ln(v,v.config.apiHost,m,le),Object.assign({method:p,headers:Be,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function tt(v,p,m){return gt.apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},$e),p);try{const M=new Xt(v),O=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Z=yield O.json();if("needConfirmation"in Z)throw lr(v,"account-exists-with-different-credential",Z);if(O.ok&&!("errorMessage"in Z))return Z;{const le=O.ok?Z.errorMessage:Z.error.message,[Be,Xe]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw lr(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Be)throw lr(v,"email-already-in-use",Z);if("USER_DISABLED"===Be)throw lr(v,"user-disabled",Z);const Et=I[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw se(v,Et,Xe);te(v,Et)}}catch(M){if(M instanceof B.ZR)throw M;te(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function rn(v,p,m,I){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(v,p,m,I,M={}){const O=yield ot(v,p,m,I,M);return"mfaPendingCredential"in O&&te(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ln(v,p,m,I){const M=`${p}${m}?${I}`;return v.config.emulator?Te(v.config,M):`${v.config.apiScheme}://${M}`}class Xt{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Ce(this.auth,"network-request-failed")),Ve.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const M=Ce(v,p,I);return M.customData._tokenResponse=m,M}function tr(){return(tr=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Ar(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function os(){return(os=(0,d.Z)(function*(v,p=!1){const m=(0,B.m9)(v),I=yield m.getIdToken(p),M=dt(I);ee(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Z=O?.sign_in_provider;return{claims:M,token:I,authTime:Ar(Ke(M.auth_time)),issuedAtTime:Ar(Ke(M.iat)),expirationTime:Ar(Ke(M.exp)),signInProvider:Z||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Ke(v){return 1e3*Number(v)}function dt(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,B.tV)(m);return M?JSON.parse(M):(lt("Failed to decode base64 JWT payload"),null)}catch(M){return lt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Kt(v,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof B.ZR&&function ni({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class qn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ar(this.lastLoginAt),this.creationTime=Ar(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function as(v){return pn.apply(this,arguments)}function pn(){return pn=(0,d.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),M=yield Kt(v,function Eo(v,p){return Gi.apply(this,arguments)}(m,{idToken:I}));ee(M?.users.length,m,"internal-error");const O=M.users[0];v._notifyReloadListener(O);const Z=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?function Wi(v){return v.map(p=>{var{providerId:m}=p,I=(0,J._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(O.providerUserInfo):[],le=function Un(v,p){return[...v.filter(I=>!p.some(M=>M.providerId===I.providerId)),...p]}(v.providerData,Z),Et=!!v.isAnonymous&&!(v.email&&O.passwordHash||le?.length),tn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:le,metadata:new qn(O.createdAt,O.lastLoginAt),isAnonymous:Et};Object.assign(v,tn)}),pn.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(v){const p=(0,B.m9)(v);yield as(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(v,p){const m=yield tt(v,{},(0,d.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:O}=v.config,Z=Ln(v,M,"/v1/token",`key=${O}`),le=yield v._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Oe.fetch()(Z,{method:"POST",headers:le,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ee(p.idToken,"internal-error"),ee(typeof p.idToken<"u","internal-error"),ee(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Ct(v){const p=dt(v);return ee(p,"internal-error"),ee(typeof p.exp<"u","internal-error"),ee(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,d.Z)(function*(){return ee(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Z}=yield function Ss(v,p){return Mr.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(M,O,Number(Z))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:M,expirationTime:O}=m,Z=new Hn;return I&&(ee("string"==typeof I,"internal-error",{appName:p}),Z.refreshToken=I),M&&(ee("string"==typeof M,"internal-error",{appName:p}),Z.accessToken=M),O&&(ee("number"==typeof O,"internal-error",{appName:p}),Z.expirationTime=O),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Hn,this.toJSON())}_performRefresh(){return et("not implemented")}}function Cn(v,p){ee("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Zn{constructor(p){var{uid:m,auth:I,stsTokenManager:M}=p,O=(0,J._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new qn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const I=yield Kt(m,m.stsTokenManager.getToken(m.auth,p));return ee(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function Wr(v){return os.apply(this,arguments)}(this,p)}reload(){return function Ur(v){return kt.apply(this,arguments)}(this)}_assign(p){this!==p&&(ee(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Zn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,d.Z)(function*(){let M=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield as(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield Kt(p,function dr(v,p){return tr.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,M,O,Z,le,Be,Xe,Et;const tn=null!==(I=m.displayName)&&void 0!==I?I:void 0,ui=null!==(M=m.email)&&void 0!==M?M:void 0,hc=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,gp=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,Ll=null!==(le=m.tenantId)&&void 0!==le?le:void 0,au=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,fm=null!==(Xe=m.createdAt)&&void 0!==Xe?Xe:void 0,mp=null!==(Et=m.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:uu,emailVerified:yp,isAnonymous:_p,providerData:Ul,stsTokenManager:pm}=m;ee(uu&&pm,p,"internal-error");const Vl=Hn.fromJSON(this.name,pm);ee("string"==typeof uu,p,"internal-error"),Cn(tn,p.name),Cn(ui,p.name),ee("boolean"==typeof yp,p,"internal-error"),ee("boolean"==typeof _p,p,"internal-error"),Cn(hc,p.name),Cn(gp,p.name),Cn(Ll,p.name),Cn(au,p.name),Cn(fm,p.name),Cn(mp,p.name);const vp=new Zn({uid:uu,auth:p,email:ui,emailVerified:yp,displayName:tn,isAnonymous:_p,photoURL:gp,phoneNumber:hc,tenantId:Ll,stsTokenManager:Vl,createdAt:fm,lastLoginAt:mp});return Ul&&Array.isArray(Ul)&&(vp.providerData=Ul.map(rv=>Object.assign({},rv))),au&&(vp._redirectEventId=au),vp}static _fromIdTokenResponse(p,m,I=!1){return(0,d.Z)(function*(){const M=new Hn;M.updateFromServerResponse(m);const O=new Zn({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:I});return yield as(O),O})()}}const Nn=new Map;function rr(v){He(v instanceof Function,"Expected a class definition");let p=Nn.get(v);return p?(He(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Nn.set(v,p),p)}const qr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,I){var M=this;return(0,d.Z)(function*(){M.storage[m]=I})()}_get(m){var I=this;return(0,d.Z)(function*(){const M=I.storage[m];return void 0===M?null:M})()}_remove(m){var I=this;return(0,d.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function Yt(v,p,m){return`firebase:${v}:${p}:${m}`}class z{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:M,name:O}=this.auth;this.fullUserKey=Yt(this.userKey,M.apiKey,O),this.fullPersistenceKey=Yt("persistence",M.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Zn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,d.Z)(function*(){if(!m.length)return new z(rr(qr),p,I);const M=(yield Promise.all(m.map(function(){var Xe=(0,d.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=M[0]||rr(qr);const Z=Yt(I,p.config.apiKey,p.name);let le=null;for(const Xe of m)try{const Et=yield Xe._get(Z);if(Et){const tn=Zn._fromJSON(p,Et);Xe!==O&&(le=tn),O=Xe;break}}catch{}const Be=M.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Be.length?(O=Be[0],le&&(yield O._set(Z,le.toJSON())),yield Promise.all(m.map(function(){var Xe=(0,d.Z)(function*(Et){if(Et!==O)try{yield Et._remove(Z)}catch{}});return function(Et){return Xe.apply(this,arguments)}}())),new z(O,p,I)):new z(O,p,I)})()}}function j(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(X(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(k(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(We(p))return"Blackberry";if(wt(p))return"Webos";if(F(p))return"Safari";if((p.includes("chrome/")||N(p))&&!p.includes("edge/"))return"Chrome";if(ve(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function k(v=(0,B.z$)()){return/firefox\//i.test(v)}function F(v=(0,B.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function N(v=(0,B.z$)()){return/crios\//i.test(v)}function X(v=(0,B.z$)()){return/iemobile/i.test(v)}function ve(v=(0,B.z$)()){return/android/i.test(v)}function We(v=(0,B.z$)()){return/blackberry/i.test(v)}function wt(v=(0,B.z$)()){return/webos/i.test(v)}function yt(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ht(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Lt(v=(0,B.z$)()){return yt(v)||ve(v)||wt(v)||We(v)||/windows phone/i.test(v)||X(v)}function xr(v,p=[]){let m;switch(v){case"Browser":m=j((0,B.z$)());break;case"Worker":m=`${j((0,B.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${P.SDK_VERSION}/${I}`}function re(){return(re=(0,d.Z)(function*(v){return(yield ot(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fe(v,p){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(v,p){return ot(v,"GET","/v2/recaptchaConfig",Ye(v,p))})).apply(this,arguments)}function Rt(v){return void 0!==v&&void 0!==v.getResponse}function jt(v){return void 0!==v&&void 0!==v.enterprise}class nn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function $n(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=M=>{const O=Ce("internal-error");O.customData=M,m(O)},I.type="text/javascript",I.charset="UTF-8",function vr(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function Ks(v){return`__${v}${Math.floor(1e6*Math.random())}`}class ri{constructor(p){this.type="recaptcha-enterprise",this.auth=Kn(p)}verify(p="verify",m=!1){var I=this;return(0,d.Z)(function*(){function O(){return O=(0,d.Z)(function*(le){if(!m){if(null==le.tenantId&&null!=le._agentRecaptchaConfig)return le._agentRecaptchaConfig.siteKey;if(null!=le.tenantId&&void 0!==le._tenantRecaptchaConfigs[le.tenantId])return le._tenantRecaptchaConfigs[le.tenantId].siteKey}return new Promise(function(){var Be=(0,d.Z)(function*(Xe,Et){Fe(le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const ui=new nn(tn);return null==le.tenantId?le._agentRecaptchaConfig=ui:le._tenantRecaptchaConfigs[le.tenantId]=ui,Xe(ui.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{Et(tn)})});return function(Xe,Et){return Be.apply(this,arguments)}}())}),O.apply(this,arguments)}function Z(le,Be,Xe){const Et=window.grecaptcha;jt(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(le,{action:p}).then(tn=>{Be(tn)}).catch(()=>{Be("NO_RECAPTCHA")})}):Xe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((le,Be)=>{(function M(le){return O.apply(this,arguments)})(I.auth).then(Xe=>{if(!m&&jt(window.grecaptcha))Z(Xe,le,Be);else{if(typeof window>"u")return void Be(new Error("RecaptchaVerifier is only supported in browser"));$n("https://www.google.com/recaptcha/enterprise.js?render="+Xe).then(()=>{Z(Xe,le,Be)}).catch(Et=>{Be(Et)})}}).catch(Xe=>{Be(Xe)})})})()}}function Ys(v,p,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(v,p,m,I=!1){const M=new ri(v);let O;try{O=yield M.verify(m)}catch{O=yield M.verify(m,!0)}const Z=Object.assign({},p);return Object.assign(Z,I?{captchaResp:O}:{captchaResponse:O}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Bf{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=O=>new Promise((Z,le)=>{try{Z(p(O))}catch(Be){le(Be)}});I.onAbort=m,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const M of m.queue)yield M(p),M.onAbort&&I.push(M.onAbort)}catch(M){I.reverse();for(const O of I)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Ra{constructor(p,m,I,M){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=I,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jg(this),this.idTokenSubscription=new Jg(this),this.beforeStateQueue=new Bf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=rr(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,O;if(!I._deleted&&(I.persistenceManager=yield z.create(I,p),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var I;const M=yield m.assertedPersistence.getCurrentUser();let O=M,Z=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,Be=O?._redirectEventId,Xe=yield m.tryRedirectSignIn(p);(!le||le===Be)&&Xe?.user&&(O=Xe.user,Z=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(O)}catch(le){O=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return ee(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){try{yield as(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ae(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const I=p?(0,B.m9)(p):null;return I&&ee(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return p&&ee(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(rr(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const m=yield Fe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new nn(m);null==p.tenantId?p._agentRecaptchaConfig=I:p._tenantRecaptchaConfigs[p.tenantId]=I,I.emailPasswordEnabled&&new ri(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,d.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&rr(p)||m._popupRedirectResolver;ee(I,m,"argument-error"),m.redirectPersistenceManager=yield z.create(m,[rr(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var I,M;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,M){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(Z,this,"internal-error"),Z.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,I,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=xr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(I["X-Firebase-Client"]=M);const O=yield p._getAppCheckToken();return O&&(I["X-Firebase-AppCheck"]=O),I})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var m;const I=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return I?.error&&function vt(v,...p){Pe.logLevel<=ie.in.WARN&&Pe.warn(`Auth (${P.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Kn(v){return(0,B.m9)(v)}class Jg{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Md(v,p,m){const I=Kn(v);ee(I._canInitEmulator,I,"emulator-config-failed"),ee(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const M=!!m?.disableWarnings,O=Au(p),{host:Z,port:le}=function Yo(v){const p=Au(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const O=M[1];return{host:O,port:Qc(I.substr(O.length+1))}}{const[O,Z]=I.split(":");return{host:O,port:Qc(Z)}}}(p);I.config.emulator={url:`${O}//${Z}${null===le?"":`:${le}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:le,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function jf(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Au(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Qc(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Na{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return et("not implemented")}_getIdTokenResponse(p){return et("not implemented")}_linkToIdToken(p,m){return et("not implemented")}_getReauthenticationResolver(p){return et("not implemented")}}function Pa(v,p){return xd.apply(this,arguments)}function xd(){return(xd=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:resetPassword",Ye(v,p))})).apply(this,arguments)}function Mu(v,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:update",Ye(v,p))})).apply(this,arguments)}function wr(v,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithPassword",Ye(v,p))})).apply(this,arguments)}function As(v,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:sendOobCode",Ye(v,p))})).apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(v,p){return As(v,p)})).apply(this,arguments)}function Qo(v,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(v,p){return As(v,p)})).apply(this,arguments)}function Fa(v,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(v,p){return As(v,p)})).apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(v,p){return As(v,p)})).apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithEmailLink",Ye(v,p))})).apply(this,arguments)}class Ms extends Na{constructor(p,m,I,M=null){super("password",I),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new Ms(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Ms(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){var I;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=p._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const O=yield Ys(p,M,"signInWithPassword");return wr(p,O)}return wr(p,M).catch(function(){var O=(0,d.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const le=yield Ys(p,M,"signInWithPassword");return wr(p,le)}return Promise.reject(Z)});return function(Z){return O.apply(this,arguments)}}());case"emailLink":return function An(v,p){return Kr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:te(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return Mu(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ru(v,p){return Rr.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:te(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function vn(v,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithIdp",Ye(v,p))})).apply(this,arguments)}class Tt extends Na{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Tt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:M}=m,O=(0,J._T)(m,["providerId","signInMethod"]);if(!I||!M)return null;const Z=new Tt(I,M);return Z.idToken=O.idToken||void 0,Z.accessToken=O.accessToken||void 0,Z.secret=O.secret,Z.nonce=O.nonce,Z.pendingToken=O.pendingToken||null,Z}_getIdTokenResponse(p){return vn(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,vn(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,vn(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Nu(){return(Nu=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:sendVerificationCode",Ye(v,p))})).apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p))})).apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(v,p){const m=yield rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,p));if(m.temporaryProof)throw lr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const cs={USER_NOT_FOUND:"user-not-found"};function Ou(){return(Ou=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ye(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),cs)})).apply(this,arguments)}class Nr extends Na{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Nr({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Nr({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Qs(v,p){return On.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Pu(v,p){return bo.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Jo(v,p){return Ou.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:M,temporaryProof:O}=p;return I||m||M||O?new Nr({verificationId:m,verificationCode:I,phoneNumber:M,temporaryProof:O}):null}}class Zi{constructor(p){var m,I,M,O,Z,le;const Be=(0,B.zd)((0,B.pd)(p)),Xe=null!==(m=Be.apiKey)&&void 0!==m?m:null,Et=null!==(I=Be.oobCode)&&void 0!==I?I:null,tn=function Yr(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Be.mode)&&void 0!==M?M:null);ee(Xe&&Et&&tn,"argument-error"),this.apiKey=Xe,this.operation=tn,this.code=Et,this.continueUrl=null!==(O=Be.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Z=Be.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(le=Be.tenantId)&&void 0!==le?le:null}static parseLink(p){const m=function Jc(v){const p=(0,B.zd)((0,B.pd)(v)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||m||p||v}(p);try{return new Zi(m)}catch{return null}}}let $f=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return Ms._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const M=Zi.parseLink(I);return ee(M,"argument-error"),Ms._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ls{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class To extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class vi extends To{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ee("providerId"in m&&"signInMethod"in m,"argument-error"),Tt._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ee(p.idToken||p.accessToken,"argument-error"),Tt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return vi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return vi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:O,nonce:Z,providerId:le}=p;if(!I&&!M&&!m&&!O||!le)return null;try{return new vi(le)._credential({idToken:m,accessToken:I,nonce:Z,pendingToken:O})}catch{return null}}}let So=(()=>{class v extends To{constructor(){super("facebook.com")}static credential(m){return Tt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Xo=(()=>{class v extends To{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Tt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:M}=m;if(!I&&!M)return null;try{return v.credential(I,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ea=(()=>{class v extends To{constructor(){super("github.com")}static credential(m){return Tt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ua extends Na{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return vn(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,vn(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,vn(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:M,pendingToken:O}=m;return I&&M&&O&&I===M?new Ua(I,O):null}static _create(p,m){return new Ua(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Br extends ls{constructor(p){ee(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Br.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Br.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Ua.fromJSON(p);return ee(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Ua._create(I,m)}catch{return null}}}let Xc=(()=>{class v extends To{constructor(){super("twitter.com")}static credential(m,I){return Tt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=m;if(!I||!M)return null;try{return v.credential(I,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ki(v,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signUp",Ye(v,p))})).apply(this,arguments)}class Dn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,M=!1){return(0,d.Z)(function*(){const O=yield Zn._fromIdTokenResponse(p,I,M),Z=ta(I);return new Dn({user:O,providerId:Z,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const M=ta(I);return new Dn({user:p,providerId:M,_tokenResponse:I,operationType:m})})()}}function ta(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Nd(v){return el.apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(v){var p;const m=Kn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Dn({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Ki(m,{returnSecureToken:!0}),M=yield Dn._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class tl extends B.ZR{constructor(p,m,I,M){var O;super(m.code,m.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,tl.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,M){return new tl(p,m,I,M)}}function nl(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?tl._fromErrorAndOperation(v,O,p,I):O})}function zf(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function em(v,p){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,d.Z)(function*(v,p){const m=(0,B.m9)(v);yield il(!0,m,p);const{providerUserInfo:I}=yield function Bn(v,p){return Ai.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=zf(I||[]);return m.providerData=m.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Pd.apply(this,arguments)}function ds(v,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(v,p,m=!1){const I=yield Kt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Dn._forOperation(v,"link",I)})).apply(this,arguments)}function il(v,p,m){return ku.apply(this,arguments)}function ku(){return(ku=(0,d.Z)(function*(v,p,m){yield as(p);const M=!1===v?"provider-already-linked":"no-such-provider";ee(zf(p.providerData).has(m)===v,p.auth,M)})).apply(this,arguments)}function Gf(v,p){return Od.apply(this,arguments)}function Od(){return(Od=(0,d.Z)(function*(v,p,m=!1){const{auth:I}=v,M="reauthenticate";try{const O=yield Kt(v,nl(I,M,p,v),m);ee(O.idToken,I,"internal-error");const Z=dt(O.idToken);ee(Z,I,"internal-error");const{sub:le}=Z;return ee(v.uid===le,I,"user-mismatch"),Dn._forOperation(v,M,O)}catch(O){throw"auth/user-not-found"===O?.code&&te(I,"user-mismatch"),O}})).apply(this,arguments)}function kd(v,p){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,d.Z)(function*(v,p,m=!1){const I="signIn",M=yield nl(v,I,p),O=yield Dn._fromIdTokenResponse(v,I,M);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function sl(v,p){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,d.Z)(function*(v,p){return kd(Kn(v),p)})).apply(this,arguments)}function Fu(v,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(v,p){const m=(0,B.m9)(v);return yield il(!1,m,p.providerId),ds(m,p)})).apply(this,arguments)}function Wf(v,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(v,p){return Gf((0,B.m9)(v),p)})).apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(v,p){return rn(v,"POST","/v1/accounts:signInWithCustomToken",Ye(v,p))})).apply(this,arguments)}function tm(v,p){return eo.apply(this,arguments)}function eo(){return eo=(0,d.Z)(function*(v,p){const m=Kn(v),I=yield function X_(v,p){return Xs.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),M=yield Dn._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(M.user),M}),eo.apply(this,arguments)}class ii{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?al._fromServerResponse(p,m):"totpInfo"in m?Va._fromServerResponse(p,m):te(p,"internal-error")}}class al extends ii{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new al(m)}}class Va extends ii{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new Va(m)}}function Ba(v,p,m){var I;ee((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),ee(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ee(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ee(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function qf(v,p,m){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,d.Z)(function*(v,p,m){var I;const M=Kn(v),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield Ys(M,O,"getOobCode",!0);m&&Ba(M,Z,m),yield Qo(M,Z)}else m&&Ba(M,O,m),yield Qo(M,O).catch(function(){var Z=(0,d.Z)(function*(le){if("auth/missing-recaptcha-token"!==le.code)return Promise.reject(le);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Be=yield Ys(M,O,"getOobCode",!0);m&&Ba(M,Be,m),yield Qo(M,Be)}});return function(le){return Z.apply(this,arguments)}}())}),Zf.apply(this,arguments)}function Lu(v,p,m){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*(v,p,m){yield Pa((0,B.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Uu(v,p){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,d.Z)(function*(v,p){yield function Hf(v,p){return Ut.apply(this,arguments)}((0,B.m9)(v),{oobCode:p})}),Gn.apply(this,arguments)}function wi(v,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(v,p){const m=(0,B.m9)(v),I=yield Pa(m,{oobCode:p}),M=I.requestType;switch(ee(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(I.mfaInfo,m,"internal-error");default:ee(I.email,m,"internal-error")}let O=null;return I.mfaInfo&&(O=ii._fromServerResponse(Kn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Vu(v,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(v,p){const{data:m}=yield wi((0,B.m9)(v),p);return m.email})).apply(this,arguments)}function Mo(v,p,m){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,d.Z)(function*(v,p,m){var I;const M=Kn(v),O={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Xe=yield Ys(M,O,"signUpPassword");Z=Ki(M,Xe)}else Z=Ki(M,O).catch(function(){var Xe=(0,d.Z)(function*(Et){if("auth/missing-recaptcha-token"===Et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tn=yield Ys(M,O,"signUpPassword");return Ki(M,tn)}return Promise.reject(Et)});return function(Et){return Xe.apply(this,arguments)}}());const le=yield Z.catch(Xe=>Promise.reject(Xe)),Be=yield Dn._fromIdTokenResponse(M,"signIn",le);return yield M._updateCurrentUser(Be.user),Be}),Bu.apply(this,arguments)}function Kf(v,p,m){return sl((0,B.m9)(v),$f.credential(p,m))}function Ud(v,p,m){return to.apply(this,arguments)}function to(){return to=(0,d.Z)(function*(v,p,m){var I;const M=Kn(v),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Z(le,Be){ee(Be.handleCodeInApp,M,"argument-error"),Be&&Ba(M,le,Be)}if(null!==(I=M._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const le=yield Ys(M,O,"getOobCode",!0);Z(le,m),yield Fa(M,le)}else Z(O,m),yield Fa(M,O).catch(function(){var le=(0,d.Z)(function*(Be){if("auth/missing-recaptcha-token"!==Be.code)return Promise.reject(Be);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xe=yield Ys(M,O,"getOobCode",!0);Z(Xe,m),yield Fa(M,Xe)}});return function(Be){return le.apply(this,arguments)}}())}),to.apply(this,arguments)}function Vd(v,p){const m=Zi.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function cl(v,p,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v),M=$f.credentialWithLink(p,m||Jt());return ee(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),sl(I,M)})).apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:createAuthUri",Ye(v,p))})).apply(this,arguments)}function nm(v,p){return ja.apply(this,arguments)}function ja(){return ja=(0,d.Z)(function*(v,p){const I={identifier:p,continueUri:cr()?Jt():"http://localhost"},{signinMethods:M}=yield function ev(v,p){return ll.apply(this,arguments)}((0,B.m9)(v),I);return M||[]}),ja.apply(this,arguments)}function Yf(v,p){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,d.Z)(function*(v,p){const m=(0,B.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ba(m.auth,M,p);const{email:O}=yield function Rd(v,p){return Oa.apply(this,arguments)}(m.auth,M);O!==v.email&&(yield v.reload())}),Ha.apply(this,arguments)}function ju(v,p,m){return na.apply(this,arguments)}function na(){return na=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Ba(I.auth,O,m);const{email:Z}=yield function it(v,p){return Pt.apply(this,arguments)}(I.auth,O);Z!==v.email&&(yield v.reload())}),na.apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(v,p){return ot(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Qf(v,p){return fl.apply(this,arguments)}function fl(){return fl=(0,d.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,B.m9)(v),O={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Z=yield Kt(I,function dl(v,p){return hl.apply(this,arguments)}(I.auth,O));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const le=I.providerData.find(({providerId:Be})=>"password"===Be);le&&(le.displayName=I.displayName,le.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),fl.apply(this,arguments)}function Bd(v,p){return gl((0,B.m9)(v),p,null)}function pl(v,p){return gl((0,B.m9)(v),null,p)}function gl(v,p,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(v,p,m){const{auth:I}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const Z=yield Kt(v,Mu(I,O));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class xo{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class wn extends xo{constructor(p,m,I,M){super(p,m,I),this.username=M}}class Hu extends xo{constructor(p,m){super(p,"facebook.com",m)}}class ra extends wn{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class jr extends xo{constructor(p,m){super(p,"google.com",m)}}class ia extends wn{constructor(p,m,I){super(p,"twitter.com",m,I)}}function jd(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ml(v){var p,m;if(!v)return null;const{providerId:I}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Z=null===(m=null===(p=dt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new xo(O,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new Hu(O,M);case"github.com":return new ra(O,M);case"google.com":return new jr(O,M);case"twitter.com":return new ia(O,M,v.screenName||null);case"custom":case"anonymous":return new xo(O,null);default:return new xo(O,I,M)}}(m)}class Ri{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new Ri("enroll",p,m)}static _fromMfaPendingCredential(p){return new Ri("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ri._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Ri._fromIdtoken(p.multiFactorSession.idToken)}return null}}class zu{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=Kn(p),M=m.customData._serverResponse,O=(M.mfaInfo||[]).map(le=>ii._fromServerResponse(I,le));ee(M.mfaPendingCredential,I,"internal-error");const Z=Ri._fromMfaPendingCredential(M.mfaPendingCredential);return new zu(Z,O,function(){var le=(0,d.Z)(function*(Be){const Xe=yield Be._process(I,Z);delete M.mfaInfo,delete M.mfaPendingCredential;const Et=Object.assign(Object.assign({},M),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(m.operationType){case"signIn":const tn=yield Dn._fromIdTokenResponse(I,m.operationType,Et);return yield I._updateCurrentUser(tn.user),tn;case"reauthenticate":return ee(m.user,I,"internal-error"),Dn._forOperation(m.user,m.operationType,Et);default:te(I,"internal-error")}});return function(Be){return le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function At(v,p){var m;const I=(0,B.m9)(v),M=p;return ee(p.customData.operationType,I,"argument-error"),ee(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),zu._fromError(I,M)}class $a{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>ii._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new $a(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Ri._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,d.Z)(function*(){const M=p,O=yield I.getSession(),Z=yield Kt(I.user,M._process(I.user.auth,O,m));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){const I="string"==typeof p?p:p.uid,M=yield m.user.getIdToken();try{const O=yield Kt(m.user,function Xf(v,p){return ot(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(v,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Z})=>Z!==I),yield m.user._updateTokensIfNecessary(O),yield m.user.reload()}catch(O){throw O}})()}}const Qi=new WeakMap;function Gu(v){const p=(0,B.m9)(v);return Qi.has(p)||Qi.set(p,$a._fromUser(p)),Qi.get(p)}const za="__sak";class ep{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const wl=(()=>{class v extends ep{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Wd(){const v=(0,B.z$)();return F(v)||yt(v)}()&&function _r(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Lt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),O=this.localCache[I];M!==O&&m(I,O,M)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((le,Be,Xe)=>{this.notifyListeners(le,Xe)});const M=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(M);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!I)return}const O=()=>{const le=this.storage.getItem(M);!I&&this.localCache[M]===le||this.notifyListeners(M,le)},Z=this.storage.getItem(M);!function _n(){return(0,B.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,I){this.localCache[m]=I;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var M=()=>super._set,O=this;return(0,d.Z)(function*(){yield M().call(O,m,I),O.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,M=this;return(0,d.Z)(function*(){const O=yield I().call(M,m);return M.localCache[m]=JSON.stringify(O),O})()}_remove(m){var I=()=>super._remove,M=this;return(0,d.Z)(function*(){yield I().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),hr=(()=>{class v extends ep{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let qu=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(O=>O.isListeningto(m));if(I)return I;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,d.Z)(function*(){const M=m,{eventId:O,eventType:Z,data:le}=M.data,Be=I.handlersMap[Z];if(!Be?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Z});const Xe=Array.from(Be).map(function(){var tn=(0,d.Z)(function*(ui){return ui(M.origin,le)});return function(ui){return tn.apply(this,arguments)}}()),Et=yield function np(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(Xe);M.ports[0].postMessage({status:"done",eventId:O,eventType:Z,response:Et})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Qr(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class rp{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var M=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Z,le;return new Promise((Be,Xe)=>{const Et=Qr("",20);O.port1.start();const tn=setTimeout(()=>{Xe(new Error("unsupported_event"))},I);le={messageChannel:O,onMessage(ui){const hc=ui;if(hc.data.eventId===Et)switch(hc.data.status){case"ack":clearTimeout(tn),Z=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Be(hc.data.response);break;default:clearTimeout(tn),clearTimeout(Z),Xe(new Error("invalid_response"))}}},M.handlers.add(le),O.port1.addEventListener("message",le.onMessage),M.target.postMessage({eventType:p,eventId:Et,data:m},[O.port2])}).finally(()=>{le&&M.removeMessageHandler(le)})})()}}function Wn(){return window}function qd(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function Or(){return(Or=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const kn="firebaseLocalStorageDb",fr="firebaseLocalStorage",Il="fbase_key";class Ga{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ku(v,p){return v.transaction([fr],p?"readwrite":"readonly").objectStore(fr)}function Wa(){const v=indexedDB.open(kn,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(fr,{keyPath:Il})}catch(M){m(M)}}),v.addEventListener("success",(0,d.Z)(function*(){const I=v.result;I.objectStoreNames.contains(fr)?p(I):(I.close(),yield function Kd(){const v=indexedDB.deleteDatabase(kn);return new Ga(v).toPromise()}(),p(yield Wa()))}))})}function Yu(v,p,m){return ro.apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(v,p,m){const I=Ku(v,!0).put({[Il]:p,value:m});return new Ga(I).toPromise()})).apply(this,arguments)}function oa(){return(oa=(0,d.Z)(function*(v,p){const m=Ku(v,!1).get(p),I=yield new Ga(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Qu(v,p){const m=Ku(v,!0).delete(p);return new Ga(m).toPromise()}const Yd=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Wa()),m.db})()}_withRetries(m){var I=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const O=yield I._openDb();return yield m(O)}catch(O){if(M++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return qd()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=qu._getInstance(function Zu(){return qd()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(M,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(M,O){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var I,M;if(m.activeServiceWorker=yield function Zd(){return Or.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new rp(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);O&&null!==(I=O[0])&&void 0!==I&&I.fulfilled&&null!==(M=O[0])&&void 0!==M&&M.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function fs(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Wa();return yield Yu(m,za,"1"),yield Qu(m,za),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(O=>Yu(O,m,I)),M.localCache[m]=I,M.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,d.Z)(function*(){const M=yield I._withRetries(O=>function io(v,p){return oa.apply(this,arguments)}(O,m));return I.localCache[m]=M,M})()}_remove(m){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(M=>Qu(M,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const I=yield m._withRetries(Z=>{const le=Ku(Z,!1).getAll();return new Ga(le).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Z,value:le}of I)O.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(le)&&(m.notifyListeners(Z,le),M.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!O.has(Z)&&(m.notifyListeners(Z,null),M.push(Z));return M})()}notifyListeners(m,I){this.localCache[m]=I;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Mn=1e12;class Xd{constructor(p){this.auth=p,this.counter=Mn,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new ip(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||Mn;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Mn))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var I;return null===(I=m._widgets.get(p||Mn))||void 0===I||I.execute(),""})()}}class ip{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;ee(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eh(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const th=Ks("rcb"),nh=new we(3e4,6e4);class qa{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Wn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ee(function Ro(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Rt(Wn().grecaptcha)?Promise.resolve(Wn().grecaptcha):new Promise((I,M)=>{const O=Wn().setTimeout(()=>{M(Ce(p,"network-request-failed"))},nh.get());Wn()[th]=()=>{Wn().clearTimeout(O),delete Wn()[th];const le=Wn().grecaptcha;if(!le||!Rt(le))return void M(Ce(p,"internal-error"));const Be=le.render;le.render=(Xe,Et)=>{const tn=Be(Xe,Et);return this.counter++,tn},this.hostLanguage=m,I(le)},$n(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:th,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),M(Ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Wn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rh{load(p){return(0,d.Z)(function*(){return new Xd(p)})()}clearedOneInstance(){}}const Xu="recaptcha",Za={theme:"light",type:"image"};class bl{constructor(p,m=Object.assign({},Za),I){this.parameters=m,this.type=Xu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kn(I),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;ee(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rh:new qa,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(O=>{const Z=le=>{le&&(p.tokenChangeListeners.delete(Z),O(le))};p.tokenChangeListeners.add(Z),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Wn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){ee(cr()&&!qd(),p.auth,"internal-error"),yield function ec(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function he(v){return re.apply(this,arguments)}(p.auth);ee(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ln{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Nr._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function oi(v,p,m){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,d.Z)(function*(v,p,m){const I=Kn(v),M=yield Po(I,p,(0,B.m9)(m));return new ln(M,O=>sl(I,O))})).apply(this,arguments)}function oo(v,p,m){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v);yield il(!1,I,"phone");const M=yield Po(I.auth,p,(0,B.m9)(m));return new ln(M,O=>Fu(I,O))})).apply(this,arguments)}function Sl(v,p,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v),M=yield Po(I.auth,p,(0,B.m9)(m));return new ln(M,O=>Wf(I,O))})).apply(this,arguments)}function Po(v,p,m){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,d.Z)(function*(v,p,m){var I;const M=yield m.verify();try{let O;if(ee("string"==typeof M,v,"argument-error"),ee(m.type===Xu,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Z=O.session;if("phoneNumber"in O)return ee("enroll"===Z.type,v,"internal-error"),(yield function _l(v,p){return ot(v,"POST","/v2/accounts/mfaEnrollment:start",Ye(v,p))}(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ee("signin"===Z.type,v,"internal-error");const le=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ee(le,v,"missing-multi-factor-info"),(yield function Qd(v,p){return ot(v,"POST","/v2/accounts/mfaSignIn:start",Ye(v,p))}(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function La(v,p){return Nu.apply(this,arguments)}(v,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Z}}finally{m._reset()}}),Ya.apply(this,arguments)}function Qa(v,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(v,p){yield ds((0,B.m9)(v),p)})).apply(this,arguments)}let Vt=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Kn(m)}verifyPhoneNumber(m,I){return Po(this.auth,m,(0,B.m9)(I))}static credential(m,I){return Nr._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:M}=m;return I&&M?Nr._fromTokenResponse(I,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ao(v,p){return p?rr(p):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class tc extends Na{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return vn(p,this._buildIdpRequest())}_linkToIdToken(p,m){return vn(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return vn(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ai(v){return kd(v.auth,new tc(v),v.bypassAuthState)}function Al(v){const{auth:p,user:m}=v;return ee(m,p,"internal-error"),Gf(m,new tc(v),v.bypassAuthState)}function Ja(v){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(v){const{auth:p,user:m}=v;return ee(m,p,"internal-error"),ds(m,new tc(v),v.bypassAuthState)})).apply(this,arguments)}class Ni{constructor(p,m,I,M,O=!1){this.auth=p,this.resolver=I,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(I,M){p.pendingPromise={resolve:I,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(I,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:O,tenantId:Z,error:le,type:Be}=p;if(le)return void m.reject(le);const Xe={auth:m.auth,requestUri:I,sessionId:M,tenantId:Z||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(Xe))}catch(Et){m.reject(Et)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ai;case"linkViaPopup":case"linkViaRedirect":return Ja;case"reauthViaPopup":case"reauthViaRedirect":return Al;default:te(this.auth,"internal-error")}}resolve(p){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gs=new we(2e3,1e4);function Ji(v,p,m){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,d.Z)(function*(v,p,m){const I=Kn(v);fe(v,p,ls);const M=ao(I,m);return new Oi(I,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function om(v,p,m){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v);fe(I.auth,p,ls);const M=ao(I.auth,m);return new Oi(I.auth,"reauthViaPopup",p,M,I).executeNotNull()})).apply(this,arguments)}function sp(v,p,m){return ms.apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v);fe(I.auth,p,ls);const M=ao(I.auth,m);return new Oi(I.auth,"linkViaPopup",p,M,I).executeNotNull()})).apply(this,arguments)}let Oi=(()=>{class v extends Ni{constructor(m,I,M,O,Z){super(m,I,O,Z),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const I=yield m.execute();return ee(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,d.Z)(function*(){He(1===m.filter.length,"Popup operations only handle one event");const I=Qr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ce(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,gs.get())};m()}}return v.currentPopupAction=null,v})();const Ml="pendingRedirect",Fn=new Map;class Rs extends Ni{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let I=Fn.get(m.auth._key());if(!I){try{const O=(yield function am(v,p){return Xa.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(O)}catch(M){I=()=>Promise.reject(M)}Fn.set(m.auth._key(),I)}return m.bypassAuthState||Fn.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const M=yield I.auth._redirectUserForId(p.eventId);if(M)return I.user=M,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Xa(){return(Xa=(0,d.Z)(function*(v,p){const m=uo(p),I=aa(v);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(m));return yield I._remove(m),M})).apply(this,arguments)}function nc(v,p){return rc.apply(this,arguments)}function rc(){return(rc=(0,d.Z)(function*(v,p){return aa(v)._set(uo(p),"true")})).apply(this,arguments)}function ih(){Fn.clear()}function sh(v,p){Fn.set(v._key(),p)}function aa(v){return rr(v._redirectPersistence)}function uo(v){return Yt(Ml,v.config.apiKey,v.name)}function xl(v,p,m){return function ic(v,p,m){return ko.apply(this,arguments)}(v,p,m)}function ko(){return(ko=(0,d.Z)(function*(v,p,m){const I=Kn(v);fe(v,p,ls),yield I._initializationPromise;const M=ao(I,m);return yield nc(M,I),M._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function Fo(v,p,m){return function oh(v,p,m){return eu.apply(this,arguments)}(v,p,m)}function eu(){return(eu=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v);fe(I.auth,p,ls),yield I.auth._initializationPromise;const M=ao(I.auth,m);yield nc(M,I.auth);const O=yield tu(I);return M._openRedirect(I.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function sc(v,p,m){return function op(v,p,m){return oc.apply(this,arguments)}(v,p,m)}function oc(){return(oc=(0,d.Z)(function*(v,p,m){const I=(0,B.m9)(v);fe(I.auth,p,ls),yield I.auth._initializationPromise;const M=ao(I.auth,m);yield il(!1,I,p.providerId),yield nc(M,I.auth);const O=yield tu(I);return M._openRedirect(I.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function ac(v,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,d.Z)(function*(v,p){return yield Kn(v)._initializationPromise,Ns(v,p,!1)})).apply(this,arguments)}function Ns(v,p){return ki.apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(v,p,m=!1){const I=Kn(v),M=ao(I,p),Z=yield new Rs(I,M,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,p)),Z})).apply(this,arguments)}function tu(v){return ua.apply(this,arguments)}function ua(){return(ua=(0,d.Z)(function*(v){const p=Qr(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class nu{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Rl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uc(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!uc(p)){const M=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Ce(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lo(p))}saveEventToCache(p){this.cachedEventUids.add(Lo(p)),this.lastProcessedEventTime=Date.now()}}function Lo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function uc({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function cc(v){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(v,p={}){return ot(v,"GET","/v1/projects",p)})).apply(this,arguments)}const ca=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,um=/^https?/;function ap(){return(ap=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield cc(v);for(const m of p)try{if(Pl(m))return}catch{}te(v,"unauthorized-domain")})).apply(this,arguments)}function Pl(v){const p=Jt(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===I}if(!um.test(m))return!1;if(ca.test(v))return I===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const En=new we(3e4,6e4);function ru(){const v=Wn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let lc=null;const iu=new we(5e3,15e3),Uo="__/auth/iframe",Ol="emulator/auth/iframe",kl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},up=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tv(v){const p=v.config;ee(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Te(p,Ol):`https://${v.config.authDomain}/${Uo}`,I={apiKey:p.apiKey,appName:v.name,v:P.SDK_VERSION},M=up.get(v.config.apiHost);M&&(I.eid=M);const O=v._getFrameworks();return O.length&&(I.fw=O.join(",")),`${m}?${(0,B.xO)(I).slice(1)}`}function cp(){return cp=(0,d.Z)(function*(v){const p=yield function ir(v){return lc=lc||function co(v){return new Promise((p,m)=>{var I,M,O;function Z(){ru(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ru(),m(Ce(v,"network-request-failed"))},timeout:En.get()})}if(null!==(M=null===(I=Wn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Wn().gapi)||void 0===O||!O.load){const le=Ks("iframefcb");return Wn()[le]=()=>{gapi.load?Z():m(Ce(v,"network-request-failed"))},$n(`https://apis.google.com/js/api.js?onload=${le}`).catch(Be=>m(Be))}Z()}}).catch(p=>{throw lc=null,p})}(v),lc}(v),m=Wn().gapi;return ee(m,v,"internal-error"),p.open({where:document.body,url:tv(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kl,dontclear:!0},I=>new Promise(function(){var M=(0,d.Z)(function*(O,Z){yield I.restyle({setHideOnLeave:!1});const le=Ce(v,"network-request-failed"),Be=Wn().setTimeout(()=>{Z(le)},iu.get());function Xe(){Wn().clearTimeout(Be),O(I)}I.ping(Xe).then(Xe,()=>{Z(le)})});return function(O,Z){return M.apply(this,arguments)}}()))}),cp.apply(this,arguments)}const E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Y{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const je="__/auth/handler",ct="emulator/auth/handler",Ot=encodeURIComponent("fac");function St(v,p,m,I,M,O){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(v,p,m,I,M,O){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:P.SDK_VERSION,eventId:M};if(p instanceof ls){p.setDefaultLanguage(v.languageCode),Z.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(Z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Et,tn]of Object.entries(O||{}))Z[Et]=tn}if(p instanceof To){const Et=p.getScopes().filter(tn=>""!==tn);Et.length>0&&(Z.scopes=Et.join(","))}v.tenantId&&(Z.tid=v.tenantId);const le=Z;for(const Et of Object.keys(le))void 0===le[Et]&&delete le[Et];const Be=yield v._getAppCheckToken(),Xe=Be?`#${Ot}=${encodeURIComponent(Be)}`:"";return`${function sr({config:v}){return v.emulator?Te(v,ct):`https://${v.authDomain}/${je}`}(v)}?${(0,B.xO)(le).slice(1)}${Xe}`})).apply(this,arguments)}const ys="webStorageSupport",_s=class dc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hr,this._completeRedirectFn=Ns,this._overrideRedirectResult=sh}_openPopup(p,m,I,M){var O=this;return(0,d.Z)(function*(){var Z;He(null===(Z=O.eventManagers[p._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const le=yield St(p,m,I,Jt(),M);return function de(v,p,m,I=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let le="";const Be=Object.assign(Object.assign({},E),{width:I.toString(),height:M.toString(),top:O,left:Z}),Xe=(0,B.z$)().toLowerCase();m&&(le=N(Xe)?"_blank":m),k(Xe)&&(p=p||"http://localhost",Be.scrollbars="yes");const Et=Object.entries(Be).reduce((ui,[hc,gp])=>`${ui}${hc}=${gp},`,"");if(function xt(v=(0,B.z$)()){var p;return yt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Xe)&&"_self"!==le)return function ze(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",le),new Y(null);const tn=window.open(p||"",le,Et);ee(tn,v,"popup-blocked");try{tn.focus()}catch{}return new Y(tn)}(p,le,Qr())})()}_openRedirect(p,m,I,M){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(p),function El(v){Wn().location.href=v}(yield St(p,m,I,Jt(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:O}=this.eventManagers[m];return M?Promise.resolve(M):(He(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const I=yield function cm(v){return cp.apply(this,arguments)}(p),M=new nu(p);return I.register("authEvent",O=>(ee(O?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=I,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(ys,{type:ys},M=>{var O;const Z=null===(O=M?.[0])||void 0===O?void 0:O[ys];void 0!==Z&&m(!!Z),te(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Nl(v){return ap.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Lt()||F()||yt()}};class Ei{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return et("unexpected MultiFactorSessionType")}}}class vs extends Ei{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new vs(p)}_finalizeEnroll(p,m,I){return function Gd(v,p){return ot(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Jd(v,p){return ot(v,"POST","/v2/accounts/mfaSignIn:finalize",Ye(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fl=(()=>{class v{constructor(){}static assertion(m){return vs._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var lo="@firebase/auth";class ah{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pp=(0,B.Pz)("authIdTokenMaxAge")||300;let dm=null;const nv=v=>function(){var p=(0,d.Z)(function*(m){const I=m&&(yield m.getIdTokenResult()),M=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(M&&M>pp)return;const O=I?.token;dm!==O&&(dm=O,yield fetch(v,{method:O?"POST":"DELETE",headers:O?{Authorization:`Bearer ${O}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function hm(v=(0,P.getApp)()){const p=(0,P._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const m=function us(v,p){const m=(0,P._getProvider)(v,"auth");if(m.isInitialized()){const M=m.getImmediate(),O=m.getOptions();if((0,B.vZ)(O,p??{}))return M;te(M,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:_s,persistence:[Yd,wl,hr]}),I=(0,B.Pz)("authTokenSyncURL");if(I){const O=nv(I);(function Hd(v,p,m){(0,B.m9)(v).beforeAuthStateChanged(p,m)})(m,O,()=>O(m.currentUser)),function Jf(v,p,m,I){(0,B.m9)(v).onIdTokenChanged(p,m,I)}(m,Z=>O(Z))}const M=(0,B.q4)("auth");return M&&Md(m,`http://${M}`),m}!function lm(v){(0,P._registerComponent)(new pe.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:Z,authDomain:le}=I.options;ee(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Be={apiKey:Z,authDomain:le,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xr(v)},Xe=new Ra(I,M,O,Be);return function Xg(v,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(rr);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,p?.popupRedirectResolver)}(Xe,m),Xe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new pe.wA("auth-internal",p=>{const m=Kn(p.getProvider("auth").getImmediate());return new ah(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(lo,"0.23.2",function hp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,P.registerVersion)(lo,"0.23.2","esm2017")}("Browser")},9058:(pt,De,L)=>{L.d(De,{$s:()=>rr,BH:()=>se,G6:()=>Te,L:()=>ge,LL:()=>Rn,P0:()=>lt,Pz:()=>Ce,Sg:()=>fe,UG:()=>et,US:()=>pe,ZB:()=>ne,ZR:()=>ot,aH:()=>te,b$:()=>cr,eu:()=>$e,hl:()=>Oe,jU:()=>He,m9:()=>Yt,ne:()=>Kt,pd:()=>dt,q4:()=>vt,r3:()=>Bn,ru:()=>Jt,tV:()=>$,uI:()=>ee,vZ:()=>Ar,w1:()=>Ts,xO:()=>os,xb:()=>Eo,z$:()=>Ne,zI:()=>Ve,zd:()=>Ke});const J=function(z){const j=[];let k=0;for(let F=0;F<z.length;F++){let N=z.charCodeAt(F);N<128?j[k++]=N:N<2048?(j[k++]=N>>6|192,j[k++]=63&N|128):55296==(64512&N)&&F+1<z.length&&56320==(64512&z.charCodeAt(F+1))?(N=65536+((1023&N)<<10)+(1023&z.charCodeAt(++F)),j[k++]=N>>18|240,j[k++]=N>>12&63|128,j[k++]=N>>6&63|128,j[k++]=63&N|128):(j[k++]=N>>12|224,j[k++]=N>>6&63|128,j[k++]=63&N|128)}return j},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,j){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let N=0;N<z.length;N+=3){const X=z[N],ve=N+1<z.length,We=ve?z[N+1]:0,wt=N+2<z.length,yt=wt?z[N+2]:0;let _n=(15&We)<<2|yt>>6,Lt=63&yt;wt||(Lt=64,ve||(_n=64)),F.push(k[X>>2],k[(3&X)<<4|We>>4],k[_n],k[Lt])}return F.join("")},encodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(z):this.encodeByteArray(J(z),j)},decodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(z):function(z){const j=[];let k=0,F=0;for(;k<z.length;){const N=z[k++];if(N<128)j[F++]=String.fromCharCode(N);else if(N>191&&N<224){const X=z[k++];j[F++]=String.fromCharCode((31&N)<<6|63&X)}else if(N>239&&N<365){const wt=((7&N)<<18|(63&z[k++])<<12|(63&z[k++])<<6|63&z[k++])-65536;j[F++]=String.fromCharCode(55296+(wt>>10)),j[F++]=String.fromCharCode(56320+(1023&wt))}else{const X=z[k++],ve=z[k++];j[F++]=String.fromCharCode((15&N)<<12|(63&X)<<6|63&ve)}}return j.join("")}(this.decodeStringToByteArray(z,j))},decodeStringToByteArray(z,j){this.init_();const k=j?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let N=0;N<z.length;){const X=k[z.charAt(N++)],We=N<z.length?k[z.charAt(N)]:0;++N;const yt=N<z.length?k[z.charAt(N)]:64;++N;const xt=N<z.length?k[z.charAt(N)]:64;if(++N,null==X||null==We||null==yt||null==xt)throw new _e;F.push(X<<2|We>>4),64!==yt&&(F.push(We<<4&240|yt>>2),64!==xt&&F.push(yt<<6&192|xt))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(z){return function(z){const j=J(z);return pe.encodeByteArray(j,!0)}(z).replace(/\./g,"")},$=function(z){try{return pe.decodeString(z,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function ne(z,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return j}for(const k in j)!j.hasOwnProperty(k)||!ke(k)||(z[k]=ne(z[k],j[k]));return z}function ke(z){return"__proto__"!==z}const Pe=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=z&&$(z[1]);return j&&JSON.parse(j)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},vt=z=>{var j,k;return null===(k=null===(j=Pe())||void 0===j?void 0:j.emulatorHosts)||void 0===k?void 0:k[z]},lt=z=>{const j=vt(z);if(!j)return;const k=j.lastIndexOf(":");if(k<=0||k+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const F=parseInt(j.substring(k+1),10);return"["===j[0]?[j.substring(1,k-1),F]:[j.substring(0,k),F]},te=()=>{var z;return null===(z=Pe())||void 0===z?void 0:z.config},Ce=z=>{var j;return null===(j=Pe())||void 0===j?void 0:j[`_${z}`]};class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,k)=>{this.resolve=j,this.reject=k})}wrapCallback(j){return(k,F)=>{k?this.reject(k):this.resolve(F),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(k):j(k,F))}}}function fe(z,j){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=j||"demo-project",N=z.iat||0,X=z.sub||z.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ve=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:N,exp:N+3600,auth_time:N,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(ve)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ee(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function et(){var z;const j=null===(z=Pe())||void 0===z?void 0:z.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return"object"==typeof self&&self.self===self}function Jt(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function cr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ts(){const z=Ne();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Te(){return!et()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function $e(){return new Promise((z,j)=>{try{let k=!0;const F="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(F);N.onsuccess=()=>{N.result.close(),k||self.indexedDB.deleteDatabase(F),z(!0)},N.onupgradeneeded=()=>{k=!1},N.onerror=()=>{var X;j((null===(X=N.error)||void 0===X?void 0:X.message)||"")}}catch(k){j(k)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ot extends Error{constructor(j,k,F){super(k),this.code=j,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rn.prototype.create)}}class Rn{constructor(j,k,F){this.service=j,this.serviceName=k,this.errors=F}create(j,...k){const F=k[0]||{},N=`${this.service}/${j}`,X=this.errors[j],ve=X?function tt(z,j){return z.replace(gt,(k,F)=>{const N=j[F];return null!=N?String(N):`<${F}?>`})}(X,F):"Error";return new ot(N,`${this.serviceName}: ${ve} (${N}).`,F)}}const gt=/\{\$([^}]+)}/g;function Bn(z,j){return Object.prototype.hasOwnProperty.call(z,j)}function Eo(z){for(const j in z)if(Object.prototype.hasOwnProperty.call(z,j))return!1;return!0}function Ar(z,j){if(z===j)return!0;const k=Object.keys(z),F=Object.keys(j);for(const N of k){if(!F.includes(N))return!1;const X=z[N],ve=j[N];if(jn(X)&&jn(ve)){if(!Ar(X,ve))return!1}else if(X!==ve)return!1}for(const N of F)if(!k.includes(N))return!1;return!0}function jn(z){return null!==z&&"object"==typeof z}function os(z){const j=[];for(const[k,F]of Object.entries(z))Array.isArray(F)?F.forEach(N=>{j.push(encodeURIComponent(k)+"="+encodeURIComponent(N))}):j.push(encodeURIComponent(k)+"="+encodeURIComponent(F));return j.length?"&"+j.join("&"):""}function Ke(z){const j={};return z.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[N,X]=F.split("=");j[decodeURIComponent(N)]=decodeURIComponent(X)}}),j}function dt(z){const j=z.indexOf("?");if(!j)return"";const k=z.indexOf("#",j);return z.substring(j,k>0?k:void 0)}function Kt(z,j){const k=new nr(z,j);return k.subscribe.bind(k)}class nr{constructor(j,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{j(this)}).catch(F=>{this.error(F)})}next(j){this.forEachObserver(k=>{k.next(j)})}error(j){this.forEachObserver(k=>{k.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,k,F){let N;if(void 0===j&&void 0===k&&void 0===F)throw new Error("Missing Observer.");N=function Wt(z,j){if("object"!=typeof z||null===z)return!1;for(const k of j)if(k in z&&"function"==typeof z[k])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:k,complete:F},void 0===N.next&&(N.next=qn),void 0===N.error&&(N.error=qn),void 0===N.complete&&(N.complete=qn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),X}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,j)}sendOne(j,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{k(this.observers[j])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qn(){}const Hn=1e3,Cn=2,Zn=144e5,Nn=.5;function rr(z,j=Hn,k=Cn){const F=j*Math.pow(k,z),N=Math.round(Nn*F*(Math.random()-.5)*2);return Math.min(Zn,F+N)}function Yt(z){return z&&z._delegate?z._delegate:z}},9420:(pt,De,L)=>{var d=L(5879);let B=null;function P(){return B}class ie{}const pe=new d.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(ge)},providedIn:"platform"}),n})();const Ae=new d.OlP("Location Initialized");let ge=(()=>{class n extends _e{constructor(){super(),this._doc=(0,d.f3M)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function $(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let ke=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(qe)},providedIn:"root"}),n})();const Me=new d.OlP("appBaseHref");let qe=(()=>{class n extends ke{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+ne(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+ne(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e),d.LFG(Me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends ke{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e),d.LFG(Me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function te(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(lt(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ne(r))}normalize(t){return n.stripTrailingSlash(function vt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=ne,n.joinWithSlash=$,n.stripTrailingSlash=G,n.\u0275fac=function(t){return new(t||n)(d.LFG(ke))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Pe(){return new Ze((0,d.LFG)(ke))}()},providedIn:"root"}),n})();function lt(n){return n.replace(/\/index.html$/,"")}var Ne=(()=>((Ne=Ne||{})[Ne.Format=0]="Format",Ne[Ne.Standalone=1]="Standalone",Ne))(),ee=(()=>((ee=ee||{})[ee.Narrow=0]="Narrow",ee[ee.Abbreviated=1]="Abbreviated",ee[ee.Wide=2]="Wide",ee[ee.Short=3]="Short",ee))(),et=(()=>((et=et||{})[et.Short=0]="Short",et[et.Medium=1]="Medium",et[et.Long=2]="Long",et[et.Full=3]="Full",et))(),He=(()=>((He=He||{})[He.Decimal=0]="Decimal",He[He.Group=1]="Group",He[He.List=2]="List",He[He.PercentSign=3]="PercentSign",He[He.PlusSign=4]="PlusSign",He[He.MinusSign=5]="MinusSign",He[He.Exponential=6]="Exponential",He[He.SuperscriptingExponent=7]="SuperscriptingExponent",He[He.PerMille=8]="PerMille",He[He.Infinity=9]="Infinity",He[He.NaN=10]="NaN",He[He.TimeSeparator=11]="TimeSeparator",He[He.CurrencyDecimal=12]="CurrencyDecimal",He[He.CurrencyGroup=13]="CurrencyGroup",He))();function $e(n,e){return Bn((0,d.cg1)(n)[d.wAp.DateFormat],e)}function Ve(n,e){return Bn((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function Ye(n,e){return Bn((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function ot(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===He.CurrencyDecimal)return t[d.wAp.NumberSymbols][He.Decimal];if(e===He.CurrencyGroup)return t[d.wAp.NumberSymbols][He.Group]}return r}function Xt(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Ai(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const jn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Wr={},os=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ke=(()=>((Ke=Ke||{})[Ke.Short=0]="Short",Ke[Ke.ShortGMT=1]="ShortGMT",Ke[Ke.Long=2]="Long",Ke[Ke.Extended=3]="Extended",Ke))(),dt=(()=>((dt=dt||{})[dt.FullYear=0]="FullYear",dt[dt.Month=1]="Month",dt[dt.Date=2]="Date",dt[dt.Hours=3]="Hours",dt[dt.Minutes=4]="Minutes",dt[dt.Seconds=5]="Seconds",dt[dt.FractionalSeconds=6]="FractionalSeconds",dt[dt.Day=7]="Day",dt))(),Ct=(()=>((Ct=Ct||{})[Ct.DayPeriods=0]="DayPeriods",Ct[Ct.Days=1]="Days",Ct[Ct.Months=2]="Months",Ct[Ct.Eras=3]="Eras",Ct))();function Kt(n,e,t,r){let s=function j(n){if(F(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,u=1,l=1]=n.split("-").map(g=>+g);return nr(s,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(jn))return function k(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,g=Number(n[5]||0)-r,_=Number(n[6]||0),D=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,g,_,D),e}(r)}const e=new Date(n);if(!F(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=ni(t,e)||e;let g,l=[];for(;e;){if(g=os.exec(e),!g){l.push(e);break}{l=l.concat(g.slice(1));const T=l.pop();if(!T)break;e=T}}let _=s.getTimezoneOffset();r&&(_=qr(r,_),s=function z(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function Yt(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(qr(e,s)-s))}(s,r,!0));let D="";return l.forEach(T=>{const x=function Pn(n){if(rr[n])return rr[n];let e;switch(n){case"G":case"GG":case"GGG":e=kt(Ct.Eras,ee.Abbreviated);break;case"GGGG":e=kt(Ct.Eras,ee.Wide);break;case"GGGGG":e=kt(Ct.Eras,ee.Narrow);break;case"y":e=pn(dt.FullYear,1,0,!1,!0);break;case"yy":e=pn(dt.FullYear,2,0,!0,!0);break;case"yyy":e=pn(dt.FullYear,3,0,!1,!0);break;case"yyyy":e=pn(dt.FullYear,4,0,!1,!0);break;case"Y":e=Nn(1);break;case"YY":e=Nn(2,!0);break;case"YYY":e=Nn(3);break;case"YYYY":e=Nn(4);break;case"M":case"L":e=pn(dt.Month,1,1);break;case"MM":case"LL":e=pn(dt.Month,2,1);break;case"MMM":e=kt(Ct.Months,ee.Abbreviated);break;case"MMMM":e=kt(Ct.Months,ee.Wide);break;case"MMMMM":e=kt(Ct.Months,ee.Narrow);break;case"LLL":e=kt(Ct.Months,ee.Abbreviated,Ne.Standalone);break;case"LLLL":e=kt(Ct.Months,ee.Wide,Ne.Standalone);break;case"LLLLL":e=kt(Ct.Months,ee.Narrow,Ne.Standalone);break;case"w":e=Zn(1);break;case"ww":e=Zn(2);break;case"W":e=Zn(1,!0);break;case"d":e=pn(dt.Date,1);break;case"dd":e=pn(dt.Date,2);break;case"c":case"cc":e=pn(dt.Day,1);break;case"ccc":e=kt(Ct.Days,ee.Abbreviated,Ne.Standalone);break;case"cccc":e=kt(Ct.Days,ee.Wide,Ne.Standalone);break;case"ccccc":e=kt(Ct.Days,ee.Narrow,Ne.Standalone);break;case"cccccc":e=kt(Ct.Days,ee.Short,Ne.Standalone);break;case"E":case"EE":case"EEE":e=kt(Ct.Days,ee.Abbreviated);break;case"EEEE":e=kt(Ct.Days,ee.Wide);break;case"EEEEE":e=kt(Ct.Days,ee.Narrow);break;case"EEEEEE":e=kt(Ct.Days,ee.Short);break;case"a":case"aa":case"aaa":e=kt(Ct.DayPeriods,ee.Abbreviated);break;case"aaaa":e=kt(Ct.DayPeriods,ee.Wide);break;case"aaaaa":e=kt(Ct.DayPeriods,ee.Narrow);break;case"b":case"bb":case"bbb":e=kt(Ct.DayPeriods,ee.Abbreviated,Ne.Standalone,!0);break;case"bbbb":e=kt(Ct.DayPeriods,ee.Wide,Ne.Standalone,!0);break;case"bbbbb":e=kt(Ct.DayPeriods,ee.Narrow,Ne.Standalone,!0);break;case"B":case"BB":case"BBB":e=kt(Ct.DayPeriods,ee.Abbreviated,Ne.Format,!0);break;case"BBBB":e=kt(Ct.DayPeriods,ee.Wide,Ne.Format,!0);break;case"BBBBB":e=kt(Ct.DayPeriods,ee.Narrow,Ne.Format,!0);break;case"h":e=pn(dt.Hours,1,-12);break;case"hh":e=pn(dt.Hours,2,-12);break;case"H":e=pn(dt.Hours,1);break;case"HH":e=pn(dt.Hours,2);break;case"m":e=pn(dt.Minutes,1);break;case"mm":e=pn(dt.Minutes,2);break;case"s":e=pn(dt.Seconds,1);break;case"ss":e=pn(dt.Seconds,2);break;case"S":e=pn(dt.FractionalSeconds,1);break;case"SS":e=pn(dt.FractionalSeconds,2);break;case"SSS":e=pn(dt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Wi(Ke.Short);break;case"ZZZZZ":e=Wi(Ke.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Wi(Ke.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Wi(Ke.Long);break;default:return null}return rr[n]=e,e}(T);D+=x?x(s,t,_):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),D}function nr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ni(n,e){const t=function cr(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(Wr[t]=Wr[t]||{},Wr[t][e])return Wr[t][e];let r="";switch(e){case"shortDate":r=$e(n,et.Short);break;case"mediumDate":r=$e(n,et.Medium);break;case"longDate":r=$e(n,et.Long);break;case"fullDate":r=$e(n,et.Full);break;case"shortTime":r=Ve(n,et.Short);break;case"mediumTime":r=Ve(n,et.Medium);break;case"longTime":r=Ve(n,et.Long);break;case"fullTime":r=Ve(n,et.Full);break;case"short":const s=ni(n,"shortTime"),u=ni(n,"shortDate");r=Wt(Ye(n,et.Short),[s,u]);break;case"medium":const l=ni(n,"mediumTime"),g=ni(n,"mediumDate");r=Wt(Ye(n,et.Medium),[l,g]);break;case"long":const _=ni(n,"longTime"),D=ni(n,"longDate");r=Wt(Ye(n,et.Long),[_,D]);break;case"full":const T=ni(n,"fullTime"),x=ni(n,"fullDate");r=Wt(Ye(n,et.Full),[T,x])}return r&&(Wr[t][e]=r),r}function Wt(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function qn(n,e,t="-",r,s){let u="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function pn(n,e,t=0,r=!1,s=!1){return function(u,l){let g=function Ur(n,e){switch(n){case dt.FullYear:return e.getFullYear();case dt.Month:return e.getMonth();case dt.Date:return e.getDate();case dt.Hours:return e.getHours();case dt.Minutes:return e.getMinutes();case dt.Seconds:return e.getSeconds();case dt.FractionalSeconds:return e.getMilliseconds();case dt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||g>-t)&&(g+=t),n===dt.Hours)0===g&&-12===t&&(g=12);else if(n===dt.FractionalSeconds)return function as(n,e){return qn(n,3).substring(0,e)}(g,e);const _=ot(l,He.MinusSign);return qn(g,e,_,r,s)}}function kt(n,e,t=Ne.Format,r=!1){return function(s,u){return function Un(n,e,t,r,s,u){switch(t){case Ct.Months:return function ae(n,e,t){const r=(0,d.cg1)(n),u=Bn([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return Bn(u,t)}(e,s,r)[n.getMonth()];case Ct.Days:return function Ts(n,e,t){const r=(0,d.cg1)(n),u=Bn([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return Bn(u,t)}(e,s,r)[n.getDay()];case Ct.DayPeriods:const l=n.getHours(),g=n.getMinutes();if(u){const D=function lr(n){const e=(0,d.cg1)(n);return Xt(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ai(r):[Ai(r[0]),Ai(r[1])])}(e),T=function dr(n,e,t){const r=(0,d.cg1)(n);Xt(r);const u=Bn([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return Bn(u,t)||[]}(e,s,r),x=D.findIndex(H=>{if(Array.isArray(H)){const[K,ue]=H,ye=l>=K.hours&&g>=K.minutes,me=l<ue.hours||l===ue.hours&&g<ue.minutes;if(K.hours<ue.hours){if(ye&&me)return!0}else if(ye||me)return!0}else if(H.hours===l&&H.minutes===g)return!0;return!1});if(-1!==x)return T[x]}return function Gr(n,e,t){const r=(0,d.cg1)(n),u=Bn([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return Bn(u,t)}(e,s,r)[l<12?0:1];case Ct.Eras:return function we(n,e){return Bn((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,u,n,e,t,r)}}function Wi(n){return function(e,t,r){const s=-1*r,u=ot(t,He.MinusSign),l=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case Ke.Short:return(s>=0?"+":"")+qn(l,2,u)+qn(Math.abs(s%60),2,u);case Ke.ShortGMT:return"GMT"+(s>=0?"+":"")+qn(l,1,u);case Ke.Long:return"GMT"+(s>=0?"+":"")+qn(l,2,u)+":"+qn(Math.abs(s%60),2,u);case Ke.Extended:return 0===r?"Z":(s>=0?"+":"")+qn(l,2,u)+":"+qn(Math.abs(s%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}const Ss=0,Mr=4;function Cn(n){return nr(n.getFullYear(),n.getMonth(),n.getDate()+(Mr-n.getDay()))}function Zn(n,e=!1){return function(t,r){let s;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();s=1+Math.floor((l+u)/7)}else{const u=Cn(t),l=function Hn(n){const e=nr(n,Ss,1).getDay();return nr(n,0,1+(e<=Mr?Mr:Mr+7)-e)}(u.getFullYear()),g=u.getTime()-l.getTime();s=1+Math.round(g/6048e5)}return qn(s,n,ot(r,He.MinusSign))}}function Nn(n,e=!1){return function(t,r){return qn(Cn(t).getFullYear(),n,ot(r,He.MinusSign),e)}}const rr={};function qr(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function F(n){return n instanceof Date&&!isNaN(n.valueOf())}function Io(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class Bf{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ra=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Bf(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),Kn(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Kn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Kn(n,e){n.context.$implicit=e.item}let us=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Md("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Md("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Xg{constructor(){this.$implicit=null,this.ngIf=null}}function Md(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function Ut(n,e){return new d.vHH(2100,!1)}let Fa=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Ut();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})();const it=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Pt=new d.OlP("DATE_PIPE_DEFAULT_OPTIONS");let An=(()=>{class n{constructor(t,r,s){this.locale=t,this.defaultTimezone=r,this.defaultOptions=s}transform(t,r,s,u){if(null==t||""===t||t!=t)return null;try{return Kt(t,r??this.defaultOptions?.dateFormat??"mediumDate",u||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw Ut()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(it,24),d.Y36(Pt,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),cs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Zi(n){return"server"===n}let To=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new vi((0,d.LFG)(pe),window)}),n})();class vi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Xo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=So(this.window.history)||So(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function So(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Pr{}class ra extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jr extends ra{static makeCurrent(){!function J(n){B||(B=n)}(new jr)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jd(){return ia=ia||document.querySelector("base"),ia?ia.getAttribute("href"):null}();return null==t?null:function xi(n){no=no||document.createElement("a"),no.setAttribute("href",n);const e=no.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Io(document.cookie,e)}}let no,ia=null,Hd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $d=new d.OlP("EventManagerPlugins");let hs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($d),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class zd{constructor(e){this._doc=e}}const yl="ng-app-id";let $u=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zi(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${yl}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(yl),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(yl,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ri=/%COMP%/g,rm=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function $a(n,e){return e.map(t=>t.replace(Ri,n))}let Qi=(()=>{class n{constructor(t,r,s,u,l,g,_,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=Zi(g),this.defaultRenderer=new Gu(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof en?s.applyToHost(t):s instanceof Se&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,D=this.sharedStylesHost,T=this.removeStylesOnCompDestory,x=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:u=new en(_,D,r,this.appId,T,l,g,x);break;case d.ifc.ShadowDom:return new tp(_,D,t,r,l,g,this.nonce,x);default:u=new Se(_,D,r,T,l,g,x)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hs),d.LFG($u),d.LFG(d.AFp),d.LFG(rm),d.LFG(pe),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Gu{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sa[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=sa[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=sa[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,s&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Wd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class tp extends Gu{constructor(e,t,r,s,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=$a(s.id,s.styles);for(const T of D){const x=document.createElement("style");g&&x.setAttribute("nonce",g),x.textContent=T,this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Se extends Gu{constructor(e,t,r,s,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=_?$a(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class en extends Se{constructor(e,t,r,s,u,l,g,_){const D=s+"-"+r.id;super(e,t,r,u,l,g,_,D),this.contentAttr=function vl(n){return"_ngcontent-%COMP%".replace(Ri,n)}(D),this.hostAttr=function Xf(n){return"_nghost-%COMP%".replace(Ri,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let wl=(()=>{class n extends zd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wu=["alt","control","meta","shift"],hr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},np={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qu=(()=>{class n extends zd{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Wu.forEach(D=>{const T=r.indexOf(D);T>-1&&(r.splice(T,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let s=hr[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Wu.forEach(l=>{l!==s&&(0,np[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Zu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function qd(){jr.makeCurrent()},multi:!0},{provide:pe,useFactory:function Or(){return(0,d.RDi)(document),document},deps:[]}]),kn=new d.OlP(""),ps=[{provide:d.rWj,useClass:class Jf{addToWindow(e){d.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new d.vHH(5103,!1);return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const s=d.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],fr=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Zd(){return new d.qLn},deps:[]},{provide:$d,useClass:wl,multi:!0,deps:[pe,d.R0b,d.Lbi]},{provide:$d,useClass:qu,multi:!0,deps:[pe]},Qi,$u,hs,{provide:d.FYo,useExisting:Qi},{provide:Pr,useClass:Hd,deps:[]},[]];let Il=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kn,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...fr,...ps],imports:[cs,d.hGG]}),n})(),Yu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wa(){return new Yu((0,d.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=L(2459),oi=L(5592);const{isArray:Tl}=Array,{getPrototypeOf:oo,prototype:No,keys:Sl}=Object;function Ka(n){if(1===n.length){const e=n[0];if(Tl(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&oo(n)===No}(e)){const t=Sl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ya=L(4829),Qa=L(4564),kr=L(8251),Vt=L(7398);const{isArray:ao}=Array;function ai(n){return(0,Vt.U)(e=>function tc(n,e){return ao(e)?n(...e):n(e)}(n,e))}function Al(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let xs=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Ni=(()=>{class n extends xs{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const gs=new d.OlP("NgValueAccessor"),om={provide:gs,useExisting:(0,d.Gpc)(()=>ms),multi:!0},sp=new d.OlP("CompositionEventMode");let ms=(()=>{class n extends xs{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pi(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(sp,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([om]),d.qOj]}),n})();function Oi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Ml(n){return null!=n&&"number"==typeof n.length}const Fn=new d.OlP("NgValidators"),Rs=new d.OlP("NgAsyncValidators"),am=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ih(n){return Oi(n.value)?{required:!0}:null}function aa(n){return Oi(n.value)||am.test(n.value)?null:{email:!0}}function ko(n){return null}function Fo(n){return null!=n}function oh(n){return(0,d.QGY)(n)?(0,ln.D)(n):n}function eu(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sc(n,e){return e.map(t=>t(n))}function oc(n){return n.map(e=>function op(n){return!n.validate}(e)?e:t=>e.validate(t))}function Xi(n){return null!=n?function ac(n){if(!n)return null;const e=n.filter(Fo);return 0==e.length?null:function(t){return eu(sc(t,e))}}(oc(n)):null}function ki(n){return null!=n?function Ns(n){if(!n)return null;const e=n.filter(Fo);return 0==e.length?null:function(t){return function Ja(...n){const e=(0,Qa.jO)(n),{args:t,keys:r}=Ka(n),s=new oi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,D=l;for(let T=0;T<l;T++){let x=!1;(0,Ya.Xf)(t[T]).subscribe((0,kr.x)(u,H=>{x||(x=!0,D--),g[T]=H},()=>_--,void 0,()=>{(!_||!x)&&(D||u.next(r?Al(r,g):g),u.complete())}))}});return e?s.pipe(ai(e)):s}(sc(t,e).map(oh)).pipe((0,Vt.U)(eu))}}(oc(n)):null}function tu(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nu(n){return n?Array.isArray(n)?n:[n]:[]}function Lo(n,e){return Array.isArray(n)?n.includes(e):n===e}function uc(n,e){const t=nu(e);return nu(n).forEach(s=>{Lo(t,s)||t.push(s)}),t}function Rl(n,e){return nu(e).filter(t=>!Lo(n,t))}class cc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xi(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ki(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ir extends cc{get formDirective(){return null}get path(){return null}}class ca extends cc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class um{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Pl=(()=>{class n extends um{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ca,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),En=(()=>{class n extends um{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ir,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Y="VALID",de="INVALID",ze="PENDING",je="DISABLED";function ct(n){return(sr(n)?n.validators:n)||null}function St(n,e){return(sr(e)?e.asyncValidators:n)||null}function sr(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class _s{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Y}get invalid(){return this.status===de}get pending(){return this.status==ze}get disabled(){return this.status===je}get enabled(){return this.status!==je}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Rl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Rl(e,this._rawAsyncValidators))}hasValidator(e){return Lo(this._rawValidators,e)}hasAsyncValidator(e){return Lo(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ze,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=je,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Y,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Y||this.status===ze)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?je:Y}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ze,this._hasOwnPendingAsyncValidator=!0;const t=oh(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?je:this.errors?de:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ze)?ze:this._anyControlsHaveStatus(de)?de:Y}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sr(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ot(n){return Array.isArray(n)?Xi(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Fr(n){return Array.isArray(n)?ki(n):n||null}(this._rawAsyncValidators)}}class Ei extends _s{constructor(e,t,r){super(ct(t),St(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function dc(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function ys(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const su=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ou}),ou="always";function ho(n,e,t=ou){fp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function dm(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hm(n,e)})}(n,e),function v(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function nv(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hm(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lm(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fp(n,e){const t=function ua(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(tu(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Ps(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(tu(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();hp(e._rawValidators,s),hp(e._rawAsyncValidators,s)}function hm(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const gp={provide:Ir,useExisting:(0,d.Gpc)(()=>au)},Ll=(()=>Promise.resolve())();let au=(()=>{class n extends Ir{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Ei({},Xi(t),ki(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ll.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ho(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ll.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ll.then(()=>{const r=this._findContainer(t.path),s=new Ei({});(function p(n,e){fp(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ll.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ll.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Et(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Fn,10),d.Y36(Rs,10),d.Y36(su,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([gp]),d.qOj]}),n})();function fm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function mp(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const uu=class extends _s{constructor(e=null,t,r){super(ct(t),St(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sr(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=mp(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},la={provide:ca,useExisting:(0,d.Gpc)(()=>Ep)},vE=(()=>Promise.resolve())();let Ep=(()=>{class n extends ca{constructor(t,r,s,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new uu,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function tn(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===ms?t=u:function Xe(n){return Object.getPrototypeOf(n.constructor)===Ni}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Be(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ho(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){vE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,d.VuI)(r);vE.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function lo(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ir,9),d.Y36(Fn,10),d.Y36(Rs,10),d.Y36(gs,10),d.Y36(d.sBO,8),d.Y36(su,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([la]),d.qOj,d.TTD]}),n})(),mm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),EE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function sv(n){return"number"==typeof n?n:parseInt(n,10)}let da=(()=>{class n{constructor(){this._validator=ko}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ko,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const vT={provide:Fn,useExisting:(0,d.Gpc)(()=>Cp),multi:!0};let Cp=(()=>{class n extends da{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.VuI,this.createValidator=t=>ih}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([vT]),d.qOj]}),n})();const ET={provide:Fn,useExisting:(0,d.Gpc)(()=>bm),multi:!0};let bm=(()=>{class n extends da{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=d.VuI,this.createValidator=t=>aa}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[d._Bn([ET]),d.qOj]}),n})();const ov={provide:Fn,useExisting:(0,d.Gpc)(()=>Tm),multi:!0};let Tm=(()=>{class n extends da{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>sv(t),this.createValidator=t=>function uo(n){return e=>Oi(e.value)||!Ml(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[d._Bn([ov]),d.qOj]}),n})();const av={provide:Fn,useExisting:(0,d.Gpc)(()=>uv),multi:!0};let uv=(()=>{class n extends da{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>sv(t),this.createValidator=t=>function xl(n){return e=>Ml(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[d._Bn([av]),d.qOj]}),n})(),kE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[EE]}),n})(),LE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:su,useValue:t.callSetDisabledState??ou}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[kE]}),n})();var Hr=L(6304),lh=L(4674),bt=L(2096),ws=L(5619),dh=L(2737),Dp=L(7103);function hv(...n){const e=(0,Qa.yG)(n),t=(0,Qa.jO)(n),{args:r,keys:s}=Ka(n);if(0===r.length)return(0,ln.D)([],e);const u=new oi.y(function UE(n,e,t=dh.y){return r=>{VE(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let _=0;_<s;_++)VE(e,()=>{const D=(0,ln.D)(n[_],e);let T=!1;D.subscribe((0,kr.x)(r,x=>{u[_]=x,T||(T=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Al(s,l):dh.y));return t?u.pipe(ai(t)):u}function VE(n,e,t){n?(0,Dp.f)(t,n,e):e()}const Am=(0,L(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var hh=L(7537);function fh(...n){return function BE(){return(0,hh.J)(1)}()((0,ln.D)(n,(0,Qa.yG)(n)))}function Mm(n){return new oi.y(e=>{(0,Ya.Xf)(n()).subscribe(e)})}var ph=L(8407);function Hl(n,e){const t=(0,lh.m)(n)?n:()=>n,r=s=>s.error(t());return new oi.y(e?s=>e.schedule(r,0,s):r)}var fc=L(6232),xT=L(7394),Os=L(9360);function bp(){return(0,Os.e)((n,e)=>{let t=null;n._refCount++;const r=(0,kr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class jE extends oi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Os.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xT.w0;const t=this.getSubject();e.add(this.source.subscribe((0,kr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xT.w0.EMPTY)}return e}refCount(){return bp()(this)}}var Vo=L(8645),pr=L(4664);function cu(n){return n<=0?()=>fc.E:(0,Os.e)((e,t)=>{let r=0;e.subscribe((0,kr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Tp(...n){const e=(0,Qa.yG)(n);return(0,Os.e)((t,r)=>{(e?fh(n,t,e):fh(n,t)).subscribe(r)})}function ks(n,e){return(0,Os.e)((t,r)=>{let s=0;t.subscribe((0,kr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Li=L(1631);function Sp(n){return(0,Os.e)((e,t)=>{let r=!1;e.subscribe((0,kr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function HE(n=RT){return(0,Os.e)((e,t)=>{let r=!1;e.subscribe((0,kr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function RT(){return new Am}function pc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ks((s,u)=>n(s,u,r)):dh.y,cu(1),t?Sp(e):HE(()=>new Am))}function gh(n,e){return(0,lh.m)(e)?(0,Li.z)(n,e,1):(0,Li.z)(n,1)}var Jr=L(9397);function Ui(n){return(0,Os.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,kr.x)(t,void 0,void 0,l=>{u=(0,Ya.Xf)(n(l,Ui(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function xm(n,e){return(0,Os.e)(function Ap(n,e,t,r,s){return(u,l)=>{let g=t,_=e,D=0;u.subscribe((0,kr.x)(l,T=>{const x=D++;_=g?n(_,T,x):(g=!0,T),r&&l.next(_)},s&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function $E(n){return n<=0?()=>fc.E:(0,Os.e)((e,t)=>{let r=[];e.subscribe((0,kr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function mh(n){return(0,Os.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",yh=Symbol("RouteTitle");class NT{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _h(n){return new NT(n)}function PT(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function fo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!ha(n[s],e[s]))return!1;return!0}function ha(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function vh(n){return n.length>0?n[n.length-1]:null}function lu(n){return function dv(n){return!!n&&(n instanceof oi.y||(0,lh.m)(n.lift)&&(0,lh.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,ln.D)(Promise.resolve(n)):(0,bt.of)(n)}const zE={exact:function FT(n,e,t){if(!zl(n.segments,e.segments)||!gv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!FT(n.children[r],e.children[r],t))return!1;return!0},subset:Rm},fv={exact:function CR(n,e){return fo(n,e)},subset:function pv(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ha(n[t],e[t]))},ignored:()=>!0};function kT(n,e,t){return zE[t.paths](n.root,e.root,t.matrixParams)&&fv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rm(n,e,t){return LT(n,e,e.segments,t)}function LT(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!zl(s,t)||e.hasChildren()||!gv(s,t,r))}if(n.segments.length===t.length){if(!zl(n.segments,t)||!gv(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Rm(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(zl(n.segments,s)&&gv(n.segments,s,r)&&n.children[Qt])&&LT(n.children[Qt],e,u,r)}}function gv(n,e,t){return e.every((r,s)=>fv[t](n[s].parameters,r.parameters))}class $l{constructor(e=new xn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_h(this.queryParams)),this._queryParamMap}toString(){return yv.serialize(this)}}class xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nm(this)}}class Mp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_h(this.parameters)),this._parameterMap}toString(){return ZE(this)}}function zl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let gc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new mv},providedIn:"root"}),n})();class mv{parse(e){const t=new vv(e);return new $l(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${or(e.root,!0)}`,r=function KE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Pm(t)}=${Pm(s)}`).join("&"):`${Pm(t)}=${Pm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _v(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yv=new mv;function Nm(n){return n.segments.map(e=>ZE(e)).join("/")}function or(n,e){if(!n.hasChildren())return Nm(n);if(e){const t=n.children[Qt]?or(n.children[Qt],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Qt&&r.push(`${s}:${or(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function GE(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Qt&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Qt&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Qt?[or(n.children[Qt],!1)]:[`${s}:${or(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${Nm(n)}/${t[0]}`:`${Nm(n)}/(${t.join("//")})`}}function WE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pm(n){return WE(n).replace(/%3B/gi,";")}function Om(n){return WE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function km(n){return decodeURIComponent(n)}function qE(n){return km(n.replace(/\+/g,"%20"))}function ZE(n){return`${Om(n.path)}${function VT(n){return Object.keys(n).map(e=>`;${Om(e)}=${Om(n[e])}`).join("")}(n.parameters)}`}const DR=/^[^\/()?;#]+/;function YE(n){const e=n.match(DR);return e?e[0]:""}const xp=/^[^\/()?;=#]+/,Rp=/^[^=?&#]+/,JE=/^[^&#]+/;class vv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new xn(e,t)),r}parseSegment(){const e=YE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Mp(km(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function In(n){const e=n.match(xp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=YE(this.remaining);s&&(r=s,this.capture(r))}e[km(t)]=km(r)}parseQueryParam(e){const t=function QE(n){const e=n.match(Rp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function XE(n){const e=n.match(JE);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=qE(t),u=qE(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=YE(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Qt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Qt]:new xn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function eI(n){return n.segments.length>0?new xn([],{[Qt]:n}):n}function wv(n){const e={};for(const r of Object.keys(n.children)){const u=wv(n.children[r]);if(r===Qt&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function tI(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new xn(n.segments.concat(e.segments),e.children)}return n}(new xn(n.segments,e))}function du(n){return n instanceof $l}function Fm(n){let e;const s=eI(function t(u){const l={};for(const _ of u.children){const D=t(_);l[_.outlet]=D}const g=new xn(u.url,l);return u===n&&(e=g),g}(n.root));return e??s}function nI(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return Lm(s,s,s,t,r);const u=function Ev(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rI(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,D])=>{g[_]="string"==typeof D?D.split("/"):D}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new rI(t,e,r)}(e);if(u.toRoot())return Lm(s,s,new xn([],{}),t,r);const l=function BT(n,e,t){if(n.isAbsolute)return new Gl(e,!0,0);if(!t)return new Gl(e,!1,NaN);if(null===t.parent)return new Gl(t,!0,0);const r=wh(n.commands[0])?0:1;return function Iv(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new d.vHH(4005,!1);s=r.segments.length}return new Gl(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),g=l.processChildren?Wl(l.segmentGroup,l.index,u.commands):yc(l.segmentGroup,l.index,u.commands);return Lm(s,l.segmentGroup,g,t,r)}function wh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Eh(n){return"object"==typeof n&&null!=n&&n.outlets}function Lm(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,D])=>{u[_]=Array.isArray(D)?D.map(T=>`${T}`):`${D}`}),l=n===e?t:mc(n,e,t);const g=eI(wv(l));return new $l(g,u,s)}function mc(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:mc(u,e,t)}),new xn(n.segments,r)}class rI{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wh(r[0]))throw new d.vHH(4003,!1);const s=r.find(Eh);if(s&&s!==vh(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yc(n,e,t){if(n||(n=new xn([],{})),0===n.segments.length&&n.hasChildren())return Wl(n,e,t);const r=function Cv(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(Eh(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!ql(_,D,l))return u;r+=2}else{if(!ql(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xn(n.segments.slice(0,r.pathIndex),{});return u.children[Qt]=new xn(n.segments.slice(r.pathIndex),n.children),Wl(u,0,s)}return r.match&&0===s.length?new xn(n.segments,{}):r.match&&!n.hasChildren()?Dv(n,e,t):r.match?Wl(n,0,s):Dv(n,e,t)}function Wl(n,e,t){if(0===t.length)return new xn(n.segments,{});{const r=function Um(n){return Eh(n[0])?n[0].outlets:{[Qt]:n}}(t),s={};if(!r[Qt]&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length){const u=Wl(n.children[Qt],e,t);return new xn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=yc(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new xn(n.segments,s)}}function Dv(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Eh(u)){const _=jT(u.outlets);return new xn(r,_)}if(0===s&&wh(t[0])){r.push(new Mp(n.segments[e].path,bv(t[0]))),s++;continue}const l=Eh(u)?u.outlets[Qt]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&wh(g)?(r.push(new Mp(l,bv(g))),s+=2):(r.push(new Mp(l,{})),s++)}return new xn(r,{})}function jT(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Dv(new xn([],{}),0,r))}),e}function bv(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ql(n,e,t){return n==t.path&&fo(e,t.parameters)}const Np="imperative";class fa{constructor(e,t){this.id=e,this.url=t}}class Tv extends fa{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hu extends fa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pp extends fa{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Op extends fa{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class Vm extends fa{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sv extends fa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TR extends fa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SR extends fa{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class HT extends fa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $T extends fa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AR{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MR{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bm{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Av{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mv{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ih{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xv{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fu,this.attachRef=null}}let fu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xv,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class kp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return jm(e,this._root).map(t=>t.value)}}function Zl(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zl(n,t);if(r)return r}return null}function jm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jm(n,t);if(r.length)return r.unshift(e),r}return[]}class Bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class GT extends kp{constructor(e,t){super(e),this.snapshot=t,Pv(this,e)}toString(){return this.snapshot.toString()}}function Hm(n,e){const t=function Rv(n,e){const l=new Fp([],{},{},"",{},Qt,e,null,{});return new Nv("",new Bo(l,[]))}(0,e),r=new ws.X([new Mp("",{})]),s=new ws.X({}),u=new ws.X({}),l=new ws.X({}),g=new ws.X(""),_=new _c(r,s,l,g,u,Qt,e,t.root);return _.snapshot=t.root,new GT(new Bo(_,[]),t)}class _c{constructor(e,t,r,s,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,Vt.U)(D=>D[yh]))??(0,bt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(e=>_h(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(e=>_h(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sI(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function WT(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fp{get title(){return this.data?.[yh]}constructor(e,t,r,s,u,l,g,_,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_h(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_h(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nv extends kp{constructor(e,t){super(t),this.url=e,Pv(this,t)}toString(){return oI(this._root)}}function Pv(n,e){e.value._routerState=n,e.children.forEach(t=>Pv(n,t))}function oI(n){const e=n.children.length>0?` { ${n.children.map(oI).join(", ")} } `:"";return`${n.value}${e}`}function aI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),fo(e.params,t.params)||n.paramsSubject.next(t.params),function OT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),fo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ov(n,e){const t=fo(n.params,e.params)&&function UT(n,e){return zl(n,e)&&n.every((t,r)=>fo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ov(n.parent,e.parent))}let Lp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(fu),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)($m,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new kv(t,g,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class kv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_c?this.route:e===fu?this.childContexts:this.parent.get(e,t)}}const $m=new d.OlP("");let Fv=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=hv([r.queryParams,r.params,r.data]).pipe((0,pr.w)(([u,l,g],_)=>(g={...u,...l,...g},0===_?(0,bt.of)(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function vc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function qT(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return vc(n,r,s);return vc(n,r)})}(n,e,t);return new Bo(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>vc(n,g)),l}}const r=function uI(n){return new _c(new ws.X(n.url),new ws.X(n.params),new ws.X(n.queryParams),new ws.X(n.fragment),new ws.X(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>vc(n,u));return new Bo(r,s)}}const Uv="ngNavigationCancelingError";function Vv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=ZT(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function ZT(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Uv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function cI(n){return Ch(n)&&du(n.url)}function Ch(n){return n&&n[Uv]}let lI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Lp],encapsulation:2}),n})();function Up(n){const e=n.children&&n.children.map(Up),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=lI),t}function ts(n){return n.outlet||Qt}function Gm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Wm{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),aI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=pu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=pu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=pu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=pu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Mv(u.value.snapshot))}),e.children.length&&this.forwardEvent(new zT(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(aI(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),aI(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=Gm(s.snapshot);l.attachRef=null,l.route=s,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Bv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Vp{constructor(e,t){this.component=e,this.route=t}}function QT(n,e,t){const r=n._root;return Bp(r,e?e._root:null,t,[r.value])}function Th(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Bp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=pu(e);return n.children.forEach(l=>{(function XT(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function eS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zl(n.url,e.url)||!fo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ov(n,e)||!fo(n.queryParams,e.queryParams);default:return!Ov(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new Bv(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Bp(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new Vp(g.outlet.component,l))}else l&&Sh(e,g,s),s.canActivateChecks.push(new Bv(r)),Bp(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>Sh(g,t.getContext(l),s)),s}function Sh(n,e,t){const r=pu(n),s=n.value;Object.entries(r).forEach(([u,l])=>{Sh(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Vp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function pa(n){return"function"==typeof n}function rS(n){return n instanceof Am||"EmptyError"===n?.name}const jp=Symbol("INITIAL_VALUE");function mu(){return(0,pr.w)(n=>hv(n.map(e=>e.pipe(cu(1),Tp(jp)))).pipe((0,Vt.U)(e=>{for(const t of e)if(!0!==t){if(t===jp)return jp;if(!1===t||t instanceof $l)return t}return!0}),ks(e=>e!==jp),cu(1)))}function CI(n){return(0,ph.z)((0,Jr.b)(e=>{if(du(e))throw Vv(0,e)}),(0,Vt.U)(e=>!0===e))}class Hp{constructor(e){this.segmentGroup=e||null}}class DI{constructor(e){this.urlTree=e}}function Kl(n){return Hl(new Hp(n))}function bI(n){return Hl(new DI(n))}class TI{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return(0,bt.of)(r);if(s.numberOfChildren>1||!s.children[Qt])return Hl(new d.vHH(4e3,!1));s=s.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new $l(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[s]=t[g]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,s)}),new xn(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new d.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const qm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wc(n,e,t,r,s){const u=Ec(n,e,t);return u.matched?(r=function Dh(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function sS(n,e,t,r){const s=e.canMatch;if(!s||0===s.length)return(0,bt.of)(!0);const u=s.map(l=>{const g=Th(l,n);return lu(function kR(n){return n&&pa(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,bt.of)(u).pipe(mu(),CI())}(r,e,t).pipe((0,Vt.U)(l=>!0===l?u:{...qm}))):(0,bt.of)(u)}function Ec(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||PT)(t,n,e);if(!s)return{...qm};const u={};Object.entries(s.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function jv(n,e,t,r){return t.length>0&&function Ah(n,e,t){return t.some(r=>Ic(n,e,r)&&ts(r)!==Qt)}(n,t,r)?{segmentGroup:new xn(e,Zm(r,new xn(t,n.children))),slicedSegments:[]}:0===t.length&&function Hv(n,e,t){return t.some(r=>Ic(n,e,r))}(n,t,r)?{segmentGroup:new xn(n.segments,aS(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:t}}function aS(n,e,t,r,s){const u={};for(const l of r)if(Ic(n,t,l)&&!s[ts(l)]){const g=new xn([],{});u[ts(l)]=g}return{...s,...u}}function Zm(n,e){const t={};t[Qt]=e;for(const r of n)if(""===r.path&&ts(r)!==Qt){const s=new xn([],{});t[ts(r)]=s}return t}function Ic(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Gv{constructor(e,t,r,s,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new TI(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=jv(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe(Ui(t=>{if(t instanceof DI)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Hp?this.noMatchError(t):t}),(0,Vt.U)(t=>{const r=new Fp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,{}),s=new Bo(r,t),u=new Nv("",s),l=function bR(n,e,t=null,r=null){return nI(Fm(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Qt).pipe(Ui(r=>{throw r instanceof Hp?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=sI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,ln.D)(s).pipe(gh(u=>{const l=r.children[u],g=function fI(n,e){const t=n.filter(r=>ts(r)===e);return t.push(...n.filter(r=>ts(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),xm((u,l)=>(u.push(...l),u)),Sp(null),function ER(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ks((s,u)=>n(s,u,r)):dh.y,$E(1),t?Sp(e):HE(()=>new Am))}(),(0,Li.z)(u=>{if(null===u)return Kl(r);const l=MI(u);return function AI(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,bt.of)(l)}))}processSegment(e,t,r,s,u,l){return(0,ln.D)(t).pipe(gh(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,l).pipe(Ui(_=>{if(_ instanceof Hp)return(0,bt.of)(null);throw _}))),pc(g=>!!g),Ui(g=>{if(rS(g))return function $v(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?(0,bt.of)([]):Kl(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,l,g){return function SI(n,e,t,r){return!!(ts(n)===r||r!==Qt&&Ic(e,t,n))&&("**"===n.path||Ec(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):Kl(s):Kl(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bI(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Li.z)(l=>{const g=new xn(l,{});return this.processSegment(e,t,g,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:T}=Ec(t,s,u);if(!g)return Kl(t);const x=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,T);return s.redirectTo.startsWith("/")?bI(x):this.applyRedirects.lineralizeSegments(s,x).pipe((0,Li.z)(H=>this.processSegment(e,r,t,H.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let g;if("**"===r.path){const _=s.length>0?vh(s).parameters:{},D=new Fp(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xI(r),ts(r),r.component??r._loadedComponent??null,r,qv(r));g=(0,bt.of)({snapshot:D,consumedSegments:[],remainingSegments:[]}),t.children={}}else g=wc(t,r,s,e).pipe((0,Vt.U)(({matched:_,consumedSegments:D,remainingSegments:T,parameters:x})=>_?{snapshot:new Fp(D,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xI(r),ts(r),r.component??r._loadedComponent??null,r,qv(r)),consumedSegments:D,remainingSegments:T}:null));return g.pipe((0,pr.w)(_=>null===_?Kl(t):this.getChildConfig(e=r._injector??e,r,s).pipe((0,pr.w)(({routes:D})=>{const T=r._loadedInjector??e,{snapshot:x,consumedSegments:H,remainingSegments:K}=_,{segmentGroup:ue,slicedSegments:ye}=jv(t,H,K,D);if(0===ye.length&&ue.hasChildren())return this.processChildren(T,D,ue).pipe((0,Vt.U)(rt=>null===rt?null:[new Bo(x,rt)]));if(0===D.length&&0===ye.length)return(0,bt.of)([new Bo(x,[])]);const me=ts(r)===u;return this.processSegment(T,D,ue,ye,me?Qt:u,!0).pipe((0,Vt.U)(rt=>[new Bo(x,rt)]))}))))}getChildConfig(e,t,r){return t.children?(0,bt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,bt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function II(n,e,t,r){const s=e.canLoad;if(void 0===s||0===s.length)return(0,bt.of)(!0);const u=s.map(l=>{const g=Th(l,n);return lu(function gI(n){return n&&pa(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,bt.of)(u).pipe(mu(),CI())}(e,t,r).pipe((0,Li.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Jr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function LR(n){return Hl(ZT(!1,3))}())):(0,bt.of)({routes:[],injector:e})}}function Wv(n){const e=n.value.routeConfig;return e&&""===e.path}function MI(n){const e=[],t=new Set;for(const r of n){if(!Wv(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=MI(r.children);e.push(new Bo(r.value,s))}return e.filter(r=>!t.has(r))}function xI(n){return n.data||{}}function qv(n){return n.resolve||{}}function PI(n){return"string"==typeof n.title||null===n.title}function Zv(n){return(0,pr.w)(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,Vt.U)(()=>e)):(0,bt.of)(e)})}const ci=new d.OlP("ROUTES");let Kv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,bt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=lu(t.loadComponent()).pipe((0,Vt.U)(fS),(0,Jr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),mh(()=>{this.componentLoaders.delete(t)})),s=new jE(r,()=>new Vo.x).pipe(bp());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,bt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Vt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D;return Array.isArray(g)?D=g:(_=g.create(t).injector,D=_.get(ci,[],d.XFs.Self|d.XFs.Optional).flat()),{routes:D.map(Up),injector:_}}),mh(()=>{this.childrenLoaders.delete(r)})),l=new jE(u,()=>new Vo.x).pipe(bp());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return lu(t()).pipe((0,Vt.U)(fS),(0,Li.z)(r=>r instanceof d.YKP||Array.isArray(r)?(0,bt.of)(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fS(n){return function hS(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Mh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Vo.x,this.configLoader=(0,d.f3M)(Kv),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(gc),this.rootContexts=(0,d.f3M)(fu),this.inputBindingEnabled=null!==(0,d.f3M)($m,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,bt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new MR(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new AR(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ws.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Np,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ks(r=>0!==r.id),(0,Vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,pr.w)(r=>{let s=!1,u=!1;return(0,bt.of)(r).pipe((0,Jr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,pr.w)(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new Op(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),fc.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Yv(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,bt.of)(l).pipe((0,pr.w)(T=>{const x=this.transitions?.getValue();return this.events.next(new Tv(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions?.getValue()?fc.E:Promise.resolve(T)}),function uS(n,e,t,r,s,u){return(0,Li.z)(l=>function zv(n,e,t,r,s,u,l="emptyOnly"){return new Gv(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,Vt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Jr.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,r.urlAfterRedirects=T.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const H=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(H,T)}t.browserUrlTree=T.urlAfterRedirects}const x=new Sv(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(x)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:x,source:H,restoredState:K,extras:ue}=l,ye=new Tv(T,this.urlSerializer.serialize(x),H,K);this.events.next(ye);const me=Hm(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:me,urlAfterRedirects:x,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}},(0,bt.of)(r)}{const T="";return this.events.next(new Op(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),fc.E}}),(0,Jr.b)(l=>{const g=new TR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,Vt.U)(l=>r={...l,guards:QT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function yI(n,e){return(0,Li.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,bt.of)({...t,guardsResult:!0}):function _I(n,e,t,r){return(0,ln.D)(n).pipe((0,Li.z)(s=>function iS(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,bt.of)(!0);const l=u.map(g=>{const _=Gm(e)??s,D=Th(g,_);return lu(function OR(n){return n&&pa(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(pc())});return(0,bt.of)(l).pipe(mu())}(s.component,s.route,t,e,r)),pc(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Li.z)(g=>g&&function gu(n){return"boolean"==typeof n}(g)?function vI(n,e,t,r){return(0,ln.D)(e).pipe(gh(s=>fh(function wI(n,e){return null!==n&&e&&e(new Bm(n)),(0,bt.of)(!0)}(s.route.parent,r),function zt(n,e){return null!==n&&e&&e(new Av(n)),(0,bt.of)(!0)}(s.route,r),function FR(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function JT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Mm(()=>{const g=l.guards.map(_=>{const D=Gm(l.node)??t,T=Th(_,D);return lu(function tS(n){return n&&pa(n.canActivateChild)}(T)?T.canActivateChild(r,n):D.runInContext(()=>T(r,n))).pipe(pc())});return(0,bt.of)(g).pipe(mu())}));return(0,bt.of)(u).pipe(mu())}(n,s.path,t),function EI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,bt.of)(!0);const s=r.map(u=>Mm(()=>{const l=Gm(e)??t,g=Th(u,l);return lu(function PR(n){return n&&pa(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(pc())}));return(0,bt.of)(s).pipe(mu())}(n,s.route,t))),pc(s=>!0!==s,!0))}(r,u,n,e):(0,bt.of)(g)),(0,Vt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Jr.b)(l=>{if(r.guardsResult=l.guardsResult,du(l.guardsResult))throw Vv(0,l.guardsResult);const g=new SR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),ks(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Zv(l=>{if(l.guards.canActivateChecks.length)return(0,bt.of)(l).pipe((0,Jr.b)(g=>{const _=new HT(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),(0,pr.w)(g=>{let _=!1;return(0,bt.of)(g).pipe(function cS(n,e){return(0,Li.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return(0,bt.of)(t);let u=0;return(0,ln.D)(s).pipe(gh(l=>function lS(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!PI(s)&&(u[yh]=s.title),function dS(n,e,t,r){const s=function RI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return(0,bt.of)({});const u={};return(0,ln.D)(s).pipe((0,Li.z)(l=>function NI(n,e,t,r){const s=Gm(e)??r,u=Th(n,s);return lu(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(pc(),(0,Jr.b)(g=>{u[l]=g}))),$E(1),function IR(n){return(0,Vt.U)(()=>n)}(u),Ui(l=>rS(l)?fc.E:Hl(l)))}(u,n,e,r).pipe((0,Vt.U)(l=>(n._resolvedData=l,n.data=sI(n,t).resolve,s&&PI(s)&&(n.data[yh]=s.title),null)))}(l.route,r,n,e)),(0,Jr.b)(()=>u++),$E(1),(0,Li.z)(l=>u===s.length?(0,bt.of)(t):fc.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Jr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Jr.b)(g=>{const _=new $T(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),Zv(l=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Jr.b)(T=>{_.component=T}),(0,Vt.U)(()=>{})));for(const T of _.children)D.push(...g(T));return D};return hv(g(l.targetSnapshot.root)).pipe(Sp(),cu(1))}),Zv(()=>this.afterPreactivation()),(0,Vt.U)(l=>{const g=function Lv(n,e,t){const r=vc(n,e._root,t?t._root:void 0);return new GT(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,Jr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Vt.U)(s=>(new Wm(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),cu(1),(0,Jr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new hu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),mh(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ui(l=>{if(u=!0,Ch(l)){cI(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new Pp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),cI(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Yv(r.source)};t.scheduleNavigation(_,Np,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new Vm(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return fc.E}))}))}cancelNavigationTransition(t,r,s){const u=new Pp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yv(n){return n!==Np}let OI=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[yh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(pS)},providedIn:"root"}),n})(),pS=(()=>{class n extends OI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(mS)},providedIn:"root"}),n})();class kI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mS=(()=>{class n extends kI{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Km=new d.OlP("",{providedIn:"root",factory:()=>({})});let Qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(yS)},providedIn:"root"}),n})(),yS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Fs=(()=>((Fs=Fs||{})[Fs.COMPLETE=0]="COMPLETE",Fs[Fs.FAILED=1]="FAILED",Fs[Fs.REDIRECTING=2]="REDIRECTING",Fs))();function FI(n,e){n.events.pipe(ks(t=>t instanceof hu||t instanceof Pp||t instanceof Vm||t instanceof Op),(0,Vt.U)(t=>t instanceof hu||t instanceof Op?Fs.COMPLETE:t instanceof Pp&&(0===t.code||1===t.code)?Fs.REDIRECTING:Fs.FAILED),ks(t=>t!==Fs.REDIRECTING),cu(1)).subscribe(()=>{e()})}function _S(n){throw n}function vS(n,e,t){return e.parse("/")}const ga={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ii=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Km,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||_S,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||vS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Qv),this.routeReuseStrategy=(0,d.f3M)(gS),this.titleStrategy=(0,d.f3M)(OI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(ci,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(Mh),this.urlSerializer=(0,d.f3M)(gc),this.location=(0,d.f3M)(Ze),this.componentInputBindingEnabled=!!(0,d.f3M)($m,{optional:!0}),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new $l,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hm(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Np,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Up),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:l;let x,T=null;switch(g){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}null!==T&&(T=this.removeEmptyProps(T));try{x=Fm(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),x=this.currentUrlTree.root}return nI(x,t,T,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=du(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,Np,null,r)}navigate(t,r={skipLocationChange:!1}){return function LI(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...ga}:!1===r?{...Jv}:r,du(t))return kT(this.currentUrlTree,t,s);const u=this.parseUrl(t);return kT(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,D;l?(g=l.resolve,_=l.reject,D=l.promise):D=new Promise((x,H)=>{g=x,_=H});const T=this.pendingTasks.add();return FI(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(T))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$p=(()=>{class n{constructor(t,r,s,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=g,this.href=null,this.commands=null,this.onChanges=new Vo.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof hu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ii),d.Y36(_c),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ke))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]}),n})(),Xv=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,s,u,l){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof hu&&this.update()})}ngAfterContentInit(){(0,bt.of)(this.links.changes,(0,bt.of)(null)).pipe((0,hh.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,ln.D)(t).pipe((0,hh.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function UI(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ii),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36($p,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&d.Suo(s,$p,5),2&t){let u;d.iGM(u=d.CRH())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class zp{}let BI=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ks(t=>t instanceof hu),gh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,ln.D)(s).pipe((0,hh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,bt.of)(null);const u=s.pipe((0,Li.z)(l=>null===l?(0,bt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([u,l]).pipe((0,hh.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ii),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(zp),d.LFG(Kv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ym=new d.OlP("");let e0=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Op&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ih&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ih(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ci(n,e){return{\u0275kind:n,\u0275providers:e}}function HI(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Ii),s=n.get($I);1===n.get(zI)&&r.initialNavigation(),n.get(xh,null,d.XFs.Optional)?.setUpPreloading(),n.get(Ym,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const $I=new d.OlP("",{factory:()=>new Vo.x}),zI=new d.OlP("",{providedIn:"root",factory:()=>1}),xh=new d.OlP("");function Jm(n){return Ci(0,[{provide:xh,useExisting:BI},{provide:zp,useExisting:n}])}const qI=new d.OlP("ROUTER_FORROOT_GUARD"),ZI=[Ze,{provide:gc,useClass:mv},Ii,fu,{provide:_c,useFactory:function Qm(n){return n.routerState.root},deps:[Ii]},Kv,[]];function KI(){return new d.PXZ("Router",Ii)}let Rh=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ZI,[],{provide:ci,multi:!0,useValue:t},{provide:qI,useFactory:bS,deps:[[Ii,new d.FiY,new d.tp0]]},{provide:Km,useValue:r||{}},r?.useHash?{provide:ke,useClass:xe}:{provide:ke,useClass:qe},{provide:Ym,useFactory:()=>{const n=(0,d.f3M)(To),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Km),r=(0,d.f3M)(Mh),s=(0,d.f3M)(gc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new e0(s,r,n,e,t)}},r?.preloadingStrategy?Jm(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:KI},r?.initialNavigation?TS(r):[],r?.bindToComponentInputs?Ci(8,[Fv,{provide:$m,useExisting:Fv}]).\u0275providers:[],[{provide:Nh,useFactory:HI},{provide:d.tb,multi:!0,useExisting:Nh}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ci,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qI,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function bS(n){return"guarded"}function TS(n){return["disabled"===n.initialNavigation?Ci(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Ii);return()=>{e.setUpLocationChangeListener()}}},{provide:zI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ci(2,[{provide:zI,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Ae,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Ii),u=e.get($I);FI(s,()=>{r(!0)}),e.get(Mh).afterPreactivation=()=>(r(!0),u.closed?(0,bt.of)(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const Nh=new d.OlP("");var JI=L(6321),cn=L(8186);function Xm(){return(0,Os.e)((n,e)=>{let t,r=!1;n.subscribe((0,kr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var st,n0=L(3997),Gp=(L(6365),L(3106)),Ee=L(5861),Ls=L(534),Ph=L(4537),Cc=L(7879),Gt=L(9058),AS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jo={},ey=ey||{},Ht=AS||self;function r0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Oh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var eC="closure_uid_"+(1e9*Math.random()>>>0),ty=0;function MS(n,e,t){return n.call.apply(n.bind,arguments)}function xS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?MS:xS).apply(null,arguments)}function ny(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Vn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[s].apply(r,l)}}function po(){this.s=this.s,this.o=this.o}po.prototype.s=!1,po.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function XI(n){Object.prototype.hasOwnProperty.call(n,eC)&&n[eC]||(n[eC]=++ty)}(this)},po.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Us(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(r0(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var Fh=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",()=>{},e),Ht.removeEventListener("test",()=>{},e)}catch{}return n}();function ma(n){return/^[\s\xa0]*$/.test(n)}function yu(){var n=Ht.navigator;return n&&(n=n.userAgent)?n:""}function ns(n){return-1!=yu().indexOf(n)}function bc(n){return bc[" "](n),n}bc[" "]=function(){};var iy,n,Uh=ns("Opera"),Ho=ns("Trident")||ns("MSIE"),Yl=ns("Edge"),ry=Yl||Ho,s0=ns("Gecko")&&!(-1!=yu().toLowerCase().indexOf("webkit")&&!ns("Edge"))&&!(ns("Trident")||ns("MSIE"))&&!ns("Edge"),tC=-1!=yu().toLowerCase().indexOf("webkit")&&!ns("Edge");function o0(){var n=Ht.document;return n?n.documentMode:void 0}e:{var sy="",oy=(n=yu(),s0?/rv:([^\);]+)(\)|;)/.exec(n):Yl?/Edge\/([\d\.]+)/.exec(n):Ho?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tC?/WebKit\/(\S+)/.exec(n):Uh?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(oy&&(sy=oy?oy[1]:""),Ho){var ay=o0();if(null!=ay&&ay>parseFloat(sy)){iy=String(ay);break e}}iy=sy}var RS=Ht.document&&Ho&&(o0()||parseInt(iy,10))||void 0;function ly(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(s0){e:{try{bc(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:KR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ly.$.h.call(this)}}Vn(ly,di);var KR={2:"touch",3:"pen",4:"mouse"};ly.prototype.h=function(){ly.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wp="closure_listenable_"+(1e6*Math.random()|0),NS=0;function YR(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++NS,this.fa=this.ia=!1}function dy(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function nC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function rC(n){const e={};for(const t in n)e[t]=n[t];return e}const iC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hy(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<iC.length;u++)t=iC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Tc(n){this.src=n,this.g={},this.h=0}function qp(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Dc(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(dy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vh(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Tc.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Vh(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new YR(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var fy="closure_lm_"+(1e6*Math.random()|0),Ql={};function a0(n,e,t,r,s){if(r&&r.once)return oC(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)a0(n,e[u],t,r,s);return null}return t=cC(t),n&&n[Wp]?n.O(e,t,Oh(r)?!!r.capture:!!r,s):sC(n,e,t,!1,r,s)}function sC(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Oh(s)?!!s.capture:!!s,g=Bh(n);if(g||(n[fy]=g=new Tc(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function Zp(){const e=c0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Fh||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(uC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function oC(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)oC(n,e[u],t,r,s);return null}return t=cC(t),n&&n[Wp]?n.P(e,t,Oh(r)?!!r.capture:!!r,s):sC(n,e,t,!0,r,s)}function aC(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)aC(n,e[u],t,r,s);else r=Oh(r)?!!r.capture:!!r,t=cC(t),n&&n[Wp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vh(u=n.g[e],t,r,s))&&(dy(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Bh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vh(e,t,r,s)),(t=-1<n?e[n]:null)&&u0(t))}function u0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Wp])qp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(uC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bh(e))?(qp(t,n),0==t.h&&(t.src=null,e[fy]=null)):dy(n)}}}function uC(n){return n in Ql?Ql[n]:Ql[n]="on"+n}function c0(n,e){if(n.fa)n=!0;else{e=new ly(e,this);var t=n.listener,r=n.la||n.src;n.ia&&u0(n),n=t.call(r,e)}return n}function Bh(n){return(n=n[fy])instanceof Tc?n:null}var jh="__closure_events_fn_"+(1e9*Math.random()>>>0);function cC(n){return"function"==typeof n?n:(n[jh]||(n[jh]=function(e){return n.handleEvent(e)}),n[jh])}function hi(){po.call(this),this.i=new Tc(this),this.S=this,this.J=null}function Di(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var s=e;hy(e=new di(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Hh(l,r,!0,e)&&s}if(s=Hh(l=e.g=n,r,!0,e)&&s,s=Hh(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Hh(l=e.g=t[u],r,!1,e)&&s}function Hh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&qp(n.i,l),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}Vn(hi,po),hi.prototype[Wp]=!0,hi.prototype.removeEventListener=function(n,e,t,r){aC(this,n,e,t,r)},hi.prototype.N=function(){if(hi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dy(t[r]);delete n.g[e],n.h--}}this.J=null},hi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},hi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var l0=Ht.JSON.stringify;function OS(){var n=py;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var d0=new class lC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new dC,n=>n.reset());class dC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function FS(n){Ht.setTimeout(()=>{throw n},0)}let Kp,Yp=!1,py=new class kS{constructor(){this.h=this.g=null}add(e,t){const r=d0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},gy=()=>{const n=Ht.Promise.resolve(void 0);Kp=()=>{n.then(h0)}};var h0=()=>{for(var n;n=OS();){try{n.h.call(n.g)}catch(t){FS(t)}var e=d0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yp=!1};function my(n,e){hi.call(this),this.h=n||1,this.g=e||Ht,this.j=li(this.qb,this),this.l=Date.now()}function $h(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function zh(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function yy(n){n.g=zh(()=>{n.g=null,n.i&&(n.i=!1,yy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vn(my,hi),(st=my.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Di(this,"tick"),this.ga&&($h(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){my.$.N.call(this),$h(this),delete this.g};class fC extends po{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yy(this)}N(){super.N(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qp(n){po.call(this),this.h=n,this.g={}}Vn(Qp,po);var pC=[];function gC(n,e,t,r){Array.isArray(t)||(t&&(pC[0]=t.toString()),t=pC);for(var s=0;s<t.length;s++){var u=a0(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function _y(n){nC(n.g,function(e,t){this.g.hasOwnProperty(t)&&u0(e)},n),n.g={}}function Gh(){this.g=!0}function Wh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _C(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return l0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Qp.prototype.N=function(){Qp.$.N.call(this),_y(this)},Qp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gh.prototype.Ea=function(){this.g=!1},Gh.prototype.info=function(){};var _u={},f0=null;function qh(){return f0=f0||new hi}function p0(n){di.call(this,_u.Ta,n)}function Jp(n){const e=qh();Di(e,new p0(e))}function g0(n,e){di.call(this,_u.STAT_EVENT,n),this.stat=e}function Bi(n){const e=qh();Di(e,new g0(e,n))}function m0(n,e){di.call(this,_u.Ua,n),this.size=e}function Zh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}_u.Ta="serverreachability",Vn(p0,di),_u.STAT_EVENT="statevent",Vn(g0,di),_u.Ua="timingevent",Vn(m0,di);var vy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function y0(){}function Xp(){}y0.prototype.h=null;var Cy,Kh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ey(){di.call(this,"d")}function Iy(){di.call(this,"c")}function eg(){}function Yh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Qp(this),this.P=wC,this.V=new my(n=ry?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _0}function _0(){this.i=null,this.g="",this.h=!1}Vn(Ey,di),Vn(Iy,di),Vn(eg,y0),eg.prototype.g=function(){return new XMLHttpRequest},eg.prototype.i=function(){return{}},Cy=new eg;var wC=45e3,Qh={},$o={};function v0(n,e,t){n.L=1,n.v=Ay(ya(e)),n.s=t,n.S=!0,EC(n,null)}function EC(n,e){n.G=Date.now(),tg(n),n.A=ya(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),mo(t.i,"t",r),n.C=0,t=n.l.J,n.h=new _0,n.g=B0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new fC(li(n.Pa,n,n.g),n.O)),gC(n.U,n.g,"readystatechange",n.nb),e=n.I?rC(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Jp(),function mC(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var T=D[0];D=D[1];var x=T.split("_");l=2<=x.length&&"type"==x[1]?l+(T+"=")+D+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Dy(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Sc(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=w0(n,t),s==$o){4==e&&(n.o=4,Bi(14),r=!1),Wh(n.j,n.m,null,"[Incomplete Response]");break}if(s==Qh){n.o=4,Bi(15),Wh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wh(n.j,n.m,s,null),I0(n,s)}Dy(n)&&s!=$o&&s!=Qh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Uy(e),e.M=!0,Bi(11))):(Wh(n.j,n.m,t,"[Invalid Chunked Response]"),Jl(n),Ty(n))}function w0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?$o:(t=Number(e.substring(t,r)),isNaN(t)?Qh:(r+=1)+t>e.length?$o:(e=e.slice(r,r+t),n.C=r+t,e))}function tg(n){n.Y=Date.now()+n.P,by(n,n.P)}function by(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zh(li(n.lb,n),e)}function E0(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Ty(n){0==n.l.H||n.J||F0(n.l,n)}function Jl(n){E0(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,$h(n.V),_y(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function I0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||td(t.i,n)))if(!n.K&&td(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;cg(t),ky(t)}Ly(t),Bi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Zh(li(t.ib,t),6e3));if(1>=My(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Mc(t,11)}else if((n.K||t.g==n)&&cg(t),!ma(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const T=D[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const x=D[4];null!=x&&(t.Ga=x,t.l.info("SVER="+t.Ga));const H=D[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const ue=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ue){var u=r.i;u.g||-1==ue.indexOf("spdy")&&-1==ue.indexOf("quic")&&-1==ue.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(S0(u,u.h),u.h=null))}if(r.F){const ye=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.Da=ye,bn(r.I,r.F,ye))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=V0(r,r.J?r.pa:null,r.Y),l.K){A0(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(E0(g),tg(g)),r.g=l}else jC(r);0<t.j.length&&Fy(t)}else"stop"!=D[0]&&"close"!=D[0]||Mc(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Mc(t,7):O0(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}Jp()}catch{}}function $r(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(r0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function US(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(r0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function IC(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(r0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(st=Yh.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==va(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const T=va(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||ry||this.g&&(this.h.h||this.g.ja()||kC(this.g)))){this.J||4!=T||7==e||Jp(),E0(this);var t=this.g.da();this.ca=t;t:if(Dy(this)){var r=kC(this.g);n="";var s=r.length,u=4==va(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jl(this),Ty(this);var l="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function yC(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ma(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Bi(12),Jl(this),Ty(this);break e}Wh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,I0(this,t)}this.S?(Sc(this,T,l),ry&&this.i&&3==T&&(gC(this.U,this.V,"tick",this.mb),this.V.start())):(Wh(this.j,this.m,l,null),I0(this,l)),4==T&&Jl(this),this.i&&!this.J&&(4==T?F0(this.l,this):(this.i=!1,tg(this)))}else(function zS(n){const e={};n=(n.g&&2<=va(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(ma(n[r]))continue;var t=hC(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function PS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Bi(12)):(this.o=0,Bi(13)),Jl(this),Ty(this)}}}catch{}},st.mb=function(){if(this.g){var n=va(this.g),e=this.g.ja();this.C<e.length&&(E0(this),Sc(this,n,e),this.i&&4!=n&&tg(this))}},st.cancel=function(){this.J=!0,Jl(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function LS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Jp(),Bi(17)),Jl(this),this.o=2,Ty(this)):by(this,this.Y-n)};var C0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xl){this.h=n.h,Sy(this,n.j),this.s=n.s,this.g=n.g,ng(this,n.m),this.l=n.l;var e=n.i,t=new ig;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),D0(this,t),this.o=n.o}else n&&(e=String(n).match(C0))?(this.h=!1,Sy(this,e[1]||"",!0),this.s=rg(e[2]||""),this.g=rg(e[3]||"",!0),ng(this,e[4]),this.l=rg(e[5]||"",!0),D0(this,e[6]||"",!0),this.o=rg(e[7]||"")):(this.h=!1,this.i=new ig(null,this.h))}function ya(n){return new Xl(n)}function Sy(n,e,t){n.j=t?rg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ng(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function D0(n,e,t){e instanceof ig?(n.i=e,function DC(n,e){e&&!n.j&&(Ac(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(zo(this,r),mo(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Jh(e,T0)),n.i=new ig(e,n.h))}function bn(n,e,t){n.i.set(e,t)}function Ay(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,BS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function BS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jh(e,b0,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jh(e,b0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jh(t,"/"==t.charAt(0)?CC:QR,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jh(t,_a)),n.join("")};var b0=/[#\/\?@]/g,QR=/[#\?:]/g,CC=/[#\?]/g,T0=/[#\?@]/g,_a=/#/g;function ig(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ac(n){n.g||(n.g=new Map,n.h=0,n.i&&function VS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zo(n,e){Ac(n),e=ed(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function go(n,e){return Ac(n),e=ed(n,e),n.g.has(e)}function mo(n,e,t){zo(n,e),0<t.length&&(n.i=null,n.g.set(ed(n,e),kh(t)),n.h+=t.length)}function ed(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function bC(n){this.l=n||HS,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ka&&Ht.g.Ka()&&Ht.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=ig.prototype).add=function(n,e){Ac(this),this.i=null,n=ed(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Ac(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},st.ta=function(){Ac(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},st.Z=function(n){Ac(this);let e=[];if("string"==typeof n)go(this,n)&&(e=e.concat(this.g.get(ed(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return Ac(this),this.i=null,go(this,n=ed(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var HS=10;function TC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function My(n){return n.h?1:n.g?n.g.size:0}function td(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function S0(n,e){n.g?n.g.add(e):n.h=e}function A0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function SC(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kh(n.i)}bC.prototype.cancel=function(){if(this.i=SC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var $S=class{stringify(n){return Ht.JSON.stringify(n,void 0)}parse(n){return Ht.JSON.parse(n,void 0)}};function AC(){this.g=new $S}function MC(n,e,t){const r=t||"";try{$r(n,function(s,u){let l=s;Oh(s)&&(l=l0(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ry(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Xh(n){this.l=n.fc||null,this.j=n.ob||!1}function sg(n,e){hi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Ny,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vn(Xh,y0),Xh.prototype.g=function(){return new sg(this.l,this.j)},Xh.prototype.i=function(n){return function(){return n}}({}),Vn(sg,hi);var Ny=0;function xC(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function og(n){n.readyState=4,n.l=null,n.j=null,n.A=null,nd(n)}function nd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=sg.prototype).open=function(n,e){if(this.readyState!=Ny)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,nd(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ht).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,og(this)),this.readyState=Ny},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,nd(this)),this.g&&(this.readyState=3,nd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ht.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xC(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?og(this):nd(this),3==this.readyState&&xC(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,og(this))},st.Ya=function(n){this.g&&(this.response=n,og(this))},st.ka=function(){this.g&&og(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Py=Ht.JSON.parse;function ar(n){hi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=M0,this.L=this.M=!1}Vn(ar,hi);var M0="",RC=/^https?$/i,NC=["POST","PUT"];function x0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,R0(n),Oy(n)}function R0(n){n.F||(n.F=!0,Di(n,"complete"),Di(n,"error"))}function N0(n){if(n.h&&typeof ey<"u"&&(!n.C[1]||4!=va(n)||2!=n.da()))if(n.v&&4==va(n))zh(n.La,0,n);else if(Di(n,"readystatechange"),4==va(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(C0)[1]||null;!s&&Ht.self&&Ht.self.location&&(s=Ht.self.location.protocol.slice(0,-1)),r=!RC.test(s?s.toLowerCase():"")}t=r}if(t)Di(n,"complete"),Di(n,"success");else{n.m=6;try{var u=2<va(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",R0(n)}}finally{Oy(n)}}}function Oy(n,e){if(n.g){OC(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Di(n,"ready");try{t.onreadystatechange=r}catch{}}}function OC(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function va(n){return n.g?n.g.readyState:0}function kC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case M0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function FC(n){let e="";return nC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function P0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=FC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function ag(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function LC(n){this.Ga=0,this.j=[],this.l=new Gh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ag("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ag("baseRetryDelayMs",5e3,n),this.hb=ag("retryDelaySeedMs",1e4,n),this.eb=ag("forwardChannelMaxRetries",2,n),this.xa=ag("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new bC(n&&n.concurrentRequestLimit),this.Ja=new AC,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function O0(n){if(UC(n),3==n.H){var e=n.W++,t=ya(n.I);if(bn(t,"SID",n.K),bn(t,"RID",e),bn(t,"TYPE","terminate"),ug(n,t),(e=new Yh(n,n.l,e)).L=2,e.v=Ay(ya(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon)try{t=Ht.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=B0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),tg(e)}U0(n)}function ky(n){n.g&&(Uy(n),n.g.cancel(),n.g=null)}function UC(n){ky(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),cg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function Fy(n){if(!TC(n.i)&&!n.m){n.m=!0;var e=n.Na;Kp||gy(),Yp||(Kp(),Yp=!0),py.add(e,n),n.C=0}}function VC(n,e){var t;t=e?e.m:n.W++;const r=ya(n.I);bn(r,"SID",n.K),bn(r,"RID",t),bn(r,"AID",n.V),ug(n,r),n.o&&n.s&&P0(r,n.o,n.s),t=new Yh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=BC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),S0(n.i,t),v0(t,r,e)}function ug(n,e){n.na&&nC(n.na,function(t,r){bn(e,r,t)}),n.h&&$r({},function(t,r){bn(e,r,t)})}function BC(n,e,t){t=Math.min(n.j.length,t);var r=n.h?li(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=s[_].g;const T=s[_].map;if(D-=u,0>D)u=Math.max(0,s[_].g-100),g=!1;else try{MC(T,l,"req"+D+"_")}catch{r&&r(T)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function jC(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Kp||gy(),Yp||(Kp(),Yp=!0),py.add(e,n),n.A=0}}function Ly(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Zh(li(n.Ma,n),L0(n,n.A)),n.A++,0))}function Uy(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function k0(n){n.g=new Yh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ya(n.wa);bn(e,"RID","rpc"),bn(e,"SID",n.K),bn(e,"AID",n.V),bn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&bn(e,"TO",n.qa),bn(e,"TYPE","xmlhttp"),ug(n,e),n.o&&n.s&&P0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Ay(ya(e)),t.s=null,t.S=!0,EC(t,n)}function cg(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function F0(n,e){var t=null;if(n.g==e){cg(n),Uy(n),n.g=null;var r=2}else{if(!td(n.i,e))return;t=e.F,A0(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;Di(r=qh(),new m0(r,t)),Fy(n)}else jC(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function GS(n,e){return!(My(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Zh(li(n.Na,n,e),L0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ly(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Mc(n,5);break;case 4:Mc(n,10);break;case 3:Mc(n,6);break;default:Mc(n,2)}}function L0(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Mc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=li(n.pb,n);t||(t=new Xl("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||Sy(t,"https"),Ay(t)),function xy(n,e){const t=new Gh;if(Ht.Image){const r=new Image;r.onload=ny(Ry,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ny(Ry,t,r,"TestLoadImage: error",!1,e),r.onabort=ny(Ry,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ny(Ry,t,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bi(2);n.H=0,n.h&&n.h.za(e),U0(n),UC(n)}function U0(n){if(n.H=0,n.ma=[],n.h){const e=SC(n.i);(0!=e.length||0!=n.j.length)&&(Us(n.ma,e),Us(n.ma,n.j),n.i.i.length=0,kh(n.j),n.j.length=0),n.h.ya()}}function V0(n,e,t){var r=t instanceof Xl?ya(t):new Xl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),ng(r,r.m);else{var s=Ht.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Xl(null);r&&Sy(u,r),e&&(u.g=e),s&&ng(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&bn(r,t,e),bn(r,"VER",n.ra),ug(n,r),r}function B0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ha&&!n.va?new Xh({ob:!0}):n.va)).Oa(n.J),e}function j0(){}function wa(){if(Ho&&!(10<=Number(RS)))throw Error("Environmental error: no available transport.")}function Vs(n,e){hi.call(this),this.g=new LC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ma(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ma(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lg(this)}function HC(n){Ey.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rd(){Iy.call(this),this.status=1}function lg(n){this.g=n}function Ea(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Vy(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function Tn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(st=ar.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cy.g(),this.C=function wy(n){return n.h||(n.h=n.i())}(this.u?this.u:Cy),this.g.onreadystatechange=li(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void x0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ht.FormData&&n instanceof Ht.FormData,!(0<=Dc(NC,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{OC(this),0<this.B&&((this.L=function PC(n){return Ho&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.ua,this)):this.A=zh(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){x0(this,u)}},st.ua=function(){typeof ey<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Di(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Di(this,"complete"),Di(this,"abort"),Oy(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Oy(this,!0)),ar.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?N0(this):this.kb())},st.kb=function(){N0(this)},st.isActive=function(){return!!this.g},st.da=function(){try{return 2<va(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Py(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=LC.prototype).ra=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Yh(this,this.l,n);let u=this.s;if(this.U&&(u?(u=rC(u),hy(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=BC(this,s,e),bn(t=ya(this.I),"RID",n),bn(t,"CVER",22),this.F&&bn(t,"X-HTTP-Session-Id",this.F),ug(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(FC(u)))+"&"+e:this.o&&P0(t,this.o,u)),S0(this.i,s),this.bb&&bn(t,"TYPE","init"),this.P?(bn(t,"$req",e),bn(t,"SID","null"),s.aa=!0,v0(s,t,null)):v0(s,t,e),this.H=2}}else 3==this.H&&(n?VC(this,n):0==this.j.length||TC(this.i)||VC(this))},st.Ma=function(){if(this.u=null,k0(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Zh(li(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bi(10),ky(this),k0(this))},st.ib=function(){null!=this.v&&(this.v=null,ky(this),Ly(this),Bi(19))},st.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Bi(2)):(this.l.info("Failed to ping google.com"),Bi(1))},st.isActive=function(){return!!this.h&&this.h.isActive(this)},(st=j0.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.isActive=function(){return!0},st.Va=function(){},wa.prototype.g=function(n,e){return new Vs(n,e)},Vn(Vs,hi),Vs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Bi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=V0(n,null,n.Y),Fy(n)},Vs.prototype.close=function(){O0(this.g)},Vs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=l0(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Fy(e)},Vs.prototype.N=function(){this.g.h=null,delete this.j,O0(this.g),delete this.g,Vs.$.N.call(this)},Vn(HC,Ey),Vn(rd,Iy),Vn(lg,j0),lg.prototype.Ba=function(){Di(this.g,"a")},lg.prototype.Aa=function(n){Di(this.g,new HC(n))},lg.prototype.za=function(n){Di(this.g,new rd)},lg.prototype.ya=function(){Di(this.g,"b")},Vn(Ea,function H0(){this.blockSize=-1}),Ea.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ea.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Vy(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Vy(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Vy(this,r),s=0;break}}this.h=s,this.i+=e},Ea.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var JR={};function Mt(n){return-128<=n&&128>n?function Lh(n,e){var t=JR;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Tn([0|e],0>e?-1:0)}):new Tn([0|n],0>n?-1:0)}function Ia(n){if(isNaN(n)||!isFinite(n))return Go;if(0>n)return ji(Ia(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=$0;return new Tn(e,0)}var $0=4294967296,Go=Mt(0),z0=Mt(1),dg=Mt(16777216);function yo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function mn(n){return-1==n.h}function ji(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Tn(t,~n.h).add(z0)}function hg(n,e){return n.add(ji(e))}function fg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function pg(n,e){this.g=n,this.h=e}function gg(n,e){if(yo(e))throw Error("division by zero");if(yo(n))return new pg(Go,Go);if(mn(n))return e=gg(ji(n),e),new pg(ji(e.g),ji(e.h));if(mn(e))return e=gg(n,ji(e)),new pg(ji(e.g),e.h);if(30<n.g.length){if(mn(n)||mn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=z0,r=e;0>=r.X(n);)t=G0(t),r=G0(r);var s=id(t,1),u=id(r,1);for(r=id(r,2),t=id(t,2);!yo(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=id(r,1),t=id(t,1)}return e=hg(n,s.R(e)),new pg(s,e)}for(s=Go;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Ia(t)).R(e);mn(l)||0<l.X(n);)l=(u=Ia(t-=r)).R(e);yo(u)&&(u=z0),s=s.add(u),n=hg(n,l)}return new pg(s,n)}function G0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Tn(t,n.h)}function id(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Tn(s,n.h)}(st=Tn.prototype).ea=function(){if(mn(this))return-ji(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:$0+r)*e,e*=$0}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(yo(this))return"0";if(mn(this))return"-"+ji(this).toString(n);for(var e=Ia(Math.pow(n,6)),t=this,r="";;){var s=gg(t,e).g,u=((0<(t=hg(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(yo(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return mn(n=hg(this,n))?-1:yo(n)?0:1},st.abs=function(){return mn(this)?ji(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new Tn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(yo(this)||yo(n))return Go;if(mn(this))return mn(n)?ji(this).R(ji(n)):ji(ji(this).R(n));if(mn(n))return ji(this.R(ji(n)));if(0>this.X(dg)&&0>n.X(dg))return Ia(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,fg(t,2*r+2*s),t[2*r+2*s+1]+=u*_,fg(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,fg(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,fg(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Tn(t,0)},st.gb=function(n){return gg(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Tn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Tn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Tn(t,this.h^n.h)},wa.prototype.createWebChannel=wa.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,vy.NO_ERROR=0,vy.TIMEOUT=8,vy.HTTP_ERROR=6,vC.COMPLETE="complete",Xp.EventType=Kh,Kh.OPEN="a",Kh.CLOSE="b",Kh.ERROR="c",Kh.MESSAGE="d",hi.prototype.listen=hi.prototype.O,ar.prototype.listenOnce=ar.prototype.P,ar.prototype.getLastError=ar.prototype.Sa,ar.prototype.getLastErrorCode=ar.prototype.Ia,ar.prototype.getStatus=ar.prototype.da,ar.prototype.getResponseJson=ar.prototype.Wa,ar.prototype.getResponseText=ar.prototype.ja,ar.prototype.send=ar.prototype.ha,ar.prototype.setWithCredentials=ar.prototype.Oa,Ea.prototype.digest=Ea.prototype.l,Ea.prototype.reset=Ea.prototype.reset,Ea.prototype.update=Ea.prototype.j,Tn.prototype.add=Tn.prototype.add,Tn.prototype.multiply=Tn.prototype.R,Tn.prototype.modulo=Tn.prototype.gb,Tn.prototype.compare=Tn.prototype.X,Tn.prototype.toNumber=Tn.prototype.ea,Tn.prototype.toString=Tn.prototype.toString,Tn.prototype.getBits=Tn.prototype.D,Tn.fromNumber=Ia,Tn.fromString=function $C(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ji($C(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ia(Math.pow(e,8)),r=Go,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=Ia(Math.pow(e,u)),r=r.R(u).add(Ia(l))):r=(r=r.R(t)).add(Ia(l))}return r};var zC=jo.createWebChannelTransport=function(){return new wa},WS=jo.getStatEventTarget=function(){return qh()},W0=jo.ErrorCode=vy,qS=jo.EventType=vC,mg=jo.Event=_u,GC=jo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ZS=jo.FetchXmlHttpFactory=Xh,By=jo.WebChannel=Xp,jy=jo.XhrIo=ar,WC=jo.Md5=Ea,sd=jo.Integer=Tn;const q0="@firebase/firestore";class fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");let Ca="9.23.0";const _o=new Cc.Yd("@firebase/firestore");function Z0(){return _o.logLevel}function Ue(n,...e){if(_o.logLevel<=Cc.in.DEBUG){const t=e.map(Hy);_o.debug(`Firestore (${Ca}): ${n}`,...t)}}function Cr(n,...e){if(_o.logLevel<=Cc.in.ERROR){const t=e.map(Hy);_o.error(`Firestore (${Ca}): ${n}`,...t)}}function Bs(n,...e){if(_o.logLevel<=Cc.in.WARN){const t=e.map(Hy);_o.warn(`Firestore (${Ca}): ${n}`,...t)}}function Hy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Ca}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function It(n,e){n||ut()}function nt(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class QS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fi.UNAUTHENTICATED))}shutdown(){}}class $y{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JS{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let l=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new pi,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new pi)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new QS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new fi(e)}}class XS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=fi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ZC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new XS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ef{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.T=t.token,new ef(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function tA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class KC{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=tA(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function tf(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function K0(n){return n+"\0"}class ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new ur(0,0))}static max(){return new Dt(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class vu{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===vu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends vu{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const YC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends vu{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return YC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(dn.fromString(e))}static fromName(e){return new Qe(dn.fromString(e).popFirst(5))}static empty(){return new Qe(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new dn(e.slice()))}}class zy{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Gy(n){return n.fields.find(e=>2===e.kind)}function od(n){return n.fields.filter(e=>2!==e.kind)}zy.UNKNOWN_ID=-1;class Wy{constructor(e,t){this.fieldPath=e,this.kind=t}}class nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nf(0,js.min())}}function JC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Dt.fromTimestamp(1e9===r?new ur(t+1,0):new ur(t,r));return new js(s,Qe.empty(),e)}function XC(n){return new js(n.readTime,n.key,-1)}class js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new js(Dt.min(),Qe.empty(),-1)}static max(){return new js(Dt.max(),Qe.empty(),-1)}}function yg(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const eD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xc(n){return J0.apply(this,arguments)}function J0(){return J0=(0,Ee.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==eD)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),J0.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(s=>s?oe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(T=>{l[D]=T,++g,g===u&&r(l)},T=>s(T))}})}static doWhile(e,t){return new oe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class qy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new pi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new _g(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=X0(r.target.error);this.v.reject(new _g(e,s))}}static open(e,t,r,s){try{return new qy(t,e.transaction(s,r))}catch(u){throw new _g(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tD(t)}}class Wo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Wo.S((0,Gt.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),Nc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Gt.hl)())return!1;if(Wo.C())return!0;const e=(0,Gt.z$)(),t=Wo.S(e),r=0<t&&t<10,s=Wo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new _g(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;s("VersionError"===g.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new _g(e,g))},u.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=qy.open(u.db,e,l?"readonly":"readwrite",r),D=s(_).next(T=>(_.P(),T)).catch(T=>(_.abort(T),oe.reject(T))).toPromise();return D.catch(()=>{}),yield _.R,D}catch(_){const D=_,T="FirebaseError"!==D.name&&g<3;if(Ue("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),u.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nA{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Nc(this.L.delete())}}class _g extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rc(n){return"IndexedDbTransactionError"===n.name}class tD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nc(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Nc(this.store.add(e))}get(e){return Nc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),Nc(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),Nc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new oe((u,l)=>{s.onerror=g=>{l(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new oe((r,s)=>{t.onerror=u=>{const l=X0(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new oe((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void s();const _=new nA(g),D=t(g.primaryKey,g.value,_);if(D instanceof oe){const T=D.catch(x=>(_.done(),oe.reject(x)));r.push(T)}_.isDone?s():null===_.K?g.continue():g.continue(_.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nc(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=X0(r.target.error);t(s)}})}let nD=!1;function X0(n){const e=Wo.S((0,Gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nD||(nD=!0,setTimeout(()=>{throw r},0)),r}}return n}class rD{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Rc(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield xc(r)}yield t.et(6e4)}))}}class rA{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return oe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(g=>{s-=g,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(g=>(Ue("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=XC(u);yg(l,r)>0&&(r=l)}),new js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Hs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function vg(n){return null==n}function ad(n){return 0===n&&1/n==-1/0}function Zy(n){return"number"==typeof n&&Number.isInteger(n)&&!ad(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iD(e)),e=ew(n.get(t),e);return iD(e)}function ew(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function iD(n){return n+"\x01\x01"}function Da(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:ut()}u=l+2}return new dn(r)}const Ky=["userId","batchId"];function Yy(n,e){return[n,bi(e)]}function tw(n,e,t){return[n,bi(e),t]}const rf={},sD=["prefixPath","collectionGroup","readTime","documentId"],iA=["prefixPath","collectionGroup","documentId"],eN=["collectionGroup","readTime","prefixPath","documentId"],nw=["canonicalId","targetId"],rw=["targetId","path"],sA=["path","targetId"],oD=["collectionId","parent"],aD=["indexId","uid"],oA=["uid","sequenceNumber"],uD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iw=["indexId","uid","orderedDocumentKey"],cD=["userId","collectionPath","documentId"],lD=["userId","collectionPath","largestBatchId"],dD=["userId","collectionGroup","largestBatchId"],sw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aA=[...sw,"documentOverlays"],hD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fD=hD,uA=[...fD,"indexConfiguration","indexState","indexEntries"];class Qy extends Q0{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=nt(n);return Wo.M(t.ht,e)}function ow(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Qn{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jy(this.root,e,this.comparator,!0)}}class Jy{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Si.RED,this.left=s??Si.EMPTY,this.right=u??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Si(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Si.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1,Si.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gD(this.data.getIterator())}getIteratorFrom(e){return new gD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jn(this.comparator);return t.data=e,t}}class gD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sf(n){return n.hasNext()?n.getNext():void 0}class Es{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new Es([])}unionWith(e){let t=new Jn(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class mD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mD("Invalid base64 string: "+s):s}}(e);return new Xr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const lA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oc(n){if(It(!!n),"string"==typeof n){let e=0;const t=lA.exec(n);if(It(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:br(n.seconds),nanos:br(n.nanos)}}function br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $s(n){return"string"==typeof n?Xr.fromBase64String(n):Xr.fromUint8Array(n)}function wg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Eg(n){const e=n.mapValue.fields.__previous_value__;return wg(e)?Eg(e):e}function af(n){const e=Oc(n.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}class yD{constructor(e,t,r,s,u,l,g,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=D}}class wu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}const Eu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xy={nullValue:"NULL_VALUE"};function ud(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wg(n)?4:vD(n)?9007199254740991:10:ut()}function qo(n,e){if(n===e)return!0;const t=ud(n);if(t!==ud(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return af(n).isEqual(af(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Oc(r.timestampValue),l=Oc(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,$s(n.bytesValue).isEqual($s(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return br(r.geoPointValue.latitude)===br(s.geoPointValue.latitude)&&br(r.geoPointValue.longitude)===br(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return br(r.integerValue)===br(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=br(r.doubleValue),l=br(s.doubleValue);return u===l?ad(u)===ad(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return tf(n.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(ow(u)!==ow(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!qo(u[g],l[g])))return!1;return!0}(n,e);default:return ut()}var s}function uf(n,e){return void 0!==(n.values||[]).find(t=>qo(t,e))}function kc(n,e){if(n===e)return 0;const t=ud(n),r=ud(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=br(s.integerValue||s.doubleValue),g=br(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return _D(n.timestampValue,e.timestampValue);case 4:return _D(af(n),af(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(s,u){const l=$s(s),g=$s(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const D=$t(l[_],g[_]);if(0!==D)return D}return $t(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=$t(br(s.latitude),br(u.latitude));return 0!==l?l:$t(br(s.longitude),br(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const D=kc(l[_],g[_]);if(D)return D}return $t(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Eu.mapValue&&u===Eu.mapValue)return 0;if(s===Eu.mapValue)return 1;if(u===Eu.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let T=0;T<g.length&&T<D.length;++T){const x=$t(g[T],D[T]);if(0!==x)return x;const H=kc(l[g[T]],_[D[T]]);if(0!==H)return H}return $t(g.length,D.length)}(n.mapValue,e.mapValue);default:throw ut()}}function _D(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Oc(n),r=Oc(e),s=$t(t.seconds,r.seconds);return 0!==s?s:$t(t.nanos,r.nanos)}function cf(n){return cd(n)}function cd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Oc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$s(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=cd(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${cd(r.fields[g])}`;return u+"}"}(n.mapValue):ut();var e}function Iu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vo(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function t_(n){return!!n&&"nullValue"in n}function lf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function n_(n){return!!n&&"mapValue"in n}function Cg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function r_(n){return"nullValue"in n?Xy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Iu(wu.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function wD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Iu(wu.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Eu:ut()}function ED(n,e){const t=kc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ID(n,e){const t=kc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!n_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cg(t)}setAll(e){let t=Dr.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=Cg(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());n_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];n_(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Pc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new ei(Cg(this.value))}}function CD(n){const e=[];return Pc(n.fields,(t,r)=>{const s=new Dr([t]);if(n_(r)){const u=CD(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Es(e)}class Xn{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Xn(e,0,Dt.min(),Dt.min(),Dt.min(),ei.empty(),0)}static newFoundDocument(e,t,r,s){return new Xn(e,1,t,Dt.min(),r,s,0)}static newNoDocument(e,t){return new Xn(e,2,t,Dt.min(),Dt.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,Dt.min(),Dt.min(),ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cu{constructor(e,t){this.position=e,this.inclusive=t}}function DD(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):kc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function bD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qo(n.position[t],e.position[t]))return!1;return!0}class ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function i_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class TD{}class un extends TD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new uw(e,t,r):"array-contains"===t?new lw(e,r):"in"===t?new RD(e,r):"not-in"===t?new dA(e,r):"array-contains-any"===t?new hA(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new cw(e,r):new xD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(kc(t,this.value)):null!==t&&ud(this.value)===ud(t)&&this.matchesComparison(kc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sn extends TD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Sn(e,t)}matches(e){return dd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dd(n){return"and"===n.op}function Dg(n){return"or"===n.op}function s_(n){return SD(n)&&dd(n)}function SD(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}function o_(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+cf(n.value);if(s_(n))return n.filters.map(e=>o_(e)).join(",");{const e=n.filters.map(t=>o_(t)).join(",");return`${n.op}(${e})`}}function aw(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&qo(t.value,r.value)):n instanceof Sn?function(t,r){return r instanceof Sn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&aw(u,r.filters[l]),!0)}(n,e):void ut();var t,r}function AD(n,e){const t=n.filters.concat(e);return Sn.create(t,n.op)}function MD(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${cf(e.value)}`:n instanceof Sn?function(e){return e.op.toString()+" {"+e.getFilters().map(MD).join(" ,")+"}"}(n):"Filter";var e}class uw extends un{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class cw extends un{constructor(e,t){super(e,"in",t),this.keys=a_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xD extends un{constructor(e,t){super(e,"not-in",t),this.keys=a_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class lw extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&uf(t.arrayValue,this.value)}}class RD extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uf(this.value.arrayValue,t)}}class dA extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uf(this.value.arrayValue,t)}}class hA extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uf(this.value.arrayValue,r))}}class fA{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function u_(n,e=null,t=[],r=[],s=null,u=null,l=null){return new fA(n,e,t,r,s,u,l)}function Du(n){const e=nt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>o_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),vg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cf(r)).join(",")),e.dt=t}return e.dt}function df(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!i_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bD(n.startAt,e.startAt)&&bD(n.endAt,e.endAt)}function bg(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Tg(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function dw(n,e,t){let r=Xy,s=!0;for(const u of Tg(n,e)){let l=Xy,g=!0;switch(u.op){case"<":case"<=":l=r_(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=Xy}ED({value:r,inclusive:s},{value:l,inclusive:g})<0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ED({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function ND(n,e,t){let r=Eu,s=!0;for(const u of Tg(n,e)){let l=Eu,g=!0;switch(u.op){case">=":case">":l=wD(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Eu}ID({value:r,inclusive:s},{value:l,inclusive:g})>0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ID({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class ba{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function hw(n,e,t,r,s,u,l,g){return new ba(n,e,t,r,s,u,l,g)}function hf(n){return new ba(n)}function fw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gi(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Fc(n){return null!==n.collectionGroup}function hd(n){const e=nt(n);if(null===e.wt){e.wt=[];const t=gi(e),r=pw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ld(t)),e.wt.push(new ld(Dr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ld(Dr.keyField(),u))}}}return e.wt}function rs(n){const e=nt(n);if(!e._t)if("F"===e.limitType)e._t=u_(e.path,e.collectionGroup,hd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of hd(e))t.push(new ld(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Cu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Cu(e.startAt.position,e.startAt.inclusive):null;e._t=u_(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function PD(n,e){e.getFirstInequalityField(),gi(n);const t=n.filters.concat([e]);return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gw(n,e,t){return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ff(n,e){return df(rs(n),rs(e))&&n.limitType===e.limitType}function c_(n){return`${Du(rs(n))}|lt:${n.limitType}`}function fd(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>MD(r)).join(", ")}]`),vg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cf(r)).join(",")),`Target(${t})`}(rs(n))}; limitType=${n.limitType})`}function Sg(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Qe.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of hd(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=DD(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,hd(t),r)||t.endAt&&!function(s,u,l){const g=DD(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,hd(t),r)));var t,r}function l_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OD(n){return(e,t)=>{let r=!1;for(const s of hd(n)){const u=kD(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function kD(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),_=l.data.field(s);return null!==g&&null!==_?kc(g,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}class bu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return pD(this.inner)}size(){return this.innerSize}}const pA=new Qn(Qe.comparator);function Is(){return pA}const d_=new Qn(Qe.comparator);function pf(...n){let e=d_;for(const t of n)e=e.insert(t.key,t);return e}function FD(n){let e=d_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zs(){return f_()}function h_(){return f_()}function f_(){return new bu(n=>n.toString(),(n,e)=>n.isEqual(e))}const LD=new Qn(Qe.comparator),gA=new Jn(Qe.comparator);function qt(...n){let e=gA;for(const t of n)e=e.add(t);return e}const gf=new Jn($t);function mw(){return gf}function yw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function p_(n){return{integerValue:""+n}}function mA(n,e){return Zy(e)?p_(e):yw(n,e)}class g_{constructor(){this._=void 0}}function tN(n,e,t){return n instanceof mf?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&wg(s)&&(s=Eg(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Lc?_w(n,e):n instanceof pd?vw(n,e):function(r,s){const u=UD(r,s),l=VD(u)+VD(r.gt);return vo(u)&&vo(r.gt)?p_(l):yw(r.serializer,l)}(n,e)}function yA(n,e,t){return n instanceof Lc?_w(n,e):n instanceof pd?vw(n,e):t}function UD(n,e){return n instanceof gd?vo(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class mf extends g_{}class Lc extends g_{constructor(e){super(),this.elements=e}}function _w(n,e){const t=BD(e);for(const r of n.elements)t.some(s=>qo(s,r))||t.push(r);return{arrayValue:{values:t}}}class pd extends g_{constructor(e){super(),this.elements=e}}function vw(n,e){let t=BD(e);for(const r of n.elements)t=t.filter(s=>!qo(s,r));return{arrayValue:{values:t}}}class gd extends g_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function VD(n){return br(n.integerValue||n.doubleValue)}function BD(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yf{constructor(e,t){this.field=e,this.transform=t}}class jD{constructor(e,t){this.version=e,this.transformResults=t}}class er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ag(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Mg{}function HD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Rg(n.key,er.none()):new xg(n.key,n.data,er.none());{const t=n.data,r=ei.empty();let s=new Jn(Dr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new Uc(n.key,r,new Es(s.toArray()),er.none())}}function vA(n,e,t){n instanceof xg?function(r,s,u){const l=r.value.clone(),g=IA(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Uc?function(r,s,u){if(!Ag(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=IA(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(EA(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function m_(n,e,t,r){return n instanceof xg?function(s,u,l,g){if(!Ag(s.precondition,u))return l;const _=s.value.clone(),D=CA(s.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Uc?function(s,u,l,g){if(!Ag(s.precondition,u))return l;const _=CA(s.fieldTransforms,g,u),D=u.data;return D.setAll(EA(s)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,Ag(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function $D(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=UD(r.transform,s||null);null!=u&&(null===t&&(t=ei.empty()),t.set(r.field,u))}return t||null}function wA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&tf(t,r,(s,u)=>function _A(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Lc&&r instanceof Lc||t instanceof pd&&r instanceof pd?tf(t.elements,r.elements,qo):t instanceof gd&&r instanceof gd?qo(t.gt,r.gt):t instanceof mf&&r instanceof mf);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class xg extends Mg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Uc extends Mg{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function EA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IA(n,e,t){const r=new Map;It(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,yA(l,g,t[s]))}return r}function CA(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,tN(u,l,e))}return r}class Rg extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zD extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GD{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&vA(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=m_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=m_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=h_();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const _=HD(l,g);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&tf(this.mutations,e.mutations,(t,r)=>wA(t,r))&&tf(this.baseMutations,e.baseMutations,(t,r)=>wA(t,r))}}class y_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){It(e.mutations.length===r.length);let s=LD;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new y_(e,t,r,s)}}class Ng{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class DA{constructor(e,t){this.count=e,this.unchangedNames=t}}var gr,hn;function bA(n){switch(n){default:return ut();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function TA(n){if(void 0===n)return Cr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case gr.OK:return ce.OK;case gr.CANCELLED:return ce.CANCELLED;case gr.UNKNOWN:return ce.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ce.INTERNAL;case gr.UNAVAILABLE:return ce.UNAVAILABLE;case gr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case gr.NOT_FOUND:return ce.NOT_FOUND;case gr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case gr.ABORTED:return ce.ABORTED;case gr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case gr.DATA_LOSS:return ce.DATA_LOSS;default:return ut()}}(hn=gr||(gr={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class qD{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Pg}static getOrCreateInstance(){return null===Pg&&(Pg=new qD),Pg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Pg=null;function ZD(){return new TextEncoder}const SA=new sd([4294967295,4294967295],0);function KD(n){const e=ZD().encode(n),t=new WC;return t.update(e),new Uint8Array(t.digest())}function AA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new sd([t,r],0),new sd([s,u],0)]}class ww{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _f(`Invalid padding: ${t}`);if(r<0)throw new _f(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new _f(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new _f(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=sd.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(sd.fromNumber(r)));return 1===s.compare(SA)&&(s=new sd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=KD(e),[r,s]=AA(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new ww(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=KD(e),[r,s]=AA(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class _f extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,__.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vf(Dt.min(),s,new Qn($t),Is(),qt())}}class __{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new __(r,t,qt(),qt(),qt())}}class Cs{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class YD{constructor(e,t){this.targetId=e,this.Vt=t}}class v_{constructor(e,t,r=Xr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ew{constructor(){this.St=0,this.Dt=Hi(),this.Ct=Xr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ut()}}),new __(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Hi()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class MA{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Is(),this.zt=xA(),this.Wt=new Qn($t)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(bg(l))if(0===s){const g=new Qe(l.path);this.Yt(r,g,Xn.newNoDocument(g,Dt.min()))}else It(1===s);else{const g=this.ie(r);if(g!==s){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=qD.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,T,x){var H,K,ue,ye,me,rt;const mt={localCacheCount:T,existenceFilterCount:x.count},Ge=x.unchangedNames;return Ge&&(mt.bloomFilter={applied:0===D,hashCount:null!==(H=Ge?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(ye=null===(ue=null===(K=Ge?.bits)||void 0===K?void 0:K.bitmap)||void 0===ue?void 0:ue.length)&&void 0!==ye?ye:0,padding:null!==(rt=null===(me=Ge?.bits)||void 0===me?void 0:me.padding)&&void 0!==rt?rt:0}),mt}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,D;try{_=$s(u).toUint8Array()}catch(T){if(T instanceof mD)return Bs("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{D=new ww(_,l,g)}catch(T){return Bs(T instanceof _f?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===D.It?1:s!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&bg(g.target)){const _=new Qe(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,Xn.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=qt();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const D=this.se(_);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new vf(e,t,this.Wt,this.jt,r);return this.jt=Is(),this.zt=xA(),this.Wt=new Qn($t),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ew,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Jn($t),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ew),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function xA(){return new Qn(Qe.comparator)}function Hi(){return new Qn(Qe.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},Iw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NA={and:"AND",or:"OR"};class PA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Og(n,e){return n.useProto3Json||vg(e)?e:{value:e}}function md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OA(n,e){return md(n,e.toTimestamp())}function Tr(n){return It(!!n),Dt.fromTimestamp(function(e){const t=Oc(e);return new ur(t.seconds,t.nanos)}(n))}function w_(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Dw(n){const e=dn.fromString(n);return It(ib(e)),e}function wf(n,e){return w_(n.databaseId,e.path)}function Ta(n,e){const t=Dw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(Tu(t))}function E_(n,e){return w_(n.databaseId,e)}function QD(n){const e=Dw(n);return 4===e.length?dn.emptyPath():Tu(e)}function yd(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tu(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bw(n,e,t){return{name:wf(n,e),fields:t.value.mapValue.fields}}function I_(n,e,t){const r=Ta(n,e.name),s=Tr(e.updateTime),u=e.createTime?Tr(e.createTime):Dt.min(),l=new ei({mapValue:{fields:e.fields}}),g=Xn.newFoundDocument(r,s,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function C_(n,e){let t;if(e instanceof xg)t={update:bw(n,e.key,e.value)};else if(e instanceof Rg)t={delete:wf(n,e.key)};else if(e instanceof Uc)t={update:bw(n,e.key,e.data),updateMask:rb(e.fieldMask)};else{if(!(e instanceof zD))return ut();t={verify:wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof mf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Lc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:OA(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ut()),t;var s}function D_(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?er.updateTime(Tr(s.updateTime)):void 0!==s.exists?er.exists(s.exists):er.none():er.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let g=null;"setToServerValue"in l?(It("REQUEST_TIME"===l.setToServerValue),g=new mf):"appendMissingElements"in l?g=new Lc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new pd(l.removeAllFromArray.values||[]):"increment"in l?g=new gd(u,l.increment):ut();const _=Dr.fromServerFormat(l.fieldPath);return new yf(_,g)}(n,s)):[];var s;if(e.update){const s=Ta(n,e.update.name),u=new ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Es((e.updateMask.fieldPaths||[]).map(D=>Dr.fromServerFormat(D)));return new Uc(s,u,l,t,r)}return new xg(s,u,t,r)}if(e.delete){const s=Ta(n,e.delete);return new Rg(s,t)}if(e.verify){const s=Ta(n,e.verify);return new zD(s,t)}return ut()}function JD(n,e){return{documents:[E_(n,e.path)]}}function Sw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=E_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return Aw(Sn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:_d((T=D).field),direction:tb(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=Og(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function XD(n){let e=QD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){It(1===r);const T=t.from[0];T.allDescendants?s=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const x=LA(T);return x instanceof Sn&&s_(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new ld(Vc((x=T).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let g=null;t.limit&&(g=function(T){let x;return x="object"==typeof T?T.value:T,vg(x)?null:x}(t.limit));let _=null;var T;t.startAt&&(_=new Cu((T=t.startAt).values||[],!!T.before));let D=null;return t.endAt&&(D=function(T){return new Cu(T.values||[],!T.before)}(t.endAt)),hw(e,s,l,u,g,"F",_,D)}function LA(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vc(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Vc(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vc(e.unaryFilter.field);return un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Vc(e.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?un.create(Vc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Sn.create(e.compositeFilter.filters.map(t=>LA(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function tb(n){return RA[n]}function UA(n){return Iw[n]}function nb(n){return NA[n]}function _d(n){return{fieldPath:n.canonicalString()}}function Vc(n){return Dr.fromServerFormat(n.fieldPath)}function Aw(n){return n instanceof un?function(e){if("=="===e.op){if(lf(e.value))return{unaryFilter:{field:_d(e.field),op:"IS_NAN"}};if(t_(e.value))return{unaryFilter:{field:_d(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lf(e.value))return{unaryFilter:{field:_d(e.field),op:"IS_NOT_NAN"}};if(t_(e.value))return{unaryFilter:{field:_d(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_d(e.field),op:UA(e.op),value:e.value}}}(n):n instanceof Sn?function(e){const t=e.getFilters().map(r=>Aw(r));return 1===t.length?t[0]:{compositeFilter:{op:nb(e.op),filters:t}}}(n):ut()}function rb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ib(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Sa{constructor(e,t,r,s,u=Dt.min(),l=Dt.min(),g=Xr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mw{constructor(e){this.fe=e}}function kg(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Fg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:wf(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:md(s,u.version.toTimestamp()),createTime:md(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bc(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:Bc(e.version)}}var s,u;return r}function Fg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vd(n){const e=new ur(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function wd(n,e){const t=(e.baseMutations||[]).map(u=>D_(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>D_(n.fe,u)),s=ur.fromMillis(e.localWriteTimeMs);return new GD(e.batchId,s,t,r)}function b_(n){const e=vd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vd(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var s;return void 0!==n.query.documents?(It(1===(s=n.query).documents.length),r=rs(hf(QD(s.documents[0])))):r=rs(XD(n.query)),new Sa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Xr.fromBase64String(n.resumeToken))}function xw(n,e){const t=Bc(e.snapshotVersion),r=Bc(e.lastLimboFreeSnapshotVersion);let s;s=bg(e.target)?JD(n.fe,e.target):Sw(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Du(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Rw(n){const e=XD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gw(e,e.limit,"L"):e}function Nw(n,e){return new Ng(e.largestBatchId,D_(n.fe,e.overlayMutation))}function VA(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}function BA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bc(r.readTime),documentKey:bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class nN{getBundleMetadata(e,t){return Pw(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:vd(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Pw(e).put({bundleId:(r=t).id,createTime:Bc(Tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sb(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:Rw(s.bundledQuery),readTime:vd(s.readTime)};var s})}saveNamedQuery(e,t){return sb(e).put({name:(r=t).name,readTime:Bc(Tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Pw(n){return Ti(n,"bundles")}function sb(n){return Ti(n,"namedQueries")}class T_{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new T_(e,t.uid||"")}getOverlay(e,t){return Lg(e).get(VA(this.userId,t)).next(r=>r?Nw(this.serializer,r):null)}getOverlays(e,t){const r=zs();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const g=new Ng(t,l);s.push(this.we(e,g))}),oe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(bi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Lg(e).J("collectionPathOverlayIndex",g))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=zs(),u=bi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Lg(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const D=Nw(this.serializer,_);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=zs();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lg(e).X({index:"collectionGroupOverlayIndex",range:g},(_,D,T)=>{const x=Nw(this.serializer,D);u.size()<s||x.largestBatchId===l?(u.set(x.getKey(),x),l=x.largestBatchId):T.done()}).next(()=>u)}we(e,t){return Lg(e).put(function(r,s,u){const[l,g,_]=VA(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:C_(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Lg(n){return Ti(n,"documentOverlays")}class If{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(br(e.integerValue));else if("doubleValue"in e){const r=br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),ad(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae($s(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?vD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ut()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function rN(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function jA(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=rN(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}If.Ve=new If;class iN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=jA(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=jA(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class sN{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class HA{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class jc{constructor(){this.je=new iN,this.ze=new sN(this.je),this.We=new HA(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ed{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ed(this.indexId,this.documentKey,this.arrayValue,r)}}function Hc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ow(n.arrayValue,e.arrayValue),0!==t?t:(t=Ow(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function Ow(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Id{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){It(e.collectionGroup===this.collectionId);const t=Gy(e);if(void 0!==t&&!this.en(t))return!1;const r=od(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function kw(n){var e,t;if(It(n instanceof un||n instanceof Sn),n instanceof un){if(n instanceof RD){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>un.create(n.field,"==",u)))||[];return Sn.create(s,"or")}return n}const r=n.filters.map(s=>kw(s));return Sn.create(r,n.op)}function Fw(n){if(0===n.getFilters().length)return[];const e=Vg(kw(n));return It(S_(e)),Ug(e)||Lw(e)?[e]:e.getFilters()}function Ug(n){return n instanceof un}function Lw(n){return n instanceof Sn&&s_(n)}function S_(n){return Ug(n)||Lw(n)||function(e){if(e instanceof Sn&&Dg(e)){for(const t of e.getFilters())if(!Ug(t)&&!Lw(t))return!1;return!0}return!1}(n)}function Vg(n){if(It(n instanceof un||n instanceof Sn),n instanceof un)return n;if(1===n.filters.length)return Vg(n.filters[0]);const e=n.filters.map(r=>Vg(r));let t=Sn.create(e,n.op);return t=Uw(t),S_(t)?t:(It(t instanceof Sn),It(dd(t)),It(t.filters.length>1),t.filters.reduce((r,s)=>Cf(r,s)))}function Cf(n,e){let t;return It(n instanceof un||n instanceof Sn),It(e instanceof un||e instanceof Sn),t=n instanceof un?e instanceof un?Sn.create([n,e],"and"):$A(n,e):e instanceof un?$A(e,n):function(r,s){if(It(r.filters.length>0&&s.filters.length>0),dd(r)&&dd(s))return AD(r,s.getFilters());const u=Dg(r)?r:s,l=Dg(r)?s:r,g=u.filters.map(_=>Cf(_,l));return Sn.create(g,"or")}(n,e),Uw(t)}function $A(n,e){if(dd(e))return AD(e,n.getFilters());{const t=e.filters.map(r=>Cf(n,r));return Sn.create(t,"or")}}function Uw(n){if(It(n instanceof un||n instanceof Sn),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return Uw(e[0]);if(SD(n))return n;const t=e.map(s=>Uw(s)),r=[];return t.forEach(s=>{s instanceof un?r.push(s):s instanceof Sn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Sn.create(r,n.op)}class oN{constructor(){this.rn=new A_}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(js.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class A_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Jn(dn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Jn(dn.comparator)).toArray()}}const M_=new Uint8Array(0);class zA{constructor(e,t){this.user=e,this.databaseId=t,this.on=new A_,this.un=new bu(r=>Du(r),(r,s)=>df(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:bi(s)};return ob(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[K0(t),""],!1,!0);return ob(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Da(l.parent))}return r})}addFieldIndex(e,t){const r=jg(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Df(e);return u.next(g=>{l.put(BA(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=jg(e),s=Df(e),u=Bg(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Bg(e);let s=!0;const u=new Map;return oe.forEach(this.cn(t),l=>this.an(e,l).next(g=>{s&&(s=!!g),u.set(l,g)})).next(()=>{if(s){let l=qt();const g=[];return oe.forEach(u,(_,D)=>{var T;Ue("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Ge=>`${Ge.fieldPath}:${Ge.kind}`).join(",")}`} to execute ${Du(t)}`);const x=function(Ge,at){const Nt=Gy(at);if(void 0===Nt)return null;for(const Zt of Tg(Ge,Nt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(D,_),H=function(Ge,at){const Nt=new Map;for(const Zt of od(at))for(const _i of Tg(Ge,Zt.fieldPath))switch(_i.op){case"==":case"in":Nt.set(Zt.fieldPath.canonicalString(),_i.value);break;case"not-in":case"!=":return Nt.set(Zt.fieldPath.canonicalString(),_i.value),Array.from(Nt.values())}return null}(D,_),K=function(Ge,at){const Nt=[];let Zt=!0;for(const _i of od(at)){const Ko=0===_i.kind?dw(Ge,_i.fieldPath,Ge.startAt):ND(Ge,_i.fieldPath,Ge.startAt);Nt.push(Ko.value),Zt&&(Zt=Ko.inclusive)}return new Cu(Nt,Zt)}(D,_),ue=function(Ge,at){const Nt=[];let Zt=!0;for(const _i of od(at)){const Ko=0===_i.kind?ND(Ge,_i.fieldPath,Ge.endAt):dw(Ge,_i.fieldPath,Ge.endAt);Nt.push(Ko.value),Zt&&(Zt=Ko.inclusive)}return new Cu(Nt,Zt)}(D,_),ye=this.hn(_,D,K),me=this.hn(_,D,ue),rt=this.ln(_,D,H),mt=this.fn(_.indexId,x,ye,K.inclusive,me,ue.inclusive,rt);return oe.forEach(mt,Ge=>r.H(Ge,t.limit).next(at=>{at.forEach(Nt=>{const Zt=Qe.fromSegments(Nt.documentKey);l.has(Zt)||(l=l.add(Zt),g.push(Zt))})}))}).next(()=>g)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Fw(Sn.create(e.filters,"and")).map(r=>u_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),T=[];for(let x=0;x<_;++x){const H=t?this.dn(t[x/D]):M_,K=this.wn(e,H,r[x%D],s),ue=this._n(e,H,u[x%D],l),ye=g.map(me=>this.wn(e,H,me,!0));T.push(...this.createRange(K,ue,ye))}return T}wn(e,t,r,s){const u=new Ed(e,Qe.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new Ed(e,Qe.empty(),t,r);return s?u.Je():u}an(e,t){const r=new Id(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return oe.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Jn(Dr.comparator),D=!1;for(const T of g.filters)for(const x of T.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?D=!0:_=_.add(x.field));for(const T of g.orderBy)T.field.isKeyField()||(_=_.add(T.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new jc;for(const s of od(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);If.Ve._e(u,l)}return r.Qe()}dn(e){const t=new jc;return If.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new jc;return If.Ve._e(Iu(this.databaseId,t),r.He(function(s){const u=od(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new jc);let u=0;for(const l of od(e)){const g=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&Ig(g))s=this.pn(s,l,g);else{const D=_.He(l.kind);If.Ve._e(g,D)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of s){const _=new jc;_.seed(g.Qe()),If.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jg(e),s=Df(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return oe.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{l.push(function(D,T){const x=T?new nf(T.sequenceNumber,new js(vd(T.readTime),new Qe(Da(T.documentKey)),T.largestBatchId)):nf.empty(),H=D.fields.map(([K,ue])=>new Wy(Dr.fromServerFormat(K),ue));return new zy(D.indexId,D.collectionGroup,H,x)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:$t(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=jg(e),u=Df(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>oe.forEach(g,_=>u.put(BA(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),oe.forEach(g,_=>this.En(e,s,_).next(D=>{const T=this.An(u,_);return D.isEqual(T)?oe.resolve():this.vn(e,u,_,D,T)}))))})}Rn(e,t,r,s){return Bg(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return Bg(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=Bg(e);let u=new Jn(Hc);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new Ed(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Jn(Hc);const s=this.mn(t,e);if(null==s)return r;const u=Gy(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ig(l))for(const g of l.arrayValue.values||[])r=r.add(new Ed(t.indexId,e.key,this.dn(g),s))}else r=r.add(new Ed(t.indexId,e.key,M_,s));return r}vn(e,t,r,s,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,D,T,x){const H=g.getIterator(),K=_.getIterator();let ue=sf(H),ye=sf(K);for(;ue||ye;){let me=!1,rt=!1;if(ue&&ye){const mt=D(ue,ye);mt<0?rt=!0:mt>0&&(me=!0)}else null!=ue?rt=!0:me=!0;me?(T(ye),ye=sf(K)):rt?(x(ue),ue=sf(H)):(ue=sf(H),ye=sf(K))}}(s,u,Hc,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),oe.waitFor(l)}Tn(e){let t=1;return Df(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>Hc(l,g)).filter((l,g,_)=>!g||0!==Hc(l,_[g-1]));const s=[];s.push(e);for(const l of r){const g=Hc(l,e),_=Hc(l,t);if(0===g)s[0]=e.Je();else if(g>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,M_,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,M_,[]]))}return u}bn(e,t){return Hc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vw)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||ut())).next(Vw)}}function ob(n){return Ti(n,"collectionParents")}function Bg(n){return Ti(n,"indexEntries")}function jg(n){return Ti(n,"indexConfiguration")}function Df(n){return Ti(n,"indexState")}function Vw(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;yg(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new js(e.readTime,e.documentKey,t)}const ab={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $i{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $i(e,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bw(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(T,x,H)=>(g++,H.delete()));u.push(_.next(()=>{It(1===g)}));const D=[];for(const T of t.mutations){const x=tw(e,T.key.path,t.batchId);u.push(s.delete(x)),D.push(T.key)}return oe.waitFor(u).next(()=>D)}function bf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(41943040,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);class jw{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new jw(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Aa(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Tf(e),l=Aa(e);return l.add({}).next(g=>{It("number"==typeof g);const _=new GD(g,t,r,s),D=function(H,K,ue){const ye=ue.baseMutations.map(rt=>C_(H.fe,rt)),me=ue.mutations.map(rt=>C_(H.fe,rt));return{userId:K,batchId:ue.batchId,localWriteTimeMs:ue.localWriteTime.toMillis(),baseMutations:ye,mutations:me}}(this.serializer,this.userId,_),T=[];let x=new Jn((H,K)=>$t(H.canonicalString(),K.canonicalString()));for(const H of s){const K=tw(this.userId,H.key.path,g);x=x.add(H.key.path.popLast()),T.push(l.put(D)),T.push(u.put(K,rf))}return x.forEach(H=>{T.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),oe.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Aa(e).get(t).next(r=>r?(It(r.userId===this.userId),wd(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Aa(e).X({index:"userMutationsIndex",range:s},(l,g,_)=>{g.userId===this.userId&&(It(g.batchId>=r),u=wd(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Aa(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Aa(e).j("userMutationsIndex",t).next(r=>r.map(s=>wd(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yy(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Tf(e).X({range:s},(l,g,_)=>{const[D,T,x]=l,H=Da(T);if(D===this.userId&&t.path.isEqual(H))return Aa(e).get(x).next(K=>{if(!K)throw ut();It(K.userId===this.userId),u.push(wd(this.serializer,K))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn($t);const s=[];return t.forEach(u=>{const l=Yy(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Tf(e).X({range:g},(D,T,x)=>{const[H,K,ue]=D,ye=Da(K);H===this.userId&&u.path.isEqual(ye)?r=r.add(ue):x.done()});s.push(_)}),oe.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Yy(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Jn($t);return Tf(e).X({range:l},(_,D,T)=>{const[x,H,K]=_,ue=Da(H);x===this.userId&&r.isPrefixOf(ue)?ue.length===s&&(g=g.add(K)):T.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Aa(e).get(u).next(l=>{if(null===l)throw ut();It(l.userId===this.userId),r.push(wd(this.serializer,l))}))}),oe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Bw(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Tf(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=Da(u[1]);s.push(_)}else g.done()}).next(()=>{It(0===s.length)})})}containsKey(e,t){return Hw(e,this.userId,t)}xn(e){return ub(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hw(n,e,t){const r=Yy(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Tf(n).X({range:u,Y:!0},(g,_,D)=>{const[T,x,H]=g;T===e&&x===s&&(l=!0),D.done()}).next(()=>l)}function Aa(n){return Ti(n,"mutations")}function Tf(n){return Ti(n,"documentMutations")}function ub(n){return Ti(n,"mutationQueues")}class Sf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Sf(0)}static Mn(){return new Sf(-1)}}class aN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Sf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Af(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Af(e).X((l,g)=>{const _=b_(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Af(e).X((r,s)=>{const u=b_(s);t(u)})}$n(e){return cb(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}On(e,t){return cb(e).put("targetGlobalKey",t)}Fn(e,t){return Af(e).put(xw(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Du(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Af(e).X({range:s,index:"queryTargetsIndex"},(l,g,_)=>{const D=b_(g);df(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=$c(e);return t.forEach(l=>{const g=bi(l.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(s)}removeMatchingKeys(e,t,r){const s=$c(e);return oe.forEach(t,u=>{const l=bi(u.path);return oe.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=$c(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=$c(e);let u=qt();return s.X({range:r,Y:!0},(l,g,_)=>{const D=Da(l[1]),T=new Qe(D);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=bi(t.path),s=IDBKeyRange.bound([r],[K0(r)],!1,!0);let u=0;return $c(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,g],_,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Af(e).get(t).next(r=>r?b_(r):null)}}function Af(n){return Ti(n,"targets")}function cb(n){return Ti(n,"targetGlobal")}function $c(n){return Ti(n,"targetDocuments")}function lb([n,e],[t,r]){const s=$t(n,t);return 0===s?$t(e,r):s}class db{constructor(e){this.Ln=e,this.buffer=new Jn(lb),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $w{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Rc(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xc(r)}yield t.Qn(3e5)}))}}class uN{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Hs.ct);const r=new db(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(ab)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ab):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,g,_,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,l=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(D=Date.now(),Z0()<=Cc.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${s} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${x} documents in `+(D-_)+`ms\nTotal Duration: ${D-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class zw{constructor(e,t){this.db=e,this.garbageCollector=function hb(n,e){return new uN(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return Hg(e,r)}removeReference(e,t,r){return Hg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hg(e,t)}Xn(e,t){return function(r,s){let u=!1;return ub(r).Z(l=>Hw(r,l,s).next(g=>(g&&(u=!0),oe.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),$c(e).delete([0,bi(l.path)])))});s.push(_)}}).next(()=>oe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hg(e,t)}Yn(e,t){const r=$c(e);let s,u=Hs.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:D})=>{0===l?(u!==Hs.ct&&t(new Qe(Da(s)),u),u=D,s=_):u=Hs.ct}).next(()=>{u!==Hs.ct&&t(new Qe(Da(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hg(n,e){return $c(n).put((r=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:r}));var r}class Gw{constructor(){this.changes=new bu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zc(e).put(r)}removeEntry(e,t,r){return zc(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Fg(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Xn.newInvalidDocument(t);return zc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Mf(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Xn.newInvalidDocument(t)};return zc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Mf(t))},(s,u)=>{r={document:this.ts(t,u),size:bf(u)}}).next(()=>r)}getEntries(e,t){let r=Is();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=Is(),s=new Qn(Qe.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),s=s.insert(u,bf(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let s=new Jn(pb);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Mf(s.first()),Mf(s.last())),l=s.getIterator();let g=l.getNext();return zc(e).X({index:"documentKeyIndex",range:u},(_,D,T)=>{const x=Qe.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&pb(g,x)<0;)r(g,null),g=l.getNext();g&&g.isEqual(x)&&(r(g,D),g=l.hasNext()?l.getNext():null),g?T.G(Mf(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Fg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zc(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let D=Is();for(const T of _){const x=this.ts(Qe.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);x.isFoundDocument()&&(Sg(t,x)||s.has(x.key))&&(D=D.insert(x.key,x))}return D})}getAllFromCollectionGroup(e,t,r,s){let u=Is();const l=qA(t,r),g=qA(t,js.max());return zc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,D,T)=>{const x=this.ts(Qe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(x.key,x),u.size===s&&T.done()}).next(()=>u)}newChangeBuffer(e){return new WA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fb(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Zn(e,t){return fb(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function Ef(n,e){let t;if(e.document)t=I_(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),s=vd(e.noDocument.readTime);t=Xn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Qe.fromSegments(e.unknownDocument.path),s=vd(e.unknownDocument.version);t=Xn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new ur(r[0],r[1]);return Dt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Xn.newInvalidDocument(e)}}function x_(n){return new GA(n)}class WA extends Gw{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new bu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Jn((u,l)=>$t(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=kg(this.os.serializer,l);s=s.add(u.path.popLast());const D=bf(_);r+=D-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=kg(this.os.serializer,l.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function fb(n){return Ti(n,"remoteDocumentGlobal")}function zc(n){return Ti(n,"remoteDocumentsV14")}function Mf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qA(n,e){const t=e.documentKey.path.toArray();return[n,Fg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pb(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=$t(t[u],r[u]),s)return s;return s=$t(t.length,r.length),s||(s=$t(t[t.length-2],r[r.length-2]),s||$t(t[t.length-1],r[r.length-1]))}class R_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZA{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&m_(r.mutation,s,Es.empty(),ur.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const s=zs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=pf();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=zs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=Is();const l=f_(),g=f_();return t.forEach((_,D)=>{const T=r.get(D.key);s.has(D.key)&&(void 0===T||T.mutation instanceof Uc)?u=u.insert(D.key,D):void 0!==T?(l.set(D.key,T.mutation.getFieldMask()),m_(T.mutation,D,T.mutation.getFieldMask(),ur.now())):l.set(D.key,Es.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,T)=>l.set(D,T)),t.forEach((D,T)=>{var x;return g.set(D,new R_(T,null!==(x=l.get(D))&&void 0!==x?x:null))}),g))}recalculateAndSaveOverlays(e,t){const r=f_();let s=new Qn((l,g)=>l-g),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let T=r.get(_)||Es.empty();T=g.applyToLocalView(D,T),r.set(_,T);const x=(s.get(g.batchId)||qt()).add(_);s=s.insert(g.batchId,x)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,T=_.value,x=h_();T.forEach(H=>{if(!u.has(H)){const K=HD(t.get(H),r.get(H));null!==K&&x.set(H,K),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,x))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):oe.resolve(zs());let g=-1,_=u;return l.next(D=>oe.forEach(D,(T,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),u.get(T)?oe.resolve():this.remoteDocumentCache.getEntry(e,T).next(H=>{_=_.insert(T,H)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,qt())).next(T=>({batchId:g,changes:FD(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let s=pf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=pf();return this.indexManager.getCollectionParents(e,s).next(l=>oe.forEach(l,g=>{const _=(D=t,T=g.child(s),new ba(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((T,x)=>{u=u.insert(T,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,Xn.newInvalidDocument(D)))});let l=pf();return u.forEach((g,_)=>{const D=s.get(g);void 0!==D&&m_(D.mutation,_,Es.empty(),ur.now()),Sg(t,_)&&(l=l.insert(g,_))}),l})}}class KA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Tr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Rw(r.bundledQuery),readTime:Tr(r.readTime)}),oe.resolve();var r}}class cN{constructor(){this.overlays=new Qn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zs();return oe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=zs(),u=t.length+1,l=new Qe(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Qn((D,T)=>D-T);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let T=u.get(D.largestBatchId);null===T&&(T=zs(),u=u.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const g=zs(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,T)=>g.set(D,T)),!(g.size()>=s)););return oe.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ng(t,r));let u=this.ls.get(t);void 0===u&&(u=qt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class gb{constructor(){this.fs=new Jn(mi.ds),this.ws=new Jn(mi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new mi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new mi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new dn([])),r=new mi(t,e),s=new mi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new dn([])),r=new mi(t,e),s=new mi(t,e+1);let u=qt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new mi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||$t(e.As,t.As)}static _s(e,t){return $t(e.As,t.As)||Qe.comparator(e.key,t.key)}}class lN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Jn(mi.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new GD(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new mi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),s=new mi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn($t);return t.forEach(s=>{const u=new mi(s,0),l=new mi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const l=new mi(new Qe(u),0);let g=new Jn($t);return this.Rs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(g=g.add(_.As)),!0)},l),oe.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){It(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,s=>{const u=new mi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new mi(t,0),s=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class dN{constructor(e){this.Ds=e,this.docs=new Qn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=Is();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Xn.newInvalidDocument(s))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Is();const l=t.path,g=new Qe(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:T}}=_.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||yg(XC(T),r)<=0||(s.has(T.key)||Sg(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,t,r,s){ut()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new hN(this)}getSize(e){return oe.resolve(this.size)}}class hN extends Gw{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class fN{constructor(e){this.persistence=e,this.xs=new bu(t=>Du(t),df),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new gb,this.targetCount=0,this.Ms=Sf.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Sf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),oe.waitFor(u).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class mb{constructor(e,t){this.$s={},this.overlays={},this.Os=new Hs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new fN(this),this.indexManager=new oN,this.remoteDocumentCache=new dN(r=>this.referenceDelegate.Ls(r)),this.serializer=new Mw(t),this.qs=new KA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new lN(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const s=new YA(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class YA extends Q0{constructor(e){super(),this.currentSequenceNumber=e}}class Ww{constructor(e){this.persistence=e,this.Qs=new gb,this.js=null}static zs(e){return new Ww(e)}get Ws(){if(this.js)return this.js;throw ut()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const s=Qe.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class pN{constructor(e){this.serializer=e}O(e,t,r,s){const u=new qy("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ky,{unique:!0}),g.createObjectStore("documentMutations"),QA(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),QA(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ky,{unique:!0});const T=_.store("mutations"),x=D.map(H=>T.put(H));return oe.waitFor(x)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:cD});_.createIndex("collectionPathOverlayIndex",lD,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",dD,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:sD});_.createIndex("documentKeyIndex",iA),_.createIndex("collectionGroupIndex",eN)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:aD}).createIndex("sequenceNumberIndex",oA,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:uD}).createIndex("documentKeyIndex",iw,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=bf(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>oe.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>oe.forEach(g,_=>{It(_.userId===u.userId);const D=wd(this.serializer,_);return Bw(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,g)=>{const _=new dn(l),D=[0,bi(_)];u.push(t.get(D).next(T=>T?oe.resolve():t.put({targetId:0,path:bi(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:oD});const r=t.store("collectionParents"),s=new A_,u=l=>{if(s.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:bi(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new dn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],D)=>{const T=Da(g);return u(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=b_(s),l=xw(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(D=l,D.document?new Qe(dn.fromString(D.document.name).popFirst(5)):D.noDocument?Qe.fromSegments(D.noDocument.path):D.unknownDocument?Qe.fromSegments(D.unknownDocument.path):ut()).path.toArray();var D;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(g.put(T))}).next(()=>oe.waitFor(s))}si(e,t){const r=t.store("mutations"),s=x_(this.serializer),u=new mb(Ww.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var D;let T=null!==(D=g.get(_.userId))&&void 0!==D?D:qt();wd(this.serializer,_).keys().forEach(x=>T=T.add(x)),g.set(_.userId,T)}),oe.forEach(g,(_,D)=>{const T=new fi(D),x=T_.de(this.serializer,T),H=u.getIndexManager(T),K=jw.de(T,this.serializer,H,u.referenceDelegate);return new ZA(s,K,x,H).recalculateAndSaveOverlaysForDocumentKeys(new Qy(t,Hs.ct),_).next()})})}}function QA(n){n.createObjectStore("targetDocuments",{keyPath:rw}).createIndex("documentTargetsIndex",sA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nw,{unique:!0}),n.createObjectStore("targetGlobal")}const yb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zw{constructor(e,t,r,s,u,l,g,_,D,T,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=D,this.oi=T,this.ui=x,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!Zw.D())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zw(this,s),this.di=t+"main",this.serializer=new Mw(_),this.wi=new Wo(this.di,this.ui,new pN(this.serializer)),this.Bs=new aN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=x_(this.serializer),this.qs=new nN,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,yb);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Hs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>i(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Rc(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return N_(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return i(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Ti(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return oe.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):N_(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,yb);return!1}}return!(!this.networkEnabled||!this.inForeground)||i(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Qy(t,Hs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>i(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return jw.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zA(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return T_.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?uA:14===l?fD:13===l?hD:12===l?aA:11===l?sw:void ut();var l;let g;return this.wi.runTransaction(e,s,u,_=>(g=new Qy(_,this.Os?this.Os.next():Hs.ct),"readwrite-primary"===t?this.Ti(g).next(D=>!!D||this.Ei(g)).next(D=>{if(!D)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ce.FAILED_PRECONDITION,eD);return r(g)}).next(D=>this.vi(g).next(()=>D)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return N_(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,yb)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return N_(e).put("owner",t)}static D(){return Wo.D()}Ai(e){const t=N_(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Gt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function N_(n){return Ti(n,"owner")}function i(n){return Ti(n,"clientMetadata")}function o(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class a{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=qt(),s=qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new a(e,t.fromCache,r,s)}}class c{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(fw(t))return oe.resolve(null);let r=rs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=gw(t,null,"F"),r=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=qt(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.ji(t,g);return this.zi(t,D,l,_.readTime)?this.Ki(e,gw(t,null,"F")):this.Wi(e,D,t,_)}))})))}Gi(e,t,r,s){return fw(t)||s.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(Z0()<=Cc.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fd(t)),this.Wi(e,l,t,JC(s,-1)))})}ji(e,t){let r=new Jn(OD(e));return t.forEach((s,u)=>{Sg(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return Z0()<=Cc.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",fd(t)),this.Ui.getDocumentsMatchingQuery(e,t,js.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class h{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Qn($t),this.Yi=new bu(u=>Du(u),df),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZA(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function f(n,e,t,r){return new h(n,e,t,r)}function y(n,e){return w.apply(this,arguments)}function w(){return w=(0,Ee.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=qt();for(const D of s){l.push(D.batchId);for(const T of D.mutations)_=_.add(T.key)}for(const D of u){g.push(D.batchId);for(const T of D.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(D=>({er:D,removedBatchIds:l,addedBatchIds:g}))})})}),w.apply(this,arguments)}function S(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function V(n,e,t){let r=qt(),s=qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Is();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(Dt.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ue("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{nr:l,sr:s}})}function q(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,oe.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Sa(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ie(n,e,t){return Le.apply(this,arguments)}function Le(){return Le=(0,Ee.Z)(function*(n,e,t){const r=nt(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Rc(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),Le.apply(this,arguments)}function Je(n,e,t){const r=nt(n);let s=Dt.min(),u=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,D){const T=nt(g),x=T.Yi.get(D);return void 0!==x?oe.resolve(T.Ji.get(x)):T.Bs.getTargetData(_,D)}(r,l,rs(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:Dt.min(),t?u:qt())).next(g=>(Bt(r,l_(e),g),{documents:g,ir:u})))}function _t(n,e){const t=nt(n),r=nt(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function be(n,e){const t=nt(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,JC(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Bt(t,e,s),s))}function Bt(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function an(){return an=(0,Ee.Z)(function*(n,e,t,r){const s=nt(n);let u=qt(),l=Is();for(const D of t){const T=e.rr(D.metadata.name);D.document&&(u=u.add(T));const x=e.ur(D);x.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(T,x)}const g=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Q(s,(D=r,rs(hf(dn.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>V(D,g,l).next(T=>(g.apply(D),T)).next(T=>s.Bs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>s.Bs.addMatchingKeys(D,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,T.nr,T.sr)).next(()=>T.nr)))}),an.apply(this,arguments)}function zi(n,e){return xf.apply(this,arguments)}function xf(){return xf=(0,Ee.Z)(function*(n,e,t=qt()){const r=yield Q(n,rs(Rw(e.bundledQuery))),s=nt(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Tr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Xr.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(g.targetId,g),s.Bs.updateTargetData(u,g).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),xf.apply(this,arguments)}function _b(n,e){return`firestore_clients_${n}_${e}`}function vb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function JA(n,e){return`firestore_targets_${n}_${e}`}class wb{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Re(s.error.code,s.error.message))),l?new wb(e,t,s.state,u):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new Kw(e,r.state,s):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=mw();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=Zy(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new Eb(e,u):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class XA{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new XA(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eM{constructor(){this.activeTargetIds=mw()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tM{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Qn($t),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=_b(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new eM),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(_b(e.persistenceKey,s));if(u){const l=Eb.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(JA(this.persistenceKey,e));if(r){const s=Kw.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(JA(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=Hs.ct;if(null!=u)try{const g=JSON.parse(u);It("number"==typeof g),l=g}catch(g){Cr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);s!==Hs.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new wb(this.currentUser,e,t,r),u=vb(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=vb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=JA(this.persistenceKey,e),u=new Kw(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Eb.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return wb.ar(new fi(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return Kw.ar(s,t)}br(e){return XA.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=mw();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class gN{constructor(){this.Hr=new eM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new eM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bO{Yr(e){}shutdown(){}}class mN{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ib=null;function nM(){return null===Ib?Ib=268435456+Math.round(2147483648*Math.random()):Ib++,"0x"+Ib.toString(16)}const TO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SO{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ds="WebChannelConnection";class AO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=nM(),g=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,s,u),this.Ao(e,g,_,r).then(D=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw Bs("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",g,"request:",r),D})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ca,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${TO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=nM();return new Promise((l,g)=>{const _=new jy;_.setWithCredentials(!0),_.listenOnce(qS.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case W0.NO_ERROR:const T=_.getResponseJson();Ue(Ds,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),l(T);break;case W0.TIMEOUT:Ue(Ds,`RPC '${e}' ${u} timed out`),g(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case W0.HTTP_ERROR:const x=_.getStatus();if(Ue(Ds,`RPC '${e}' ${u} failed with status:`,x,"response text:",_.getResponseText()),x>0){let H=_.getResponseJson();Array.isArray(H)&&(H=H[0]);const K=H?.error;if(K&&K.status&&K.message){const ue=function(ye){const me=ye.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(me)>=0?me:ce.UNKNOWN}(K.status);g(new Re(ue,K.message))}else g(new Re(ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ue(Ds,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);Ue(Ds,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",D,r,15)})}Ro(e,t,r){const s=nM(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=zC(),g=WS(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(_.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(_.xmlHttpFactory=new ZS({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const T=u.join("");Ue(Ds,`Creating RPC '${e}' stream ${s}: ${T}`,_);const x=l.createWebChannel(T,_);let H=!1,K=!1;const ue=new SO({ro:me=>{K?Ue(Ds,`Not sending because RPC '${e}' stream ${s} is closed:`,me):(H||(Ue(Ds,`Opening RPC '${e}' stream ${s} transport.`),x.open(),H=!0),Ue(Ds,`RPC '${e}' stream ${s} sending:`,me),x.send(me))},oo:()=>x.close()}),ye=(me,rt,mt)=>{me.listen(rt,Ge=>{try{mt(Ge)}catch(at){setTimeout(()=>{throw at},0)}})};return ye(x,By.EventType.OPEN,()=>{K||Ue(Ds,`RPC '${e}' stream ${s} transport opened.`)}),ye(x,By.EventType.CLOSE,()=>{K||(K=!0,Ue(Ds,`RPC '${e}' stream ${s} transport closed`),ue.wo())}),ye(x,By.EventType.ERROR,me=>{K||(K=!0,Bs(Ds,`RPC '${e}' stream ${s} transport errored:`,me),ue.wo(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),ye(x,By.EventType.MESSAGE,me=>{var rt;if(!K){const mt=me.data[0];It(!!mt);const at=mt.error||(null===(rt=mt[0])||void 0===rt?void 0:rt.error);if(at){Ue(Ds,`RPC '${e}' stream ${s} received error:`,at);const Nt=at.status;let Zt=function(Ko){const J_=gr[Ko];if(void 0!==J_)return TA(J_)}(Nt),_i=at.message;void 0===Zt&&(Zt=ce.INTERNAL,_i="Unknown error status: "+Nt+" with message "+at.message),K=!0,ue.wo(new Re(Zt,_i)),x.close()}else Ue(Ds,`RPC '${e}' stream ${s} received:`,mt),ue._o(mt)}}),ye(g,mg.STAT_EVENT,me=>{me.stat===GC.PROXY?Ue(Ds,`RPC '${e}' stream ${s} detected buffering proxy`):me.stat===GC.NOPROXY&&Ue(Ds,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{ue.fo()},0),ue}}function yN(){return typeof window<"u"?window:null}function Cb(){return typeof document<"u"?document:null}function Yw(n){return new PA(n,!0)}class rM{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class _N{constructor(e,t,r,s,u,l,g,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new rM(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MO extends _N{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function kA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),s=e.targetChange.targetIds||[],u=function(_,D){return _.useProto3Json?(It(void 0===D||"string"==typeof D),Xr.fromBase64String(D||"")):(It(void 0===D||D instanceof Uint8Array),Xr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const D=void 0===_.code?ce.UNKNOWN:TA(_.code);return new Re(D,_.message||"")}(l);t=new v_(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=Ta(n,r.document.name),u=Tr(r.document.updateTime),l=r.document.createTime?Tr(r.document.createTime):Dt.min(),g=new ei({mapValue:{fields:r.document.fields}}),_=Xn.newFoundDocument(s,u,l,g);t=new Cs(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=Ta(n,r.document),u=r.readTime?Tr(r.readTime):Dt.min(),l=Xn.newNoDocument(s,u);t=new Cs([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Ta(n,r.document);t=new Cs([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return ut();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new DA(s,u);t=new YD(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Dt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Tr(u.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=yd(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=bg(g)?{documents:JD(s,g)}:{query:Sw(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Cw(s,u.resumeToken);const _=Og(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(Dt.min())>0){l.readTime=md(s,u.snapshotVersion.toTimestamp());const _=Og(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function eb(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=yd(this.serializer),t.removeTarget=e,this.Wo(t)}}class xO extends _N{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function FA(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,s){let u=Tr(r.updateTime?r.updateTime:s);return u.isEqual(Dt.min())&&(u=Tr(s)),new jD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.cu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=yd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>C_(this.serializer,r))};this.Wo(t)}}class RO extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ce.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class PO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Cr(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class OO{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;Rf(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(D){const T=nt(D);T.vu.add(4),yield P_(T),T.bu.set("Unknown"),T.vu.delete(4),yield Qw(T)}),function(D){return _.apply(this,arguments)})(l))}))}),this.bu=new PO(r,s)}}function Qw(n){return sM.apply(this,arguments)}function sM(){return sM=(0,Ee.Z)(function*(n){if(Rf(n))for(const e of n.Ru)yield e(!0)}),sM.apply(this,arguments)}function P_(n){return oM.apply(this,arguments)}function oM(){return oM=(0,Ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),oM.apply(this,arguments)}function Db(n,e){const t=nt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),cM(t)?uM(t):k_(t).Ko()&&aM(t,e))}function Jw(n,e){const t=nt(n),r=k_(t);t.Au.delete(e),r.Ko()&&vN(t,e),0===t.Au.size&&(r.Ko()?r.jo():Rf(t)&&t.bu.set("Unknown"))}function aM(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}k_(n).su(e)}function vN(n,e){n.Vu.qt(e),k_(n).iu(e)}function uM(n){n.Vu=new MA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),k_(n).start(),n.bu.gu()}function cM(n){return Rf(n)&&!k_(n).Uo()&&n.Au.size>0}function Rf(n){return 0===nt(n).vu.size}function wN(n){n.Vu=void 0}function kO(n){return lM.apply(this,arguments)}function lM(){return lM=(0,Ee.Z)(function*(n){n.Au.forEach((e,t)=>{aM(n,e)})}),lM.apply(this,arguments)}function FO(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,Ee.Z)(function*(n,e){wN(n),cM(n)?(n.bu.Iu(e),uM(n)):n.bu.set("Unknown")}),dM.apply(this,arguments)}function LO(n,e,t){return hM.apply(this,arguments)}function hM(){return hM=(0,Ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof v_&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bb(n,r)}else if(e instanceof Cs?n.Vu.Ht(e):e instanceof YD?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield S(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=s.Au.get(_);D&&s.Au.set(_,D.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const D=s.Au.get(g);if(!D)return;s.Au.set(g,D.withResumeToken(Xr.EMPTY_BYTE_STRING,D.snapshotVersion)),vN(s,g);const T=new Sa(D.target,g,_,D.sequenceNumber);aM(s,T)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield bb(n,r)}var r}),hM.apply(this,arguments)}function bb(n,e,t){return fM.apply(this,arguments)}function fM(){return fM=(0,Ee.Z)(function*(n,e,t){if(!Rc(e))throw e;n.vu.add(1),yield P_(n),n.bu.set("Offline"),t||(t=()=>S(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Qw(n)}))}),fM.apply(this,arguments)}function EN(n,e){return e().catch(t=>bb(n,t,e))}function O_(n){return pM.apply(this,arguments)}function pM(){return pM=(0,Ee.Z)(function*(n){const e=nt(n),t=Nf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;UO(e);)try{const s=yield q(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,VO(e,s)}catch(s){yield bb(e,s)}IN(e)&&CN(e)}),pM.apply(this,arguments)}function UO(n){return Rf(n)&&n.Eu.length<10}function VO(n,e){n.Eu.push(e);const t=Nf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function IN(n){return Rf(n)&&!Nf(n).Uo()&&n.Eu.length>0}function CN(n){Nf(n).start()}function BO(n){return gM.apply(this,arguments)}function gM(){return gM=(0,Ee.Z)(function*(n){Nf(n).hu()}),gM.apply(this,arguments)}function jO(n){return mM.apply(this,arguments)}function mM(){return mM=(0,Ee.Z)(function*(n){const e=Nf(n);for(const t of n.Eu)e.uu(t.mutations)}),mM.apply(this,arguments)}function HO(n,e,t){return yM.apply(this,arguments)}function yM(){return yM=(0,Ee.Z)(function*(n,e,t){const r=n.Eu.shift(),s=y_.from(r,e,t);yield EN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield O_(n)}),yM.apply(this,arguments)}function $O(n,e){return _M.apply(this,arguments)}function _M(){return _M=(0,Ee.Z)(function*(n,e){var t;e&&Nf(n).ou&&(yield(t=(0,Ee.Z)(function*(r,s){if(bA(u=s.code)&&u!==ce.ABORTED){const l=r.Eu.shift();Nf(r).Qo(),yield EN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield O_(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),IN(n)&&CN(n)}),_M.apply(this,arguments)}function DN(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,Ee.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Rf(t);t.vu.add(3),yield P_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Qw(t)}),vM.apply(this,arguments)}function wM(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,Ee.Z)(function*(n,e){const t=nt(n);e?(t.vu.delete(2),yield Qw(t)):e||(t.vu.add(2),yield P_(t),t.bu.set("Unknown"))}),EM.apply(this,arguments)}function k_(n){return n.Su||(n.Su=function(e,t,r){const s=nt(e);return s.fu(),new MO(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:kO.bind(null,n),ao:FO.bind(null,n),nu:LO.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Su.Qo(),cM(n)?uM(n):n.bu.set("Unknown")):(yield n.Su.stop(),wN(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Nf(n){return n.Du||(n.Du=function(e,t,r){const s=nt(e);return s.fu(),new xO(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:BO.bind(null,n),ao:$O.bind(null,n),au:jO.bind(null,n),cu:HO.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Du.Qo(),yield O_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class IM{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new IM(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F_(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),Rc(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class L_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=pf(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new L_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof L_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new L_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bN{constructor(){this.Cu=new Qn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ut():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class U_{constructor(e,t,r,s,u,l,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new U_(e,t,L_.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class zO{constructor(){this.Nu=void 0,this.listeners=[]}}class GO{constructor(){this.queries=new bu(e=>c_(e),ff),this.onlineState="Unknown",this.ku=new Set}}function CM(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,Ee.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new zO),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=F_(l,`Initialization of query '${fd(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&SM(t)}),DM.apply(this,arguments)}function bM(n,e){return TM.apply(this,arguments)}function TM(){return TM=(0,Ee.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),TM.apply(this,arguments)}function WO(n,e){const t=nt(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&SM(t)}function qO(n,e,t){const r=nt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function SM(n){n.ku.forEach(e=>{e.next()})}class AM{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new U_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=U_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ZO{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class TN{constructor(e){this.serializer=e}rr(e){return Ta(this.serializer,e)}ur(e){return e.metadata.exists?I_(this.serializer,e.document,!1):Xn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Tr(e)}}class KO{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=dn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new TN(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const g=(t.get(l)||qt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function on(n,e,t,r){return an.apply(this,arguments)}(e.localStore,new TN(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield zi(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function SN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class AN{constructor(e){this.key=e}}class MN{constructor(e){this.key=e}}class xN{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=OD(e),this.ec=new L_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new bN,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((T,x)=>{const H=s.get(T),K=Sg(this.query,x)?x:null,ue=!!H&&this.mutatedKeys.has(H.key),ye=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let me=!1;H&&K?H.data.isEqual(K.data)?ue!==ye&&(r.track({type:3,doc:K}),me=!0):this.rc(H,K)||(r.track({type:2,doc:K}),me=!0,(_&&this.tc(K,_)>0||D&&this.tc(K,D)<0)&&(g=!0)):!H&&K?(r.track({type:0,doc:K}),me=!0):H&&!K&&(r.track({type:1,doc:H}),me=!0,(_||D)&&(g=!0)),me&&(K?(l=l.add(K),u=ye?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,T)=>function(x,H){const K=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return K(x)-K(H)}(D.type,T.type)||this.tc(D.doc,T.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new U_(this.query,e.ec,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new bN,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new MN(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new AN(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return U_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class YO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QO{constructor(e){this.key=e,this.fc=!1}}class JO{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new bu(g=>c_(g),ff),this._c=new Map,this.mc=new Set,this.gc=new Qn(Qe.comparator),this.yc=new Map,this.Ic=new gb,this.Tc={},this.Ec=new Map,this.Ac=Sf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function XO(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,Ee.Z)(function*(n,e){const t=JM(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Q(t.localStore,rs(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield xM(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&Db(t.remoteStore,l)}return s}),MM.apply(this,arguments)}function xM(n,e,t,r,s){return RM.apply(this,arguments)}function RM(){return RM=(0,Ee.Z)(function*(n,e,t,r,s){n.Rc=(x,H,K)=>{return(ue=(0,Ee.Z)(function*(ye,me,rt,mt){let Ge=me.view.sc(rt);Ge.zi&&(Ge=yield Je(ye.localStore,me.query,!1).then(({documents:Zt})=>me.view.sc(Zt,Ge)));const at=mt&&mt.targetChanges.get(me.targetId),Nt=me.view.applyChanges(Ge,ye.isPrimaryClient,at);return jM(ye,me.targetId,Nt.cc),Nt.snapshot}),function(ye,me,rt,mt){return ue.apply(this,arguments)})(n,x,H,K);var ue};const u=yield Je(n.localStore,e,!0),l=new xN(e,u.ir),g=l.sc(u.documents),_=__.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=l.applyChanges(g,n.isPrimaryClient,_);jM(n,t,D.cc);const T=new YO(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),RM.apply(this,arguments)}function ek(n,e){return NM.apply(this,arguments)}function NM(){return NM=(0,Ee.Z)(function*(n,e){const t=nt(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!ff(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ie(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jw(t.remoteStore,r.targetId),V_(t,r.targetId)}).catch(xc))):(V_(t,r.targetId),yield Ie(t.localStore,r.targetId,!0))}),NM.apply(this,arguments)}function PM(){return PM=(0,Ee.Z)(function*(n,e,t){const r=XM(n);try{const s=yield function(u,l){const g=nt(u),_=ur.now(),D=l.reduce((H,K)=>H.add(K.key),qt());let T,x;return g.persistence.runTransaction("Locally write mutations","readwrite",H=>{let K=Is(),ue=qt();return g.Zi.getEntries(H,D).next(ye=>{K=ye,K.forEach((me,rt)=>{rt.isValidDocument()||(ue=ue.add(me))})}).next(()=>g.localDocuments.getOverlayedDocuments(H,K)).next(ye=>{T=ye;const me=[];for(const rt of l){const mt=$D(rt,T.get(rt.key).overlayedDocument);null!=mt&&me.push(new Uc(rt.key,mt,CD(mt.value.mapValue),er.exists(!0)))}return g.mutationQueue.addMutationBatch(H,_,me,l)}).next(ye=>{x=ye;const me=ye.applyToLocalDocumentSet(T,ue);return g.documentOverlayCache.saveOverlays(H,ye.batchId,me)})}).then(()=>({batchId:x.batchId,changes:FD(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new Qn($t)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Cd(r,s.changes),yield O_(r.remoteStore)}catch(s){const u=F_(s,"Failed to persist write");t.reject(u)}}),PM.apply(this,arguments)}function RN(n,e){return OM.apply(this,arguments)}function OM(){return OM=(0,Ee.Z)(function*(n,e){const t=nt(n);try{const r=yield function R(n,e){const t=nt(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((T,x)=>{const H=s.get(x);if(!H)return;g.push(t.Bs.removeMatchingKeys(u,T.removedDocuments,x).next(()=>t.Bs.addMatchingKeys(u,T.addedDocuments,x)));let K=H.withSequenceNumber(u.currentSequenceNumber);var ue,ye,me;null!==e.targetMismatches.get(x)?K=K.withResumeToken(Xr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):T.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(T.resumeToken,r)),s=s.insert(x,K),ye=K,me=T,(0===(ue=H).resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-ue.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,K))});let _=Is(),D=qt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),g.push(V(u,l,e.documentUpdates).next(T=>{_=T.nr,D=T.sr})),!r.isEqual(Dt.min())){const T=t.Bs.getLastRemoteSnapshotVersion(u).next(x=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(T)}return oe.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?It(l.fc):s.removedDocuments.size>0&&(It(l.fc),l.fc=!1))}),yield Cd(t,r,e)}catch(r){yield xc(r)}}),OM.apply(this,arguments)}function NN(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=nt(u);g.onlineState=l;let _=!1;g.queries.forEach((D,T)=>{for(const x of T.listeners)x.Mu(l)&&(_=!0)}),_&&SM(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nk(n,e,t){return kM.apply(this,arguments)}function kM(){return kM=(0,Ee.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Qn(Qe.comparator);l=l.insert(u,Xn.newNoDocument(u,Dt.min()));const g=qt().add(u),_=new vf(Dt.min(),new Map,new Qn($t),l,g);yield RN(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),HM(r)}else yield Ie(r.localStore,e,!1).then(()=>V_(r,e,t)).catch(xc)}),kM.apply(this,arguments)}function rk(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,Ee.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const s=yield function C(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,D){const T=_.batch,x=T.keys();let H=oe.resolve();return x.forEach(K=>{H=H.next(()=>D.getEntry(g,K)).next(ue=>{const ye=_.docVersions.get(K);It(null!==ye),ue.version.compareTo(ye)<0&&(T.applyToRemoteDocument(ue,_),ue.isValidDocument()&&(ue.setReadTime(_.commitVersion),D.addEntry(ue)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(g,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=qt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);BM(t,r,null),VM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Cd(t,s)}catch(s){yield xc(s)}}),FM.apply(this,arguments)}function ik(n,e,t){return LM.apply(this,arguments)}function LM(){return LM=(0,Ee.Z)(function*(n,e,t){const r=nt(n);try{const s=yield function(u,l){const g=nt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,l).next(T=>(It(null!==T),D=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);BM(r,e,t),VM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Cd(r,s)}catch(s){yield xc(s)}}),LM.apply(this,arguments)}function UM(){return UM=(0,Ee.Z)(function*(n,e){const t=nt(n);Rf(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=nt(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=F_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),UM.apply(this,arguments)}function VM(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function BM(n,e,t){const r=nt(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function V_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||PN(n,r)})}function PN(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Jw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),HM(n))}function jM(n,e,t){for(const r of t)r instanceof AN?(n.Ic.addReference(r.key,e),ok(n,r)):r instanceof MN?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||PN(n,r.key)):ut()}function ok(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),HM(n))}function HM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(dn.fromString(e)),r=n.Ac.next();n.yc.set(r,new QO(t)),n.gc=n.gc.insert(t,r),Db(n.remoteStore,new Sa(rs(hf(t.path)),r,"TargetPurposeLimboResolution",Hs.ct))}}function Cd(n,e,t){return $M.apply(this,arguments)}function $M(){return $M=(0,Ee.Z)(function*(n,e,t){const r=nt(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const T=a.Li(_.targetId,D);u.push(T)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,Ee.Z)(function*(_,D){const T=nt(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>oe.forEach(D,H=>oe.forEach(H.Fi,K=>T.persistence.referenceDelegate.addReference(x,H.targetId,K)).next(()=>oe.forEach(H.Bi,K=>T.persistence.referenceDelegate.removeReference(x,H.targetId,K)))))}catch(x){if(!Rc(x))throw x;Ue("LocalStore","Failed to update sequence numbers: "+x)}for(const x of D){const H=x.targetId;if(!x.fromCache){const K=T.Ji.get(H),ye=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);T.Ji=T.Ji.insert(H,ye)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),$M.apply(this,arguments)}function ak(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,Ee.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield y(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cd(t,r.er)}var s}),zM.apply(this,arguments)}function uk(n,e){const t=nt(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let s=qt();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}function ck(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,Ee.Z)(function*(n,e){const t=nt(n),r=yield Je(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&jM(t,e.targetId,s.cc),s}),GM.apply(this,arguments)}function lk(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,Ee.Z)(function*(n,e){const t=nt(n);return be(t.localStore,e).then(r=>Cd(t,r))}),WM.apply(this,arguments)}function dk(n,e,t,r){return qM.apply(this,arguments)}function qM(){return qM=(0,Ee.Z)(function*(n,e,t,r){const s=nt(n),u=yield function(l,g){const _=nt(l),D=nt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Sn(T,g).next(x=>x?_.localDocuments.getDocuments(T,x):oe.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield O_(s.remoteStore):"acknowledged"===t||"rejected"===t?(BM(s,e,r||null),VM(s,e),g=e,nt(nt(s.localStore).mutationQueue).Cn(g)):ut(),yield Cd(s,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),qM.apply(this,arguments)}function ZM(){return ZM=(0,Ee.Z)(function*(n,e){const t=nt(n);if(JM(t),XM(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield ON(t,r.toArray());t.vc=!0,yield wM(t.remoteStore,!0);for(const u of s)Db(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(V_(t,l),Ie(t.localStore,l,!0))),Jw(t.remoteStore,l)}),yield s,yield ON(t,r),function(u){const l=nt(u);l.yc.forEach((g,_)=>{Jw(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Qn(Qe.comparator)}(t),t.vc=!1,yield wM(t.remoteStore,!1)}}),ZM.apply(this,arguments)}function ON(n,e,t){return KM.apply(this,arguments)}function KM(){return KM=(0,Ee.Z)(function*(n,e,t){const r=nt(n),s=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield Q(r.localStore,rs(_[0]));for(const D of _){const T=r.wc.get(D),x=yield ck(r,T);x.snapshot&&u.push(x.snapshot)}}else{const D=yield _t(r.localStore,l);g=yield Q(r.localStore,D),yield xM(r,kN(D),l,!1,g.resumeToken)}s.push(g)}return r.dc.nu(u),s}),KM.apply(this,arguments)}function kN(n){return hw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fk(n){const e=nt(n);return nt(nt(e.localStore).persistence).$i()}function pk(n,e,t,r){return YM.apply(this,arguments)}function YM(){return YM=(0,Ee.Z)(function*(n,e,t,r){const s=nt(n);if(s.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield be(s.localStore,l_(u[0])),g=vf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Xr.EMPTY_BYTE_STRING);yield Cd(s,l,g);break}case"rejected":yield Ie(s.localStore,e,!0),V_(s,e,r);break;default:ut()}}),YM.apply(this,arguments)}function gk(n,e,t){return QM.apply(this,arguments)}function QM(){return QM=(0,Ee.Z)(function*(n,e,t){const r=JM(n);if(r.vc){for(const s of e){if(r._c.has(s)){Ue("SyncEngine","Adding an already active target "+s);continue}const u=yield _t(r.localStore,s),l=yield Q(r.localStore,u);yield xM(r,kN(u),l.targetId,!1,l.resumeToken),Db(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Ie(r.localStore,s,!1).then(()=>{Jw(r.remoteStore,s),V_(r,s)}).catch(xc))}}),QM.apply(this,arguments)}function JM(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nk.bind(null,e),e.dc.nu=WO.bind(null,e.eventManager),e.dc.Pc=qO.bind(null,e.eventManager),e}function XM(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ik.bind(null,e),e}class Xw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=Yw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return f(this.persistence,new c,e.initialUser,this.serializer)}createPersistence(e){return new mb(Ww.zs,this.serializer)}createSharedClientState(e){return new gN}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ex extends Xw{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield XM(r.Vc.syncEngine),yield O_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return f(this.persistence,new c,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new $w(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new rA(t,this.persistence);return new rD(e.asyncQueue,r)}createPersistence(e){const t=o(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new Zw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yN(),Cb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gN}}class FN extends ex{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof tM&&(r.sharedClientState.syncEngine={jr:dk.bind(null,s),zr:pk.bind(null,s),Wr:gk.bind(null,s),$i:fk.bind(null,s),Qr:lk.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.Z)(function*(l){yield function hk(n,e){return ZM.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=yN();if(!tM.D(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=o(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class B_{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>NN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=ak.bind(null,r.syncEngine),yield wM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GO}createDatastore(e){const t=Yw(e.databaseInfo.databaseId),r=new AO(e.databaseInfo);return new RO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>NN(this.syncEngine,g,0),l=mN.D()?new mN:new bO,new OO(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,_,D){const T=new JO(r,s,u,l,g,_);return D&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=nt(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield P_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function LN(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Tb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _k{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new pi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new ZO(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class vk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ee.Z)(function*(u,l){const g=nt(u),_=yd(g.serializer)+"/documents",D={documents:l.map(K=>wf(g.serializer,K))},T=yield g.vo("BatchGetDocuments",_,D,l.length),x=new Map;T.forEach(K=>{const ue=function Tw(n,e){return"found"in e?function(t,r){It(!!r.found);const s=Ta(t,r.found.name),u=Tr(r.found.updateTime),l=r.found.createTime?Tr(r.found.createTime):Dt.min(),g=new ei({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(s,u,l,g)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const s=Ta(t,r.missing),u=Tr(r.readTime);return Xn.newNoDocument(s,u)}(n,e):ut()}(g.serializer,K);x.set(ue.key.toString(),ue)});const H=[];return l.forEach(K=>{const ue=x.get(K.toString());It(!!ue),H.push(ue)}),H}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Qe.fromPath(s);e.mutations.push(new zD(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(s,u){const l=nt(s),g=yd(l.serializer)+"/documents",_={writes:u.map(D=>C_(l.serializer,D))};yield l.Io("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?er.exists(!1):er.updateTime(t):er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return er.updateTime(t)}return er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wk{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new rM(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new vk(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!vg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bA(t)}return!1}}class Ek{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=fi.UNAUTHENTICATED,this.clientId=KC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(g){Ue("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=F_(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Sb(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield y(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),tx.apply(this,arguments)}function nx(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ix(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>DN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>DN(e.remoteStore,u)),n._onlineComponents=e}),rx.apply(this,arguments)}function UN(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ix(n){return sx.apply(this,arguments)}function sx(){return sx=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Sb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!UN(t))throw t;Bs("Error using user provided cache. Falling back to memory cache: "+t),yield Sb(n,new Xw)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield Sb(n,new Xw);return n._offlineComponents}),sx.apply(this,arguments)}function Ab(n){return ox.apply(this,arguments)}function ox(){return ox=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield nx(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield nx(n,new B_))),n._onlineComponents}),ox.apply(this,arguments)}function VN(n){return ix(n).then(e=>e.persistence)}function Mb(n){return ix(n).then(e=>e.localStore)}function BN(n){return Ab(n).then(e=>e.remoteStore)}function ax(n){return Ab(n).then(e=>e.syncEngine)}function j_(n){return ux.apply(this,arguments)}function ux(){return ux=(0,Ee.Z)(function*(n){const e=yield Ab(n),t=e.eventManager;return t.onListen=XO.bind(null,e.syncEngine),t.onUnlisten=ek.bind(null,e.syncEngine),t}),ux.apply(this,arguments)}function HN(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,g,_){const D=new Tb({next:x=>{u.enqueueAndForget(()=>bM(s,T));const H=x.docs.has(l);!H&&x.fromCache?_.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&x.fromCache&&g&&"server"===g.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),T=new AM(hf(l.path),D,{includeMetadataChanges:!0,Ku:!0});return CM(s,T)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}function $N(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,g,_){const D=new Tb({next:x=>{u.enqueueAndForget(()=>bM(s,T)),x.fromCache&&"server"===g.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),T=new AM(l,D,{includeMetadataChanges:!0,Ku:!0});return CM(s,T)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}function zN(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const GN=new Map;function cx(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WN(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qN(n){if(!Qe.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZN(n){if(Qe.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xb(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function KN(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class YN{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=zN(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eE{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qC;switch(t.type){case"firstParty":return new ZC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GN.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),GN.delete(e),t.terminate())}(this),Promise.resolve()}}function QN(n,e,t,r={}){var s;const u=(n=fn(n,eE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=fi.MOCK_USER;else{g=(0,Gt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fi(D)}n._authCredentials=new $y(new QS(g,_))}}class mr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Gc extends is{constructor(e,t,r){super(e,t,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new Qe(e))}withConverter(e){return new Gc(this.firestore,e,this._path)}}function JN(n,e,...t){if(n=(0,Gt.m9)(n),cx("collection","path",e),n instanceof eE){const r=dn.fromString(e,...t);return ZN(r),new Gc(n,null,r)}{if(!(n instanceof mr||n instanceof Gc))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return ZN(r),new Gc(n.firestore,null,r)}}function Rb(n,e,...t){if(n=(0,Gt.m9)(n),1===arguments.length&&(e=KC.A()),cx("doc","path",e),n instanceof eE){const r=dn.fromString(e,...t);return qN(r),new mr(n,null,new Qe(r))}{if(!(n instanceof mr||n instanceof Gc))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return qN(r),new mr(n.firestore,n instanceof Gc?n.converter:null,new Qe(r))}}function XN(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),(n instanceof mr||n instanceof Gc)&&(e instanceof mr||e instanceof Gc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lx(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&ff(n._query,e._query)&&n.converter===e.converter}class Rk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new rM(this,"async_queue_retry"),this.Xc=()=>{const t=Cb();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Cb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Cb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new pi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Rc(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=IM.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&ut()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function dx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Nk{constructor(){this._progressObserver={},this._taskCompletionResolver=new pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yr extends eE{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Rk,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||e1(this),this._firestoreClient.terminate()}}function Ok(n,e){const t="object"==typeof n?n:(0,Ls.getApp)(),r="string"==typeof n?n:e||"(default)",s=(0,Ls._getProvider)(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const u=(0,Gt.P0)("firestore");u&&QN(s,...u)}return s}function ti(n){return n._firestoreClient||e1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function e1(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yD(n._databaseId,g,n._persistenceKey,(D=s).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,zN(D.experimentalLongPollingOptions),D.useFetchStreams));var g,D;n._firestoreClient=new Ek(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function t1(n,e,t){const r=new pi;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Sb(n,t),yield nx(n,e),r.resolve()}catch(s){const u=s;if(!UN(u))throw u;Bs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function n1(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wc(Xr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wc(Xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $g{constructor(e){this._methodName=e}}class Nb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const zk=/^__.*__$/;class Gk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Uc(e,this.data,this.fieldMask,t,this.fieldTransforms):new xg(e,this.data,t,this.fieldTransforms)}}class r1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function i1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class Pb{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Pb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Fb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(i1(this.ca)&&zk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Wk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yw(e)}ya(e,t,r,s=!1){return new Pb({ca:e,methodName:t,ga:r,path:Dr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zg(n){const e=n._freezeSettings(),t=Yw(n._databaseId);return new Wk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ob(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);gx("Data must be an object, but it was:",l,r);const g=a1(r,l);let _,D;if(u.merge)_=new Es(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const H=rE(e,x,t);if(!l.contains(H))throw new Re(ce.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);c1(T,H)||T.push(H)}_=new Es(T),D=l.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,D=l.fieldTransforms;return new Gk(new ei(g),_,D)}class nE extends $g{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nE}}function s1(n,e,t){return new Pb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hx extends $g{_toFieldTransform(e){return new yf(e.path,new mf)}isEqual(e){return e instanceof hx}}class qk extends $g{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=s1(this,e,!0),r=this.pa.map(u=>Gg(u,t)),s=new Lc(r);return new yf(e.path,s)}isEqual(e){return this===e}}class Zk extends $g{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=s1(this,e,!0),r=this.pa.map(u=>Gg(u,t)),s=new pd(r);return new yf(e.path,s)}isEqual(e){return this===e}}class Kk extends $g{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new gd(e.serializer,mA(e.serializer,this.Ia));return new yf(e.path,t)}isEqual(e){return this===e}}function fx(n,e,t,r){const s=n.ya(1,e,t);gx("Data must be an object, but it was:",s,r);const u=[],l=ei.empty();Pc(r,(_,D)=>{const T=kb(e,_,t);D=(0,Gt.m9)(D);const x=s.da(T);if(D instanceof nE)u.push(T);else{const H=Gg(D,x);null!=H&&(u.push(T),l.set(T,H))}});const g=new Es(u);return new r1(l,g,s.fieldTransforms)}function px(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[rE(e,r,t)],_=[s];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)g.push(rE(e,u[H])),_.push(u[H+1]);const D=[],T=ei.empty();for(let H=g.length-1;H>=0;--H)if(!c1(D,g[H])){const K=g[H];let ue=_[H];ue=(0,Gt.m9)(ue);const ye=l.da(K);if(ue instanceof nE)D.push(K);else{const me=Gg(ue,ye);null!=me&&(D.push(K),T.set(K,me))}}const x=new Es(D);return new r1(T,x,l.fieldTransforms)}function o1(n,e,t,r=!1){return Gg(t,n.ya(r?4:3,e))}function Gg(n,e){if(u1(n=(0,Gt.m9)(n)))return gx("Unsupported field value:",e,n),a1(n,e);if(n instanceof $g)return function(t,r){if(!i1(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=Gg(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mA(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=ur.fromDate(t);return{timestampValue:md(r.serializer,s)}}if(t instanceof ur){const s=new ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:md(r.serializer,s)}}if(t instanceof Nb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wc)return{bytesValue:Cw(r.serializer,t._byteString)};if(t instanceof mr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${xb(t)}`)}(n,e)}function a1(n,e){const t={};return pD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pc(n,(r,s)=>{const u=Gg(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function u1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ur||n instanceof Nb||n instanceof Wc||n instanceof mr||n instanceof $g)}function gx(n,e,t){if(!u1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xb(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function rE(n,e,t){if((e=(0,Gt.m9)(e))instanceof Dd)return e._internalPath;if("string"==typeof e)return kb(n,e);throw Fb("Field path arguments must be of type string or ",n,!1,void 0,t)}const Yk=new RegExp("[~\\*/\\[\\]]");function kb(n,e,t){if(e.search(Yk)>=0)throw Fb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dd(...e.split("."))._internalPath}catch{throw Fb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fb(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new Re(ce.INVALID_ARGUMENT,g+n+_)}function c1(n,e){return n.some(t=>t.isEqual(e))}class iE{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qk extends iE{data(){return super.data()}}function Lb(n,e){return"string"==typeof e?kb(n,e):e instanceof Dd?e._internalPath:e._delegate._internalPath}function l1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mx{}class sE extends mx{}function Pf(n,e,...t){let r=[];e instanceof mx&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof H_).length,l=s.filter(g=>g instanceof oE).length;if(u>1||u>0&&l>0)throw new Re(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class oE extends sE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new oE(e,t,r)}_apply(e){const t=this._parse(e);return p1(e._query,t),new is(e.firestore,e.converter,PD(e._query,t))}_parse(e){const t=zg(e.firestore);return function(s,u,l,g,_,D,T){let x;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){f1(T,D);const H=[];for(const K of T)H.push(h1(g,s,K));x={arrayValue:{values:H}}}else x=h1(g,s,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||f1(T,D),x=o1(l,"where",T,"in"===D||"not-in"===D);return un.create(_,D,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class H_ extends mx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new H_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)p1(u,g),u=PD(u,g)}(e._query,t),new is(e.firestore,e.converter,PD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yx extends sE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yx(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ld(s,u);return function(g,_){if(null===pw(g)){const D=gi(g);null!==D&&g1(0,D,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ba(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ub extends sE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ub(e,t,r)}_apply(e){return new is(e.firestore,e.converter,gw(e._query,this._limit,this._limitType))}}class Vb extends sE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Vb(e,t,r)}_apply(e){const t=d1(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,(s=t,new ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Bb extends sE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Bb(e,t,r)}_apply(e){const t=d1(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,(s=t,new ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function d1(n,e,t,r){if(t[0]=(0,Gt.m9)(t[0]),t[0]instanceof iE)return function(s,u,l,g,_){if(!g)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const T of hd(s))if(T.field.isKeyField())D.push(Iu(u,g.key));else{const x=g.data.field(T.field);if(wg(x))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const H=T.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}D.push(x)}return new Cu(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=zg(n.firestore);return function(u,l,g,_,D,T){const x=u.explicitOrderBy;if(D.length>x.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let K=0;K<D.length;K++){const ue=D[K];if(x[K].field.isKeyField()){if("string"!=typeof ue)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ue}`);if(!Fc(u)&&-1!==ue.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ue}' contains a slash.`);const ye=u.path.child(dn.fromString(ue));if(!Qe.isDocumentKey(ye))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const me=new Qe(ye);H.push(Iu(l,me))}else{const ye=o1(g,_,ue);H.push(ye)}}return new Cu(H,T)}(n._query,n.firestore._databaseId,s,e,t,r)}}function h1(n,e,t){if("string"==typeof(t=(0,Gt.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fc(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!Qe.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iu(n,new Qe(r))}if(t instanceof mr)return Iu(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xb(t)}.`)}function f1(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p1(n,e){if(e.isInequality()){const r=gi(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=pw(n);null!==u&&g1(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function g1(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _x{convertValue(e,t="none"){switch(ud(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pc(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Nb(br(e.latitude),br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Eg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(af(e));default:return null}}convertTimestamp(e){const t=Oc(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);It(ib(r));const s=new wu(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return s.isEqual(t)||Cr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function jb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class oF extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}class Wg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bd extends iE{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new aE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Lb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class aE extends bd{data(e={}){return super.data(e)}}class Of{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Wg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new aE(this._firestore,this._userDataWriter,r.key,r,new Wg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new aE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new aE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:uF(l.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function y1(n,e){return n instanceof bd&&e instanceof bd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Of&&e instanceof Of&&n._firestore===e._firestore&&lx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class kf extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}function _1(n,e,t){n=fn(n,mr);const r=fn(n.firestore,yr),s=jb(n.converter,e,t);return $_(r,[Ob(zg(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,er.none())])}function v1(n,e,t,...r){n=fn(n,mr);const s=fn(n.firestore,yr),u=zg(s);let l;return l="string"==typeof(e=(0,Gt.m9)(e))||e instanceof Dd?px(u,"updateDoc",n._key,e,t,r):fx(u,"updateDoc",n._key,e),$_(s,[l.toMutation(n._key,er.exists(!0))])}function w1(n,...e){var t,r,s;n=(0,Gt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||dx(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(dx(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let _,D,T;if(n instanceof mr)D=fn(n.firestore,yr),T=hf(n._key.path),_={next:x=>{e[l]&&e[l](vx(D,n,x))},error:e[l+1],complete:e[l+2]};else{const x=fn(n,is);D=fn(x.firestore,yr),T=x._query;const H=new kf(D);_={next:K=>{e[l]&&e[l](new Of(D,H,x,K))},error:e[l+1],complete:e[l+2]},l1(n._query)}return function(x,H,K,ue){const ye=new Tb(ue),me=new AM(H,ye,K);return x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return CM(yield j_(x),me)})),()=>{ye.Dc(),x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return bM(yield j_(x),me)}))}}(ti(D),T,g,_)}function $_(n,e){return function(t,r){const s=new pi;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function tk(n,e,t){return PM.apply(this,arguments)}(yield ax(t),r,s)})),s.promise}(ti(n),e)}function vx(n,e,t){const r=t.docs.get(e._key),s=new kf(n);return new bd(n,s,e._key,r,new Wg(t.hasPendingWrites,t.fromCache),e.converter)}const TF={maxAttempts:5};class E1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zg(e)}set(e,t,r){this._verifyNotCommitted();const s=Ff(e,this._firestore),u=jb(s.converter,t,r),l=Ob(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,er.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ff(e,this._firestore);let l;return l="string"==typeof(t=(0,Gt.m9)(t))||t instanceof Dd?px(this._dataReader,"WriteBatch.update",u._key,t,r,s):fx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ff(e,this._firestore);return this._mutations=this._mutations.concat(new Rg(t._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ff(n,e){if((n=(0,Gt.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class SF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zg(e)}get(e){const t=Ff(e,this._firestore),r=new oF(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return ut();const u=s[0];if(u.isFoundDocument())return new iE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new iE(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const s=Ff(e,this._firestore),u=jb(s.converter,t,r),l=Ob(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Ff(e,this._firestore);let l;return l="string"==typeof(t=(0,Gt.m9)(t))||t instanceof Dd?px(this._dataReader,"Transaction.update",u._key,t,r,s):fx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Ff(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ff(e,this._firestore),r=new kf(this._firestore);return super.get(e).then(s=>new bd(this._firestore,r,t._key,s._document,new Wg(!1,!1),t.converter))}}function wx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function C1(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function D1(){if(!function cA(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ca=Ls.SDK_VERSION,(0,Ls._registerComponent)(new Ph.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new yr(new JS(t.getProvider("auth-internal")),new eA(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Ls.registerVersion)(q0,"3.13.0",n),(0,Ls.registerVersion)(q0,"3.13.0","esm2017")}();class uE{constructor(e){this._delegate=e}static fromBase64String(e){return D1(),new uE(Wc.fromBase64String(e))}static fromUint8Array(e){return C1(),new uE(Wc.fromUint8Array(e))}toBase64(){return D1(),this._delegate.toBase64()}toUint8Array(){return C1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ex(n){return function FF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class LF{enableIndexedDbPersistence(e,t){return function kk(n,e){n1(n=fn(n,yr));const t=ti(n);if(t._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new B_;return t1(t,s,new ex(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Fk(n){n1(n=fn(n,yr));const e=ti(n);if(e._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Bs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new B_;return t1(e,r,new FN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Lk(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Wo.D())return Promise.resolve();const s=r+"main";yield Wo.delete(s)}),function(r){return t.apply(this,arguments)})(o(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class b1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){QN(this._delegate,e,t,r)}enableNetwork(){return function Vk(n){return function Ik(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield VN(n),t=yield BN(n);return e.setNetworkEnabled(!0),function(r){const s=nt(r);return s.vu.delete(0),Qw(s)}(t)}))}(ti(n=fn(n,yr)))}(this._delegate)}disableNetwork(){return function Bk(n){return function Ck(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield VN(n),t=yield BN(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(s){const u=nt(s);u.vu.add(0),yield P_(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(ti(n=fn(n,yr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Uk(n){return function(e){const t=new pi;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function sk(n,e){return UM.apply(this,arguments)}(yield ax(e),t)})),t.promise}(ti(n=fn(n,yr)))}(this._delegate)}onSnapshotsInSync(e){return function yF(n,e){return function Tk(n,e){const t=new Tb(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield j_(n),s=t,nt(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield j_(n),s=t,void nt(r).ku.delete(s);var r,s}))}}(ti(n=fn(n,yr)),dx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new z_(this,JN(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,Rb(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function xk(n,e){if(n=fn(n,eE),cx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new ba(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function AF(n,e,t){n=fn(n,yr);const r=Object.assign(Object.assign({},TF),t);return function(s){if(s.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const g=new pi;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const _=yield function jN(n){return Ab(n).then(e=>e.datastore)}(s);new wk(s.asyncQueue,_,l,u,g).run()})),g.promise}(ti(n),s=>e(new SF(n,s)),r)}(this._delegate,t=>e(new T1(this,t)))}batch(){return ti(this._delegate),new S1(new E1(this._delegate,e=>$_(this._delegate,e)))}loadBundle(e){return function jk(n,e){const t=ti(n=fn(n,yr)),r=new Nk;return function Sk(n,e,t,r){const s=function(u,l){let g;return g="string"==typeof u?ZD().encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return LN(_,D);if(_ instanceof ArrayBuffer)return LN(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new _k(_,l);var _}(t,Yw(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function mk(n,e,t){const r=nt(n);var s;(s=(0,Ee.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(H,K){const ue=nt(H),ye=Tr(K.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",me=>ue.qs.getBundleMetadata(me,K.id)).then(me=>!!me&&me.createTime.compareTo(ye)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(H=_).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);g._updateProgress(SN(_));const D=new KO(_,u.localStore,l.serializer);let T=yield l.bc();for(;T;){const H=yield D.zu(T);H&&g._updateProgress(H),T=yield l.bc()}const x=yield D.complete();return yield Cd(u,x.Ju,void 0),yield function(H,K){const ue=nt(H);return ue.persistence.runTransaction("Save bundle","readwrite",ye=>ue.qs.saveBundleMetadata(ye,K))}(u.localStore,_),g._completeWith(x.progress),Promise.resolve(x.Hu)}catch(_){return Bs("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var H}),function(u,l,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield ax(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Hk(n,e){return function Ak(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const s=nt(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield Mb(n),e)}))}(ti(n=fn(n,yr)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ws(this,t):null)}}class Hb extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new uE(new Wc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class T1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hb(e)}get(e){const t=Zg(e);return this._delegate.get(t).then(r=>new cE(this._firestore,new bd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Zg(e);return r?(wx("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Zg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Zg(e);return this._delegate.delete(t),this}}class S1{constructor(e){this._delegate=e}set(e,t,r){const s=Zg(e);return r?(wx("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Zg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Zg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new aE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qg.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new qg(e,new Hb(e),t),s.set(t,u)),u}}qg.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new mr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Ma(t,new mr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new z_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new z_(this.firestore,JN(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Gt.m9)(e))instanceof mr&&XN(this._delegate,e)}set(e,t){t=wx("DocumentReference.set",t);try{return t?_1(this._delegate,e,t):_1(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?v1(this._delegate,e):v1(this._delegate,e,t,...r)}catch(s){throw Gs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function gF(n){return $_(fn(n.firestore,yr),[new Rg(n._key,er.none())])}(this._delegate)}onSnapshot(...e){const t=A1(e),r=M1(e,s=>new cE(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return w1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function lF(n){n=fn(n,mr);const e=fn(n.firestore,yr),t=ti(e),r=new kf(e);return function Dk(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const g=yield function(_,D){const T=nt(_);return T.persistence.runTransaction("read document","readonly",x=>T.localDocuments.getDocument(x,D))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=F_(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield Mb(n),e,t);var r})),t.promise}(t,n._key).then(s=>new bd(e,r,n._key,s,new Wg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function dF(n){n=fn(n,mr);const e=fn(n.firestore,yr);return HN(ti(e),n._key,{source:"server"}).then(t=>vx(e,n,t))}(this._delegate):function cF(n){n=fn(n,mr);const e=fn(n.firestore,yr);return HN(ti(e),n._key).then(t=>vx(e,n,t))}(this._delegate),t.then(r=>new cE(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?qg.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function A1(n){for(const e of n)if("object"==typeof e&&!Ex(e))return e;return{}}function M1(n,e){var t,r;let s;return s=Ex(n[0])?n[0]:Ex(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class cE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return y1(this._delegate,e._delegate)}}class lE extends cE{data(e){const t=this._delegate.data(e);return function YS(n,e){n||ut()}(void 0!==t),t}}class Ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hb(e)}where(e,t,r){try{return new Ws(this.firestore,Pf(this._delegate,function Jk(n,e,t){const r=e,s=Lb("where",n);return oE._create(s,r,t)}(e,t,r)))}catch(s){throw Gs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ws(this.firestore,Pf(this._delegate,function Xk(n,e="asc"){const t=e,r=Lb("orderBy",n);return yx._create(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,Pf(this._delegate,function eF(n){return KN("limit",n),Ub._create("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,Pf(this._delegate,function tF(n){return KN("limitToLast",n),Ub._create("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,Pf(this._delegate,function nF(...n){return Vb._create("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,Pf(this._delegate,function rF(...n){return Vb._create("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,Pf(this._delegate,function iF(...n){return Bb._create("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,Pf(this._delegate,function sF(...n){return Bb._create("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return lx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function fF(n){n=fn(n,is);const e=fn(n.firestore,yr),t=ti(e),r=new kf(e);return function bk(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const g=yield Je(s,u,!0),_=new xN(u,g.ir),D=_.sc(g.documents),T=_.applyChanges(D,!1);l.resolve(T.snapshot)}catch(g){const _=F_(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield Mb(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Of(e,r,n,s))}(this._delegate):"server"===e?.source?function pF(n){n=fn(n,is);const e=fn(n.firestore,yr),t=ti(e),r=new kf(e);return $N(t,n._query,{source:"server"}).then(s=>new Of(e,r,n,s))}(this._delegate):function hF(n){n=fn(n,is);const e=fn(n.firestore,yr),t=ti(e),r=new kf(e);return l1(n._query),$N(t,n._query).then(s=>new Of(e,r,n,s))}(this._delegate),t.then(r=>new Ix(this.firestore,new Of(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=A1(e),r=M1(e,s=>new Ix(this.firestore,new Of(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return w1(this._delegate,t,r)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?qg.getInstance(this.firestore,e):null))}}class VF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ix{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lE(this._firestore,r))})}isEqual(e){return y1(this._delegate,e._delegate)}}class z_ extends Ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?Rb(this._delegate):Rb(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function mF(n,e){const t=fn(n.firestore,yr),r=Rb(n),s=jb(n.converter,e);return $_(t,[Ob(zg(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return XN(this._delegate,e._delegate)}withConverter(e){return new z_(this.firestore,this._delegate.withConverter(e?qg.getInstance(this.firestore,e):null))}}function Zg(n){return fn(n,mr)}class Cx{constructor(...e){this._delegate=new Dd(...e)}static documentId(){return new Cx(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,Gt.m9)(e))instanceof Dd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xF(){return new hx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kg(e)}static delete(){const e=function MF(){return new nE("deleteField")}();return e._methodName="FieldValue.delete",new Kg(e)}static arrayUnion(...e){const t=function RF(...n){return new qk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kg(t)}static arrayRemove(...e){const t=function NF(...n){return new Zk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kg(t)}static increment(e){const t=function PF(n){return new Kk("increment",n)}(e);return t._methodName="FieldValue.increment",new Kg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BF={Firestore:b1,GeoPoint:Nb,Timestamp:ur,Blob:uE,Transaction:T1,WriteBatch:S1,DocumentReference:Ma,DocumentSnapshot:cE,Query:Ws,QueryDocumentSnapshot:lE,QuerySnapshot:Ix,CollectionReference:z_,FieldPath:Cx,FieldValue:Kg,setLogLevel:function UF(n){!function KS(n){_o.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function HF(n){(function jF(n,e){n.INTERNAL.registerComponent(new Ph.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},BF)))})(n,(e,t)=>new b1(e,t,new LF)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Gp.Z);var $F=L(3019),$b=L(3093),zF=L(4552);class GF extends Vo.x{constructor(e=1/0,t=1/0,r=zF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var WF=L(3020);function x1(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,WF.B)({connector:()=>new GF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function R1(n,e){return(0,lh.m)(e)?(0,pr.w)(()=>n,e):(0,pr.w)(()=>n)}var Dx=L(5137),Lf=L(3182);class G_{constructor(e){return e}}class bx{constructor(){return(0,Lf.C6)()}}const Tx=new d.OlP("angularfire2._apps"),ZF={provide:G_,useFactory:function qF(n){return n&&1===n.length?n[0]:new G_((0,Lf.Mq)())},deps:[[new d.FiY,Tx]]},KF={provide:bx,deps:[[new d.FiY,Tx]]};function YF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new G_(r)}}let QF=(()=>{class n{constructor(t){(0,Lf.KN)("angularfire",cn.q4.full,"core"),(0,Lf.KN)("angularfire",cn.q4.full,"app"),(0,Lf.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ZF,KF]}),n})();function JF(n,...e){return{ngModule:QF,providers:[{provide:Tx,useFactory:YF(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,...e]}]}}const XF=(0,cn.u3)(Lf.ZF,!0),Sx=new Map,N1={activated:!1,tokenObservers:[]},eL={initialized:!1,enabled:!1};function zr(n){return Sx.get(n)||Object.assign({},N1)}function zb(){return eL}const Ax="https://content-firebaseappcheck.googleapis.com/v1",iL="exchangeDebugToken",P1={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class oL{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new Gt.BH,yield function aL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ss=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Mx(n){if(!zr(n).activated)throw ss.create("use-before-activation",{appName:n.name})}function qb(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const x=yield s.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(x){throw ss.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==l.status)throw ss.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(x){throw ss.create("fetch-parse-error",{originalErrorMessage:x?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),T=Date.now();return{token:g.token,expireTimeMillis:T+D,issuedAtTimeMillis:T}}),Rx.apply(this,arguments)}function O1(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${Ax}/projects/${t}/apps/${r}:${iL}?key=${s}`,body:{debug_token:e}}}const dL="firebase-app-check-database",hL=1,dE="firebase-app-check-store";let Zb=null;function Nx(){return Nx=(0,Ee.Z)(function*(n,e){const r=(yield function F1(){return Zb||(Zb=new Promise((n,e)=>{try{const t=indexedDB.open(dL,hL);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ss.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(dE,{keyPath:"compositeKey"})}}catch(t){e(ss.create("storage-open",{originalErrorMessage:t?.message}))}}),Zb)}()).transaction(dE,"readwrite"),u=r.objectStore(dE).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var D;g(ss.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})}),Nx.apply(this,arguments)}const hE=new Cc.Yd("@firebase/app-check");function kx(n,e){return(0,Gt.hl)()?function pL(n,e){return function L1(n,e){return Nx.apply(this,arguments)}(function V1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lx(){return zb().enabled}function Ux(){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Ee.Z)(function*(){const n=zb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Vx.apply(this,arguments)}const wL={error:"UNKNOWN_ERROR"};function EL(n){return Gt.US.encodeString(JSON.stringify(n),!1)}function Kb(n){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Mx(t);const r=zr(t);let u,s=r.token;if(s&&!W_(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(W_(_)?s=_:yield kx(t,void 0))}if(!e&&s&&W_(s))return{token:s.token};let g,l=!1;if(Lx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qb(O1(t,yield Ux()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield kx(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield zr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?hE.warn(_.message):hE.error(_),u=_}return s?u?g=W_(s)?{token:s.token,internalError:u}:$1(u):(g={token:s.token},r.token=s,yield kx(t,s)):g=$1(u),l&&function H1(n,e){const t=zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),Bx.apply(this,arguments)}function jx(){return jx=(0,Ee.Z)(function*(n){const e=n.app;Mx(e);const{provider:t}=zr(e);if(Lx()){const r=yield Ux(),{token:s}=yield qb(O1(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),jx.apply(this,arguments)}function $x(n,e){const t=zr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function j1(n){const{app:e}=n,t=zr(e);let r=t.tokenRefresher;r||(r=function IL(n){const{app:e}=n;return new oL((0,Ee.Z)(function*(){let r;if(r=zr(e).token?yield Kb(n,!0):yield Kb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},P1.RETRIAL_MIN_WAIT,P1.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function W_(n){return n.expireTimeMillis-Date.now()>0}function $1(n){return{token:EL(wL),error:n}}class CL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=zr(this.app);for(const t of e)$x(this.app,t.next);return Promise.resolve()}}const Q1="app-check-internal";!function LL(){(0,Ls._registerComponent)(new Ph.wA("app-check",n=>function DL(n,e){return new CL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Q1).initialize()})),(0,Ls._registerComponent)(new Ph.wA(Q1,n=>function bL(n){return{getToken:e=>Kb(n,e),getLimitedUseToken:()=>function B1(n){return jx.apply(this,arguments)}(n),addTokenListener:e=>function Hx(n,e,t,r){const{app:s}=n,u=zr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&W_(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),j1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>j1(n))}(n,"INTERNAL",e),removeTokenListener:e=>$x(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ls.registerVersion)("@firebase/app-check","0.8.0")}();class q_{constructor(){return(0,cn.vb)("app-check")}}typeof window<"u"&&window,L(7142);const X1=new d.OlP("angularfire2.auth.use-emulator"),eP=new d.OlP("angularfire2.auth.settings"),tP=new d.OlP("angularfire2.auth.tenant-id"),nP=new d.OlP("angularfire2.auth.langugage-code"),rP=new d.OlP("angularfire2.auth.use-device-language"),iP=new d.OlP("angularfire.auth.persistence"),sP=(n,e,t,r,s,u,l,g)=>(0,Hr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[D,T]of Object.entries(l))_.settings[D]=T;return g&&_.setPersistence(g),_},[t,r,s,u,l,g]);let Zx=(()=>{class n{constructor(t,r,s,u,l,g,_,D,T,x,H,K){const ue=new Vo.x,ye=(0,bt.of)(void 0).pipe((0,$b.Q)(l.outsideAngular),(0,pr.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,6365)))),(0,Vt.U)(()=>(0,Hr.on)(t,u,r)),(0,Vt.U)(me=>sP(me,u,g,D,T,x,_,H)),x1({bufferSize:1,refCount:!1}));if(Zi(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,bt.of)(null);else{ye.pipe(pc()).subscribe();const rt=ye.pipe((0,pr.w)(at=>at.getRedirectResult().then(Nt=>Nt,()=>null)),cn.iC,x1({bufferSize:1,refCount:!1})),mt=ye.pipe((0,pr.w)(at=>new oi.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Zt=>Nt.next(Zt),Zt=>Nt.error(Zt),()=>Nt.complete()))})))),Ge=ye.pipe((0,pr.w)(at=>new oi.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Zt=>Nt.next(Zt),Zt=>Nt.error(Zt),()=>Nt.complete()))}))));this.authState=rt.pipe(R1(mt),(0,Dx.R)(l.outsideAngular),(0,$b.Q)(l.insideAngular)),this.user=rt.pipe(R1(Ge),(0,Dx.R)(l.outsideAngular),(0,$b.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,pr.w)(at=>at?(0,ln.D)(at.getIdToken()):(0,bt.of)(null))),this.idTokenResult=this.user.pipe((0,pr.w)(at=>at?(0,ln.D)(at.getIdTokenResult()):(0,bt.of)(null))),this.credential=(0,$F.T)(rt,ue,this.authState.pipe(ks(at=>!at))).pipe((0,Vt.U)(at=>at?.user?at:null),(0,Dx.R)(l.outsideAngular),(0,$b.Q)(l.insideAngular))}return(0,Hr.pX)(this,ye,u,{spy:{apply:(me,rt,mt)=>{(me.startsWith("signIn")||me.startsWith("createUser"))&&mt.then(Ge=>ue.next(Ge))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hr.Dh),d.LFG(Hr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(cn.HU),d.LFG(X1,8),d.LFG(eP,8),d.LFG(tP,8),d.LFG(nP,8),d.LFG(rP,8),d.LFG(iP,8),d.LFG(q_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function oP(n,e){return function $L(n,e=JI.z){return new oi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Kx(n,e){return oP(n,e).pipe((0,Vt.U)(t=>({payload:t,type:"query"})))}function Qb(n,e){return Kx(n,e).pipe(Tp(void 0),Xm(),(0,Vt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=s.find(T=>T.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function aP(n,e,t){return Qb(n,t).pipe(xm((r,s)=>function GL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function WL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Yx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Yx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Yx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,n0.x)(),(0,Vt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function Yx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function uP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Qb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Vt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Tp(void 0),Xm(),ks(([r,s])=>s.length>0||!r),(0,Vt.U)(([r,s])=>s),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xm((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uP(e);return aP(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return Kx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new lP(this.ref.doc(e),this.afs)}}class lP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=dP(r,t);return new cP(s,u,this.afs)}snapshotChanges(){return function zL(n,e){return oP(n,e).pipe(Tp(void 0),Xm(),(0,Vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(cn.iC)}}class qL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Qb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ks(t=>t.length>0),cn.iC):Qb(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xm((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uP(e);return aP(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return Kx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),cn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(cn.iC)}}const ZL=new d.OlP("angularfire2.enableFirestorePersistence"),KL=new d.OlP("angularfire2.firestore.persistenceSettings"),YL=new d.OlP("angularfire2.firestore.settings"),QL=new d.OlP("angularfire2.firestore.use-emulator");function dP(n,e=(t=>t)){return{query:e(n),ref:n}}let Jb=(()=>{class n{constructor(t,r,s,u,l,g,_,D,T,x,H,K,ue,ye,me,rt,mt){this.schedulers=_;const Ge=(0,Hr.on)(t,g,r),at=T;x&&sP(Ge,g,H,ue,ye,me,K,rt),[this.firestore,this.persistenceEnabled$]=(0,Hr.cc)(`${Ge.name}.firestore`,"AngularFirestore",Ge.name,()=>{const Nt=g.runOutsideAngular(()=>Ge.firestore());if(u&&Nt.settings(u),at&&Nt.useEmulator(...at),s&&!Zi(l)){const Zt=()=>{try{return(0,ln.D)(Nt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(_i){return typeof console<"u"&&console.warn(_i),(0,bt.of)(!1)}};return[Nt,g.runOutsideAngular(Zt)]}return[Nt,(0,bt.of)(!1)]},[u,at,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=dP(s,r),g=this.schedulers.ngZone.run(()=>u);return new cP(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new qL(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new lP(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hr.Dh),d.LFG(Hr.xv,8),d.LFG(ZL,8),d.LFG(YL,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(cn.HU),d.LFG(KL,8),d.LFG(QL,8),d.LFG(Zx,8),d.LFG(X1,8),d.LFG(eP,8),d.LFG(tP,8),d.LFG(nP,8),d.LFG(rP,8),d.LFG(iP,8),d.LFG(q_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Xb=(()=>{class n{constructor(t){this.firestore=t}getPosts(){return this.firestore.collection("posts").valueChanges()}getUserPosts(t){return this.firestore.collection("posts",r=>r.where("email","==",t)).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hP{constructor(e,t,r,s){this.email=e,this.id=t,this._token=r,this._tokenExpirationDate=s}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}const eT_firebase={apiKey:"AIzaSyCgZpa69S4Mt_o_x8QIrm6S7mYE-QWbE1o",authDomain:"mindshare-3ab39.firebaseapp.com",databaseURL:"https://mindshare-3ab39-default-rtdb.firebaseio.com",projectId:"mindshare-3ab39",storageBucket:"mindshare-3ab39.appspot.com",messagingSenderId:"1026892817254",appId:"1:1026892817254:web:34f55c8c9e0fe7e3d6dea7",measurementId:"G-K32GDX0Z5Y"};class tT{}class nT{}class qc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof qc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new qc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof qc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class JL{encodeKey(e){return fP(e)}encodeValue(e){return fP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const e2=/%(\d[a-f0-9])/gi,t2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fP(n){return encodeURIComponent(n).replace(e2,(e,t)=>t2[t]??e)}function rT(n){return`${n}`}class Uf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new JL,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function XL(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(rT):[rT(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Uf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(rT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(rT(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class n2{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pP(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function gP(n){return typeof Blob<"u"&&n instanceof Blob}function mP(n){return typeof FormData<"u"&&n instanceof FormData}class fE{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function r2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new qc),this.context||(this.context=new n2),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Uf,this.urlWithParams=t}serializeBody(){return null===this.body?null:pP(this.body)||gP(this.body)||mP(this.body)||function i2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Uf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mP(this.body)?null:gP(this.body)?this.body.type||null:pP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Uf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,D=e.params||this.params;const T=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((x,H)=>x.set(H,e.setHeaders[H]),_)),e.setParams&&(D=Object.keys(e.setParams).reduce((x,H)=>x.set(H,e.setParams[H]),D)),new fE(t,r,u,{params:D,headers:_,context:T,reportProgress:g,responseType:s,withCredentials:l})}}var yi=(()=>((yi=yi||{})[yi.Sent=0]="Sent",yi[yi.UploadProgress=1]="UploadProgress",yi[yi.ResponseHeader=2]="ResponseHeader",yi[yi.DownloadProgress=3]="DownloadProgress",yi[yi.Response=4]="Response",yi[yi.User=5]="User",yi))();class Qx{constructor(e,t=200,r="OK"){this.headers=e.headers||new qc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Jx extends Qx{constructor(e={}){super(e),this.type=yi.ResponseHeader}clone(e={}){return new Jx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Z_ extends Qx{constructor(e={}){super(e),this.type=yi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Z_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yP extends Qx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Xx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _P=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof fE)u=t;else{let _,D;_=s.headers instanceof qc?s.headers:new qc(s.headers),s.params&&(D=s.params instanceof Uf?s.params:new Uf({fromObject:s.params})),u=new fE(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:D,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=(0,bt.of)(u).pipe(gh(_=>this.handler.handle(_)));if(t instanceof fE||"events"===s.observe)return l;const g=l.pipe(ks(_=>_ instanceof Z_));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Vt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,Vt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,Vt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,Vt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Uf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,Xx(s,r))}post(t,r,s={}){return this.request("POST",t,Xx(s,r))}put(t,r,s={}){return this.request("PUT",t,Xx(s,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tT))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function EP(n,e){return e(n)}function o2(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const u2=new d.OlP(""),pE=new d.OlP(""),IP=new d.OlP("");function c2(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(u2,{optional:!0})??[]).reduceRight(o2,EP));const r=(0,d.f3M)(d.HDt),s=r.add();return n(e,t).pipe(mh(()=>r.remove(s)))}}let CP=(()=>{class n extends tT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(pE),...this.injector.get(IP,[])]));this.chain=s.reduceRight((u,l)=>function a2(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(u,l,this.injector),EP)}const r=this.pendingTasks.add();return this.chain(t,s=>this.backend.handle(s)).pipe(mh(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nT),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const f2=/^\)\]\}',?\n/;let bP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,ln.D)(r.\u0275loadImpl()):(0,bt.of)(null)).pipe((0,pr.w)(()=>new oi.y(u=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((ye,me)=>l.setRequestHeader(ye,me.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const ye=t.detectContentTypeHeader();null!==ye&&l.setRequestHeader("Content-Type",ye)}if(t.responseType){const ye=t.responseType.toLowerCase();l.responseType="json"!==ye?ye:"text"}const g=t.serializeBody();let _=null;const D=()=>{if(null!==_)return _;const ye=l.statusText||"OK",me=new qc(l.getAllResponseHeaders()),rt=function p2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return _=new Jx({headers:me,status:l.status,statusText:ye,url:rt}),_},T=()=>{let{headers:ye,status:me,statusText:rt,url:mt}=D(),Ge=null;204!==me&&(Ge=typeof l.response>"u"?l.responseText:l.response),0===me&&(me=Ge?200:0);let at=me>=200&&me<300;if("json"===t.responseType&&"string"==typeof Ge){const Nt=Ge;Ge=Ge.replace(f2,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(Zt){Ge=Nt,at&&(at=!1,Ge={error:Zt,text:Ge})}}at?(u.next(new Z_({body:Ge,headers:ye,status:me,statusText:rt,url:mt||void 0})),u.complete()):u.error(new yP({error:Ge,headers:ye,status:me,statusText:rt,url:mt||void 0}))},x=ye=>{const{url:me}=D(),rt=new yP({error:ye,status:l.status||0,statusText:l.statusText||"Unknown Error",url:me||void 0});u.error(rt)};let H=!1;const K=ye=>{H||(u.next(D()),H=!0);let me={type:yi.DownloadProgress,loaded:ye.loaded};ye.lengthComputable&&(me.total=ye.total),"text"===t.responseType&&l.responseText&&(me.partialText=l.responseText),u.next(me)},ue=ye=>{let me={type:yi.UploadProgress,loaded:ye.loaded};ye.lengthComputable&&(me.total=ye.total),u.next(me)};return l.addEventListener("load",T),l.addEventListener("error",x),l.addEventListener("timeout",x),l.addEventListener("abort",x),t.reportProgress&&(l.addEventListener("progress",K),null!==g&&l.upload&&l.upload.addEventListener("progress",ue)),l.send(g),u.next({type:yi.Sent}),()=>{l.removeEventListener("error",x),l.removeEventListener("abort",x),l.removeEventListener("load",T),l.removeEventListener("timeout",x),t.reportProgress&&(l.removeEventListener("progress",K),null!==g&&l.upload&&l.upload.removeEventListener("progress",ue)),l.readyState!==l.DONE&&l.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const eR=new d.OlP("XSRF_ENABLED"),TP=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),SP=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class AP{}let y2=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Io(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(d.Lbi),d.LFG(TP))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function _2(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(eR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(AP).getToken(),s=(0,d.f3M)(SP);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var Sr=(()=>((Sr=Sr||{})[Sr.Interceptors=0]="Interceptors",Sr[Sr.LegacyInterceptors=1]="LegacyInterceptors",Sr[Sr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Sr[Sr.NoXsrfProtection=3]="NoXsrfProtection",Sr[Sr.JsonpSupport=4]="JsonpSupport",Sr[Sr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Sr[Sr.Fetch=6]="Fetch",Sr))();function Yg(n,e){return{\u0275kind:n,\u0275providers:e}}function v2(...n){const e=[_P,bP,CP,{provide:tT,useExisting:CP},{provide:nT,useExisting:bP},{provide:pE,useValue:_2,multi:!0},{provide:eR,useValue:!0},{provide:AP,useClass:y2}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const MP=new d.OlP("LEGACY_INTERCEPTOR_FN");let E2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[v2(Yg(Sr.LegacyInterceptors,[{provide:MP,useFactory:c2},{provide:pE,useExisting:MP,multi:!0}]))]}),n})(),Vf=(()=>{class n{constructor(t,r,s,u){this.http=t,this.firestore=r,this.router=s,this.firAuth=u,this.user=new ws.X(null),this.forUpload=new ws.X(null),this.name="",this.defProfile="https://firebasestorage.googleapis.com/v0/b/mindshare-3ab39.appspot.com/o/Screenshot%202023-06-17%20183301.jpg?alt=media&token=c964126f-6daf-446a-b445-d6c0e314836c",this.bio="",this.adjectives=["Cool","Awesome","Epic","Rad","Sleek","Stellar","Ninja","Dynamic","Glorious","Mystic"],this.nouns=["Phoenix","Vortex","Zenith","Luminary","Nova","Spectre","Infinity","Avalanche","Champion","Enigma"],this.randomAdjective=this.adjectives[Math.floor(Math.random()*this.adjectives.length)],this.randomNoun=this.nouns[Math.floor(Math.random()*this.nouns.length)],this.username=this.randomAdjective+this.randomNoun}signup(t,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCgZpa69S4Mt_o_x8QIrm6S7mYE-QWbE1o",{email:t,password:r,returnSecureToken:!0}).pipe(Ui(this.handleError),(0,Jr.b)(s=>{this.handleAuth(s.email,s.localId,s.idToken,+s.expiresIn),this.router.navigate(["/home"])}))}login(t,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCgZpa69S4Mt_o_x8QIrm6S7mYE-QWbE1o",{email:t,password:r,returnSecureToken:!0}).pipe(Ui(this.handleError),(0,Jr.b)(s=>{this.handleAuth(s.email,s.localId,s.idToken,+s.expiresIn)}))}storeUser(t){return this.firestore.collection("UserData").add({name:t.name,email:t.email,bio:this.bio,profilePic:this.defProfile,username:this.username+Math.floor(1001*Math.random()+1)})}getUser(t){return this.firestore.collection("UserData",r=>r.where("email","==",t)).valueChanges()}handleError(t){let r="An unknown error occured!";if(!t.error||!t.error.error)return Hl(r);switch(t.error.error.message){case"EMAIL_EXISTS":r="The email address is already in use!";break;case"OPERATION_NOT_ALLOWED":r="Password sign-in is disabled for this project!";break;case"INVALID_EMAIL":r="Please enter a valid email";break;case"EMAIL_NOT_FOUND":r="user not found!";break;case"INVALID_PASSWORD":r="Invalid password!";break;case"USER_DISABLED":r="User has been disabled";break;default:r=t.error.error.message}return Hl(r)}handleAuth(t,r,s,u){const l=new Date((new Date).getTime()+1e3*u),g=new hP(t,r,s,l);this.user.next(g),this.autoLogout(1e3*u),localStorage.setItem("loggedData",JSON.stringify(g))}autoLogin(){const t=localStorage.getItem("loggedData"),r=t?JSON.parse(t):null;if(!r)return;const s=new hP(r.email,r.userId,r._token,new Date(r._tokenExpirationDate));if(s.token){this.getUser(s.email).subscribe(),this.user.next(s);const u=new Date(r._tokenExpirationDate).getTime()-(new Date).getTime();this.autoLogout(u)}}autoLogout(t){this.tokenExpirationTimer=setTimeout(()=>{this.logout()},t)}logout(){this.user.next(null),this.router.navigate(["/auth"]),localStorage.removeItem("loggedData"),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}resetPassword(t){this.firAuth.sendPasswordResetEmail(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_P),d.LFG(Jb),d.LFG(Ii),d.LFG(Zx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-loader"]],decls:13,vars:0,consts:[[1,"lds-spinner"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div")(6,"div")(7,"div")(8,"div")(9,"div")(10,"div")(11,"div")(12,"div"),d.qZA())},styles:['.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:_ngcontent-%COMP%_lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes _ngcontent-%COMP%_lds-spinner{0%{opacity:1}to{opacity:0}}']}),n})();function S2(n,e){1&n&&(d.TgZ(0,"div",2),d._UZ(1,"app-loader"),d.qZA())}function A2(n,e){if(1&n&&(d.TgZ(0,"div",5)(1,"div",6)(2,"div",7),d._UZ(3,"img",8),d.TgZ(4,"span")(5,"a",9),d._uU(6),d.ALo(7,"uppercase"),d.qZA()()(),d._UZ(8,"img",10),d.TgZ(9,"div",11)(10,"p",12),d._uU(11),d._UZ(12,"br"),d.TgZ(13,"li",13),d._uU(14),d.ALo(15,"date"),d.qZA()()()()()),2&n){const t=e.$implicit;d.xp6(3),d.s9C("src",t.user[0].profilePic,d.LSH),d.xp6(2),d.MGl("href","/user/",t.post.email,"",d.LSH),d.xp6(1),d.hij(" ",d.lcZ(7,7,t.post.name),""),d.xp6(2),d.Q6J("src",t.post.path,d.LSH),d.xp6(3),d.hij(" ",t.post.caption," "),d.xp6(3),d.AsE("",d.xi3(15,9,t.post.date,"medium")," | ",t.post.email,"")}}function M2(n,e){if(1&n&&(d.TgZ(0,"div",3),d.YNc(1,A2,16,12,"div",4),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.posts_)}}let x2=(()=>{class n{constructor(t,r){this.posts=t,this.auth=r,this.posts_=[],this.onLoad=!0}ngOnInit(){this.posts$=this.posts.getPosts(),this.sub2=this.posts$.subscribe(t=>{this.onLoad=!1,this.processPosts(t)},t=>{console.error(t)})}processPosts(t){t.forEach(r=>{this.sub=this.auth.getUser(r.email).subscribe(u=>{this.posts_.push({post:r,user:u})},u=>{console.error(u)})})}ngOnDestroy(){this.sub.unsubscribe(),this.sub2.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Xb),d.Y36(Vf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:2,consts:[["class","text-center load justify-content-center",4,"ngIf"],["class","col-md-5",4,"ngIf"],[1,"text-center","load","justify-content-center"],[1,"col-md-5"],["class","container",4,"ngFor","ngForOf"],[1,"container"],[1,"cards"],[1,"userDets"],["alt","PFP",1,"image-responsive",3,"src"],[3,"href"],["width","90%","height","60%","alt","User Post",1,"card-img-top",2,"object-fit","contain",3,"src"],[1,"card-body"],[1,"card-text"],[1,"timeStamp"]],template:function(t,r){1&t&&(d.YNc(0,S2,2,0,"div",0),d.YNc(1,M2,2,1,"div",1)),2&t&&(d.Q6J("ngIf",r.onLoad),d.xp6(1),d.Q6J("ngIf",!r.onLoad))},dependencies:[Ra,us,sT,Fa,An],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;background-color:#fff;padding:5px;color:#000}.cards[_ngcontent-%COMP%]{margin:2px;background-color:#f0f8ff;width:100%;height:100%}.card-body[_ngcontent-%COMP%]{border:1px solid black;padding:20px;border-radius:0 0 10px 10px}.cards[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){border:1px solid #000000}.cards[_ngcontent-%COMP%]   .userDets[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px solid black;display:flex;width:40px;height:40px;object-fit:cover}*[_ngcontent-%COMP%]{color:#000}.userDets[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;display:flex;padding:.5vh;border:1px solid black;border-bottom:none;font-weight:900}.userDets[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto 0;padding-left:.2vw}.timeStamp[_ngcontent-%COMP%]{font-size:xx-small;display:inline;margin:auto 0;list-style:none;font-weight:900}.load[_ngcontent-%COMP%]{justify-content:center;height:70vh}"]}),n})();const xP="firebasestorage.googleapis.com",RP="storageBucket";class Lr extends Gt.ZR{constructor(e,t,r=0){super(tR(e),`Firebase Storage: ${t} (${tR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ft=(()=>((Ft=Ft||{}).UNKNOWN="unknown",Ft.OBJECT_NOT_FOUND="object-not-found",Ft.BUCKET_NOT_FOUND="bucket-not-found",Ft.PROJECT_NOT_FOUND="project-not-found",Ft.QUOTA_EXCEEDED="quota-exceeded",Ft.UNAUTHENTICATED="unauthenticated",Ft.UNAUTHORIZED="unauthorized",Ft.UNAUTHORIZED_APP="unauthorized-app",Ft.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Ft.INVALID_CHECKSUM="invalid-checksum",Ft.CANCELED="canceled",Ft.INVALID_EVENT_NAME="invalid-event-name",Ft.INVALID_URL="invalid-url",Ft.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Ft.NO_DEFAULT_BUCKET="no-default-bucket",Ft.CANNOT_SLICE_BLOB="cannot-slice-blob",Ft.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Ft.NO_DOWNLOAD_URL="no-download-url",Ft.INVALID_ARGUMENT="invalid-argument",Ft.INVALID_ARGUMENT_COUNT="invalid-argument-count",Ft.APP_DELETED="app-deleted",Ft.INVALID_ROOT_OPERATION="invalid-root-operation",Ft.INVALID_FORMAT="invalid-format",Ft.INTERNAL_ERROR="internal-error",Ft.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ft))();function tR(n){return"storage/"+n}function nR(){return new Lr(Ft.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function NP(){return new Lr(Ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PP(){return new Lr(Ft.CANCELED,"User canceled the upload/download.")}function OP(){return new Lr(Ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function K_(n){return new Lr(Ft.INVALID_ARGUMENT,n)}function kP(){return new Lr(Ft.APP_DELETED,"The Firebase app was deleted.")}function FP(n){return new Lr(Ft.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gE(n,e){return new Lr(Ft.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function mE(n){throw new Lr(Ft.INTERNAL_ERROR,"Internal error: "+n)}class bs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=bs.makeFromUrl(e,t)}catch{return new bs(e,"")}if(""===r.path)return r;throw function j2(n){return new Lr(Ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function D(at){at.path_=decodeURIComponent(at.path)}const x=t.replace(/[.]/g,"\\."),Ge=[{regex:g,indices:{bucket:1,path:3},postModify:function u(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===xP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let at=0;at<Ge.length;at++){const Nt=Ge[at],Zt=Nt.regex.exec(e);if(Zt){let Ko=Zt[Nt.indices.path];Ko||(Ko=""),r=new bs(Zt[Nt.indices.bucket],Ko),Nt.postModify(r);break}}if(null==r)throw function B2(n){return new Lr(Ft.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class W2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oT(n){return"string"==typeof n||n instanceof String}function LP(n){return rR()&&n instanceof Blob}function rR(){return typeof Blob<"u"&&!(0,Gt.UG)()}function iR(n,e,t,r){if(r<e)throw K_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw K_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Td(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function UP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wo=(()=>((wo=wo||{})[wo.NO_ERROR=0]="NO_ERROR",wo[wo.NETWORK_ERROR=1]="NETWORK_ERROR",wo[wo.ABORT=2]="ABORT",wo))();function VP(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class J2{constructor(e,t,r,s,u,l,g,_,D,T,x,H=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=g,this.errorCallback_=_,this.timeout_=D,this.progressCallback_=T,this.connectionFactory_=x,this.retry=H,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,ue)=>{this.resolve_=K,this.reject_=ue,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,l=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function K2(n){return void 0!==n}(_)?u():u(_)}catch(_){l(_)}else if(null!==g){const _=nR();_.serverResponse=g.getErrorText(),l(this.errorCallback_?this.errorCallback_(g,_):_)}else l(s.canceled?this.appDelete_?kP():PP():NP())};this.canceled_?t(0,new aT(!1,null,!0)):this.backoffId_=function q2(n,e,t){let r=1,s=null,u=null,l=!1,g=0;function _(){return 2===g}let D=!1;function T(...me){D||(D=!0,e.apply(null,me))}function x(me){s=setTimeout(()=>{s=null,n(K,_())},me)}function H(){u&&clearTimeout(u)}function K(me,...rt){if(D)return void H();if(me)return H(),void T.call(null,me,...rt);if(_()||l)return H(),void T.call(null,me,...rt);let Ge;r<64&&(r*=2),1===g?(g=2,Ge=0):Ge=1e3*(r+Math.random()),x(Ge)}let ue=!1;function ye(me){ue||(ue=!0,H(),!D&&(null!==s?(me||(g=2),clearTimeout(s),x(0)):me||(g=1)))}return x(0),u=setTimeout(()=>{l=!0,ye(!0)},t),ye}((r,s)=>{if(s)return void r(!1,new aT(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const g=u.getErrorCode()===wo.NO_ERROR,_=u.getStatus();if(!g||VP(_,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===wo.ABORT;return void r(!1,new aT(!1,null,T))}const D=-1!==this.successCodes_.indexOf(_);r(!0,new aT(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Z2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class aT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function sU(...n){const e=function iU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(rR())return new Blob(n);throw new Lr(Ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sR{constructor(e,t){this.data=e,this.contentType=t||null}}function oR(n,e){switch(n){case Zo.RAW:return new sR(BP(e));case Zo.BASE64:case Zo.BASE64URL:return new sR(jP(n,e));case Zo.DATA_URL:return new sR(function cU(n){const e=new HP(n);return e.base64?jP(Zo.BASE64,e.rest):function uU(n){let e;try{e=decodeURIComponent(n)}catch{throw gE(Zo.DATA_URL,"Malformed data URL.")}return BP(e)}(e.rest)}(e),function lU(n){return new HP(n).contentType}(e))}throw nR()}function BP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function jP(n,e){switch(n){case Zo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw gE(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Zo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw gE(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function aU(n){if(typeof atob>"u")throw function G2(n){return new Lr(Ft.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:gE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class HP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gE(Zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function dU(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Zc{constructor(e,t){let r=0,s="";LP(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(LP(this.data_)){const s=function oU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Zc(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Zc(r,!0)}}static getBlob(...e){if(rR()){const t=e.map(r=>r instanceof Zc?r.data_:r);return new Zc(sU.apply(null,t))}{const t=e.map(l=>oT(l)?oR(Zo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let g=0;g<l.length;g++)s[u++]=l[g]}),new Zc(s,!0)}}uploadData(){return this.data_}}function aR(n){let e;try{e=JSON.parse(n)}catch{return null}return function Q2(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function $P(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pU(n,e){return e}class qs{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||pU}}let uT=null;function yE(){if(uT)return uT;const n=[];n.push(new qs("bucket")),n.push(new qs("generation")),n.push(new qs("metageneration")),n.push(new qs("name","fullPath",!0));const t=new qs("name");t.xform=function e(u,l){return function gU(n){return!oT(n)||n.length<2?n:$P(n)}(l)},n.push(t);const s=new qs("size");return s.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(s),n.push(new qs("timeCreated")),n.push(new qs("updated")),n.push(new qs("md5Hash",null,!0)),n.push(new qs("cacheControl",null,!0)),n.push(new qs("contentDisposition",null,!0)),n.push(new qs("contentEncoding",null,!0)),n.push(new qs("contentLanguage",null,!0)),n.push(new qs("contentType",null,!0)),n.push(new qs("metadata","customMetadata",!0)),uT=n,uT}function zP(n,e,t){const r=aR(e);return null===r?null:function yU(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function mU(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new bs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function uR(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const GP="prefixes",WP="items";class Kc{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yc(n){if(!n)throw nR()}function cT(n,e){return function t(r,s){const u=zP(n,s,e);return Yc(null!==u),u}}function Y_(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function U2(){return new Lr(Ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function L2(){return new Lr(Ft.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function F2(n){return new Lr(Ft.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function V2(n){return new Lr(Ft.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function _E(n){const e=Y_(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function k2(n){return new Lr(Ft.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function qP(n,e,t){const s=Td(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,g=new Kc(s,"GET",cT(n,t),l);return g.errorHandler=_E(e),g}function CU(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const g=Td(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,T=new Kc(g,"GET",function EU(n,e){return function t(r,s){const u=function wU(n,e,t){const r=aR(t);return null===r?null:function vU(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[GP])for(const s of t[GP]){const u=s.replace(/\/$/,""),l=n._makeStorageReference(new bs(e,u));r.prefixes.push(l)}if(t[WP])for(const s of t[WP]){const u=n._makeStorageReference(new bs(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Yc(null!==u),u}}(n,e.bucket),D);return T.urlParams=u,T.errorHandler=Y_(e),T}function KP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function SU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class lT{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function cR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Yc(!1)}return Yc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const RU={STATE_CHANGED:"state_changed"},Zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lR(n){switch(n){case"running":case"pausing":case"canceling":return Zs.RUNNING;case"paused":return Zs.PAUSED;case"success":return Zs.SUCCESS;case"canceled":return Zs.CANCELED;default:return Zs.ERROR}}class NU{constructor(e,t,r){if(function Y2(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Q_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let JP=null;class PU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw mE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class OU extends PU{initXhr(){this.xhr_.responseType="text"}}function Su(){return JP?JP():new OU}class XP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=yE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ft.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(VP(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=NP()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ft.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function AU(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l=KP(e,r,s),g={name:l.fullPath},_=Td(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},x=uR(l,t),ue=new Kc(_,"POST",function K(ye){let me;cR(ye);try{me=ye.getResponseHeader("X-Goog-Upload-URL")}catch{Yc(!1)}return Yc(oT(me)),me},n.maxUploadRetryTime);return ue.urlParams=g,ue.headers=T,ue.body=x,ue.errorHandler=Y_(e),ue}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Su,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function MU(n,e,t,r){const _=new Kc(t,"POST",function u(D){const T=cR(D,["active","final"]);let x=null;try{x=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yc(!1)}x||Yc(!1);const H=Number(x);return Yc(!isNaN(H)),new lT(H,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Y_(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Su,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new lT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let l;try{l=function xU(n,e,t,r,s,u,l,g){const _=new lT(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function $2(){return new Lr(Ft.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const D=_.total-_.current;let T=D;s>0&&(T=Math.min(T,s));const x=_.current;let K="";K=0===T?"finalize":D===T?"upload, finalize":"upload";const ue={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${_.current}`},ye=r.slice(x,x+T);if(null===ye)throw OP();const Ge=new Kc(t,"POST",function me(at,Nt){const Zt=cR(at,["active","final"]),_i=_.current+T,Ko=r.size();let J_;return J_="final"===Zt?cT(e,u)(at,Nt):null,new lT(_i,Ko,"final"===Zt,J_)},e.maxUploadRetryTime);return Ge.headers=ue,Ge.body=ye.uploadData(),Ge.progressCallback=g||null,Ge.errorHandler=Y_(n),Ge}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(l,Su,s,u,!1);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=qP(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Su,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function YP(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let Ge="";for(let at=0;at<2;at++)Ge+=Math.random().toString().slice(2);return Ge}();l["Content-Type"]="multipart/related; boundary="+_;const D=KP(e,r,s),T=uR(D,t),K=Zc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===K)throw OP();const ue={name:D.fullPath},ye=Td(u,n.host,n._protocol),rt=n.maxUploadRetryTime,mt=new Kc(ye,"POST",cT(n,t),rt);return mt.urlParams=ue,mt.headers=l,mt.body=K.uploadData(),mt.errorHandler=Y_(e),mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Su,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=PP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new NU(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lR(this._state)){case Zs.SUCCESS:Q_(this._resolve.bind(null,this.snapshot))();break;case Zs.CANCELED:case Zs.ERROR:Q_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lR(this._state)){case Zs.RUNNING:case Zs.PAUSED:e.next&&Q_(e.next.bind(e,this.snapshot))();break;case Zs.SUCCESS:e.complete&&Q_(e.complete.bind(e))();break;default:e.error&&Q_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Qg{constructor(e,t){this._service=e,this._location=t instanceof bs?t:bs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qg(e,t)}get root(){const e=new bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $P(this._location.path)}get storage(){return this._service}get parent(){const e=function hU(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new bs(this._location.bucket,e);return new Qg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw FP(e)}}function tO(n,e,t){return dR.apply(this,arguments)}function dR(){return dR=(0,Ee.Z)(function*(n,e,t){const s=yield nO(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield tO(n,e,s.nextPageToken))}),dR.apply(this,arguments)}function nO(n,e){null!=e&&"number"==typeof e.maxResults&&iR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=CU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Su)}function WU(n){n._throwIfRoot("getDownloadURL");const e=function DU(n,e,t){const s=Td(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,g=new Kc(s,"GET",function IU(n,e){return function t(r,s){const u=zP(n,s,e);return Yc(null!==u),function _U(n,e,t,r){const s=aR(e);if(null===s||!oT(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(D=>{const x=n.fullPath;return Td("/b/"+l(n.bucket)+"/o/"+l(x),t,r)+UP({alt:"media",token:D})})[0]}(u,s,n.host,n._protocol)}}(n,t),l);return g.errorHandler=_E(e),g}(n.storage,n._location,yE());return n.storage.makeRequestWithTokens(e,Su).then(t=>{if(null===t)throw function z2(){return new Lr(Ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function rO(n,e){const t=function fU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new bs(n._location.bucket,t);return new Qg(n.storage,r)}function iO(n,e){if(n instanceof hR){const t=n;if(null==t._bucket)throw function H2(){return new Lr(Ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RP+"' property when initializing the app?")}();const r=new Qg(t,t._bucket);return null!=e?iO(r,e):r}return void 0!==e?rO(n,e):n}function YU(n,e){if(e&&function ZU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hR)return function KU(n,e){return new Qg(n,e)}(n,e);throw K_("To use ref(service, url), the first argument must be a Storage instance.")}return iO(n,e)}function sO(n,e){const t=e?.[RP];return null==t?null:bs.makeFromBucketSpec(t,n)}class hR{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=xP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?bs.makeFromBucketSpec(s,this._host):sO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?bs.makeFromBucketSpec(this._url,e):sO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qg(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new W2(kP());{const l=function rU(n,e,t,r,s,u,l=!0){const g=UP(n.urlParams),_=n.url+g,D=Object.assign({},n.headers);return function tU(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function X2(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function eU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function nU(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new J2(_,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const oO="@firebase/storage";function cO(n,e){return YU(n=(0,Gt.m9)(n),e)}function oV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new hR(t,r,s,e,Ls.SDK_VERSION)}!function aV(){(0,Ls._registerComponent)(new Ph.wA("storage",oV,"PUBLIC").setMultipleInstances(!0)),(0,Ls.registerVersion)(oO,"0.11.2",""),(0,Ls.registerVersion)(oO,"0.11.2","esm2017")}();class dT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class dO{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new dT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new dT(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?l=>t(new dT(l,this,this._ref)):{next:t.next?l=>t.next(new dT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class hO{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Sd(e,this._service))}get items(){return this._delegate.items.map(e=>new Sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function sV(n,e){return rO(n,e)}(this._delegate,e);return new Sd(t,this.storage)}get root(){return new Sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new dO(function JU(n,e,t){return function jU(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new XP(n,new Zc(e),t)}(n=(0,Gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Zo.RAW,r){this._throwIfRoot("putString");const s=oR(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new dO(new XP(this._delegate,new Zc(s.data,!0),u),this)}listAll(){return function nV(n){return function $U(n){const e={prefixes:[],items:[]};return tO(n,e).then(()=>e)}(n=(0,Gt.m9)(n))}(this._delegate).then(e=>new hO(e,this.storage))}list(e){return function tV(n,e){return nO(n=(0,Gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new hO(t,this.storage))}getMetadata(){return function XU(n){return function zU(n){n._throwIfRoot("getMetadata");const e=qP(n.storage,n._location,yE());return n.storage.makeRequestWithTokens(e,Su)}(n=(0,Gt.m9)(n))}(this._delegate)}updateMetadata(e){return function eV(n,e){return function GU(n,e){n._throwIfRoot("updateMetadata");const t=function bU(n,e,t,r){const u=Td(e.fullServerUrl(),n.host,n._protocol),g=uR(t,r),D=n.maxOperationRetryTime,T=new Kc(u,"PATCH",cT(n,r),D);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=g,T.errorHandler=_E(e),T}(n.storage,n._location,e,yE());return n.storage.makeRequestWithTokens(t,Su)}(n=(0,Gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function rV(n){return WU(n=(0,Gt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function iV(n){return function qU(n){n._throwIfRoot("deleteObject");const e=function TU(n,e){const r=Td(e.fullServerUrl(),n.host,n._protocol),g=new Kc(r,"DELETE",function l(_,D){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=_E(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Su)}(n=(0,Gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw FP(e)}}class fO{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(pO(e))throw K_("ref() expected a child path but got a URL, use refFromURL instead.");return new Sd(cO(this._delegate,e),this)}refFromURL(e){if(!pO(e))throw K_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bs.makeFromUrl(e,this._delegate.host)}catch{throw K_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sd(cO(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function lO(n,e,t,r={}){!function QU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Gt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function pO(n){return/^[A-Za-z]+:\/\//.test(n)}function dV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new fO(t,r)}function gO(n){const e=function fV(n){return new oi.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function R2(n,e=JI.z){return(0,Os.e)((t,r)=>{let s=null,u=null,l=null;const g=()=>{if(s){s.unsubscribe(),s=null;const D=u;u=null,r.next(D)}};function _(){const D=l+n,T=e.now();if(T<D)return s=this.schedule(void 0,D-T),void r.add(s);g()}t.subscribe((0,kr.x)(r,D=>{u=D,l=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{g(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Vt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function hT(n){return{getDownloadURL:()=>(0,bt.of)(void 0).pipe(cn.fc,(0,pr.w)(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>(0,bt.of)(void 0).pipe(cn.fc,(0,pr.w)(()=>n.getMetadata()),cn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>hT(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>gO(n.put(e,t)),putString:(e,t,r)=>gO(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function hV(n){const e={TaskState:Zs,TaskEvent:RU,StringFormat:Zo,Storage:fO,Reference:Sd};n.INTERNAL.registerComponent(new Ph.wA("storage-compat",dV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Gp.Z);const pV=new d.OlP("angularfire2.storageBucket"),gV=new d.OlP("angularfire2.storage.maxUploadRetryTime"),mV=new d.OlP("angularfire2.storage.maxOperationRetryTime"),yV=new d.OlP("angularfire2.storage.use-emulator");let mO=(()=>{class n{constructor(t,r,s,u,l,g,_,D,T,x){const H=(0,Hr.on)(t,l,r);this.storage=(0,Hr.cc)(`${H.name}.storage.${s}`,"AngularFireStorage",H.name,()=>{const K=l.runOutsideAngular(()=>H.storage(s||void 0)),ue=T;return ue&&K.useEmulator(...ue),_&&K.setMaxUploadRetryTime(_),D&&K.setMaxOperationRetryTime(D),K},[_,D])}ref(t){return hT(this.storage.ref(t))}refFromURL(t){return hT(this.storage.refFromURL(t))}upload(t,r,s){return hT(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hr.Dh),d.LFG(Hr.xv,8),d.LFG(pV,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(cn.HU),d.LFG(gV,8),d.LFG(mV,8),d.LFG(yV,8),d.LFG(q_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_V=(()=>{class n{constructor(t,r){this.firestore=t,this.auth=r}upload(t,r){this.auth.user.subscribe(s=>{this.auth.getUser(s.email).subscribe(u=>{console.log(u[0].name+"Dsdsds"),this.user=u[0].email,this.userName=u[0].name,this.firestore.collection("posts").add({email:this.user,caption:t,path:r,name:this.userName,date:(new Date).getTime()}).then(()=>{console.log("Document successfully written.")}).catch(l=>{console.error("Error writing document: ",l)})})})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jb),d.LFG(Vf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vV(n,e){1&n&&(d.TgZ(0,"div",5),d._UZ(1,"app-loader"),d.qZA())}function wV(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"Share your thoughts"),d.qZA())}function EV(n,e){1&n&&(d.TgZ(0,"label",15),d._uU(1,"Upload Photo:"),d.qZA())}function IV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"input",16,17),d.NdJ("change",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.onFileSelected(s))}),d.qZA()}}function CV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"p",18)(1,"i",19),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.inputFunc())}),d.qZA()()}}function DV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"div",6),d.YNc(2,EV,2,0,"label",7),d.YNc(3,IV,2,0,"input",8),d._UZ(4,"br"),d.YNc(5,CV,2,0,"p",9),d._UZ(6,"img",10),d.qZA(),d._UZ(7,"br"),d.TgZ(8,"div",6)(9,"label",11),d._uU(10,"Caption:"),d.qZA(),d._UZ(11,"textarea",12),d.qZA(),d.TgZ(12,"button",13),d._uU(13," Post"),d.qZA(),d.TgZ(14,"button",14),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(),u=d.MAs(5);return d.KtG(s.reset(u))}),d._uU(15,"Reset"),d.qZA()()}if(2&n){const t=d.oxw(),r=d.MAs(5);d.xp6(2),d.Q6J("ngIf",t.serveredImg),d.xp6(1),d.Q6J("ngIf",t.serveredImg),d.xp6(2),d.Q6J("ngIf",t.serveredImg),d.xp6(1),d.s9C("alt",t.imgs),d.Q6J("src",t.imgs,d.LSH),d.xp6(6),d.Q6J("disabled",!r.valid||t.uploaded)}}let bV=(()=>{class n{constructor(t,r,s){this.storage=t,this.uploadServ=r,this.router=s,this.onLoad=!1,this.selectedFile=null,this.serveredImg=!0,this.imgs="",this.uploaded=!0}onFileSelected(t){this.selectedFile=t.target.files[0],this.selectedFile&&this.picUpload()}onUpload(t){const r=t.value.caption;this.selectedFile&&(this.onLoad=!0,this.uploadServ.upload(r,this.imgs),this.router.navigate(["/home"]),this.onLoad=!1)}picUpload(){this.uploaded=!1,this.onLoad=!0,this.serveredImg=!1;const t=`images/${this.selectedFile.name}`,r=this.storage.ref(t);this.storage.upload(t,this.selectedFile).snapshotChanges().pipe(mh(()=>{r.getDownloadURL().subscribe(u=>{this.imgs=u,this.onLoad=!1})})).subscribe()}reset(t){t.reset(),this.imgs="",this.serveredImg=!0}ngOnDestroy(){}inputFunc(){document.getElementById("imagePath").click()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mO),d.Y36(_V),d.Y36(Ii))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-upload"]],decls:7,vars:3,consts:[["class","text-center load justify-content-center",4,"ngIf"],[1,"container"],[4,"ngIf"],[3,"ngSubmit"],["upload","ngForm"],[1,"text-center","load","justify-content-center"],[1,"form-group"],["for","photo",4,"ngIf"],["class","form-control","type","file","accept","image/*","id","imagePath","ngModel","","name","photo","style","display: none;",3,"change",4,"ngIf"],["style"," display: inline;",4,"ngIf"],["width","400px",3,"src","alt"],["for","caption"],["id","caption","ngModel","","name","caption","rows","2","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],["for","photo"],["type","file","accept","image/*","id","imagePath","ngModel","","name","photo",1,"form-control",2,"display","none",3,"change"],["inps",""],[2,"display","inline"],[1,"fa","fa-upload",3,"click"]],template:function(t,r){if(1&t){const s=d.EpF();d.YNc(0,vV,2,0,"div",0),d.TgZ(1,"div")(2,"div",1),d.YNc(3,wV,2,0,"h1",2),d.TgZ(4,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(s);const l=d.MAs(5);return d.KtG(r.onUpload(l))}),d.YNc(6,DV,16,6,"div",2),d.qZA()()()}2&t&&(d.Q6J("ngIf",r.onLoad),d.xp6(3),d.Q6J("ngIf",!r.onLoad),d.xp6(3),d.Q6J("ngIf",!r.onLoad))},dependencies:[us,mm,ms,Pl,En,Cp,Ep,au,sT],styles:[".btn[_ngcontent-%COMP%]{margin:10px}input.ng-touched.ng-invalid[_ngcontent-%COMP%], textarea.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px red solid}.fa[_ngcontent-%COMP%]{font-size:5vw;margin-top:2vh;background-color:#252525;color:#fff;border-radius:50%;padding:20px;border:3px white solid;cursor:pointer}.fa[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:ease-in-out .2s;border:5px solid white}"]}),n})(),yO=(()=>{class n{constructor(t){this.viewContainerRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["","appPlaceHolder",""]]}),n})(),TV=(()=>{class n{constructor(){this.close=new d.vpe}onClose(){this.close.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-alert"]],inputs:{message:"message"},outputs:{close:"close"},decls:8,vars:3,consts:[[1,"backdrop",3,"click"],[1,"alert-box"],[1,"alert-box-actions"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return r.onClose()}),d.qZA(),d.TgZ(1,"div",1)(2,"p"),d._uU(3),d.ALo(4,"uppercase"),d.qZA(),d.TgZ(5,"div",2)(6,"button",3),d.NdJ("click",function(){return r.onClose()}),d._uU(7,"Close"),d.qZA()()()),2&t&&(d.xp6(3),d.Oqu(d.lcZ(4,1,r.message)))},dependencies:[Fa],styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.75);z-index:50}.alert-box[_ngcontent-%COMP%]{position:fixed;top:30vh;width:60vw;left:20vw;padding:16px;background-color:#000;box-shadow:0 2px 8px #00000042;z-index:100}.alert-box-actions[_ngcontent-%COMP%]{text-align:right}"]}),n})(),SV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-logo"]],decls:1,vars:0,consts:[["src","../../assets/Screenshot_2023-06-17_183301-removebg-preview.png","alt",""]],template:function(t,r){1&t&&d._UZ(0,"img",0)},styles:["img[_ngcontent-%COMP%]{margin:auto}*[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:30%}"]}),n})();function AV(n,e){}function MV(n,e){1&n&&(d.TgZ(0,"div",6)(1,"label",15),d._uU(2,"NAME"),d.qZA(),d._UZ(3,"input",16),d.qZA())}function xV(n,e){1&n&&(d.TgZ(0,"div",6)(1,"label",17),d._uU(2,"PASSWORD"),d.qZA(),d._UZ(3,"input",18),d.qZA())}function RV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(),u=d.MAs(4);return d.KtG(s.onSubmit(u))}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw(),r=d.MAs(4);d.Q6J("disabled",!r.valid),d.xp6(1),d.Oqu(t.isLoginMode?"Login":"Sign Up")}}function NV(n,e){1&n&&(d.TgZ(0,"span",20),d._uU(1,"|"),d.qZA())}function PV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(),u=d.MAs(4);return d.KtG(s.resetPassword(u))}),d._uU(1,"Send Reset Link"),d.qZA()}if(2&n){d.oxw();const t=d.MAs(4);d.Q6J("disabled",!t.valid)}}function OV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",21),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.toReset())}),d._uU(1,"Reset"),d.qZA()}}function kV(n,e){1&n&&(d.TgZ(0,"label",22),d._uU(1,"NEW USER?"),d.qZA())}function FV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onSignup())}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.isLoginMode?"Sign Up":"Login")}}let LV=(()=>{class n{constructor(t,r,s){this.auth=t,this.router=r,this.componentFactoryRes=s,this.isLoginMode=!0,this.name="",this.email="",this.error=null,this.reset=!1}onSignup(){this.isLoginMode=!this.isLoginMode}onSubmit(t){const r=t.value.email,s=t.value.password,l={email:r,name:t.value.name};this.isLoginMode?this.auth.login(r,s).pipe((0,Jr.b)(()=>{this.auth.getUser(r).subscribe(g=>{g.length>0&&(this.name=g[0].name,this.router.navigate(["/home"]))})})).subscribe(g=>{},g=>{this.error=g,this.showErrorAlert(g)}):this.auth.signup(r,s).pipe((0,Jr.b)(()=>{this.auth.storeUser(l).then(()=>{})})).subscribe(g=>{},g=>{this.error=g,this.showErrorAlert(g)})}toReset(){this.reset=!this.reset}resetPassword(t){this.auth.resetPassword(t.value.email),this.reset=!1}showErrorAlert(t){const r=this.componentFactoryRes.resolveComponentFactory(TV),s=this.alertHost.viewContainerRef;s.clear();const u=s.createComponent(r);u.instance.message=t,this.closeSub=u.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),s.clear()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vf),d.Y36(Ii),d.Y36(d._Vd))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-auth"]],viewQuery:function(t,r){if(1&t&&d.Gf(yO,5),2&t){let s;d.iGM(s=d.CRH())&&(r.alertHost=s.first)}},decls:21,vars:8,consts:[["appPlaceHolder",""],[1,"row"],[1,"col-xs-8","col-md-6","col-md-offset-3"],[3,"ngSubmit"],["authForm","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","email","ngModel","","name","email","placeholder","EMAIL","required","","email","",1,"form-control"],["type","submit","class","btn btn-dark",3,"disabled","click",4,"ngIf"],["class","divi",4,"ngIf"],["type","button","class","btn btn-dark btn-sm",3,"click",4,"ngIf"],["for","sign up",4,"ngIf"],["type","button","class","btn btn-dark",3,"click",4,"ngIf"],[1,"col-xs-4","col-md-6",2,"height","60vh","margin-top","20vh","align-content","center"],["for","username"],["type","text","ngModel","","name","name","placeholder","NAME","required","",1,"form-control"],["for","password"],["type","password","ngModel","","name","password","placeholder","PASSWORD","required","","password","","minlength","8",1,"form-control"],["type","submit",1,"btn","btn-dark",3,"disabled","click"],[1,"divi"],["type","button",1,"btn","btn-dark","btn-sm",3,"click"],["for","sign up"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(t,r){if(1&t){const s=d.EpF();d.YNc(0,AV,0,0,"ng-template",0),d.TgZ(1,"div",1)(2,"div",2)(3,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(s);const l=d.MAs(4);return d.KtG(r.onSubmit(l))}),d.YNc(5,MV,4,0,"div",5),d.TgZ(6,"div",6)(7,"label",7),d._uU(8,"EMAIL"),d.qZA(),d._UZ(9,"input",8),d.qZA(),d.YNc(10,xV,4,0,"div",5),d.TgZ(11,"div"),d.YNc(12,RV,2,2,"button",9),d.YNc(13,NV,2,0,"span",10),d._uU(14,"\xa0 "),d.YNc(15,PV,2,1,"button",9),d.YNc(16,OV,2,0,"button",11),d.YNc(17,kV,2,0,"label",12),d.YNc(18,FV,2,1,"button",13),d.qZA()()(),d.TgZ(19,"div",14),d._UZ(20,"app-logo"),d.qZA()()}2&t&&(d.xp6(5),d.Q6J("ngIf",!r.isLoginMode),d.xp6(5),d.Q6J("ngIf",!r.reset),d.xp6(2),d.Q6J("ngIf",!r.reset),d.xp6(1),d.Q6J("ngIf",!r.reset),d.xp6(2),d.Q6J("ngIf",r.reset),d.xp6(1),d.Q6J("ngIf",!r.reset),d.xp6(1),d.Q6J("ngIf",!r.reset),d.xp6(1),d.Q6J("ngIf",!r.reset))},dependencies:[us,mm,ms,Pl,En,Cp,Tm,bm,Ep,au,SV,yO],styles:["*[_ngcontent-%COMP%]{color:#fff}form[_ngcontent-%COMP%]{width:90%}button[_ngcontent-%COMP%]{border:1px white solid;margin:1vh}button[_ngcontent-%COMP%]:disabled{border:1px white solid}.divi[_ngcontent-%COMP%]{font-size:4vh}label[_ngcontent-%COMP%]{font-size:1.5vh}input[_ngcontent-%COMP%]{color:#000}"]}),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.user.pipe(cu(1),(0,Vt.U)(s=>!!s||this.router.createUrlTree(["/auth"])))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vf),d.LFG(Ii))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UV(n,e){1&n&&(d.TgZ(0,"div",2),d._UZ(1,"app-loader"),d.qZA())}function VV(n,e){if(1&n&&d._UZ(0,"img",12),2&n){const t=d.oxw(2);d.Q6J("src",t.profilePic,d.LSH)}}function BV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"input",13),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.change())}),d.qZA(),d._UZ(2,"br"),d.TgZ(3,"button",14),d.NdJ("click",function(){d.CHM(t);const s=d.MAs(6);return d.KtG(s)})("change",function(){d.CHM(t);const s=d.MAs(6);return d.KtG(s)}),d._UZ(4,"i",15),d.qZA(),d.TgZ(5,"input",16,17),d.NdJ("change",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.onFileSelected(s))}),d.qZA()()}if(2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.profilePic,d.LSH)}}function jV(n,e){if(1&n&&(d.TgZ(0,"div",18)(1,"p"),d._uU(2),d.qZA(),d.TgZ(3,"p"),d._uU(4),d.qZA(),d.TgZ(5,"p"),d._uU(6),d.qZA(),d.TgZ(7,"p"),d._uU(8),d.qZA()()),2&n){const t=d.oxw(2);d.xp6(2),d.hij("Name: ",t.name,""),d.xp6(2),d.hij("Username: ",t.username,""),d.xp6(2),d.hij("Email: ",t.email,""),d.xp6(2),d.hij("Bio: ",t.bio,"")}}function HV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.editModeFunc())}),d._uU(1,"EDIT"),d.qZA()}}function $V(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4)(1,"form",20,21),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.MAs(2),u=d.oxw(2);return d.KtG(u.editServ(s))}),d.TgZ(3,"div",22)(4,"label",23),d._uU(5,"NAME"),d.qZA(),d.TgZ(6,"input",24),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.name=s)}),d.qZA()(),d.TgZ(7,"div",22)(8,"label",25),d._uU(9,"USERNAME"),d.TgZ(10,"span"),d._uU(11,"(usernames are not unique)"),d.qZA()(),d.TgZ(12,"input",26),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.username=s)}),d.qZA()(),d.TgZ(13,"div",22)(14,"label",27),d._uU(15,"EMAIL"),d.qZA(),d.TgZ(16,"input",28),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.email=s)}),d.qZA()(),d.TgZ(17,"div",22)(18,"label",29),d._uU(19,"BIO "),d.TgZ(20,"span"),d._uU(21,"(max 75 chars)"),d.qZA()(),d.TgZ(22,"textarea",30),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.bio=s)}),d.qZA()(),d.TgZ(23,"button",31),d._uU(24,"SAVE"),d.qZA()()()}if(2&n){const t=d.MAs(2),r=d.oxw(2);d.xp6(6),d.Q6J("ngModel",r.name),d.xp6(6),d.Q6J("ngModel",r.username),d.xp6(4),d.Q6J("ngModel",r.email)("disabled",!0),d.xp6(6),d.Q6J("ngModel",r.bio),d.xp6(1),d.Q6J("disabled",!t.valid)}}function zV(n,e){if(1&n&&(d.TgZ(0,"div",4)(1,"a")(2,"li",32)(3,"h3"),d._uU(4,"See your posts"),d.qZA()()()()),2&n){const t=d.oxw(2);d.xp6(2),d.MGl("routerLink","/user/",t.email,"")}}function GV(n,e){if(1&n&&(d.TgZ(0,"div",3)(1,"div",4)(2,"div",5),d.YNc(3,VV,1,1,"img",6),d.YNc(4,BV,7,1,"div",7),d.TgZ(5,"div",8),d.YNc(6,jV,9,4,"div",9),d.qZA()(),d.YNc(7,HV,2,0,"button",10),d.qZA(),d.YNc(8,$V,25,6,"div",11),d.YNc(9,zV,5,1,"div",11),d.qZA()),2&n){const t=d.oxw();d.xp6(3),d.Q6J("ngIf",!t.editMode),d.xp6(1),d.Q6J("ngIf",t.editMode),d.xp6(2),d.Q6J("ngIf",!t.editMode),d.xp6(1),d.Q6J("ngIf",!t.editMode),d.xp6(1),d.Q6J("ngIf",t.editMode),d.xp6(1),d.Q6J("ngIf",!t.editMode)}}let WV=(()=>{class n{constructor(t,r,s,u){this.auth=t,this.firestoreDB=r,this.storage=s,this.getUserPosts=u,this.name="",this.email="",this.profilePic="",this.username="",this.bio="",this.fetch=!1,this.selectedProfile=null,this.onLoad=!1,this.editMode=!1}ngOnInit(){this.onLoad=!0,this.auth.user.subscribe(t=>{t&&this.auth.getUser(t.email).subscribe(r=>{r.length>0&&(this.name=r[0].name,this.email=r[0].email,this.bio=r[0].bio,this.profilePic=r[0]&&r[0].hasOwnProperty("profilePic")?r[0].profilePic:"https://images.unsplash.com/source-404?fit=crop&fm=jpg&h=800&q=60&w=1200",this.username=r[0]&&r[0].hasOwnProperty("username")?r[0].username:"NA",this.onLoad=!1)})})}onFileSelected(t){this.selectedProfile=t.target.files[0],this.selectedProfile&&this.picUpload()}picUpload(){this.onLoad=!0;const t=`profile/${this.selectedProfile.name}`,r=this.storage.ref(t);this.storage.upload(t,this.selectedProfile).snapshotChanges().pipe(mh(()=>{r.getDownloadURL().subscribe(u=>{this.profilePic=u,this.onLoad=!1})})).subscribe()}change(){document.getElementById("upload").click()}editModeFunc(){this.editMode=!this.editMode}editServ(t){console.log(t.value);const r=t.value.bio,s=t.value.name,u="UserData",l=this.firestoreDB.collection(u,g=>g.where("email","==",this.email));this.unsub=l.snapshotChanges().subscribe(g=>{g.forEach(_=>{this.firestoreDB.doc(`${u}/${_.payload.doc.id}`).update({bio:r,name:s,profilePic:this.profilePic})})}),this.editModeFunc()}ngOnDestroy(){}fetchPosts(){this.getUserPosts.getUserPosts(this.email).subscribe(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vf),d.Y36(Jb),d.Y36(mO),d.Y36(Xb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-user-profile"]],decls:2,vars:2,consts:[["class","text-center load justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","load","justify-content-center"],[1,"row"],[1,"col-md-6"],[1,"text-center"],["alt","","style","border-radius: 50%; width:200px; height: 200px; object-fit:cover;",3,"src",4,"ngIf"],[4,"ngIf"],[1,"col-xs-12"],["class","bg-dark text-center border details",4,"ngIf"],["type","button","class","btn btn-light btn-sm",3,"click",4,"ngIf"],["class","col-md-6",4,"ngIf"],["alt","",2,"border-radius","50%","width","200px","height","200px","object-fit","cover",3,"src"],["type","image",2,"border-radius","50%","width","200px","height","200px","object-fit","cover",3,"src","click"],["disabled","","type","button",1,"btn",2,"background","transparent","border","none","font-size","2vw",3,"click","change"],[1,"fa","fa-upload"],["ngModel","","name","photo","type","file","id","upload","accept","image/*",2,"display","none",3,"change"],["upload",""],[1,"bg-dark","text-center","border","details"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[3,"ngSubmit"],["editUser","ngForm"],[1,"form-group"],["for","NAME"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","USERNAME"],["name","username","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","EMAIL"],["name","email","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","BIO"],["name","bio","type","text","ngModel","","maxlength","75",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"text-center",2,"list-style-type","none","cursor","pointer","border","1px solid white",3,"routerLink"]],template:function(t,r){1&t&&(d.YNc(0,UV,2,0,"div",0),d.YNc(1,GV,10,6,"div",1)),2&t&&(d.Q6J("ngIf",r.onLoad),d.xp6(1),d.Q6J("ngIf",!r.onLoad))},dependencies:[us,$p,mm,ms,Pl,En,uv,Ep,au,sT],styles:[".details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{border-bottom:1px solid black}.details[_ngcontent-%COMP%]{padding:10px}input[_ngcontent-%COMP%]{color:#000}input.ng-touched.ng-invalid[_ngcontent-%COMP%], textarea.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px red solid}.btn[_ngcontent-%COMP%]{margin:10px}span[_ngcontent-%COMP%]{font-size:.5em}"]}),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qV(n,e){1&n&&(d.TgZ(0,"div",2),d._UZ(1,"app-loader"),d.qZA())}function ZV(n,e){if(1&n&&(d.TgZ(0,"div")(1,"p",7),d._uU(2),d.ALo(3,"uppercase"),d.qZA()()),2&n){const t=d.oxw(2);d.xp6(2),d.hij("",d.lcZ(3,1,t.name)," HAS NO POSTS.")}}function KV(n,e){if(1&n&&(d.TgZ(0,"div",8)(1,"div",9)(2,"div",10),d._UZ(3,"img",11),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"uppercase"),d.qZA()(),d._UZ(7,"img",12),d.TgZ(8,"div",13)(9,"p",14),d._uU(10),d._UZ(11,"br"),d.TgZ(12,"li",15),d._uU(13),d.ALo(14,"date"),d.qZA()()()()()),2&n){const t=e.$implicit;d.xp6(5),d.hij(" ",d.lcZ(6,5,t.name)," "),d.xp6(2),d.Q6J("src",t.path,d.LSH),d.xp6(3),d.hij(" ",t.caption," "),d.xp6(3),d.AsE("",d.xi3(14,7,t.date,"medium")," | ",t.email,"")}}function YV(n,e){if(1&n&&(d.TgZ(0,"div")(1,"div",3),d._UZ(2,"img",4),d.TgZ(3,"p"),d._uU(4),d.ALo(5,"uppercase"),d.qZA(),d.TgZ(6,"p"),d._uU(7),d.qZA(),d.TgZ(8,"p"),d._uU(9),d.qZA(),d.TgZ(10,"p"),d._uU(11),d.qZA()(),d.YNc(12,ZV,4,3,"div",1),d.TgZ(13,"div",5),d.YNc(14,KV,15,10,"div",6),d.qZA()()),2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.profile,d.LSH),d.xp6(2),d.hij("Name: ",d.lcZ(5,7,t.name),""),d.xp6(3),d.hij("Username: ",t.username,""),d.xp6(2),d.hij("Email: ",t.email,""),d.xp6(2),d.hij("Bio: ",t.bio,""),d.xp6(1),d.Q6J("ngIf",!t.noPosts),d.xp6(2),d.Q6J("ngForOf",t.userPosts)}}const QV=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:x2},{path:"upload",component:bV,canActivate:[fR]},{path:"profile",component:WV,canActivate:[fR]},{path:"auth",component:LV},{path:"user/:email",component:(()=>{class n{constructor(t,r,s,u){this.router=t,this.route=r,this.auth=s,this.posts=u,this.isLoading=!1,this.noPosts=!1}ngOnInit(){this.isLoading=!0,this.route.params.subscribe(t=>{this.subs=this.auth.getUser(t.email).subscribe(r=>{this.name=r[0].name,this.email=r[0].email,this.bio=r[0].bio,this.profile=r[0].profilePic,this.username=r[0]&&r[0].hasOwnProperty("username")?r[0].username:"NA"}),this.posts.getUserPosts(t.email).subscribe(r=>{this.userPosts=r,r.length>0&&(this.noPosts=!0),this.isLoading=!1})})}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ii),d.Y36(_c),d.Y36(Vf),d.Y36(Xb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-other-profiles"]],decls:2,vars:2,consts:[["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],[1,"bg-dark","text-center","border","details"],["alt","","width","300px","height","300px",2,"border-radius","50%","object-fit","cover",3,"src"],[1,"col-md-6"],["class","container",4,"ngFor","ngForOf"],[1,"text-center","noPosts"],[1,"container"],[1,"cards"],[1,"userDets"],["src","../../assets/Screenshot 2023-06-17 183301.jpg","alt","PFP"],["width","90%","height","60%","alt","User Post",1,"card-img-top",2,"object-fit","contain",3,"src"],[1,"card-body"],[1,"card-text"],[1,"timeStamp"]],template:function(t,r){1&t&&(d.YNc(0,qV,2,0,"div",0),d.YNc(1,YV,15,9,"div",1)),2&t&&(d.Q6J("ngIf",r.isLoading),d.xp6(1),d.Q6J("ngIf",!r.isLoading))},dependencies:[Ra,us,sT,Fa,An],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;background-color:#fff;padding:5px;color:#000;width:80%}.cards[_ngcontent-%COMP%]{margin:2px;background-color:#fff;width:100%;height:80%}.card-body[_ngcontent-%COMP%]{border:1px solid black;padding:20px;border-radius:0 0 10px 10px}.cards[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2), .cards[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border:1px solid #000000}.cards[_ngcontent-%COMP%]   .userDets[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px solid black;display:flex;width:40px;height:40px}*[_ngcontent-%COMP%]{color:#000}.userDets[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;display:flex;padding:.5vh;border:1px solid black;border-bottom:none;font-weight:900}.userDets[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto 0;padding-left:.2vw}.timeStamp[_ngcontent-%COMP%]{font-size:xx-small;display:inline;margin:auto 0;list-style:none;font-weight:900}.load[_ngcontent-%COMP%]{justify-content:center;height:70vh}.details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin:2vh}.details[_ngcontent-%COMP%]{height:65vh;border-radius:10px;margin-bottom:3vh}.noPosts[_ngcontent-%COMP%]{border:1px solid white;border-radius:5px;color:#fff;font-size:2vw;font-weight:900}"]}),n})(),canActivate:[fR]}];let JV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Rh.forRoot(QV),Rh]}),n})();function XV(n,e){1&n&&(d.TgZ(0,"a",16),d._uU(1,"Login/Sign Up"),d.qZA())}function eB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",17),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.logout())}),d._uU(1,"Logout"),d.qZA()}}function tB(n,e){if(1&n&&(d.TgZ(0,"a",19),d._UZ(1,"img",20),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.profilePic,d.LSH)}}function nB(n,e){if(1&n&&(d.TgZ(0,"li",9),d.YNc(1,tB,2,1,"a",18),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.isAuth)}}let rB=(()=>{class n{constructor(t){this.auth=t,this.isAuth=!1,this.profilePic=""}ngOnInit(){this.userSub=this.auth.user.subscribe(t=>{this.isAuth=!!t,this.isAuth&&this.auth.getUser(t.email).subscribe(r=>{this.profilePic=r[0]&&r[0].hasOwnProperty("profilePic")?r[0].profilePic:"https://images.unsplash.com/source-404?fit=crop&fm=jpg&h=800&q=60&w=1200"})})}ngOnDestroy(){this.userSub.unsubscribe()}logout(){this.auth.logout()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vf))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-component"]],decls:20,vars:3,consts:[[1,"header"],[1,"navbar","fixed-top","navbar-expand-lg"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","../../assets/Screenshot_2023-06-17_183301-removebg-preview.png","alt","",2,"width","70px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","btn-nav-accordion"],[1,"navbar-toggler-icon","navbar-dark"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","coll"],[1,"nav-item"],["routerLink","home","routerLinkActive","active","aria-current","page",1,"nav-link","navbarlia"],["routerLinkActive","active",1,"nav-item"],["navbarlia","","routerLink","/upload",1,"nav-link","navbarlia"],["routerLink","/auth","class","nav-link navbarlia",4,"ngIf"],["style","cursor: pointer;","class","nav-link navbarlia",3,"click",4,"ngIf"],["class","nav-item",4,"ngIf"],["routerLink","/auth",1,"nav-link","navbarlia"],[1,"nav-link","navbarlia",2,"cursor","pointer",3,"click"],["class","nav-link","routerLink","/profile",4,"ngIf"],["routerLink","/profile",1,"nav-link"],["alt","",2,"width","50px","height","50px","border-radius","50%","border","1px solid black",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),d._UZ(4,"img",4),d.qZA(),d.TgZ(5,"button",5),d._UZ(6,"span",6),d.qZA()(),d.TgZ(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),d._uU(11,"Home"),d.qZA()(),d.TgZ(12,"li",11)(13,"a",12),d._uU(14,"Upload"),d.qZA()(),d.TgZ(15,"li",11),d.YNc(16,XV,2,0,"a",13),d.qZA(),d.TgZ(17,"li",9),d.YNc(18,eB,2,0,"a",14),d.qZA(),d.YNc(19,nB,2,1,"li",15),d.qZA()()()()),2&t&&(d.xp6(16),d.Q6J("ngIf",!r.isAuth),d.xp6(2),d.Q6J("ngIf",r.isAuth),d.xp6(1),d.Q6J("ngIf",r.isAuth))},dependencies:[us,$p,Xv],styles:[".navbar[_ngcontent-%COMP%]{background-color:#303030}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-weight:900}.navbarlia[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:ease-in .15s}.navbarlia[_ngcontent-%COMP%]:active{transform:scale(.9);transition:ease-in .15s}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:auto}.collapse[_ngcontent-%COMP%]{width:40%;flex-flow:row-reverse}.active[_ngcontent-%COMP%]{background-color:#252525}"]}),n})(),iB=(()=>{class n{constructor(t,r){this.auth=t,this.posts=r,this.title="MindShare"}ngOnInit(){this.auth.autoLogin(),this.posts.getPosts().subscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vf),d.Y36(Xb))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12"]],template:function(t,r){1&t&&(d._UZ(0,"app-header-component"),d.TgZ(1,"div",0)(2,"div",1)(3,"div",2),d._UZ(4,"router-outlet"),d.qZA()()())},dependencies:[Lp,rB],styles:[".container[_ngcontent-%COMP%]{padding-top:15vh}"]}),n})();var sB=L(6878);class pR{constructor(e){return e}}class vO{constructor(){return(0,cn.vb)("auth")}}const gR=new d.OlP("angularfire2.auth-instances");function aB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pR(r)}}const uB={provide:vO,deps:[[new d.FiY,gR]]},cB={provide:pR,useFactory:function oB(n,e){const t=(0,cn.JM)("auth",n,e);return t&&new pR(t)},deps:[[new d.FiY,gR],G_]};let lB=(()=>{class n{constructor(){(0,Lf.KN)("angularfire",cn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[cB,uB]}),n})();function dB(n,...e){return{ngModule:lB,providers:[{provide:gR,useFactory:aB(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,bx,[new d.FiY,q_],...e]}]}}const hB=(0,cn.u3)(sB.o,!0);class mR{constructor(e){return e}}const wO="firestore",yR=new d.OlP("angularfire2.firestore-instances");function gB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mR(r)}}const mB={provide:class fB{constructor(){return(0,cn.vb)(wO)}},deps:[[new d.FiY,yR]]},yB={provide:mR,useFactory:function pB(n,e){const t=(0,cn.JM)(wO,n,e);return t&&new mR(t)},deps:[[new d.FiY,yR],G_]};let _B=(()=>{class n{constructor(){(0,Lf.KN)("angularfire",cn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[yB,mB]}),n})();function vB(n,...e){return{ngModule:_B,providers:[{provide:yR,useFactory:gB(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,bx,[new d.FiY,vO],[new d.FiY,q_],...e]}]}}const wB=(0,cn.u3)(Ok,!0);let EB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[iB]}),n.\u0275inj=d.cJS({imports:[E2,Il,Hr.hO,JV,LE,JF(()=>XF(eT_firebase)),dB(()=>hB()),vB(()=>wB()),Hr.hO.initializeApp(eT_firebase)]}),n})();Zu().bootstrapModule(EB).catch(n=>console.error(n))},5619:(pt,De,L)=>{L.d(De,{X:()=>B});var d=L(8645);class B extends d.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const ie=super._subscribe(J);return!ie.closed&&J.next(this._value),ie}getValue(){const{hasError:J,thrownError:ie,_value:pe}=this;if(J)throw ie;return this._throwIfClosed(),pe}next(J){super.next(this._value=J)}}},5592:(pt,De,L)=>{L.d(De,{y:()=>Ae});var d=L(1887),B=L(7394),P=L(4850),J=L(8407),ie=L(2653),pe=L(4674),_e=L(1441);let Ae=(()=>{class ne{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const qe=new ne;return qe.source=this,qe.operator=Me,qe}subscribe(Me,qe,xe){const Ze=function G(ne){return ne&&ne instanceof d.Lv||function $(ne){return ne&&(0,pe.m)(ne.next)&&(0,pe.m)(ne.error)&&(0,pe.m)(ne.complete)}(ne)&&(0,B.Nn)(ne)}(Me)?Me:new d.Hp(Me,qe,xe);return(0,_e.x)(()=>{const{operator:Pe,source:vt}=this;Ze.add(Pe?Pe.call(Ze,vt):vt?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Me){try{return this._subscribe(Me)}catch(qe){Me.error(qe)}}forEach(Me,qe){return new(qe=ge(qe))((xe,Ze)=>{const Pe=new d.Hp({next:vt=>{try{Me(vt)}catch(lt){Ze(lt),Pe.unsubscribe()}},error:Ze,complete:xe});this.subscribe(Pe)})}_subscribe(Me){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Me)}[P.L](){return this}pipe(...Me){return(0,J.U)(Me)(this)}toPromise(Me){return new(Me=ge(Me))((qe,xe)=>{let Ze;this.subscribe(Pe=>Ze=Pe,Pe=>xe(Pe),()=>qe(Ze))})}}return ne.create=ke=>new ne(ke),ne})();function ge(ne){var ke;return null!==(ke=ne??ie.config.Promise)&&void 0!==ke?ke:Promise}},8645:(pt,De,L)=>{L.d(De,{x:()=>_e});var d=L(5592),B=L(7394);const J=(0,L(2306).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(9039),pe=L(1441);let _e=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ne=new Ae(this,this);return ne.operator=G,ne}_throwIfClosed(){if(this.closed)throw new J}next(G){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(G)}})}error(G){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ne}=this;for(;ne.length;)ne.shift().error(G)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ne,isStopped:ke,observers:Me}=this;return ne||ke?B.Lc:(this.currentObservers=null,Me.push(G),new B.w0(()=>{this.currentObservers=null,(0,ie.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:ne,thrownError:ke,isStopped:Me}=this;ne?G.error(ke):Me&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return ge.create=($,G)=>new Ae($,G),ge})();class Ae extends _e{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ne||ne.call(G,$)}error($){var G,ne;null===(ne=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ne||ne.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,ne;return null!==(ne=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==ne?ne:B.Lc}}},1887:(pt,De,L)=>{L.d(De,{Hp:()=>xe,Lv:()=>ne});var d=L(4674),B=L(7394),P=L(2653),J=L(3894);function ie(){}const pe=ge("C",void 0,void 0);function ge(te,Ce,se){return{kind:te,value:Ce,error:se}}var $=L(7599),G=L(1441);class ne extends B.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,B.Nn)(Ce)&&Ce.add(this)):this.destination=lt}static create(Ce,se,fe){return new xe(Ce,se,fe)}next(Ce){this.isStopped?vt(function Ae(te){return ge("N",te,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?vt(function _e(te){return ge("E",void 0,te)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?vt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Me(te,Ce){return ke.call(te,Ce)}class qe{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:se}=this;if(se.next)try{se.next(Ce)}catch(fe){Ze(fe)}}error(Ce){const{partialObserver:se}=this;if(se.error)try{se.error(Ce)}catch(fe){Ze(fe)}else Ze(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(se){Ze(se)}}}class xe extends ne{constructor(Ce,se,fe){let Ne;if(super(),(0,d.m)(Ce)||!Ce)Ne={next:Ce??void 0,error:se??void 0,complete:fe??void 0};else{let ee;this&&P.config.useDeprecatedNextContext?(ee=Object.create(Ce),ee.unsubscribe=()=>this.unsubscribe(),Ne={next:Ce.next&&Me(Ce.next,ee),error:Ce.error&&Me(Ce.error,ee),complete:Ce.complete&&Me(Ce.complete,ee)}):Ne=Ce}this.destination=new qe(Ne)}}function Ze(te){P.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(te):(0,J.h)(te)}function vt(te,Ce){const{onStoppedNotification:se}=P.config;se&&$.z.setTimeout(()=>se(te,Ce))}const lt={closed:!0,next:ie,error:function Pe(te){throw te},complete:ie}},7394:(pt,De,L)=>{L.d(De,{Lc:()=>pe,w0:()=>ie,Nn:()=>_e});var d=L(4674);const P=(0,L(2306).d)(ge=>function(G){ge(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ne,ke)=>`${ke+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var J=L(9039);class ie{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:ne}=this;if((0,d.m)(ne))try{ne()}catch(Me){$=Me instanceof P?Me.errors:[Me]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Me of ke)try{Ae(Me)}catch(qe){$=$??[],qe instanceof P?$=[...$,...qe.errors]:$.push(qe)}}if($)throw new P($)}}add($){var G;if($&&$!==this)if(this.closed)Ae($);else{if($ instanceof ie){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,J.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,J.P)(G,$),$ instanceof ie&&$._removeParent(this)}}ie.EMPTY=(()=>{const ge=new ie;return ge.closed=!0,ge})();const pe=ie.EMPTY;function _e(ge){return ge instanceof ie||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function Ae(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2653:(pt,De,L)=>{L.d(De,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(pt,De,L)=>{L.d(De,{E:()=>B});const B=new(L(5592).y)(ie=>ie.complete())},2459:(pt,De,L)=>{L.d(De,{D:()=>Ce});var d=L(4829),B=L(3093),P=L(5137),pe=L(5592),Ae=L(4971),ge=L(4674),$=L(7103);function ne(se,fe){if(!se)throw new Error("Iterable cannot be null");return new pe.y(Ne=>{(0,$.f)(Ne,fe,()=>{const ee=se[Symbol.asyncIterator]();(0,$.f)(Ne,fe,()=>{ee.next().then(et=>{et.done?Ne.complete():Ne.next(et.value)})},0,!0)})})}var ke=L(8382),Me=L(4026),qe=L(4266),xe=L(3664),Ze=L(5726),Pe=L(9853),vt=L(541);function Ce(se,fe){return fe?function te(se,fe){if(null!=se){if((0,ke.c)(se))return function J(se,fe){return(0,d.Xf)(se).pipe((0,P.R)(fe),(0,B.Q)(fe))}(se,fe);if((0,qe.z)(se))return function _e(se,fe){return new pe.y(Ne=>{let ee=0;return fe.schedule(function(){ee===se.length?Ne.complete():(Ne.next(se[ee++]),Ne.closed||this.schedule())})})}(se,fe);if((0,Me.t)(se))return function ie(se,fe){return(0,d.Xf)(se).pipe((0,P.R)(fe),(0,B.Q)(fe))}(se,fe);if((0,Ze.D)(se))return ne(se,fe);if((0,xe.T)(se))return function G(se,fe){return new pe.y(Ne=>{let ee;return(0,$.f)(Ne,fe,()=>{ee=se[Ae.h](),(0,$.f)(Ne,fe,()=>{let et,He;try{({value:et,done:He}=ee.next())}catch(Jt){return void Ne.error(Jt)}He?Ne.complete():Ne.next(et)},0,!0)}),()=>(0,ge.m)(ee?.return)&&ee.return()})}(se,fe);if((0,vt.L)(se))return function lt(se,fe){return ne((0,vt.Q)(se),fe)}(se,fe)}throw(0,Pe.z)(se)}(se,fe):(0,d.Xf)(se)}},4829:(pt,De,L)=>{L.d(De,{Xf:()=>ke});var d=L(7582),B=L(4266),P=L(4026),J=L(5592),ie=L(8382),pe=L(5726),_e=L(9853),Ae=L(3664),ge=L(541),$=L(4674),G=L(3894),ne=L(4850);function ke(te){if(te instanceof J.y)return te;if(null!=te){if((0,ie.c)(te))return function Me(te){return new J.y(Ce=>{const se=te[ne.L]();if((0,$.m)(se.subscribe))return se.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(te);if((0,B.z)(te))return function qe(te){return new J.y(Ce=>{for(let se=0;se<te.length&&!Ce.closed;se++)Ce.next(te[se]);Ce.complete()})}(te);if((0,P.t)(te))return function xe(te){return new J.y(Ce=>{te.then(se=>{Ce.closed||(Ce.next(se),Ce.complete())},se=>Ce.error(se)).then(null,G.h)})}(te);if((0,pe.D)(te))return Pe(te);if((0,Ae.T)(te))return function Ze(te){return new J.y(Ce=>{for(const se of te)if(Ce.next(se),Ce.closed)return;Ce.complete()})}(te);if((0,ge.L)(te))return function vt(te){return Pe((0,ge.Q)(te))}(te)}throw(0,_e.z)(te)}function Pe(te){return new J.y(Ce=>{(function lt(te,Ce){var se,fe,Ne,ee;return(0,d.mG)(this,void 0,void 0,function*(){try{for(se=(0,d.KL)(te);!(fe=yield se.next()).done;)if(Ce.next(fe.value),Ce.closed)return}catch(et){Ne={error:et}}finally{try{fe&&!fe.done&&(ee=se.return)&&(yield ee.call(se))}finally{if(Ne)throw Ne.error}}Ce.complete()})})(te,Ce).catch(se=>Ce.error(se))})}},3019:(pt,De,L)=>{L.d(De,{T:()=>pe});var d=L(7537),B=L(4829),P=L(6232),J=L(4564),ie=L(2459);function pe(..._e){const Ae=(0,J.yG)(_e),ge=(0,J._6)(_e,1/0),$=_e;return $.length?1===$.length?(0,B.Xf)($[0]):(0,d.J)(ge)((0,ie.D)($,Ae)):P.E}},2096:(pt,De,L)=>{L.d(De,{of:()=>P});var d=L(4564),B=L(2459);function P(...J){const ie=(0,d.yG)(J);return(0,B.D)(J,ie)}},8251:(pt,De,L)=>{L.d(De,{x:()=>B});var d=L(1887);function B(J,ie,pe,_e,Ae){return new P(J,ie,pe,_e,Ae)}class P extends d.Lv{constructor(ie,pe,_e,Ae,ge,$){super(ie),this.onFinalize=ge,this.shouldUnsubscribe=$,this._next=pe?function(G){try{pe(G)}catch(ne){ie.error(ne)}}:super._next,this._error=Ae?function(G){try{Ae(G)}catch(ne){ie.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(G){ie.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},3997:(pt,De,L)=>{L.d(De,{x:()=>J});var d=L(2737),B=L(9360),P=L(8251);function J(pe,_e=d.y){return pe=pe??ie,(0,B.e)((Ae,ge)=>{let $,G=!0;Ae.subscribe((0,P.x)(ge,ne=>{const ke=_e(ne);(G||!pe($,ke))&&(G=!1,$=ke,ge.next(ne))}))})}function ie(pe,_e){return pe===_e}},7398:(pt,De,L)=>{L.d(De,{U:()=>P});var d=L(9360),B=L(8251);function P(J,ie){return(0,d.e)((pe,_e)=>{let Ae=0;pe.subscribe((0,B.x)(_e,ge=>{_e.next(J.call(ie,ge,Ae++))}))})}},7537:(pt,De,L)=>{L.d(De,{J:()=>P});var d=L(1631),B=L(2737);function P(J=1/0){return(0,d.z)(B.y,J)}},1631:(pt,De,L)=>{L.d(De,{z:()=>Ae});var d=L(7398),B=L(4829),P=L(9360),J=L(7103),ie=L(8251),_e=L(4674);function Ae(ge,$,G=1/0){return(0,_e.m)($)?Ae((ne,ke)=>(0,d.U)((Me,qe)=>$(ne,Me,ke,qe))((0,B.Xf)(ge(ne,ke))),G):("number"==typeof $&&(G=$),(0,P.e)((ne,ke)=>function pe(ge,$,G,ne,ke,Me,qe,xe){const Ze=[];let Pe=0,vt=0,lt=!1;const te=()=>{lt&&!Ze.length&&!Pe&&$.complete()},Ce=fe=>Pe<ne?se(fe):Ze.push(fe),se=fe=>{Me&&$.next(fe),Pe++;let Ne=!1;(0,B.Xf)(G(fe,vt++)).subscribe((0,ie.x)($,ee=>{ke?.(ee),Me?Ce(ee):$.next(ee)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Pe--;Ze.length&&Pe<ne;){const ee=Ze.shift();qe?(0,J.f)($,qe,()=>se(ee)):se(ee)}te()}catch(ee){$.error(ee)}}))};return ge.subscribe((0,ie.x)($,Ce,()=>{lt=!0,te()})),()=>{xe?.()}}(ne,ke,ge,G)))}},3093:(pt,De,L)=>{L.d(De,{Q:()=>J});var d=L(7103),B=L(9360),P=L(8251);function J(ie,pe=0){return(0,B.e)((_e,Ae)=>{_e.subscribe((0,P.x)(Ae,ge=>(0,d.f)(Ae,ie,()=>Ae.next(ge),pe),()=>(0,d.f)(Ae,ie,()=>Ae.complete(),pe),ge=>(0,d.f)(Ae,ie,()=>Ae.error(ge),pe)))})}},3020:(pt,De,L)=>{L.d(De,{B:()=>ie});var d=L(4829),B=L(8645),P=L(1887),J=L(9360);function ie(_e={}){const{connector:Ae=(()=>new B.x),resetOnError:ge=!0,resetOnComplete:$=!0,resetOnRefCountZero:G=!0}=_e;return ne=>{let ke,Me,qe,xe=0,Ze=!1,Pe=!1;const vt=()=>{Me?.unsubscribe(),Me=void 0},lt=()=>{vt(),ke=qe=void 0,Ze=Pe=!1},te=()=>{const Ce=ke;lt(),Ce?.unsubscribe()};return(0,J.e)((Ce,se)=>{xe++,!Pe&&!Ze&&vt();const fe=qe=qe??Ae();se.add(()=>{xe--,0===xe&&!Pe&&!Ze&&(Me=pe(te,G))}),fe.subscribe(se),!ke&&xe>0&&(ke=new P.Hp({next:Ne=>fe.next(Ne),error:Ne=>{Pe=!0,vt(),Me=pe(lt,ge,Ne),fe.error(Ne)},complete:()=>{Ze=!0,vt(),Me=pe(lt,$),fe.complete()}}),(0,d.Xf)(Ce).subscribe(ke))})(ne)}}function pe(_e,Ae,...ge){if(!0===Ae)return void _e();if(!1===Ae)return;const $=new P.Hp({next:()=>{$.unsubscribe(),_e()}});return(0,d.Xf)(Ae(...ge)).subscribe($)}},5137:(pt,De,L)=>{L.d(De,{R:()=>B});var d=L(9360);function B(P,J=0){return(0,d.e)((ie,pe)=>{pe.add(P.schedule(()=>ie.subscribe(pe),J))})}},4664:(pt,De,L)=>{L.d(De,{w:()=>J});var d=L(4829),B=L(9360),P=L(8251);function J(ie,pe){return(0,B.e)((_e,Ae)=>{let ge=null,$=0,G=!1;const ne=()=>G&&!ge&&Ae.complete();_e.subscribe((0,P.x)(Ae,ke=>{ge?.unsubscribe();let Me=0;const qe=$++;(0,d.Xf)(ie(ke,qe)).subscribe(ge=(0,P.x)(Ae,xe=>Ae.next(pe?pe(ke,xe,qe,Me++):xe),()=>{ge=null,ne()}))},()=>{G=!0,ne()}))})}},9397:(pt,De,L)=>{L.d(De,{b:()=>ie});var d=L(4674),B=L(9360),P=L(8251),J=L(2737);function ie(pe,_e,Ae){const ge=(0,d.m)(pe)||_e||Ae?{next:pe,error:_e,complete:Ae}:pe;return ge?(0,B.e)(($,G)=>{var ne;null===(ne=ge.subscribe)||void 0===ne||ne.call(ge);let ke=!0;$.subscribe((0,P.x)(G,Me=>{var qe;null===(qe=ge.next)||void 0===qe||qe.call(ge,Me),G.next(Me)},()=>{var Me;ke=!1,null===(Me=ge.complete)||void 0===Me||Me.call(ge),G.complete()},Me=>{var qe;ke=!1,null===(qe=ge.error)||void 0===qe||qe.call(ge,Me),G.error(Me)},()=>{var Me,qe;ke&&(null===(Me=ge.unsubscribe)||void 0===Me||Me.call(ge)),null===(qe=ge.finalize)||void 0===qe||qe.call(ge)}))}):J.y}},1954:(pt,De,L)=>{L.d(De,{o:()=>ie});var d=L(7394);class B extends d.w0{constructor(_e,Ae){super()}schedule(_e,Ae=0){return this}}const P={setInterval(pe,_e,...Ae){const{delegate:ge}=P;return ge?.setInterval?ge.setInterval(pe,_e,...Ae):setInterval(pe,_e,...Ae)},clearInterval(pe){const{delegate:_e}=P;return(_e?.clearInterval||clearInterval)(pe)},delegate:void 0};var J=L(9039);class ie extends B{constructor(_e,Ae){super(_e,Ae),this.scheduler=_e,this.work=Ae,this.pending=!1}schedule(_e,Ae=0){var ge;if(this.closed)return this;this.state=_e;const $=this.id,G=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(G,$,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(G,this.id,Ae),this}requestAsyncId(_e,Ae,ge=0){return P.setInterval(_e.flush.bind(_e,this),ge)}recycleAsyncId(_e,Ae,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return Ae;null!=Ae&&P.clearInterval(Ae)}execute(_e,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(_e,Ae);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,Ae){let $,ge=!1;try{this.work(_e)}catch(G){ge=!0,$=G||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:_e,scheduler:Ae}=this,{actions:ge}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(ge,this),null!=_e&&(this.id=this.recycleAsyncId(Ae,_e,null)),this.delay=null,super.unsubscribe()}}}},2631:(pt,De,L)=>{L.d(De,{v:()=>P});var d=L(4552);class B{constructor(ie,pe=B.now){this.schedulerActionCtor=ie,this.now=pe}schedule(ie,pe=0,_e){return new this.schedulerActionCtor(this,ie).schedule(_e,pe)}}B.now=d.l.now;class P extends B{constructor(ie,pe=B.now){super(ie,pe),this.actions=[],this._active=!1}flush(ie){const{actions:pe}=this;if(this._active)return void pe.push(ie);let _e;this._active=!0;do{if(_e=ie.execute(ie.state,ie.delay))break}while(ie=pe.shift());if(this._active=!1,_e){for(;ie=pe.shift();)ie.unsubscribe();throw _e}}}},6321:(pt,De,L)=>{L.d(De,{z:()=>P});var d=L(1954);const P=new(L(2631).v)(d.o)},4552:(pt,De,L)=>{L.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},7599:(pt,De,L)=>{L.d(De,{z:()=>d});const d={setTimeout(B,P,...J){const{delegate:ie}=d;return ie?.setTimeout?ie.setTimeout(B,P,...J):setTimeout(B,P,...J)},clearTimeout(B){const{delegate:P}=d;return(P?.clearTimeout||clearTimeout)(B)},delegate:void 0}},4971:(pt,De,L)=>{L.d(De,{h:()=>B});const B=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(pt,De,L)=>{L.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(pt,De,L)=>{L.d(De,{_6:()=>pe,jO:()=>J,yG:()=>ie});var d=L(4674);function P(_e){return _e[_e.length-1]}function J(_e){return(0,d.m)(P(_e))?_e.pop():void 0}function ie(_e){return function B(_e){return _e&&(0,d.m)(_e.schedule)}(P(_e))?_e.pop():void 0}function pe(_e,Ae){return"number"==typeof P(_e)?_e.pop():Ae}},9039:(pt,De,L)=>{function d(B,P){if(B){const J=B.indexOf(P);0<=J&&B.splice(J,1)}}L.d(De,{P:()=>d})},2306:(pt,De,L)=>{function d(B){const J=B(ie=>{Error.call(ie),ie.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}L.d(De,{d:()=>d})},1441:(pt,De,L)=>{L.d(De,{O:()=>J,x:()=>P});var d=L(2653);let B=null;function P(ie){if(d.config.useDeprecatedSynchronousErrorHandling){const pe=!B;if(pe&&(B={errorThrown:!1,error:null}),ie(),pe){const{errorThrown:_e,error:Ae}=B;if(B=null,_e)throw Ae}}else ie()}function J(ie){d.config.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ie)}},7103:(pt,De,L)=>{function d(B,P,J,ie=0,pe=!1){const _e=P.schedule(function(){J(),pe?B.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(B.add(_e),!pe)return _e}L.d(De,{f:()=>d})},2737:(pt,De,L)=>{function d(B){return B}L.d(De,{y:()=>d})},4266:(pt,De,L)=>{L.d(De,{z:()=>d});const d=B=>B&&"number"==typeof B.length&&"function"!=typeof B},5726:(pt,De,L)=>{L.d(De,{D:()=>B});var d=L(4674);function B(P){return Symbol.asyncIterator&&(0,d.m)(P?.[Symbol.asyncIterator])}},4674:(pt,De,L)=>{function d(B){return"function"==typeof B}L.d(De,{m:()=>d})},8382:(pt,De,L)=>{L.d(De,{c:()=>P});var d=L(4850),B=L(4674);function P(J){return(0,B.m)(J[d.L])}},3664:(pt,De,L)=>{L.d(De,{T:()=>P});var d=L(4971),B=L(4674);function P(J){return(0,B.m)(J?.[d.h])}},4026:(pt,De,L)=>{L.d(De,{t:()=>B});var d=L(4674);function B(P){return(0,d.m)(P?.then)}},541:(pt,De,L)=>{L.d(De,{L:()=>J,Q:()=>P});var d=L(7582),B=L(4674);function P(ie){return(0,d.FC)(this,arguments,function*(){const _e=ie.getReader();try{for(;;){const{value:Ae,done:ge}=yield(0,d.qq)(_e.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ae)}}finally{_e.releaseLock()}})}function J(ie){return(0,B.m)(ie?.getReader)}},9360:(pt,De,L)=>{L.d(De,{A:()=>B,e:()=>P});var d=L(4674);function B(J){return(0,d.m)(J?.lift)}function P(J){return ie=>{if(B(ie))return ie.lift(function(pe){try{return J(pe,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},8407:(pt,De,L)=>{L.d(De,{U:()=>P,z:()=>B});var d=L(2737);function B(...J){return P(J)}function P(J){return 0===J.length?d.y:1===J.length?J[0]:function(pe){return J.reduce((_e,Ae)=>Ae(_e),pe)}}},3894:(pt,De,L)=>{L.d(De,{h:()=>P});var d=L(2653),B=L(7599);function P(J){B.z.setTimeout(()=>{const{onUnhandledError:ie}=d.config;if(!ie)throw J;ie(J)})}},9853:(pt,De,L)=>{function d(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(De,{z:()=>d})},5879:(pt,De,L)=>{L.d(De,{$8M:()=>ac,$WT:()=>As,$Z:()=>jv,AFp:()=>Pp,ALo:()=>Eu,AaK:()=>ne,AsE:()=>ar,CHM:()=>wl,CRH:()=>dw,EJc:()=>hn,EpF:()=>_C,F4k:()=>f0,FYo:()=>KT,FiY:()=>ys,Gf:()=>bg,GfV:()=>dI,Gpc:()=>qe,HDt:()=>Pg,JOm:()=>la,KtG:()=>Wu,LFG:()=>Pn,LSH:()=>_v,Lbi:()=>Sv,Lck:()=>iA,MAs:()=>py,MGl:()=>Xp,MMx:()=>aD,MR2:()=>vv,NdJ:()=>qh,Ojb:()=>HT,OlP:()=>In,Oqu:()=>nd,P3R:()=>KE,PXZ:()=>JD,Q6J:()=>gy,QGY:()=>_u,Qsj:()=>RR,R0b:()=>Hi,RDi:()=>jE,Rgc:()=>lf,SBq:()=>zm,Sil:()=>SA,Suo:()=>Tg,TTD:()=>ju,TgZ:()=>$h,VuI:()=>mi,X6Q:()=>Nw,XFs:()=>Ke,Xpm:()=>Yo,Xq5:()=>XI,Xts:()=>Rp,Y36:()=>Ec,YKP:()=>sD,YNc:()=>d0,Yjl:()=>Hf,Yz7:()=>Xt,Z0I:()=>Bn,ZZ4:()=>bf,_Bn:()=>tw,_UZ:()=>yy,_Vd:()=>Ch,_c5:()=>Af,_uU:()=>sg,aQg:()=>Aa,c2e:()=>WD,cJS:()=>dr,cg1:()=>H0,dDg:()=>Ta,dqk:()=>Wt,eFA:()=>tb,eJc:()=>c_,ekj:()=>T0,eoX:()=>E_,f3M:()=>Yt,g9A:()=>Vm,h0i:()=>rf,hGG:()=>cb,hij:()=>Py,iGM:()=>df,ifc:()=>wt,ip1:()=>y_,jDz:()=>uD,kL8:()=>Vy,lG2:()=>xu,lcZ:()=>qo,lqb:()=>yc,lri:()=>Dw,n5z:()=>eu,oAB:()=>Pa,oxw:()=>Zh,q4F:()=>hI,qFp:()=>Zw,qLn:()=>bh,qOj:()=>n0,qZA:()=>zh,rWj:()=>wf,rg0:()=>nm,s9C:()=>wy,sBO:()=>sb,s_b:()=>i_,soG:()=>gr,tb:()=>Tw,tp0:()=>_s,uIk:()=>di,vHH:()=>te,vpe:()=>vo,wAp:()=>Mt,xi3:()=>uf,xp6:()=>wI,z2F:()=>Ef,zSh:()=>Ev,zs3:()=>wc});var d=L(8645),B=L(7394),P=L(5619),J=L(5592),ie=L(3019),pe=L(2096),_e=L(3020),Ae=L(4664),ge=L(3997);function $(i){for(let o in i)if(i[o]===$)return o;throw Error("Could not find renamed property on target object.")}function G(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ke(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Me=$({__forward_ref__:$});function qe(i){return i.__forward_ref__=qe,i.toString=function(){return ne(this())},i}function xe(i){return Ze(i)?i():i}function Ze(i){return"function"==typeof i&&i.hasOwnProperty(Me)&&i.__forward_ref__===qe}function Pe(i){return i&&!!i.\u0275providers}const lt="https://g.co/ng/security#xss";class te extends Error{constructor(o,a){super(function Ce(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function se(i){return"string"==typeof i?i:null==i?"":String(i)}function He(i,o){throw new te(-201,!1)}function tt(i,o){null==i&&function gt(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function dr(i){return{providers:i.providers||[],imports:i.imports||[]}}function tr(i){return Ai(i,Ar)||Ai(i,Wr)}function Bn(i){return null!==tr(i)}function Ai(i,o){return i.hasOwnProperty(o)?i[o]:null}function Gi(i){return i&&(i.hasOwnProperty(jn)||i.hasOwnProperty(os))?i[jn]:null}const Ar=$({\u0275prov:$}),jn=$({\u0275inj:$}),Wr=$({ngInjectableDef:$}),os=$({ngInjectorDef:$});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let dt;function Kt(i){const o=dt;return dt=i,o}function nr(i,o,a){const c=tr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==o?o:void He(ne(i))}const Wt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ur={},kt="__NG_DI_FLAG__",Un="ngTempTokenPath",Ss=/\n/gm,Hn="__source";let Cn;function Nn(i){const o=Cn;return Cn=i,o}function rr(i,o=Ke.Default){if(void 0===Cn)throw new te(-203,!1);return null===Cn?nr(i,void 0,o):Cn.get(i,o&Ke.Optional?null:void 0,o)}function Pn(i,o=Ke.Default){return(function Ct(){return dt}()||rr)(xe(i),o)}function Yt(i,o=Ke.Default){return Pn(i,z(o))}function z(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function j(i){const o=[];for(let a=0;a<i.length;a++){const c=xe(i[a]);if(Array.isArray(c)){if(0===c.length)throw new te(900,!1);let h,f=Ke.Default;for(let y=0;y<c.length;y++){const w=c[y],C=F(w);"number"==typeof C?-1===C?h=w.token:f|=C:h=w}o.push(Pn(h,f))}else o.push(Pn(c))}return o}function k(i,o){return i[kt]=o,i.prototype[kt]=o,i}function F(i){return i[kt]}function ve(i){return{toString:i}.toString()}var We=(()=>((We=We||{})[We.OnPush=0]="OnPush",We[We.Default=1]="Default",We))(),wt=(()=>{return(i=wt||(wt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",wt;var i})();const yt={},ht=[],xt=$({\u0275cmp:$}),_n=$({\u0275dir:$}),Lt=$({\u0275pipe:$}),_r=$({\u0275mod:$}),xr=$({\u0275fac:$}),he=$({__NG_ELEMENT_ID__:$}),re=$({__NG_ENV_ID__:$});function Fe(i,o,a){let c=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||i.charCodeAt(h+f)<=32)return h}a=h+1}}function ft(i,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(o,y,w,f)}else{const f=h,y=a[++c];jt(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),c++}}return c}function Rt(i){return 3===i||4===i||6===i}function jt(i){return 64===i.charCodeAt(0)}function nn(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||vr(i,a,h,null,-1===a||2===a?o[++c]:null)}}return i}function vr(i,o,a,c,h){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==h&&(i[f+1]=h));if(c===i[f+1])return void(i[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==h&&i.splice(f++,0,h)}const $n="ng-template";function Ks(i,o,a){let c=0,h=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&h){const y=i[c++];if(a&&"class"===f&&-1!==Fe(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(h=!1)}}return!1}function Io(i){return 4===i.type&&i.value!==$n}function xa(i,o,a){return o===(4!==i.type||a?i.value:$n)}function Ad(i,o,a){let c=4;const h=i.attrs||[],f=function Ra(i){for(let o=0;o<i.length;o++)if(Rt(i[o]))return o;return i.length}(h);let y=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!xa(i,C,a)||""===C&&1===o.length){if(ri(c))return!1;y=!0}}else{const S=8&c?C:o[++w];if(8&c&&null!==i.attrs){if(!Ks(i.attrs,S,a)){if(ri(c))return!1;y=!0}continue}const V=Ys(8&c?"class":C,h,Io(i),a);if(-1===V){if(ri(c))return!1;y=!0;continue}if(""!==S){let q;q=V>f?"":h[V+1].toLowerCase();const Q=8&c?q:null;if(Q&&-1!==Fe(Q,S,0)||2&c&&S!==q){if(ri(c))return!1;y=!0}}}}else{if(!y&&!ri(c)&&!ri(C))return!1;if(y&&ri(C))continue;y=!1,c=C|1&c}}return ri(c)||y}function ri(i){return 0==(1&i)}function Ys(i,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function Kn(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Co(i,o,a=!1){for(let c=0;c<o.length;c++)if(Ad(i,o[c],a))return!0;return!1}function us(i,o){return i?":not("+o.trim()+")":o}function Xg(i){let o=i[0],a=1,c=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!ri(y)&&(o+=us(f,h),h=""),c=y,f=f||!ri(c);a++}return""!==h&&(o+=us(f,h)),o}function Yo(i){return ve(()=>{const o=Rd(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===We.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||wt.Emulated,styles:i.styles||ht,_:null,schemas:i.schemas||null,tView:null,id:""};Oa(a);const c=i.dependencies;return a.directiveDefs=Qo(c,!1),a.pipeDefs=Qo(c,!0),a.id=function Fa(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const h of a)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function jf(i){return Ut(i)||wr(i)}function Na(i){return null!==i}function Pa(i){return ve(()=>({type:i.type,bootstrap:i.bootstrap||ht,declarations:i.declarations||ht,imports:i.imports||ht,exports:i.exports||ht,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Mu(i,o){if(null==i)return yt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=c,o&&(o[h]=f)}return a}function xu(i){return ve(()=>{const o=Rd(i);return Oa(o),o})}function Hf(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[xt]||null}function wr(i){return i[_n]||null}function gn(i){return i[Lt]||null}function As(i){const o=Ut(i)||wr(i)||gn(i);return null!==o&&o.standalone}function Zr(i,o){const a=i[_r]||null;if(!a&&!0===o)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function Rd(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||yt,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ht,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mu(i.inputs,o),outputs:Mu(i.outputs)}}function Oa(i){i.features?.forEach(o=>o(i))}function Qo(i,o){if(!i)return null;const a=o?gn:jf;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(Na)}const Yn=0,it=1,Pt=2,An=3,Kr=4,Ru=5,Rr=6,Ms=7,vn=8,qi=9,Do=10,Tt=11,La=12,Nu=13,Qs=14,On=15,Pu=16,bo=17,cs=18,Jo=19,Ou=20,Nr=21,Yr=22,Jc=23,Zi=24,sn=25,ls=1,To=2,vi=7,Xo=9,Pr=11;function Vr(i){return Array.isArray(i)&&"object"==typeof i[ls]}function Br(i){return Array.isArray(i)&&!0===i[ls]}function Xc(i){return 0!=(4&i.flags)}function Ki(i){return i.componentOffset>-1}function Js(i){return 1==(1&i.flags)}function Dn(i){return!!i.template}function ta(i){return 0!=(512&i[Pt])}function Xs(i,o){return i.hasOwnProperty(xr)?i[xr]:null}let Ba=Wt.WeakRef??class Va{constructor(o){this.ref=o}deref(){return this.ref}},Lu=0,Mi=null,Uu=!1;function Gn(i){const o=Mi;return Mi=i,o}class wi{constructor(){this.id=Lu++,this.ref=function qf(i){return new Ba(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Uu;Uu=!0;try{for(const[a,c]of this.consumers){const h=c.consumerNode.deref();void 0!==h&&h.trackingVersion===c.atTrackingVersion?h.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),h?.producers.delete(this.id))}}finally{Uu=o}}producerAccessed(){if(Uu)throw new Error("");if(null===Mi)return;let o=Mi.producers.get(this.id);void 0===o?(o={consumerNode:Mi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Mi.trackingVersion},Mi.producers.set(this.id,o),this.consumers.set(Mi.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=Mi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Mi?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let Ud=null;function nm(i){const o=Gn(null);try{return i()}finally{Gn(o)}}const ja=()=>{};class Yf extends wi{constructor(o,a,c){super(),this.watch=o,this.schedule=a,this.dirty=!1,this.cleanupFn=ja,this.registerOnCleanup=h=>{this.cleanupFn=h},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=Gn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ja,this.watch(this.registerOnCleanup)}finally{Gn(o)}}cleanup(){this.cleanupFn()}}class Ha{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ju(){return na}function na(i){return i.type.prototype.ngOnChanges&&(i.setInput=hl),dl}function dl(){const i=fl(this),o=i?.current;if(o){const a=i.previous;if(a===yt)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function hl(i,o,a,c){const h=this.declaredInputs[a],f=fl(i)||function Bd(i,o){return i[Qf]=o}(i,{previous:yt,current:null}),y=f.current||(f.current={}),w=f.previous,C=w[h];y[h]=new Ha(C&&C.currentValue,o,w===yt),i[c]=o}ju.ngInherit=!0;const Qf="__ngSimpleChanges__";function fl(i){return i[Qf]||null}const Yi=function(i,o,a){};function wn(i){for(;Array.isArray(i);)i=i[Yn];return i}function ra(i,o){return wn(o[i])}function jr(i,o){return wn(o[i.index])}function jd(i,o){return i.data[o]}function no(i,o){return i[o]}function xi(i,o){const a=o[i];return Vr(a)?a:a[Yn]}function hs(i,o){return null==o?null:i[o]}function zd(i){i[bo]=0}function yl(i){1024&i[Pt]||(i[Pt]|=1024,sa(i,1))}function $u(i){1024&i[Pt]&&(i[Pt]&=-1025,sa(i,-1))}function sa(i,o){let a=i[An];if(null===a)return;a[Ru]+=o;let c=a;for(a=a[An];null!==a&&(1===o&&1===c[Ru]||-1===o&&0===c[Ru]);)a[Ru]+=o,c=a,a=a[An]}const At={lFrame:Cl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $a(){return At.bindingsEnabled}function Se(){return At.lFrame.lView}function en(){return At.lFrame.tView}function wl(i){return At.lFrame.contextLView=i,i[vn]}function Wu(i){return At.lFrame.contextLView=null,i}function hr(){let i=np();for(;null!==i&&64===i.type;)i=i.parent;return i}function np(){return At.lFrame.currentTNode}function Qr(i,o){const a=At.lFrame;a.currentTNode=i,a.isParent=o}function rp(){return At.lFrame.isParent}function Or(){const i=At.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function kn(){return At.lFrame.bindingIndex++}function ps(i){const o=At.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Ga(i,o){const a=At.lFrame;a.bindingIndex=a.bindingRootIndex=i,Kd(o)}function Kd(i){At.lFrame.currentDirectiveIndex=i}function Yu(){return At.lFrame.currentQueryIndex}function ro(i){At.lFrame.currentQueryIndex=i}function io(i){const o=i[it];return 2===o.type?o.declTNode:1===o.type?i[Rr]:null}function oa(i,o,a){if(a&Ke.SkipSelf){let h=o,f=i;for(;!(h=h.parent,null!==h||a&Ke.Host||(h=io(f),null===h||(f=f[Qs],10&h.type))););if(null===h)return!1;o=h,i=f}const c=At.lFrame=Ju();return c.currentTNode=o,c.lView=i,!0}function Qu(i){const o=Ju(),a=i[it];At.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ju(){const i=At.lFrame,o=null===i?null:i.child;return null===o?Cl(i):o}function Cl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function im(){const i=At.lFrame;return At.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Yd=im;function Qd(){const i=im();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function si(){return At.lFrame.selectedIndex}function so(i){At.lFrame.selectedIndex=i}function Mn(){const i=At.lFrame;return jd(i.tView,i.selectedIndex)}let Dl=!0;function qa(){return Dl}function Ro(i){Dl=i}function Xu(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:R}=f;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),C&&(i.viewHooks??=[]).push(-a,C),S&&((i.viewHooks??=[]).push(a,S),(i.viewCheckHooks??=[]).push(a,S)),null!=R&&(i.destroyHooks??=[]).push(a,R)}}function Za(i,o,a){ln(i,o,3,a)}function bl(i,o,a,c){(3&i[Pt])===a&&ln(i,o,a,c)}function ec(i,o){let a=i[Pt];(3&a)===o&&(a&=8191,a+=1,i[Pt]=a)}function ln(i,o,a,c){const f=c??-1,y=o.length-1;let w=0;for(let C=void 0!==c?65535&i[bo]:0;C<y;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=c&&w>=c)break}else o[C]<0&&(i[bo]+=65536),(w<f||-1==f)&&(Tl(i,a,o,C),i[bo]=(4294901760&i[bo])+C+2),C++}function oi(i,o){Yi(4,i,o);const a=Gn(null);try{o.call(i)}finally{Gn(a),Yi(5,i,o)}}function Tl(i,o,a,c){const h=a[c]<0,f=a[c+1],w=i[h?-a[c]:a[c]];h?i[Pt]>>13<i[bo]>>16&&(3&i[Pt])===o&&(i[Pt]+=8192,oi(w,f)):oi(w,f)}const oo=-1;class No{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function tc(i){return i!==oo}function ai(i){return 32767&i}function Ja(i,o){let a=function Al(i){return i>>16}(i),c=o;for(;a>0;)c=c[Qs],a--;return c}let xs=!0;function Ni(i){const o=xs;return xs=i,o}const Ji=255,Oo=5;let om=0;const Pi={};function ms(i,o){const a=Ml(i,o);if(-1!==a)return a;const c=o[it];c.firstCreatePass&&(i.injectorIndex=o.length,Oi(c.data,i),Oi(o,null),Oi(c.blueprint,null));const h=Fn(i,o),f=i.injectorIndex;if(tc(h)){const y=ai(h),w=Ja(h,o),C=w[it].data;for(let S=0;S<8;S++)o[f+S]=w[y+S]|C[y+S]}return o[f+8]=h,f}function Oi(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ml(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Fn(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=oc(h),null===c)return oo;if(a++,h=h[Qs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return oo}function Rs(i,o,a){!function sp(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(he)&&(c=a[he]),null==c&&(c=a[he]=om++);const h=c&Ji;o.data[i+(h>>Oo)]|=1<<h}(i,o,a)}function Xa(i,o,a){if(a&Ke.Optional||void 0!==i)return i;He()}function nc(i,o,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),!(a&(Ke.Self|Ke.Host))){const h=i[qi],f=Kt(void 0);try{return h?h.get(o,c,a&Ke.Optional):nr(o,c,a&Ke.Optional)}finally{Kt(f)}}return Xa(c,0,a)}function rc(i,o,a,c=Ke.Default,h){if(null!==i){if(2048&o[Pt]&&!(c&Ke.Self)){const y=function op(i,o,a,c,h){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[Pt]&&!(512&y[Pt]);){const w=ih(f,y,a,c|Ke.Self,Pi);if(w!==Pi)return w;let C=f.parent;if(!C){const S=y[Ou];if(S){const R=S.get(a,Pi,c);if(R!==Pi)return R}C=oc(y),y=y[Qs]}f=C}return h}(i,o,a,c,Pi);if(y!==Pi)return y}const f=ih(i,o,a,c,Pi);if(f!==Pi)return f}return nc(o,a,c,h)}function ih(i,o,a,c,h){const f=function xl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(he)?i[he]:void 0;return"number"==typeof o?o>=0?o&Ji:oh:o}(a);if("function"==typeof f){if(!oa(o,i,c))return c&Ke.Host?Xa(h,0,c):nc(o,a,c,h);try{const y=f(c);if(null!=y||c&Ke.Optional)return y;He()}finally{Yd()}}else if("number"==typeof f){let y=null,w=Ml(i,o),C=oo,S=c&Ke.Host?o[On][Rr]:null;for((-1===w||c&Ke.SkipSelf)&&(C=-1===w?Fn(i,o):o[w+8],C!==oo&&ko(c,!1)?(y=o[it],w=ai(C),o=Ja(C,o)):w=-1);-1!==w;){const R=o[it];if(ic(f,w,R.data)){const V=sh(w,o,a,y,c,S);if(V!==Pi)return V}C=o[w+8],C!==oo&&ko(c,o[it].data[w+8]===S)&&ic(f,w,o)?(y=R,w=ai(C),o=Ja(C,o)):w=-1}}return h}function sh(i,o,a,c,h,f){const y=o[it],w=y.data[i+8],R=aa(w,y,a,null==c?Ki(w)&&xs:c!=y&&0!=(3&w.type),h&Ke.Host&&f===w);return null!==R?uo(o,y,R,w):Pi}function aa(i,o,a,c,h){const f=i.providerIndexes,y=o.data,w=1048575&f,C=i.directiveStart,R=f>>20,q=h?w+R:i.directiveEnd;for(let Q=c?w:w+R;Q<q;Q++){const Ie=y[Q];if(Q<C&&a===Ie||Q>=C&&Ie.type===a)return Q}if(h){const Q=y[C];if(Q&&Dn(Q)&&Q.type===a)return C}return null}function uo(i,o,a,c){let h=i[a];const f=o.data;if(function Sl(i){return i instanceof No}(h)){const y=h;y.resolving&&function Ne(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new te(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():se(i)}(f[a]));const w=Ni(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Kt(y.injectImpl):null;oa(i,c,Ke.Default);try{h=i[a]=y.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function rh(i,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=na(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}h&&(a.preOrderHooks??=[]).push(0-i,h),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==C&&Kt(C),Ni(w),y.resolving=!1,Yd()}}return h}function ic(i,o,a){return!!(a[o+(i>>Oo)]&1<<i)}function ko(i,o){return!(i&Ke.Self||i&Ke.Host&&o)}class Fo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return rc(this._tNode,this._lView,o,z(c),a)}}function oh(){return new Fo(hr(),Se())}function eu(i){return ve(()=>{const o=i.prototype.constructor,a=o[xr]||sc(o),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const f=h[xr]||sc(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function sc(i){return Ze(i)?()=>{const o=sc(xe(i));return o&&o()}:Xs(i)}function oc(i){const o=i[it],a=o.type;return 2===a?o.declTNode:1===a?i[Rr]:null}function ac(i){return function am(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const f=a[h];if(Rt(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(hr(),i)}const Ns="__parameters__";function Ps(i,o,a){return ve(()=>{const c=function ua(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return w.annotation=y,w;function w(C,S,R){const V=C.hasOwnProperty(Ns)?C[Ns]:Object.defineProperty(C,Ns,{value:[]})[Ns];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(y),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}function iu(i,o){i.forEach(a=>Array.isArray(a)?iu(a,o):o(a))}function Uo(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Ol(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function E(i,o,a){let c=A(i,o);return c>=0?i[1|c]=a:(c=~c,function cm(i,o,a,c){let h=i.length;if(h==o)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function b(i,o){const a=A(i,o);if(a>=0)return i[1|a]}function A(i,o){return function W(i,o,a){let c=0,h=i.length>>a;for(;h!==c;){const f=c+(h-c>>1),y=i[f<<a];if(o===y)return f<<a;y>o?h=f:c=f+1}return~(h<<a)}(i,o,1)}const ys=k(Ps("Optional"),8),_s=k(Ps("SkipSelf"),4);function gm(i){return 128==(128&i.flags)}var la=(()=>((la=la||{})[la.Important=1]="Important",la[la.DashCase=2]="DashCase",la))();const ym=new Map;let fT=0;const vm="__ngContext__";function Fi(i,o){Vr(o)?(i[vm]=o[Jo],function EE(i){ym.set(i[Jo],i)}(o)):i[vm]=o}let Ip;function iv(i,o){return Ip(i,o)}function uh(i){const o=i[An];return Br(o)?o[An]:o}function Im(i){return sv(i[La])}function RE(i){return sv(i[Kr])}function sv(i){for(;null!==i&&!Br(i);)i=i[Kr];return i}function jl(i,o,a,c,h){if(null!=c){let f,y=!1;Br(c)?f=c:Vr(c)&&(y=!0,c=c[Yn]);const w=wn(c);0===i&&null!==a?null==h?DT(o,a,w):ch(o,a,w,h||null,!0):1===i&&null!==a?ch(o,a,w,h||null,!0):2===i?function bt(i,o,a){const c=cv(i,o);c&&function bT(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,w,y):3===i&&o.destroyNode(w),null!=f&&function VE(i,o,a,c,h){const f=a[vi];f!==wn(a)&&jl(o,i,c,f,h);for(let w=Pr;w<a.length;w++){const C=a[w];Dp(C[it],C,i,o,c,f)}}(o,i,f,a,h)}}function Dm(i,o,a){return i.createElement(o,a)}function bm(i,o){const a=i[Xo],c=a.indexOf(o);$u(o),a.splice(c,1)}function ov(i,o){if(i.length<=Pr)return;const a=Pr+o,c=i[a];if(c){const h=c[Pu];null!==h&&h!==i&&bm(h,c),o>0&&(i[a-1][Kr]=c[Kr]);const f=Ol(i,Pr+o);!function PE(i,o){Dp(i,o,o[Tt],2,null,null),o[Yn]=null,o[Rr]=null}(c[it],c);const y=f[cs];null!==y&&y.detachView(f[it]),c[An]=null,c[Kr]=null,c[Pt]&=-129}return c}function Tm(i,o){if(!(256&o[Pt])){const a=o[Tt];o[Jc]?.destroy(),o[Zi]?.destroy(),a.destroyNode&&Dp(i,o,a,3,null,null),function Cp(i){let o=i[La];if(!o)return av(i[it],i);for(;o;){let a=null;if(Vr(o))a=o[La];else{const c=o[Pr];c&&(a=c)}if(!a){for(;o&&!o[Kr]&&o!==i;)Vr(o)&&av(o[it],o),o=o[An];null===o&&(o=i),Vr(o)&&av(o[it],o),a=o&&o[Kr]}o=a}}(o)}}function av(i,o){if(!(256&o[Pt])){o[Pt]&=-129,o[Pt]|=256,function IT(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof No)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=h[f[y]],C=f[y+1];Yi(4,w,C);try{C.call(w)}finally{Yi(5,w,C)}}else{Yi(4,h,f);try{f.call(h)}finally{Yi(5,h,f)}}}}}(i,o),function uv(i,o){const a=i.cleanup,c=o[Ms];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[Ms]=null);const h=o[Nr];if(null!==h){o[Nr]=null;for(let f=0;f<h.length;f++)(0,h[f])()}}(i,o),1===o[it].type&&o[Tt].destroy();const a=o[Pu];if(null!==a&&Br(o[An])){a!==o[An]&&bm(a,o);const c=o[cs];null!==c&&c.detachView(i)}!function CE(i){ym.delete(i[Jo])}(o)}}function Sm(i,o,a){return function CT(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[Yn];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:f}=i.data[c.directiveStart+h];if(f===wt.None||f===wt.Emulated)return null}return jr(c,a)}}(i,o.parent,a)}function ch(i,o,a,c,h){i.insertBefore(o,a,c,h)}function DT(i,o,a){i.appendChild(o,a)}function kE(i,o,a,c,h){null!==c?ch(i,o,a,c,h):DT(i,o,a)}function cv(i,o){return i.parentNode(o)}let FE,bp,pr,AT=function ST(i,o,a){return 40&i.type?jr(i,a):null};function lv(i,o,a,c){const h=Sm(i,c,o),f=o[Tt],w=function TT(i,o,a){return AT(i,o,a)}(c.parent||o[Rr],c,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)kE(f,h,a[C],w,!1);else kE(f,h,a,w,!1);void 0!==FE&&FE(f,c,o,a,h)}function Hr(i,o){if(null!==o){const a=o.type;if(3&a)return jr(o,i);if(4&a)return dv(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Hr(i,c);{const h=i[o.index];return Br(h)?dv(-1,h):wn(h)}}if(32&a)return iv(o,i)()||wn(i[o.index]);{const c=lh(i,o);return null!==c?Array.isArray(c)?c[0]:Hr(uh(i[On]),c):Hr(i,o.next)}}return null}function lh(i,o){return null!==o?i[On][Rr].projection[o.projection]:null}function dv(i,o){const a=Pr+i+1;if(a<o.length){const c=o[a],h=c[it].firstChild;if(null!==h)return Hr(c,h)}return o[vi]}function dh(i,o,a,c,h,f,y){for(;null!=a;){const w=c[a.index],C=a.type;if(y&&0===o&&(w&&Fi(wn(w),c),a.flags|=2),32!=(32&a.flags))if(8&C)dh(i,o,a.child,c,h,f,!1),jl(o,i,h,w,f);else if(32&C){const S=iv(a,c);let R;for(;R=S();)jl(o,i,h,R,f);jl(o,i,h,w,f)}else 16&C?UE(i,o,c,a,h,f):jl(o,i,h,w,f);a=y?a.projectionNext:a.next}}function Dp(i,o,a,c,h,f){dh(a,c,i.firstChild,o,h,f,!1)}function UE(i,o,a,c,h,f){const y=a[On],C=y[Rr].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)jl(o,i,h,C[S],f);else{let S=C;const R=y[An];gm(c)&&(S.flags|=128),dh(i,o,S,R,h,f,!0)}}function hh(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function BE(i,o,a){const{mergedAttrs:c,classes:h,styles:f}=a;null!==c&&ft(i,o,c),null!==h&&hh(i,o,h),null!==f&&function Am(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function jE(i){bp=i}function Li(i){return function cu(){if(void 0===pr&&(pr=null,Wt.trustedTypes))try{pr=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return pr}()?.createScriptURL(i)||i}class Sp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function Ui(i){return i instanceof Sp?i.changingThisBreaksApplicationSecurity:i}function Ap(i,o){const a=function xm(i){return i instanceof Sp&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${lt})`)}return a===o}const OT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var or=(()=>((or=or||{})[or.NONE=0]="NONE",or[or.HTML=1]="HTML",or[or.STYLE=2]="STYLE",or[or.SCRIPT=3]="SCRIPT",or[or.URL=4]="URL",or[or.RESOURCE_URL=5]="RESOURCE_URL",or))();function _v(i){const o=xp();return o?o.sanitize(or.URL,i)||"":Ap(i,"URL")?Ui(i):function fo(i){return(i=String(i)).match(OT)?i:"unsafe:"+i}(se(i))}function Om(i){const o=xp();if(o)return Li(o.sanitize(or.RESOURCE_URL,i)||"");if(Ap(i,"ResourceURL"))return Li(Ui(i));throw new te(904,!1)}function KE(i,o,a){return function VT(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Om:_v}(o,a)(i)}function xp(){const i=Se();return i&&i[Do].sanitizer}class In{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Rp=new In("ENVIRONMENT_INITIALIZER"),QE=new In("INJECTOR",-1),JE=new In("INJECTOR_DEF_TYPES");class XE{get(o,a=Ur){if(a===Ur){const c=new Error(`NullInjectorError: No provider for ${ne(o)}!`);throw c.name="NullInjectorError",c}return a}}function vv(i){return{\u0275providers:i}}function eI(...i){return{\u0275providers:wv(0,i),\u0275fromNgModule:!0}}function wv(i,...o){const a=[],c=new Set;let h;return iu(o,f=>{const y=f;du(y,a,[],c)&&(h||=[],h.push(y))}),void 0!==h&&tI(h,a),a}function tI(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];Fm(h,f=>{o.push(f)})}}function du(i,o,a,c){if(!(i=xe(i)))return!1;let h=null,f=Gi(i);const y=!f&&Ut(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const C=i.ngModule;if(f=Gi(C),!f)return!1;h=C}const w=c.has(h);if(y){if(w)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of C)du(S,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let S;c.add(h);try{iu(f.imports,R=>{du(R,o,a,c)&&(S||=[],S.push(R))})}finally{}void 0!==S&&tI(S,o)}if(!w){const S=Xs(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:ht},{provide:JE,useValue:h,multi:!0},{provide:Rp,useValue:()=>Pn(h),multi:!0})}const C=f.providers;null==C||w||Fm(C,R=>{o.push(R)})}}return h!==i&&void 0!==i.providers}function Fm(i,o){for(let a of i)Pe(a)&&(a=a.\u0275providers),Array.isArray(a)?Fm(a,o):o(a)}const nI=$({provide:String,useValue:$});function wh(i){return null!==i&&"object"==typeof i&&nI in i}function mc(i){return"function"==typeof i}const Ev=new In("Set Injector scope."),Gl={},BT={};let Iv;function Um(){return void 0===Iv&&(Iv=new XE),Iv}class yc{}class Wl extends yc{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hu(o,y=>this.processProvider(y)),this.records.set(QE,ql(void 0,this)),h.has("environment")&&this.records.set(yc,ql(void 0,this));const f=this.records.get(Ev);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(JE.multi,ht,Ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Nn(this),c=Kt(void 0);try{return o()}finally{Nn(a),Kt(c)}}get(o,a=Ur,c=Ke.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(re))return o[re](this);c=z(c);const h=Nn(this),f=Kt(void 0);try{if(!(c&Ke.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=function Tv(i){return"function"==typeof i||"object"==typeof i&&i instanceof In}(o)&&tr(o);w=C&&this.injectableDefInScope(C)?ql(Cv(o),Gl):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&Ke.Self?Um():this.parent).get(o,a=c&Ke.Optional&&a===Ur?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Un]=y[Un]||[]).unshift(ne(o)),h)throw y;return function N(i,o,a,c){const h=i[Un];throw o[Hn]&&h.unshift(o[Hn]),i.message=function X(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=ne(o);if(Array.isArray(o))h=o.map(ne).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ne(w)))}h=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(Ss,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[Un]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{Kt(f),Nn(h)}}resolveInjectorInitializers(){const o=Nn(this),a=Kt(void 0);try{const c=this.get(Rp.multi,ht,Ke.Self);for(const h of c)h()}finally{Nn(o),Kt(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ne(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(o){let a=mc(o=xe(o))?o:xe(o&&o.provide);const c=function jT(i){return wh(i)?ql(void 0,i.useValue):ql(bv(i),Gl)}(o);if(mc(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=ql(void 0,Gl,!0),h.factory=()=>j(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Gl&&(a.value=BT,a.value=a.factory()),"object"==typeof a.value&&a.value&&function fa(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=xe(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Cv(i){const o=tr(i),a=null!==o?o.factory:Xs(i);if(null!==a)return a;if(i instanceof In)throw new te(204,!1);if(i instanceof Function)return function Dv(i){const o=i.length;if(o>0)throw function kl(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new te(204,!1);const a=function Eo(i){return i&&(i[Ar]||i[Wr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new te(204,!1)}function bv(i,o,a){let c;if(mc(i)){const h=xe(i);return Xs(h)||Cv(h)}if(wh(i))c=()=>xe(i.useValue);else if(function Lm(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...j(i.deps||[]));else if(function Eh(i){return!(!i||!i.useExisting)}(i))c=()=>Pn(xe(i.useExisting));else{const h=xe(i&&(i.useClass||i.provide));if(!function Np(i){return!!i.deps}(i))return Xs(h)||Cv(h);c=()=>new h(...j(i.deps))}return c}function ql(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function hu(i,o){for(const a of i)Array.isArray(a)?hu(a,o):a&&Pe(a)?hu(a.\u0275providers,o):o(a)}const Pp=new In("AppId",{providedIn:"root",factory:()=>Op}),Op="ng",Vm=new In("Platform Initializer"),Sv=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),HT=new In("CSP nonce",{providedIn:"root",factory:()=>function Vo(){if(void 0!==bp)return bp;if(typeof document<"u")return document;throw new te(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let _c=(i,o)=>null;function Fp(i,o){return _c(i,o)}class qT{}class uI{}class cI{resolveComponentFactory(o){throw function Uv(i){const o=Error(`No component factory found for ${ne(i)}.`);return o.ngComponent=i,o}(o)}}let Ch=(()=>{class i{}return i.NULL=new cI,i})();function lI(){return Dh(hr(),Se())}function Dh(i,o){return new zm(jr(i,o))}let zm=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=lI,i})();function xR(i){return i instanceof zm?i.nativeElement:i}class KT{}let RR=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function YT(){const i=Se(),a=xi(hr().index,i);return(Vr(a)?a:i)[Tt]}(),i})(),NR=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class dI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const hI=new dI("16.1.1"),Up={};function ts(i){for(;i;){i[Pt]|=64;const o=uh(i);if(ta(i)&&!o)return i;i=o}return null}function pI(i){return i.ngOriginalError}class bh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&pI(o);for(;a&&pI(a);)a=pI(a);return a||null}}const Vp=new In("",{providedIn:"root",factory:()=>!1});function gu(i){return i instanceof Function?i():i}class jp extends wi{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){ts(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,a,c){const h=Gn(this);this.trackingVersion++;try{o(a,c)}finally{Gn(h)}}destroy(){this.trackingVersion++}}let mu=null;function yI(){return mu??=new jp,mu}function _I(i,o){return i[o]??yI()}function vI(i,o){const a=yI();a.hasReadASignal&&(i[o]=mu,a.lView=i,mu=new jp)}const zt={};function wI(i){EI(en(),Se(),si()+i,!1)}function EI(i,o,a,c){if(!c)if(3==(3&o[Pt])){const f=i.preOrderCheckHooks;null!==f&&Za(o,f,a)}else{const f=i.preOrderHooks;null!==f&&bl(o,f,0,a)}so(a)}function TI(i,o=null,a=null,c){const h=qm(i,o,a,c);return h.resolveInjectorInitializers(),h}function qm(i,o=null,a=null,c,h=new Set){const f=[a||ht,eI(i)];return c=c||("object"==typeof i?void 0:ne(i)),new Wl(f,o||Um(),c||null,h)}let wc=(()=>{class i{static create(a,c){if(Array.isArray(a))return TI({name:""},c,a,"");{const h=a.name??"";return TI({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Ur,i.NULL=new XE,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Pn(QE)}),i.__NG_ELEMENT_ID__=-1,i})();function Ec(i,o=Ke.Default){const a=Se();return null===a?Pn(i,o):rc(hr(),a,xe(i),o)}function jv(){throw new Error("invalid")}function Zm(i,o,a,c,h,f,y,w,C,S,R){const V=o.blueprint.slice();return V[Yn]=h,V[Pt]=140|c,(null!==S||i&&2048&i[Pt])&&(V[Pt]|=2048),zd(V),V[An]=V[Qs]=i,V[vn]=a,V[Do]=y||i&&i[Do],V[Tt]=w||i&&i[Tt],V[qi]=C||i&&i[qi]||null,V[Rr]=f,V[Jo]=function _R(){return fT++}(),V[Yr]=R,V[Ou]=S,V[On]=2==o.type?i[On]:V,V}function Ah(i,o,a,c,h){let f=i.data[o];if(null===f)f=function Hv(i,o,a,c,h){const f=np(),y=rp(),C=i.data[o]=function dS(i,o,a,c,h,f){let y=o?o.injectorIndex:-1,w=0;return function Qi(){return null!==At.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,h);return null===i.firstChild&&(i.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(i,o,a,c,h),function fr(){return At.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=h;const y=function qu(){const i=At.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Qr(f,!0),f}function Ic(i,o,a,c){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return h}function SI(i,o,a,c,h){const f=_I(o,Jc),y=si(),w=2&c;try{if(so(-1),w&&o.length>sn&&EI(i,o,sn,!1),Yi(w?2:0,h),w)f.runInContext(a,c,h);else{const S=Gn(null);try{a(c,h)}finally{Gn(S)}}}finally{w&&null===o[Jc]&&vI(o,Jc),so(y),Yi(w?3:1,h)}}function $v(i,o,a){if(Xc(o)){const c=Gn(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{Gn(c)}}}function zv(i,o,a){$a()&&(function gS(i,o,a,c){const h=a.directiveStart,f=a.directiveEnd;Ki(a)&&function vS(i,o,a){const c=jr(o,i),h=AI(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const w=zp(i,Zm(i,h,null,y,c,o,null,i[Do].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=w}(o,a,i.data[h+a.componentOffset]),i.firstCreatePass||ms(a,o),Fi(c,o);const y=a.initialInputs;for(let w=h;w<f;w++){const C=i.data[w],S=uo(o,i,w,a);Fi(S,o),null!==y&&Ii(0,w-h,S,C,0,y),Dn(C)&&(xi(a.index,o)[vn]=uo(o,i,w,a))}}(i,o,a,jr(a,o)),64==(64&a.flags)&&kI(i,o,a))}function Gv(i,o,a=jr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(o,i):i[y];i[h++]=w}}}function AI(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Wv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Wv(i,o,a,c,h,f,y,w,C,S,R){const V=sn+c,q=V+h,Q=function MI(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:zt);return a}(V,q),Ie="function"==typeof S?S():S;return Q[it]={type:i,blueprint:Q,template:a,queries:null,viewQuery:w,declTNode:o,data:Q.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Ie,incompleteFirstPass:!1,ssrId:R}}let qv=i=>null;function RI(i,o,a,c){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const f=i[h];null===c?NI(a,o,h,f):c.hasOwnProperty(h)&&NI(a,o,c[h],f)}return a}function NI(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function ci(i,o,a,c,h,f,y,w){const C=jr(o,a);let R,S=o.inputs;!w&&null!=S&&(R=S[c])?(Qm(i,a,R,c,h),Ki(o)&&function Kv(i,o){const a=xi(o,i);16&a[Pt]||(a[Pt]|=64)}(a,o.index)):3&o.type&&(c=function Zv(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}function Mh(i,o,a,c){if($a()){const h=null===c?null:{"":-1},f=function Km(i,o){const a=i.directiveRegistry;let c=null,h=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Co(o,y.selectors,!1))if(c||(c=[]),Dn(y))if(null!==y.findHostDirectiveDefs){const w=[];h=h||new Map,y.findHostDirectiveDefs(y,w,h),c.unshift(...w,y),Qv(i,o,w.length)}else c.unshift(y),Qv(i,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(i,a);let y,w;null===f?y=w=null:[y,w]=f,null!==y&&Yv(i,o,a,y,h,w),h&&function yS(i,o,a){if(o){const c=i.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new te(-301,!1);c.push(o[h],f)}}}(a,c,h)}a.mergedAttrs=nn(a.mergedAttrs,a.attrs)}function Yv(i,o,a,c,h,f){for(let S=0;S<c.length;S++)Rs(ms(a,o),i,c[S].type);!function FI(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const R=c[S];R.providersResolver&&R.providersResolver(R)}let y=!1,w=!1,C=Ic(i,o,c.length,null);for(let S=0;S<c.length;S++){const R=c[S];a.mergedAttrs=nn(a.mergedAttrs,R.hostAttrs),_S(i,a,o,C,R),Fs(C,R,h),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const V=R.type.prototype;!y&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),C++}!function PI(i,o,a){const h=o.directiveEnd,f=i.data,y=o.attrs,w=[];let C=null,S=null;for(let R=o.directiveStart;R<h;R++){const V=f[R],q=a?a.get(V):null,Ie=q?q.outputs:null;C=RI(V.inputs,R,C,q?q.inputs:null),S=RI(V.outputs,R,S,Ie);const Le=null===C||null===y||Io(o)?null:$p(C,R,y);w.push(Le)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=C,o.outputs=S}(i,a,f)}function kI(i,o,a){const c=a.directiveStart,h=a.directiveEnd,f=a.index,y=function Ku(){return At.lFrame.currentDirectiveIndex}();try{so(f);for(let w=c;w<h;w++){const C=i.data[w],S=o[w];Kd(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&mS(C,S)}}finally{so(-1),Kd(y)}}function mS(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Qv(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function Fs(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Dn(o)&&(a[""]=i)}}function _S(i,o,a,c,h){i.data[c]=h;const f=h.factory||(h.factory=Xs(h.type)),y=new No(f,Dn(h),Ec);i.blueprint[c]=y,a[c]=y,function OI(i,o,a,c,h){const f=h.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~o.index;(function pS(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,f)}}(i,o,c,Ic(i,a,h.hostVars,zt),h)}function ga(i,o,a,c,h,f){const y=jr(i,o);!function Jv(i,o,a,c,h,f,y){if(null==f)i.removeAttribute(o,h,a);else{const w=null==y?se(f):y(f,c||"",h);i.setAttribute(o,h,w,a)}}(o[Tt],y,f,i.value,a,c,h)}function Ii(i,o,a,c,h,f){const y=f[o];if(null!==y)for(let w=0;w<y.length;)LI(c,a,y[w++],y[w++],y[w++])}function LI(i,o,a,c,h){const f=Gn(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(h=y[c].call(o,h)),null!==i.setInput?i.setInput(o,h,a,c):o[c]=h}finally{Gn(f)}}function $p(i,o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let w=0;w<y.length;w+=2)if(y[w]===o){c.push(f,y[w+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function Xv(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function UI(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];ro(a[c]),y.contentQueries(2,o[f],f)}}}function zp(i,o){return i[La]?i[Nu][Kr]=o:i[La]=o,i[Nu]=o,o}function VI(i,o,a){ro(0);const c=Gn(null);try{o(i,a)}finally{Gn(c)}}function BI(i){return i[Ms]||(i[Ms]=[])}function Ym(i){return i.cleanup||(i.cleanup=[])}function wS(i,o){const a=i[qi],c=a?a.get(bh,null):null;c&&c.handleError(o)}function Qm(i,o,a,c,h){for(let f=0;f<a.length;){const y=a[f++],w=a[f++];LI(i.data[y],o[y],c,w,h)}}function Ci(i,o,a){const c=ra(o,i);!function NE(i,o,a){i.setValue(o,a)}(i[Tt],c,a)}function ES(i,o){const a=xi(o,i),c=a[it];!function VR(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const h=a[Yn];null!==h&&null===a[Yr]&&(a[Yr]=Fp(h,a[qi])),jI(c,a,a[vn])}function jI(i,o,a){Qu(o);try{const c=i.viewQuery;null!==c&&VI(1,c,a);const h=i.template;null!==h&&SI(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&UI(i,o),i.staticViewQueries&&VI(2,i.viewQuery,a);const f=i.components;null!==f&&function BR(i,o){for(let a=0;a<o.length;a++)ES(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Pt]&=-5,Qd()}}let GI=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,h){const f=typeof Zone>"u"?null:Zone.current,y=new Yf(a,S=>{this.all.has(S)&&this.queue.set(S,f)},h);let w;this.all.add(y),y.notify();const C=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=c?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>new i}),i})();function t0(i,o,a){let c=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?h=ke(h,w):2==f&&(c=ke(c,w+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function xh(i,o,a,c,h=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&c.push(wn(f)),Br(f)){for(let w=Pr;w<f.length;w++){const C=f[w],S=C[it].firstChild;null!==S&&xh(C[it],C,S,c)}f[vi]!==f[Yn]&&c.push(f[vi])}const y=a.type;if(8&y)xh(i,o,a.child,c);else if(32&y){const w=iv(a,o);let C;for(;C=w();)c.push(C)}else if(16&y){const w=lh(o,a);if(Array.isArray(w))c.push(...w);else{const C=uh(o[On]);xh(C[it],C,w,c,!0)}}a=h?a.projectionNext:a.next}return c}function Jm(i,o,a,c=!0){const h=o[Do].rendererFactory;h.begin&&h.begin();try{CS(i,o,i.template,a)}catch(y){throw c&&wS(o,y),y}finally{h.end&&h.end(),o[Do].effectManager?.flush()}}function CS(i,o,a,c){const h=o[Pt];if(256!=(256&h)){o[Do].effectManager?.flush(),Qu(o);try{zd(o),function Zu(i){return At.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&SI(i,o,a,2,c);const y=3==(3&h);if(y){const S=i.preOrderCheckHooks;null!==S&&Za(o,S,null)}else{const S=i.preOrderHooks;null!==S&&bl(o,S,0,null),ec(o,0)}if(function HR(i){for(let o=Im(i);null!==o;o=RE(o)){if(!o[To])continue;const a=o[Xo];for(let c=0;c<a.length;c++){yl(a[c])}}}(o),WI(o,2),null!==i.contentQueries&&UI(i,o),y){const S=i.contentCheckHooks;null!==S&&Za(o,S)}else{const S=i.contentHooks;null!==S&&bl(o,S,1),ec(o,1)}!function aS(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=_I(o,Zi);try{for(let h=0;h<a.length;h++){const f=a[h];if(f<0)so(~f);else{const y=f,w=a[++h],C=a[++h];Ga(w,y),c.runInContext(C,2,o[y])}}}finally{null===o[Zi]&&vI(o,Zi),so(-1)}}(i,o);const w=i.components;null!==w&&KI(o,w,0);const C=i.viewQuery;if(null!==C&&VI(2,C,c),y){const S=i.viewCheckHooks;null!==S&&Za(o,S)}else{const S=i.viewHooks;null!==S&&bl(o,S,2),ec(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Pt]&=-73,$u(o)}finally{Qd()}}}function WI(i,o){for(let a=Im(i);null!==a;a=RE(a))for(let c=Pr;c<a.length;c++)ZI(a[c],o)}function qI(i,o,a){ZI(xi(o,i),a)}function ZI(i,o){if(!function Hd(i){return 128==(128&i[Pt])}(i))return;const a=i[it];if(80&i[Pt]&&0===o||1024&i[Pt]||2===o)CS(a,i,a.template,i[vn]);else if(i[Ru]>0){WI(i,1);const h=i[it].components;null!==h&&KI(i,h,1)}}function KI(i,o,a){for(let c=0;c<o.length;c++)qI(i,o[c],a)}class Rh{get rootNodes(){const o=this._lView,a=o[it];return xh(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(o){this._lView[vn]=o}get destroyed(){return 256==(256&this._lView[Pt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[An];if(Br(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(ov(o,c),Ol(a,c))}this._attachedToViewContainer=!1}Tm(this._lView[it],this._lView)}onDestroy(o){!function Ri(i,o){if(256==(256&i[Pt]))throw new te(911,!1);null===i[Nr]&&(i[Nr]=[]),i[Nr].push(o)}(this._lView,o)}markForCheck(){ts(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pt]&=-129}reattach(){this._lView[Pt]|=128}detectChanges(){Jm(this._lView[it],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wT(i,o){Dp(i,o,o[Tt],2,null,null)}(this._lView[it],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=o}}class DS extends Rh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Jm(o[it],o,o[vn],!1)}checkNoChanges(){}get context(){return null}}class YI extends Ch{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Ut(o);return new Nh(a,this.ngModule)}}function QI(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class TS{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=z(c);const h=this.injector.get(o,Up,c);return h!==Up||a===Up?h:this.parentInjector.get(o,a,c)}}class Nh extends uI{get inputs(){return QI(this.componentDef.inputs)}get outputs(){return QI(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Md(i){return i.map(Xg).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let f=(h=h||this.ngModule)instanceof yc?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new TS(o,f):o,w=y.get(KT,null);if(null===w)throw new te(407,!1);const R={rendererFactory:w,sanitizer:y.get(NR,null),effectManager:y.get(GI,null)},V=w.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",Q=c?function UR(i,o,a,c){const f=c.get(Vp,!1)||a===wt.ShadowDom,y=i.selectRootElement(o,f);return function xI(i){qv(i)}(y),y}(V,c,this.componentDef.encapsulation,y):Dm(V,q,function bS(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(q)),Je=this.componentDef.signals?4608:this.componentDef.onPush?576:528,_t=Wv(0,null,null,1,0,null,null,null,null,null,null),be=Zm(null,_t,null,Je,null,null,R,V,y,null,null);let Bt,on;Qu(be);try{const an=this.componentDef;let zi,xf=null;an.findHostDirectiveDefs?(zi=[],xf=new Map,an.findHostDirectiveDefs(an,zi,xf),zi.push(an)):zi=[an];const _b=function $R(i,o){const a=i[it],c=sn;return i[c]=o,Ah(a,c,2,"#host",null)}(be,Q),vb=function zR(i,o,a,c,h,f,y){const w=h[it];!function GR(i,o,a,c){for(const h of i)o.mergedAttrs=nn(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(t0(o,o.mergedAttrs,!0),null!==a&&BE(c,a,o))}(c,i,o,y);let C=null;null!==o&&(C=Fp(o,h[qi]));const S=f.rendererFactory.createRenderer(o,a);let R=16;a.signals?R=4096:a.onPush&&(R=64);const V=Zm(h,AI(a),null,R,h[i.index],i,f,S,null,null,C);return w.firstCreatePass&&Qv(w,i,c.length-1),zp(h,V),h[i.index]=V}(_b,Q,an,zi,be,R,V);on=jd(_t,sn),Q&&function qR(i,o,a,c){if(c)ft(i,a,["ng-version",hI.full]);else{const{attrs:h,classes:f}=function Au(i){const o=[],a=[];let c=1,h=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===h?""!==f&&o.push(f,i[++c]):8===h&&a.push(f);else{if(!ri(h))break;h=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&ft(i,a,h),f&&f.length>0&&hh(i,a,f.join(" "))}}(V,an,Q,c),void 0!==a&&function JI(i,o,a){const c=i.projection=[];for(let h=0;h<o.length;h++){const f=a[h];c.push(null!=f?Array.from(f):null)}}(on,this.ngContentSelectors,a),Bt=function WR(i,o,a,c,h,f){const y=hr(),w=h[it],C=jr(y,h);Yv(w,h,y,a,null,c);for(let R=0;R<a.length;R++)Fi(uo(h,w,y.directiveStart+R,y),h);kI(w,h,y),C&&Fi(C,h);const S=uo(h,w,y.directiveStart+y.componentOffset,y);if(i[vn]=h[vn]=S,null!==f)for(const R of f)R(S,o);return $v(w,y,i),S}(vb,an,zi,xf,be,[cn]),jI(_t,be,null)}finally{Qd()}return new SS(this.componentType,Bt,Dh(on,be),be,on)}}class SS extends qT{constructor(o,a,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new DS(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;Qm(f[it],f,h,o,a),this.previousInputValues.set(o,a),ts(xi(this._tNode.index,f))}}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function cn(){const i=hr();Xu(Se()[it],i)}function n0(i){let o=function Xm(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let h;if(Dn(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new te(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=i;y.inputs=Gp(i.inputs),y.inputTransforms=Gp(i.inputTransforms),y.declaredInputs=Gp(i.declaredInputs),y.outputs=Gp(i.outputs);const w=h.hostBindings;w&&Ph(i,w);const C=h.viewQuery,S=h.contentQueries;if(C&&Ee(i,C),S&&Ls(i,S),G(i.inputs,h.inputs),G(i.declaredInputs,h.declaredInputs),G(i.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,h.inputTransforms)),Dn(h)&&h.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===n0&&(a=!1)}}o=Object.getPrototypeOf(o)}!function ZR(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=o+=h.hostVars,h.hostAttrs=nn(h.hostAttrs,a=nn(a,h.hostAttrs))}}(c)}function Gp(i){return i===yt?{}:i===ht?[]:i}function Ee(i,o){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function Ls(i,o){const a=i.contentQueries;i.contentQueries=a?(c,h,f)=>{o(c,h,f),a(c,h,f)}:o}function Ph(i,o){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function XI(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const h=o[c];Array.isArray(h)&&h[2]&&(a[c]=h[2])}i.inputTransforms=a}function ty(i){return!!li(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function li(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Vn(i,o,a){return i[o]=a}function Vi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Dc(i,o,a,c){const h=Vi(i,o,a);return Vi(i,o+1,c)||h}function di(i,o,a,c){const h=Se();return Vi(h,kn(),o)&&(en(),ga(Mn(),h,i,o,a,c)),di}function ma(i,o,a,c){return Vi(i,kn(),a)?o+se(a)+c:zt}function yu(i,o,a,c,h,f){const w=Dc(i,function fs(){return At.lFrame.bindingIndex}(),a,h);return ps(2),w?o+se(a)+c+se(h)+f:zt}function d0(i,o,a,c,h,f,y,w){const C=Se(),S=en(),R=i+sn,V=S.firstCreatePass?function kS(i,o,a,c,h,f,y,w,C){const S=o.consts,R=Ah(o,i,4,y||null,hs(S,w));Mh(o,a,R,hs(S,C)),Xu(o,R);const V=R.tView=Wv(2,R,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S,null);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,S,C,o,a,c,h,f,y):S.data[R];Qr(V,!1);const q=dC(S,C,V,i);qa()&&lv(S,C,q,V),Fi(q,C),zp(C,C[R]=Xv(q,C,q,V)),Js(V)&&zv(S,C,V),null!=y&&Gv(C,V,w)}let dC=function hC(i,o,a,c){return Ro(!0),o[Tt].createComment("")};function py(i){return no(function El(){return At.lFrame.contextLView}(),sn+i)}function gy(i,o,a){const c=Se();return Vi(c,kn(),o)&&ci(en(),Mn(),c,i,o,c[Tt],a,!1),gy}function h0(i,o,a,c,h){const y=h?"class":"style";Qm(i,a,o.inputs[y],y,c)}function $h(i,o,a,c){const h=Se(),f=en(),y=sn+i,w=h[Tt],C=f.firstCreatePass?function my(i,o,a,c,h,f){const y=o.consts,C=Ah(o,i,2,c,hs(y,h));return Mh(o,a,C,hs(y,f)),null!==C.attrs&&t0(C,C.attrs,!1),null!==C.mergedAttrs&&t0(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,f,h,o,a,c):f.data[y],S=fC(f,h,C,w,o,i);h[y]=S;const R=Js(C);return Qr(C,!0),BE(w,S,C),32!=(32&C.flags)&&qa()&&lv(f,h,S,C),0===function rm(){return At.lFrame.elementDepthCount}()&&Fi(S,h),function vl(){At.lFrame.elementDepthCount++}(),R&&(zv(f,h,C),$v(f,C,h)),null!==c&&Gv(h,C),$h}function zh(){let i=hr();rp()?function Wn(){At.lFrame.isParent=!1}():(i=i.parent,Qr(i,!1));const o=i;(function Gu(i){return At.skipHydrationRootTNode===i})(o)&&function tp(){At.skipHydrationRootTNode=null}(),function Xf(){At.lFrame.elementDepthCount--}();const a=en();return a.firstCreatePass&&(Xu(a,i),Xc(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Qa(i){return 0!=(8&i.flags)}(o)&&h0(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function kr(i){return 0!=(16&i.flags)}(o)&&h0(a,o,Se(),o.stylesWithoutHost,!1),zh}function yy(i,o,a,c){return $h(i,o,a,c),zh(),yy}let fC=(i,o,a,c,h,f)=>(Ro(!0),Dm(c,h,function nh(){return At.lFrame.currentNamespace}()));function _C(){return Se()}function _u(i){return!!i&&"function"==typeof i.then}function f0(i){return!!i&&"function"==typeof i.subscribe}function qh(i,o,a,c){const h=Se(),f=en(),y=hr();return function g0(i,o,a,c,h,f,y){const w=Js(c),S=i.firstCreatePass&&Ym(i),R=o[vn],V=BI(o);let q=!0;if(3&c.type||y){const Le=jr(c,o),Je=y?y(Le):Le,_t=V.length,be=y?on=>y(wn(on[c.index])):c.index;let Bt=null;if(!y&&w&&(Bt=function Jp(i,o,a,c){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===c){const w=o[Ms],C=h[f+2];return w.length>C?w[C]:null}"string"==typeof y&&(f+=2)}return null}(i,o,h,c.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=f,Bt.__ngLastListenerFn__=f,q=!1;else{f=m0(c,o,R,f,!1);const on=a.listen(Je,h,f);V.push(f,on),S&&S.push(h,be,_t,_t+1)}}else f=m0(c,o,R,f,!1);const Q=c.outputs;let Ie;if(q&&null!==Q&&(Ie=Q[h])){const Le=Ie.length;if(Le)for(let Je=0;Je<Le;Je+=2){const an=o[Ie[Je]][Ie[Je+1]].subscribe(f),zi=V.length;V.push(f,an),S&&S.push(h,c.index,zi,-(zi+1))}}}(f,h,h[Tt],y,i,o,c),qh}function Bi(i,o,a,c){try{return Yi(6,o,a),!1!==a(c)}catch(h){return wS(i,h),!1}finally{Yi(7,o,a)}}function m0(i,o,a,c,h){return function f(y){if(y===Function)return c;ts(i.componentOffset>-1?xi(i.index,o):o);let C=Bi(o,a,c,y),S=f.__ngNextListenerFn__;for(;S;)C=Bi(o,a,S,y)&&C,S=S.__ngNextListenerFn__;return h&&!1===C&&y.preventDefault(),C}}function Zh(i=1){return function Jd(i){return(At.lFrame.contextLView=function sm(i,o){for(;i>0;)o=o[Qs],i--;return o}(i,At.lFrame.contextLView))[vn]}(i)}function wy(i,o,a){return Xp(i,"",o,"",a),wy}function Xp(i,o,a,c,h){const f=Se(),y=ma(f,o,a,c);return y!==zt&&ci(en(),Mn(),f,i,y,f[Tt],h,!1),Xp}function Qh(i,o){return i<<17|o<<2}function $o(i){return i>>17&32767}function Dy(i){return 2|i}function Sc(i){return(131068&i)>>2}function w0(i,o){return-131069&i|o<<2}function by(i){return 1|i}function IC(i,o,a,c,h){const f=i[a+1],y=null===o;let w=c?$o(f):Sc(f),C=!1;for(;0!==w&&(!1===C||y);){const R=i[w+1];US(i[w],o)&&(C=!0,i[w+1]=c?by(R):Dy(R)),w=c?$o(R):Sc(R)}C&&(i[a+1]=c?Dy(f):by(f))}function US(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&A(i,o)>=0}function T0(i,o){return function go(i,o,a,c){const h=Se(),f=en(),y=ps(2);f.firstUpdatePass&&function DC(i,o,a,c){const h=i.data;if(null===h[a+1]){const f=h[si()],y=function ed(i,o){return o>=i.expandoStartIndex}(i,a);(function Xh(i,o){return 0!=(i.flags&(o?8:16))})(f,c)&&null===o&&!y&&(o=!1),o=function jS(i,o,a,c){const h=function Wa(i){const o=At.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=td(a=My(null,i,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=My(h,i,o,a,c),null===f){let C=function bC(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Sc(c))return i[$o(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=My(null,i,o,C[1],c),C=td(C,o.attrs,c),function HS(i,o,a,c){i[$o(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else f=function TC(i,o,a){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=td(c,i[f].hostAttrs,a);return td(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,c),function Jl(i,o,a,c,h,f){let y=f?o.classBindings:o.styleBindings,w=$o(y),C=Sc(y);i[c]=a;let R,S=!1;if(Array.isArray(a)?(R=a[1],(null===R||A(a,R)>0)&&(S=!0)):R=a,h)if(0!==C){const q=$o(i[w+1]);i[c+1]=Qh(q,w),0!==q&&(i[q+1]=w0(i[q+1],c)),i[w+1]=function EC(i,o){return 131071&i|o<<17}(i[w+1],c)}else i[c+1]=Qh(w,0),0!==w&&(i[w+1]=w0(i[w+1],c)),w=c;else i[c+1]=Qh(C,0),0===w?w=c:i[C+1]=w0(i[C+1],c),C=c;S&&(i[c+1]=Dy(i[c+1])),IC(i,R,c,!0),IC(i,R,c,!1),function I0(i,o,a,c,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&A(f,o)>=0&&(a[c+1]=by(a[c+1]))}(o,R,i,c,f),y=Qh(w,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,c)}}(f,i,y,c),o!==zt&&Vi(h,y,o)&&function AC(i,o,a,c,h,f,y,w){if(!(3&o.type))return;const C=i.data,S=C[w+1],R=function tg(i){return 1==(1&i)}(S)?MC(C,o,a,h,Sc(S),y):void 0;xy(R)||(xy(f)||function v0(i){return 2==(2&i)}(S)&&(f=MC(C,null,a,h,w,y)),function MT(i,o,a,c,h){if(o)h?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:la.DashCase;null==h?i.removeStyle(a,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=la.Important),i.setStyle(a,c,h,f))}}(c,y,ra(si(),a),h,f))}(f,f.data[si()],h,h[Tt],i,h[y+1]=function Ry(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ne(Ui(i)))),i}(o,a),c,y)}(i,o,null,!0),T0}function My(i,o,a,c,h){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=o[w],c=td(c,f.hostAttrs,h),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function td(i,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),E(i,y,!!a||o[++f]))}return void 0===i?null:i}function MC(i,o,a,c,h,f){const y=null===o;let w;for(;h>0;){const C=i[h],S=Array.isArray(C),R=S?C[1]:C,V=null===R;let q=a[h+1];q===zt&&(q=V?ht:void 0);let Q=V?b(q,c):R===c?q:void 0;if(S&&!xy(Q)&&(Q=b(C,c)),xy(Q)&&(w=Q,y))return w;const Ie=i[h+1];h=y?$o(Ie):Sc(Ie)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(w=b(C,c))}return w}function xy(i){return void 0!==i}function sg(i,o=""){const a=Se(),c=en(),h=i+sn,f=c.firstCreatePass?Ah(c,h,1,o,null):c.data[h],y=Ny(c,a,f,o,i);a[h]=y,qa()&&lv(c,a,y,f),Qr(f,!1)}let Ny=(i,o,a,c,h)=>(Ro(!0),function da(i,o){return i.createText(o)}(o[Tt],c));function nd(i){return Py("",i,""),nd}function Py(i,o,a){const c=Se(),h=ma(c,i,o,a);return h!==zt&&Ci(c,si(),h),Py}function ar(i,o,a,c,h){const f=Se(),y=yu(f,i,o,a,c,h);return y!==zt&&Ci(f,si(),y),ar}const wa=void 0;var HC=["en",[["a","p"],["AM","PM"],wa],[["AM","PM"],wa,wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wa,"{1} 'at' {0}",wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vs(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let rd={};function H0(i){const o=function Ia(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Tn(o);if(a)return a;const c=o.split("-")[0];if(a=Tn(c),a)return a;if("en"===c)return HC;throw new te(701,!1)}function Vy(i){return H0(i)[Mt.PluralCase]}function Tn(i){return i in rd||(rd[i]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[i]),rd[i]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const Go="en-US";let hg=Go;function ad(i,o,a,c,h){if(i=xe(i),Array.isArray(i))for(let f=0;f<i.length;f++)ad(i[f],o,a,c,h);else{const f=en(),y=Se();let w=mc(i)?i:xe(i.provide),C=bv(i);const S=hr(),R=1048575&S.providerIndexes,V=S.directiveStart,q=S.providerIndexes>>20;if(mc(i)||!i.multi){const Q=new No(C,h,Ec),Ie=ew(w,o,h?R:R+q,V);-1===Ie?(Rs(ms(S,y),f,w),Zy(f,i,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[Ie]=Q,y[Ie]=Q)}else{const Q=ew(w,o,R+q,V),Ie=ew(w,o,R,R+q),Je=Ie>=0&&a[Ie];if(h&&!Je||!h&&!(Q>=0&&a[Q])){Rs(ms(S,y),f,w);const _t=function Yy(i,o,a,c,h){const f=new No(i,a,Ec);return f.multi=[],f.index=o,f.componentProviders=0,bi(f,h,c&&!a),f}(h?Da:iD,a.length,h,c,C);!h&&Je&&(a[Ie].providerFactory=_t),Zy(f,i,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(_t),y.push(_t)}else Zy(f,i,Q>-1?Q:Ie,bi(a[h?Ie:Q],C,!h&&c));!h&&c&&Je&&a[Ie].componentProviders++}}}function Zy(i,o,a,c){const h=mc(o),f=function rI(i){return!!i.useClass}(o);if(h||f){const C=(f?xe(o.useClass):o).prototype.ngOnDestroy;if(C){const S=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const R=S.indexOf(a);-1===R?S.push(a,[c,C]):S[R+1].push(c,C)}else S.push(a,C)}}}function bi(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function ew(i,o,a,c){for(let h=a;h<c;h++)if(o[h]===i)return h;return-1}function iD(i,o,a,c){return Ky(this.multi,[])}function Da(i,o,a,c){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=uo(a,a[it],this.providerFactory.index,c);f=w.slice(0,y),Ky(h,f);for(let C=y;C<w.length;C++)f.push(w[C])}else f=[],Ky(h,f);return f}function Ky(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function tw(i,o=[]){return a=>{a.providersResolver=(c,h)=>function vg(i,o,a){const c=en();if(c.firstCreatePass){const h=Dn(i);ad(a,c.data,c.blueprint,h,!0),ad(o,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,o)}}class rf{}class sD{}function iA(i,o){return new nw(i,o??null,[])}class nw extends rf{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new YI(this);const h=Zr(o);this._bootstrapComponents=gu(h.bootstrap),this._r3Injector=qm(o,a,[{provide:rf,useValue:this},{provide:Ch,useValue:this.componentFactoryResolver},...c],ne(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class rw extends sD{constructor(o){super(),this.moduleType=o}create(o){return new nw(this.moduleType,o,[])}}class oD extends rf{constructor(o){super(),this.componentFactoryResolver=new YI(this),this.instance=null;const a=new Wl([...o.providers,{provide:rf,useValue:this},{provide:Ch,useValue:this.componentFactoryResolver}],o.parent||Um(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function aD(i,o,a=null){return new oD({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let oA=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=wv(0,a.type),h=c.length>0?aD([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Xt({token:i,providedIn:"environment",factory:()=>new i(Pn(yc))}),i})();function uD(i){i.getStandaloneInjector=o=>o.get(oA).getOrCreateStandaloneInjector(i)}function $s(i,o){const a=i[o];return a===zt?void 0:a}function Eu(i,o){const a=en();let c;const h=i+sn;a.firstCreatePass?(c=function Xy(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks??=[]).push(h,c.onDestroy)):c=a.data[h];const f=c.factory||(c.factory=Xs(c.type)),y=Kt(Ec);try{const w=Ni(!1),C=f();return Ni(w),function Yp(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Se(),h,C),C}finally{Kt(y)}}function qo(i,o,a){const c=i+sn,h=Se(),f=no(h,c);return cd(h,c)?function wg(i,o,a,c,h,f){const y=o+a;return Vi(i,y,h)?Vn(i,y+1,f?c.call(f,h):c(h)):$s(i,y+1)}(h,Or(),o,f.transform,a,f):f.transform(a)}function uf(i,o,a,c){const h=i+sn,f=Se(),y=no(f,h);return cd(f,h)?function Eg(i,o,a,c,h,f,y){const w=o+a;return Dc(i,w,h,f)?Vn(i,w+2,y?c.call(y,h,f):c(h,f)):$s(i,w+2)}(f,Or(),o,y.transform,a,c,y):y.transform(a,c)}function cd(i,o){return i[it].data[o].pure}function Iu(i){return o=>{setTimeout(i,void 0,o)}}const vo=class e_ extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=Iu(f),h&&(h=Iu(h)),y&&(y=Iu(y)));const w=super.subscribe({next:h,error:f,complete:y});return o instanceof B.w0&&o.add(w),w}};function Ig(){return this._results[Symbol.iterator]()}class t_{get changes(){return this._changes||(this._changes=new vo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=t_.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Ig)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function ir(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function lc(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],f=o[c];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let lf=(()=>{class i{}return i.__NG_ELEMENT_ID__=vD,i})();const n_=lf,Cg=class extends n_{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a,null)}createEmbeddedViewImpl(o,a,c){const y=this._declarationTContainer.tView,w=Zm(this._declarationLView,y,o,4096&this._declarationLView[Pt]?4096:16,null,y.declTNode,null,null,null,a||null,c||null);w[Pu]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[cs];return null!==S&&(w[cs]=S.createEmbeddedView(y)),jI(y,w,o),new Rh(w)}};function vD(){return r_(hr(),Se())}function r_(i,o){return 4&i.type?new Cg(o,i,Dh(i,o)):null}let i_=(()=>{class i{}return i.__NG_ELEMENT_ID__=TD,i})();function TD(){return s_(hr(),Se())}const un=i_,Sn=class extends un{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Dh(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Fn(this._hostTNode,this._hostLView);if(tc(o)){const a=Ja(o,this._hostLView),c=ai(o);return new Fo(a[it].data[c+8],a)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=dd(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Pr}createEmbeddedView(o,a,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const w=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(w,h,false),w}createComponent(o,a,c,h,f){const y=o&&!function co(i){return"function"==typeof i}(o);let w;if(y)w=a;else{const Le=a||{};w=Le.index,c=Le.injector,h=Le.projectableNodes,f=Le.environmentInjector||Le.ngModuleRef}const C=y?o:new Nh(Ut(o)),S=c||this.parentInjector;if(!f&&null==C.ngModule){const Je=(y?S:this.parentInjector).get(yc,null);Je&&(f=Je)}Ut(C.componentType??{});const Q=C.create(S,h,null,f);return this.insertImpl(Q.hostView,w,false),Q}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const h=o._lView,f=h[it];if(function $d(i){return Br(i[An])}(h)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const S=h[An],R=new Sn(S,S[Rr],S[An]);R.detach(R.indexOf(o))}}const y=this._adjustIndex(a),w=this._lContainer;if(function OE(i,o,a,c){const h=Pr+c,f=a.length;c>0&&(a[h-1][Kr]=o),c<f-Pr?(o[Kr]=a[h],Uo(a,Pr+c,o)):(a.push(o),o[Kr]=null),o[An]=a;const y=o[Pu];null!==y&&a!==y&&function ET(i,o){const a=i[Xo];o[On]!==o[An][An][On]&&(i[To]=!0),null===a?i[Xo]=[o]:a.push(o)}(y,o);const w=o[cs];null!==w&&w.insertView(i),o[Pt]|=128}(f,h,w,y),!c){const C=dv(y,w),S=h[Tt],R=cv(S,w[vi]);null!==R&&function vT(i,o,a,c,h,f){c[Yn]=h,c[Rr]=o,Dp(i,c,a,1,h,f)}(f,w[Rr],S,h,R,C)}return o.attachToViewContainerRef(),Uo(Dg(w),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=dd(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=ov(this._lContainer,a);c&&(Ol(Dg(this._lContainer),a),Tm(c[it],c))}detach(o){const a=this._adjustIndex(o,-1),c=ov(this._lContainer,a);return c&&null!=Ol(Dg(this._lContainer),a)?new Rh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function dd(i){return i[8]}function Dg(i){return i[8]||(i[8]=[])}function s_(i,o){let a;const c=o[i.index];return Br(c)?a=c:(a=Xv(c,o,null,i),o[i.index]=a,zp(o,a)),o_(a,o,i,c),new Sn(a,i,o)}let o_=function aw(i,o,a,c){if(i[vi])return;let h;h=8&a.type?wn(c):function SD(i,o){const a=i[Tt],c=a.createComment(""),h=jr(o,i);return ch(a,cv(a,h),c,function wR(i,o){return i.nextSibling(o)}(a,h),!1),c}(o,a),i[vi]=h};class uw{constructor(o){this.queryList=o,this.matches=null}clone(){return new uw(this.queryList)}setDirty(){this.queryList.setDirty()}}class cw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new cw(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==fw(o,a).matches&&this.queries[a].setDirty()}}class xD{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class a_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new a_(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class lw{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new lw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,a,RD(a,f)),this.matchTNodeWithReadOption(o,a,aa(a,o,f,!1,!1))}else c===lf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,aa(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===zm||h===i_||h===lf&&4&a.type)this.addMatch(a.index,-2);else{const f=aa(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function RD(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function hA(i,o,a,c){return-1===a?function dA(i,o){return 11&i.type?Dh(i,o):4&i.type?r_(i,o):null}(o,i):-2===a?function fA(i,o,a){return a===zm?Dh(o,i):a===lf?r_(o,i):a===i_?s_(o,i):void 0}(i,o,c):uo(i,i[it],a,o)}function u_(i,o,a,c){const h=o[cs].queries[c];if(null===h.matches){const f=i.data,y=a.matches,w=[];for(let C=0;C<y.length;C+=2){const S=y[C];w.push(S<0?null:hA(o,f[S],y[C+1],a.metadata.read))}h.matches=w}return h.matches}function Du(i,o,a,c){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=u_(i,o,h,a);for(let w=0;w<f.length;w+=2){const C=f[w];if(C>0)c.push(y[w/2]);else{const S=f[w+1],R=o[-C];for(let V=Pr;V<R.length;V++){const q=R[V];q[Pu]===q[An]&&Du(q[it],q,S,c)}if(null!==R[Xo]){const V=R[Xo];for(let q=0;q<V.length;q++){const Q=V[q];Du(Q[it],Q,S,c)}}}}}return c}function df(i){const o=Se(),a=en(),c=Yu();ro(c+1);const h=fw(a,c);if(i.dirty&&function Jf(i){return 4==(4&i[Pt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?Du(a,o,c,[]):u_(a,o,h,c);i.reset(f,xR),i.notifyOnChanges()}return!0}return!1}function bg(i,o,a){const c=en();c.firstCreatePass&&(hw(c,new xD(i,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),ba(c,Se(),o)}function Tg(i,o,a,c){const h=en();if(h.firstCreatePass){const f=hr();hw(h,new xD(o,a,c),f.index),function hf(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}ba(h,Se(),a)}function dw(){return function ND(i,o){return i[cs].queries[o].queryList}(Se(),Yu())}function ba(i,o,a){const c=new t_(4==(4&a));(function lS(i,o,a,c){const h=BI(o);h.push(a),i.firstCreatePass&&Ym(i).push(c,h.length-1)})(i,o,c,c.destroy),null===o[cs]&&(o[cs]=new cw),o[cs].queries.push(new uw(c))}function hw(i,o,a){null===i.queries&&(i.queries=new a_),i.queries.track(new lw(o,a))}function fw(i,o){return i.queries.getByIndex(o)}function c_(i){return!!Zr(i)}const y_=new In("Application Initializer");let Ng=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Yt(y_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const f=h();if(_u(f))a.push(f);else if(f0(f)){const y=new Promise((w,C)=>{f.subscribe({complete:w,error:C})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const gr=new In("LocaleId",{providedIn:"root",factory:()=>Yt(gr,Ke.Optional|Ke.SkipSelf)||function DA(){return typeof $localize<"u"&&$localize.locale||Go}()}),hn=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Pg=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new P.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class ZD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let SA=(()=>{class i{compileModuleSync(a){return new rw(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=gu(Zr(a).declarations).reduce((y,w)=>{const C=Ut(w);return C&&y.push(new Nh(C)),y},[]);return new ZD(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const YD=(()=>Promise.resolve(0))();function v_(i){typeof Zone>"u"?YD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}function Ew(...i){}class Hi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vo(!1),this.onMicrotaskEmpty=new vo(!1),this.onStable=new vo(!1),this.onError=new vo(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function MA(){let i=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function PA(i){const o=()=>{!function NA(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Wt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Og(i),i.isCheckStableRunning=!0,Iw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Og(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,f,y,w)=>{try{return md(i),a.invokeTask(h,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),Cw(i)}},onInvoke:(a,c,h,f,y,w,C)=>{try{return md(i),a.invoke(h,f,y,w,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),Cw(i)}},onHasTask:(a,c,h,f)=>{a.hasTask(h,f),c===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Og(i),Iw(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hi.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(Hi.isInAngularZone())throw new te(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,RA,Ew,Ew);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const RA={};function Iw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Og(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function md(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Cw(i){i._nesting--,Iw(i)}class OA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vo,this.onMicrotaskEmpty=new vo,this.onStable=new vo,this.onError=new vo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const Tr=new In("",{providedIn:"root",factory:w_});function w_(){const i=Yt(Hi);let o=!0;const a=new J.y(h=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{h.next(o),h.complete()})}),c=new J.y(h=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Hi.assertNotInAngularZone(),v_(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Hi.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{h.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ie.T)(a,c.pipe((0,_e.B)()))}const Dw=new In(""),wf=new In("");let yd,Ta=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yd||(function QD(i){yd=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hi.assertNotInAngularZone(),v_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())v_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Pn(Hi),Pn(E_),Pn(wf))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),E_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return yd?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Tu=null;const bw=new In("AllowMultipleToken"),I_=new In("PlatformDestroyListeners"),Tw=new In("appBootstrapListener");class JD{constructor(o,a){this.name=o,this.token=a}}function tb(i,o,a=[]){const c=`Platform: ${o}`,h=new In(c);return(f=[])=>{let y=Vc();if(!y||y.injector.get(bw,!1)){const w=[...a,...f,{provide:h,useValue:!0}];i?i(w):function Sw(i){if(Tu&&!Tu.get(bw,!1))throw new te(400,!1);(function D_(){!function Vd(i){Ud=i}(()=>{throw new te(600,!1)})})(),Tu=i;const o=i.get(Aw);(function eb(i){i.get(Vm,null)?.forEach(a=>a())})(i)}(function nb(i=[],o){return wc.create({name:o,providers:[{provide:Ev,useValue:"platform"},{provide:I_,useValue:new Set([()=>Tu=null])},...i]})}(w,c))}return function UA(i){const o=Vc();if(!o)throw new te(401,!1);return o}()}}function Vc(){return Tu?.get(Aw)??null}let Aw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function ib(i="zone.js",o){return"noop"===i?new OA:"zone.js"===i?new Hi(o):i}(c?.ngZone,function rb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return h.run(()=>{const f=function sA(i,o,a){return new nw(i,o,a)}(a.moduleType,this.injector,function xw(i){return[{provide:Hi,useFactory:i},{provide:Rp,multi:!0,useFactory:()=>{const o=Yt(wd,{optional:!0});return()=>o.initialize()}},{provide:Bc,useFactory:vd},{provide:Tr,useFactory:w_}]}(()=>h)),y=f.injector.get(bh,null);return h.runOutsideAngular(()=>{const w=h.onError.subscribe({next:C=>{y.handleError(C)}});f.onDestroy(()=>{kg(this._modules,f),w.unsubscribe()})}),function Sa(i,o,a){try{const c=a();return _u(c)?c.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,h,()=>{const w=f.injector.get(Ng);return w.runInitializers(),w.donePromise.then(()=>(function fg(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(hg=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(gr,Go)||Go),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const h=Mw({},c);return function kA(i,o,a){const c=new rw(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const c=a.injector.get(Ef);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new te(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(I_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Pn(wc))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Mw(i,o){return Array.isArray(o)?o.reduce(Mw,i):{...i,...o}}let Ef=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Yt(Bc),this.zoneIsStable=Yt(Tr),this.componentTypes=[],this.components=[],this.isStable=Yt(Pg).hasPendingTasks.pipe((0,Ae.w)(a=>a?(0,pe.of)(!1):this.zoneIsStable),(0,ge.x)(),(0,_e.B)()),this._injector=Yt(yc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof uI;if(!this._injector.get(Ng).done)throw!h&&As(a),new te(405,!1);let y;y=h?a:this._injector.get(Ch).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function FA(i){return i.isBoundToModule}(y)?void 0:this._injector.get(rf),S=y.create(wc.NULL,[],c||y.selector,w),R=S.location.nativeElement,V=S.injector.get(Dw,null);return V?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),kg(this.components,S),V?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;kg(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Tw,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>kg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new te(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function kg(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const Bc=new In("",{providedIn:"root",factory:()=>Yt(bh).handleError.bind(void 0)});function vd(){const i=Yt(Hi),o=Yt(bh);return a=>i.runOutsideAngular(()=>o.handleError(a))}let wd=(()=>{class i{constructor(){this.zone=Yt(Hi),this.applicationRef=Yt(Ef)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Nw(){return!1}let sb=(()=>{class i{}return i.__NG_ELEMENT_ID__=T_,i})();function T_(i){return function Lg(i,o,a){if(Ki(i)&&!a){const c=xi(i.index,o);return new Rh(c,c)}return 47&i.type?new Rh(o[On],o):null}(hr(),Se(),16==(16&i))}class A_{constructor(){}supports(o){return ty(o)}create(o){return new zA(o)}}const M_=(i,o)=>o;class zA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||M_}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<Df(c,h,f)?a:c,w=Df(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const S=w-h,R=C-h;if(S!=R){for(let q=0;q<S;q++){const Q=q<f.length?f[q]:f[q]=0,Ie=Q+q;R<=Ie&&Ie<S&&(f[q]=Q+1)}f[y.previousIndex]=R-S}}w!==C&&o(y,w,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!ty(o))throw new te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else h=0,function xS(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,w=>{y=this._trackByFn(h,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,h)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new ob(a,c),f,h),o}_verifyReinsertion(o,a,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new jg),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jg),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ob{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bg{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class jg{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Bg,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Df(i,o,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class Vw{constructor(){}supports(o){return o instanceof Map||li(o)}create(){return new ab}}class ab{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||li(o)))throw new te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new $i(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class $i{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bw(){return new bf([new A_])}let bf=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Bw()),deps:[[i,new _s,new ys]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new te(901,!1)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Bw}),i})();function Hw(){return new Aa([new Vw])}let Aa=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Hw()),deps:[[i,new _s,new ys]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new te(901,!1)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Hw}),i})();const Af=tb(null,"core",[]);let cb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Pn(Ef))},i.\u0275mod=Pa({type:i}),i.\u0275inj=dr({}),i})();function mi(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function Zw(i){const o=Ut(i);if(!o)return null;const a=new Nh(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3106:(pt,De,L)=>{L.d(De,{Z:()=>qe});var d=L(9058),B=L(4537),P=L(534),J=L(7879);class ie{constructor(Ze,Pe){this._delegate=Ze,this.firebase=Pe,(0,P._addComponent)(Ze,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ze,Pe=P._DEFAULT_ENTRY_NAME){var vt;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(Ze);return!lt.isInitialized()&&"EXPLICIT"===(null===(vt=lt.getComponent())||void 0===vt?void 0:vt.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:Pe})}_removeServiceInstance(Ze,Pe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Pe)}_addComponent(Ze){(0,P._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,P._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ge(){const xe=function Ae(xe){const Ze={},Pe={__esModule:!0,initializeApp:function te(Ne,ee={}){const et=P.initializeApp(Ne,ee);if((0,d.r3)(Ze,et.name))return Ze[et.name];const He=new xe(et,Pe);return Ze[et.name]=He,He},app:lt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function se(Ne){const ee=Ne.name,et=ee.replace("-compat","");if(P._registerComponent(Ne)&&"PUBLIC"===Ne.type){const He=(Jt=lt())=>{if("function"!=typeof Jt[et])throw _e.create("invalid-app-argument",{appName:ee});return Jt[et]()};void 0!==Ne.serviceProps&&(0,d.ZB)(He,Ne.serviceProps),Pe[et]=He,xe.prototype[et]=function(...Jt){return this._getService.bind(this,ee).apply(this,Ne.multipleInstances?Jt:[])}}return"PUBLIC"===Ne.type?Pe[et]:null},removeApp:function vt(Ne){delete Ze[Ne]},useAsService:function fe(Ne,ee){return"serverAuth"===ee?null:ee},modularAPIs:P}};function lt(Ne){if(!(0,d.r3)(Ze,Ne=Ne||P._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Ne});return Ze[Ne]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function Ce(){return Object.keys(Ze).map(Ne=>Ze[Ne])}}),lt.App=xe,Pe}(ie);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function Ze(Pe){(0,d.ZB)(xe,Pe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),xe}(),G=new J.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=$;!function Me(xe){(0,P.registerVersion)("@firebase/app-compat","0.2.13",xe)}()},534:(pt,De,L)=>{L.r(De),L.d(De,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Ke,_addComponent:()=>nr,_addOrOverwriteComponent:()=>ni,_apps:()=>Ct,_clearComponents:()=>pn,_components:()=>Kt,_getProvider:()=>qn,_registerComponent:()=>Wt,_removeServiceInstance:()=>as,deleteApp:()=>Cn,getApp:()=>Mr,getApps:()=>Hn,initializeApp:()=>Ss,onLog:()=>rr,registerVersion:()=>Nn,setLogLevel:()=>Pn});var d=L(5861),B=L(4537),P=L(7879),J=L(9058);const ie=(he,re)=>re.some(Fe=>he instanceof Fe);let pe,_e;const $=new WeakMap,G=new WeakMap,ne=new WeakMap,ke=new WeakMap,Me=new WeakMap;let Ze={get(he,re,Fe){if(he instanceof IDBTransaction){if("done"===re)return G.get(he);if("objectStoreNames"===re)return he.objectStoreNames||ne.get(he);if("store"===re)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return te(he[re])},set:(he,re,Fe)=>(he[re]=Fe,!0),has:(he,re)=>he instanceof IDBTransaction&&("done"===re||"store"===re)||re in he};function lt(he){return"function"==typeof he?function vt(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...re){return he.apply(Ce(this),re),te($.get(this))}:function(...re){return te(he.apply(Ce(this),re))}:function(re,...Fe){const ft=he.call(Ce(this),re,...Fe);return ne.set(ft,re.sort?re.sort():[re]),te(ft)}}(he):(he instanceof IDBTransaction&&function xe(he){if(G.has(he))return;const re=new Promise((Fe,ft)=>{const Rt=()=>{he.removeEventListener("complete",jt),he.removeEventListener("error",nn),he.removeEventListener("abort",nn)},jt=()=>{Fe(),Rt()},nn=()=>{ft(he.error||new DOMException("AbortError","AbortError")),Rt()};he.addEventListener("complete",jt),he.addEventListener("error",nn),he.addEventListener("abort",nn)});G.set(he,re)}(he),ie(he,function Ae(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Ze):he)}function te(he){if(he instanceof IDBRequest)return function qe(he){const re=new Promise((Fe,ft)=>{const Rt=()=>{he.removeEventListener("success",jt),he.removeEventListener("error",nn)},jt=()=>{Fe(te(he.result)),Rt()},nn=()=>{ft(he.error),Rt()};he.addEventListener("success",jt),he.addEventListener("error",nn)});return re.then(Fe=>{Fe instanceof IDBCursor&&$.set(Fe,he)}).catch(()=>{}),Me.set(re,he),re}(he);if(ke.has(he))return ke.get(he);const re=lt(he);return re!==he&&(ke.set(he,re),Me.set(re,he)),re}const Ce=he=>Me.get(he),Ne=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],et=new Map;function He(he,re){if(!(he instanceof IDBDatabase)||re in he||"string"!=typeof re)return;if(et.get(re))return et.get(re);const Fe=re.replace(/FromIndex$/,""),ft=re!==Fe,Rt=ee.includes(Fe);if(!(Fe in(ft?IDBIndex:IDBObjectStore).prototype)||!Rt&&!Ne.includes(Fe))return;const jt=function(){var nn=(0,d.Z)(function*(vr,...$n){const Ks=this.transaction(vr,Rt?"readwrite":"readonly");let Io=Ks.store;return ft&&(Io=Io.index($n.shift())),(yield Promise.all([Io[Fe](...$n),Rt&&Ks.done]))[0]});return function($n){return nn.apply(this,arguments)}}();return et.set(re,jt),jt}!function Pe(he){Ze=he(Ze)}(he=>({...he,get:(re,Fe,ft)=>He(re,Fe)||he.get(re,Fe,ft),has:(re,Fe)=>!!He(re,Fe)||he.has(re,Fe)}));class Jt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function cr(he){const re=he.getComponent();return"VERSION"===re?.type}(Fe)){const ft=Fe.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(Fe=>Fe).join(" ")}}const Gr="@firebase/app",ae=new P.Yd("@firebase/app"),Ke="[DEFAULT]",dt={[Gr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ct=new Map,Kt=new Map;function nr(he,re){try{he.container.addComponent(re)}catch(Fe){ae.debug(`Component ${re.name} failed to register with FirebaseApp ${he.name}`,Fe)}}function ni(he,re){he.container.addOrOverwriteComponent(re)}function Wt(he){const re=he.name;if(Kt.has(re))return ae.debug(`There were multiple attempts to register component ${re}.`),!1;Kt.set(re,he);for(const Fe of Ct.values())nr(Fe,he);return!0}function qn(he,re){const Fe=he.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),he.container.getProvider(re)}function as(he,re,Fe=Ke){qn(he,re).clearInstance(Fe)}function pn(){Kt.clear()}const kt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Un{constructor(re,Fe,ft){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}}const Wi="9.23.0";function Ss(he,re={}){let Fe=he;"object"!=typeof re&&(re={name:re});const ft=Object.assign({name:Ke,automaticDataCollectionEnabled:!1},re),Rt=ft.name;if("string"!=typeof Rt||!Rt)throw kt.create("bad-app-name",{appName:String(Rt)});if(Fe||(Fe=(0,J.aH)()),!Fe)throw kt.create("no-options");const jt=Ct.get(Rt);if(jt){if((0,J.vZ)(Fe,jt.options)&&(0,J.vZ)(ft,jt.config))return jt;throw kt.create("duplicate-app",{appName:Rt})}const nn=new B.H0(Rt);for(const $n of Kt.values())nn.addComponent($n);const vr=new Un(Fe,ft,nn);return Ct.set(Rt,vr),vr}function Mr(he=Ke){const re=Ct.get(he);if(!re&&he===Ke&&(0,J.aH)())return Ss();if(!re)throw kt.create("no-app",{appName:he});return re}function Hn(){return Array.from(Ct.values())}function Cn(he){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(he){const re=he.name;Ct.has(re)&&(Ct.delete(re),yield Promise.all(he.container.getProviders().map(Fe=>Fe.delete())),he.isDeleted=!0)})).apply(this,arguments)}function Nn(he,re,Fe){var ft;let Rt=null!==(ft=dt[he])&&void 0!==ft?ft:he;Fe&&(Rt+=`-${Fe}`);const jt=Rt.match(/\s|\//),nn=re.match(/\s|\//);if(jt||nn){const vr=[`Unable to register library "${Rt}" with version "${re}":`];return jt&&vr.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),jt&&nn&&vr.push("and"),nn&&vr.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void ae.warn(vr.join(" "))}Wt(new B.wA(`${Rt}-version`,()=>({library:Rt,version:re}),"VERSION"))}function rr(he,re){if(null!==he&&"function"!=typeof he)throw kt.create("invalid-log-argument");(0,P.Am)(he,re)}function Pn(he){(0,P.Ub)(he)}const qr="firebase-heartbeat-database",Yt=1,z="firebase-heartbeat-store";let j=null;function k(){return j||(j=function se(he,re,{blocked:Fe,upgrade:ft,blocking:Rt,terminated:jt}={}){const nn=indexedDB.open(he,re),vr=te(nn);return ft&&nn.addEventListener("upgradeneeded",$n=>{ft(te(nn.result),$n.oldVersion,$n.newVersion,te(nn.transaction),$n)}),Fe&&nn.addEventListener("blocked",$n=>Fe($n.oldVersion,$n.newVersion,$n)),vr.then($n=>{jt&&$n.addEventListener("close",()=>jt()),Rt&&$n.addEventListener("versionchange",Ks=>Rt(Ks.oldVersion,Ks.newVersion,Ks))}).catch(()=>{}),vr}(qr,Yt,{upgrade:(he,re)=>{0===re&&he.createObjectStore(z)}}).catch(he=>{throw kt.create("idb-open",{originalErrorMessage:he.message})})),j}function N(){return(N=(0,d.Z)(function*(he){try{return yield(yield k()).transaction(z).objectStore(z).get(We(he))}catch(re){if(re instanceof J.ZR)ae.warn(re.message);else{const Fe=kt.create("idb-get",{originalErrorMessage:re?.message});ae.warn(Fe.message)}}})).apply(this,arguments)}function X(he,re){return ve.apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(he,re){try{const ft=(yield k()).transaction(z,"readwrite");yield ft.objectStore(z).put(re,We(he)),yield ft.done}catch(Fe){if(Fe instanceof J.ZR)ae.warn(Fe.message);else{const ft=kt.create("idb-set",{originalErrorMessage:Fe?.message});ae.warn(ft.message)}}})).apply(this,arguments)}function We(he){return`${he.name}!${he.options.appId}`}class ht{constructor(re){this.container=re,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new Lt(Fe),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var re=this;return(0,d.Z)(function*(){const ft=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=xt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!re._heartbeatsCache.heartbeats.some(jt=>jt.date===Rt))return re._heartbeatsCache.heartbeats.push({date:Rt,agent:ft}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(jt=>{const nn=new Date(jt.date).valueOf();return Date.now()-nn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,d.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Fe=xt(),{heartbeatsToSend:ft,unsentEntries:Rt}=function _n(he,re=1024){const Fe=[];let ft=he.slice();for(const Rt of he){const jt=Fe.find(nn=>nn.agent===Rt.agent);if(jt){if(jt.dates.push(Rt.date),_r(Fe)>re){jt.dates.pop();break}}else if(Fe.push({agent:Rt.agent,dates:[Rt.date]}),_r(Fe)>re){Fe.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:ft}}(re._heartbeatsCache.heartbeats),jt=(0,J.L)(JSON.stringify({version:2,heartbeats:ft}));return re._heartbeatsCache.lastSentHeartbeatDate=Fe,Rt.length>0?(re._heartbeatsCache.heartbeats=Rt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),jt})()}}function xt(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,d.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function F(he){return N.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Fe=this;return(0,d.Z)(function*(){var ft;if(yield Fe._canUseIndexedDBPromise){const jt=yield Fe.read();return X(Fe.app,{lastSentHeartbeatDate:null!==(ft=re.lastSentHeartbeatDate)&&void 0!==ft?ft:jt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Fe=this;return(0,d.Z)(function*(){var ft;if(yield Fe._canUseIndexedDBPromise){const jt=yield Fe.read();return X(Fe.app,{lastSentHeartbeatDate:null!==(ft=re.lastSentHeartbeatDate)&&void 0!==ft?ft:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...re.heartbeats]})}})()}}function _r(he){return(0,J.L)(JSON.stringify({version:2,heartbeats:he})).length}!function xr(he){Wt(new B.wA("platform-logger",re=>new Jt(re),"PRIVATE")),Wt(new B.wA("heartbeat",re=>new ht(re),"PRIVATE")),Nn(Gr,"0.9.13",he),Nn(Gr,"0.9.13","esm2017"),Nn("fire-js","")}("")},4537:(pt,De,L)=>{L.d(De,{H0:()=>Ae,wA:()=>P});var d=L(5861),B=L(9058);class P{constructor($,G,ne){this.name=$,this.instanceFactory=G,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const J="[DEFAULT]";class ie{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const ne=new B.BH;if(this.instancesDeferred.set(G,ne),this.isInitialized(G)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:G});ke&&ne.resolve(ke)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const ne=this.normalizeInstanceIdentifier($?.identifier),ke=null!==(G=$?.optional)&&void 0!==G&&G;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Me){if(ke)return null;throw Me}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function _e(ge){return"EAGER"===ge.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[G,ne]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:ke});ne.resolve(Me)}catch{}}}}clearInstance($=J){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,d.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...G.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=J){return this.instances.has($)}getOptions($=J){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,ne=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:ne,options:G});for(const[Me,qe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Me)&&qe.resolve(ke);return ke}onInit($,G){var ne;const ke=this.normalizeInstanceIdentifier(G),Me=null!==(ne=this.onInitCallbacks.get(ke))&&void 0!==ne?ne:new Set;Me.add($),this.onInitCallbacks.set(ke,Me);const qe=this.instances.get(ke);return qe&&$(qe,ke),()=>{Me.delete($)}}invokeOnInitCallbacks($,G){const ne=this.onInitCallbacks.get(G);if(ne)for(const ke of ne)try{ke($,G)}catch{}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let ne=this.instances.get($);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=$,ge===J?void 0:ge),options:G}),this.instances.set($,ne),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(ne,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ne)}catch{}var ge;return ne||null}normalizeInstanceIdentifier($=J){return this.component?this.component.multipleInstances?$:J:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new ie($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(pt,De,L)=>{L.d(De,{Am:()=>ge,Ub:()=>Ae,Yd:()=>_e,in:()=>B});const d=[];var B=(()=>((B=B||{})[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B))();const P={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},J=B.INFO,ie={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},pe=($,G,...ne)=>{if(G<$.logLevel)return;const ke=(new Date).toISOString(),Me=ie[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${ke}]  ${$.name}:`,...ne)};class _e{constructor(G){this.name=G,this._logLevel=J,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?P[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function Ae($){d.forEach(G=>{G.setLogLevel($)})}function ge($,G){for(const ne of d){let ke=null;G&&G.level&&(ke=P[G.level]),ne.userLogHandler=null===$?null:(Me,qe,...xe)=>{const Ze=xe.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");qe>=(ke??Me.logLevel)&&$({level:B[qe].toLowerCase(),message:Ze,args:xe,type:Me.name})}}}},3182:(pt,De,L)=>{L.d(De,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=L(534);(0,d.registerVersion)("firebase","9.23.0","app")},7142:(pt,De,L)=>{L.d(De,{Z:()=>d.Z});var d=L(3106);d.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(pt,De,L)=>{L.r(De);var d=L(5861),B=L(3106),P=L(6878),J=L(9058),_e=(L(534),L(7879),L(4537));function Ae(){return window}function G(){return G=(0,d.Z)(function*(k,F,N){var X;const{BuildInfo:ve}=Ae();(0,P.as)(F.sessionId,"AuthEvent did not contain a session ID");const We=yield function Pe(k){return vt.apply(this,arguments)}(F.sessionId),wt={};return(0,P.at)()?wt.ibi=ve.packageName:(0,P.au)()?wt.apn=ve.packageName:(0,P.av)(k,"operation-not-supported-in-this-environment"),ve.displayName&&(wt.appDisplayName=ve.displayName),wt.sessionId=We,(0,P.aw)(k,N,F.type,void 0,null!==(X=F.eventId)&&void 0!==X?X:void 0,wt)}),G.apply(this,arguments)}function ke(){return(ke=(0,d.Z)(function*(k){const{BuildInfo:F}=Ae(),N={};(0,P.at)()?N.iosBundleId=F.packageName:(0,P.au)()?N.androidPackageName=F.packageName:(0,P.av)(k,"operation-not-supported-in-this-environment"),yield(0,P.ax)(k,N)})).apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(k,F,N){const{cordova:X}=Ae();let ve=()=>{};try{yield new Promise((We,wt)=>{let yt=null;function ht(){var Lt;We();const _r=null===(Lt=X.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof _r&&_r(),"function"==typeof N?.close&&N.close()}function xt(){yt||(yt=window.setTimeout(()=>{wt((0,P.az)(k,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===document?.visibilityState&&xt()}F.addPassiveListener(ht),document.addEventListener("resume",xt,!1),(0,P.au)()&&document.addEventListener("visibilitychange",_n,!1),ve=()=>{F.removePassiveListener(ht),document.removeEventListener("resume",xt,!1),document.removeEventListener("visibilitychange",_n,!1),yt&&window.clearTimeout(yt)}})}finally{ve()}})).apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(k){const F=function lt(k){if((0,P.as)(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const F=new ArrayBuffer(k.length),N=new Uint8Array(F);for(let X=0;X<k.length;X++)N[X]=k.charCodeAt(X);return N}(k),N=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(N)).map(ve=>ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ce extends P.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(F)),super.onEvent(F)}initialized(){var F=this;return(0,d.Z)(function*(){yield F.initPromise})()}}function Ne(k){return ee.apply(this,arguments)}function ee(){return(ee=(0,d.Z)(function*(k){const F=yield Jt()._get(cr(k));return F&&(yield Jt()._remove(cr(k))),F})).apply(this,arguments)}function He(){const k=[];for(let N=0;N<20;N++){const X=Math.floor(62*Math.random());k.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(X))}return k.join("")}function Jt(){return(0,P.aC)(P.b)}function cr(k){return(0,P.aD)("authEvent",k.config.apiKey,k.name)}function ae(k){if(!k?.includes("?"))return{};const[F,...N]=k.split("?");return(0,J.zd)(N.join("?"))}const Oe=class Te{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aE,this._overrideRedirectResult=P.aF}_initialize(F){var N=this;return(0,d.Z)(function*(){const X=F._key();let ve=N.eventManagers.get(X);return ve||(ve=new Ce(F),N.eventManagers.set(X,ve),N.attachCallbackListeners(F,ve)),ve})()}_openPopup(F){(0,P.av)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,N,X,ve){var We=this;return(0,d.Z)(function*(){!function Ze(k){var F,N,X,ve,We,wt,yt,ht,xt,_n;const Lt=Ae();(0,P.aA)("function"==typeof(null===(F=Lt?.universalLinks)||void 0===F?void 0:F.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aA)(typeof(null===(N=Lt?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aA)("function"==typeof(null===(We=null===(ve=null===(X=Lt?.cordova)||void 0===X?void 0:X.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===We?void 0:We.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aA)("function"==typeof(null===(ht=null===(yt=null===(wt=Lt?.cordova)||void 0===wt?void 0:wt.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===ht?void 0:ht.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aA)("function"==typeof(null===(_n=null===(xt=Lt?.cordova)||void 0===xt?void 0:xt.InAppBrowser)||void 0===_n?void 0:_n.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const wt=yield We._initialize(F);yield wt.initialized(),wt.resetRedirect(),(0,P.aG)(),yield We._originValidation(F);const yt=function se(k,F,N=null){return{type:F,eventId:N,urlResponse:null,sessionId:He(),postBody:null,tenantId:k.tenantId,error:(0,P.az)(k,"no-auth-event")}}(F,X,ve);yield function fe(k,F){return Jt()._set(cr(k),F)}(F,yt);const ht=yield function $(k,F,N){return G.apply(this,arguments)}(F,yt,N),xt=yield function Me(k){const{cordova:F}=Ae();return new Promise(N=>{F.plugins.browsertab.isAvailable(X=>{let ve=null;X?F.plugins.browsertab.openUrl(k):ve=F.InAppBrowser.open(k,(0,P.ay)()?"_blank":"_system","location=yes"),N(ve)})})}(ht);return function qe(k,F,N){return xe.apply(this,arguments)}(F,wt,xt)})()}_isIframeWebStorageSupported(F,N){throw new Error("Method not implemented.")}_originValidation(F){const N=F._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function ne(k){return ke.apply(this,arguments)}(F)),this.originValidationPromises[N]}attachCallbackListeners(F,N){const{universalLinks:X,handleOpenURL:ve,BuildInfo:We}=Ae(),wt=setTimeout((0,d.Z)(function*(){yield Ne(F),N.onEvent($e())}),500),yt=function(){var _n=(0,d.Z)(function*(Lt){clearTimeout(wt);const _r=yield Ne(F);let xr=null;_r&&Lt?.url&&(xr=function et(k,F){var N,X;const ve=function Ts(k){const F=ae(k),N=F.link?decodeURIComponent(F.link):void 0,X=ae(N).link,ve=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return ae(ve).link||ve||X||N||k}(F);if(ve.includes("/__/auth/callback")){const We=ae(ve),wt=We.firebaseError?function Gr(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent(We.firebaseError)):null,yt=null===(X=null===(N=wt?.code)||void 0===N?void 0:N.split("auth/"))||void 0===X?void 0:X[1],ht=yt?(0,P.az)(yt):null;return ht?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:ht,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:ve,postBody:null}}return null}(_r,Lt.url)),N.onEvent(xr||$e())});return function(_r){return _n.apply(this,arguments)}}();typeof X<"u"&&"function"==typeof X.subscribe&&X.subscribe(null,yt);const ht=ve,xt=`${We.packageName.toLowerCase()}://`;Ae().handleOpenURL=function(){var _n=(0,d.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(xt)&&yt({url:Lt}),"function"==typeof ht)try{ht(Lt)}catch(_r){console.error(_r)}});return function(Lt){return _n.apply(this,arguments)}}()}};function $e(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.az)("no-auth-event")}}function tt(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function rn(k=(0,J.z$)()){return!("file:"!==tt()&&"ionic:"!==tt()&&"capacitor:"!==tt()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function dr(){try{const k=self.localStorage,F=P.aL();if(k)return k.setItem(F,"1"),k.removeItem(F),!function lr(k=(0,J.z$)()){return function Ln(){return(0,J.w1)()&&11===document?.documentMode}()||function Xt(k=(0,J.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,J.hl)()}catch{return tr()&&(0,J.hl)()}return!1}function tr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function gt(){return"http:"===tt()||"https:"===tt()}()||(0,J.ru)()||rn())&&!function yn(){return(0,J.b$)()||(0,J.UG)()}()&&dr()&&!tr()}function Ai(){return rn()&&typeof document<"u"}function Gi(){return(Gi=(0,d.Z)(function*(){return!!Ai()&&new Promise(k=>{const F=setTimeout(()=>{k(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),k(!0)})})})).apply(this,arguments)}const jn={LOCAL:"local",NONE:"none",SESSION:"session"},Wr=P.aA,os="persistence";function dt(k){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,d.Z)(function*(k){yield k._initializationPromise;const F=nr(),N=P.aD(os,k.config.apiKey,k.name);F&&F.setItem(N,k._getPersistence())})).apply(this,arguments)}function nr(){var k;try{return(null===(k=function Ar(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const ni=P.aA;class Wt{constructor(){this.browserResolver=P.aC(P.k),this.cordovaResolver=P.aC(Oe),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aE,this._overrideRedirectResult=P.aF}_initialize(F){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,N,X,ve){var We=this;return(0,d.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openPopup(F,N,X,ve)})()}_openRedirect(F,N,X,ve){var We=this;return(0,d.Z)(function*(){return yield We.selectUnderlyingResolver(),We.assertedUnderlyingResolver._openRedirect(F,N,X,ve)})()}_isIframeWebStorageSupported(F,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,N)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return Ai()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ni(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,d.Z)(function*(){if(F.underlyingResolver)return;const N=yield function Eo(){return Gi.apply(this,arguments)}();F.underlyingResolver=N?F.cordovaResolver:F.browserResolver})()}}function qn(k){return k.unwrap()}function pn(k){return kt(k)}function kt(k){const{_tokenResponse:F}=k instanceof J.ZR?k.customData:k;if(!F)return null;if(!(k instanceof J.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return P.P.credentialFromResult(k);const N=F.providerId;if(!N||N===P.p.PASSWORD)return null;let X;switch(N){case P.p.GOOGLE:X=P.V;break;case P.p.FACEBOOK:X=P.U;break;case P.p.GITHUB:X=P.W;break;case P.p.TWITTER:X=P.Z;break;default:const{oauthIdToken:ve,oauthAccessToken:We,oauthTokenSecret:wt,pendingToken:yt,nonce:ht}=F;return We||wt||ve||yt?yt?N.startsWith("saml.")?P.aO._create(N,yt):P.L._fromParams({providerId:N,signInMethod:N,pendingToken:yt,idToken:ve,accessToken:We}):new P.X(N).credential({idToken:ve,accessToken:We,rawNonce:ht}):null}return k instanceof J.ZR?X.credentialFromError(k):X.credentialFromResult(k)}function Un(k,F){return F.catch(N=>{throw N instanceof J.ZR&&function Ur(k,F){var N;const X=null===(N=F.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new Mr(k,P.aq(k,F));else if(X){const ve=kt(F),We=F;ve&&(We.credential=ve,We.tenantId=X.tenantId||void 0,We.email=X.email||void 0,We.phoneNumber=X.phoneNumber||void 0)}}(k,N),N}).then(N=>{const ve=N.user;return{operationType:N.operationType,credential:pn(N),additionalUserInfo:P.ao(N),user:Hn.getOrCreate(ve)}})}function Wi(k,F){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(k,F){const N=yield F;return{verificationId:N.verificationId,confirm:X=>Un(k,N.confirm(X))}})).apply(this,arguments)}class Mr{constructor(F,N){this.resolver=N,this.auth=function as(k){return k.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return Un(qn(this.auth),this.resolver.resolveSignIn(F))}}class Hn{constructor(F){this._delegate=F,this.multiFactor=P.ar(F)}static getOrCreate(F){return Hn.USER_MAP.has(F)||Hn.USER_MAP.set(F,new Hn(F)),Hn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var N=this;return(0,d.Z)(function*(){return Un(N.auth,P.a0(N._delegate,F))})()}linkWithPhoneNumber(F,N){var X=this;return(0,d.Z)(function*(){return Wi(X.auth,P.l(X._delegate,F,N))})()}linkWithPopup(F){var N=this;return(0,d.Z)(function*(){return Un(N.auth,P.d(N._delegate,F,Wt))})()}linkWithRedirect(F){var N=this;return(0,d.Z)(function*(){return yield dt(P.aH(N.auth)),P.g(N._delegate,F,Wt)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var N=this;return(0,d.Z)(function*(){return Un(N.auth,P.a1(N._delegate,F))})()}reauthenticateWithPhoneNumber(F,N){return Wi(this.auth,P.r(this._delegate,F,N))}reauthenticateWithPopup(F){return Un(this.auth,P.e(this._delegate,F,Wt))}reauthenticateWithRedirect(F){var N=this;return(0,d.Z)(function*(){return yield dt(P.aH(N.auth)),P.h(N._delegate,F,Wt)})()}sendEmailVerification(F){return P.ae(this._delegate,F)}unlink(F){var N=this;return(0,d.Z)(function*(){return yield P.an(N._delegate,F),N})()}updateEmail(F){return P.aj(this._delegate,F)}updatePassword(F){return P.ak(this._delegate,F)}updatePhoneNumber(F){return P.u(this._delegate,F)}updateProfile(F){return P.ai(this._delegate,F)}verifyBeforeUpdateEmail(F,N){return P.af(this._delegate,F,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Hn.USER_MAP=new WeakMap;const Cn=P.aA;let Zn=(()=>{class k{constructor(N,X){if(this.app=N,X.isInitialized())return this._delegate=X.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ve}=N.options;Cn(ve,"invalid-api-key",{appName:N.name}),Cn(ve,"invalid-api-key",{appName:N.name});const We=typeof window<"u"?Wt:void 0;this._delegate=X.initialize({options:{persistence:rr(ve,N.name),popupRedirectResolver:We}}),this._delegate._updateErrorMap(P.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,X){P.I(this._delegate,N,X)}applyActionCode(N){return P.a5(this._delegate,N)}checkActionCode(N){return P.a6(this._delegate,N)}confirmPasswordReset(N,X){return P.a4(this._delegate,N,X)}createUserWithEmailAndPassword(N,X){var ve=this;return(0,d.Z)(function*(){return Un(ve._delegate,P.a8(ve._delegate,N,X))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return P.ad(this._delegate,N)}isSignInWithEmailLink(N){return P.ab(this._delegate,N)}getRedirectResult(){var N=this;return(0,d.Z)(function*(){Cn(Bn(),N._delegate,"operation-not-supported-in-this-environment");const X=yield P.j(N._delegate,Wt);return X?Un(N._delegate,Promise.resolve(X)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function Ve(k,F){(0,P.aH)(k)._logFramework(F)}(this._delegate,N)}onAuthStateChanged(N,X,ve){const{next:We,error:wt,complete:yt}=Nn(N,X,ve);return this._delegate.onAuthStateChanged(We,wt,yt)}onIdTokenChanged(N,X,ve){const{next:We,error:wt,complete:yt}=Nn(N,X,ve);return this._delegate.onIdTokenChanged(We,wt,yt)}sendSignInLinkToEmail(N,X){return P.aa(this._delegate,N,X)}sendPasswordResetEmail(N,X){return P.a3(this._delegate,N,X||void 0)}setPersistence(N){var X=this;return(0,d.Z)(function*(){let ve;switch(function Ke(k,F){Wr(Object.values(jn).includes(F),k,"invalid-persistence-type"),(0,J.b$)()?Wr(F!==jn.SESSION,k,"unsupported-persistence-type"):(0,J.UG)()?Wr(F===jn.NONE,k,"unsupported-persistence-type"):tr()?Wr(F===jn.NONE||F===jn.LOCAL&&(0,J.hl)(),k,"unsupported-persistence-type"):Wr(F===jn.NONE||dr(),k,"unsupported-persistence-type")}(X._delegate,N),N){case jn.SESSION:ve=P.a;break;case jn.LOCAL:ve=(yield P.aC(P.i)._isAvailable())?P.i:P.b;break;case jn.NONE:ve=P.N;break;default:return P.av("argument-error",{appName:X._delegate.name})}return X._delegate.setPersistence(ve)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return Un(this._delegate,P._(this._delegate))}signInWithCredential(N){return Un(this._delegate,P.$(this._delegate,N))}signInWithCustomToken(N){return Un(this._delegate,P.a2(this._delegate,N))}signInWithEmailAndPassword(N,X){return Un(this._delegate,P.a9(this._delegate,N,X))}signInWithEmailLink(N,X){return Un(this._delegate,P.ac(this._delegate,N,X))}signInWithPhoneNumber(N,X){return Wi(this._delegate,P.s(this._delegate,N,X))}signInWithPopup(N){var X=this;return(0,d.Z)(function*(){return Cn(Bn(),X._delegate,"operation-not-supported-in-this-environment"),Un(X._delegate,P.c(X._delegate,N,Wt))})()}signInWithRedirect(N){var X=this;return(0,d.Z)(function*(){return Cn(Bn(),X._delegate,"operation-not-supported-in-this-environment"),yield dt(X._delegate),P.f(X._delegate,N,Wt)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return P.a7(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=jn,k})();function Nn(k,F,N){let X=k;"function"!=typeof k&&({next:X,error:F,complete:N}=k);const ve=X;return{next:wt=>ve(wt&&Hn.getOrCreate(wt)),error:F,complete:N}}function rr(k,F){const N=function Kt(k,F){const N=nr();if(!N)return[];const X=P.aD(os,k,F);switch(N.getItem(X)){case jn.NONE:return[P.N];case jn.LOCAL:return[P.i,P.a];case jn.SESSION:return[P.a];default:return[]}}(k,F);if(typeof self<"u"&&!N.includes(P.i)&&N.push(P.i),typeof window<"u")for(const X of[P.b,P.a])N.includes(X)||N.push(X);return N.includes(P.N)||N.push(P.N),N}class Pn{constructor(){this.providerId="phone",this._delegate=new P.P(qn(B.Z.auth()))}static credential(F,N){return P.P.credential(F,N)}verifyPhoneNumber(F,N){return this._delegate.verifyPhoneNumber(F,N)}unwrap(){return this._delegate}}Pn.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Pn.PROVIDER_ID=P.P.PROVIDER_ID;const qr=P.aA;class Yt{constructor(F,N,X=B.Z.app()){var ve;qr(null===(ve=X.options)||void 0===ve?void 0:ve.apiKey,"invalid-api-key",{appName:X.name}),this._delegate=new P.R(F,N,X.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(k){k.INTERNAL.registerComponent(new _e.wA("auth-compat",F=>{const N=F.getProvider("app-compat").getImmediate(),X=F.getProvider("auth");return new Zn(N,X)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.Q,FacebookAuthProvider:P.U,GithubAuthProvider:P.W,GoogleAuthProvider:P.V,OAuthProvider:P.X,SAMLAuthProvider:P.Y,PhoneAuthProvider:Pn,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:Yt,TwitterAuthProvider:P.Z,Auth:Zn,AuthCredential:P.J,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},5861:(pt,De,L)=>{function d(P,J,ie,pe,_e,Ae,ge){try{var $=P[Ae](ge),G=$.value}catch(ne){return void ie(ne)}$.done?J(G):Promise.resolve(G).then(pe,_e)}function B(P){return function(){var J=this,ie=arguments;return new Promise(function(pe,_e){var Ae=P.apply(J,ie);function ge(G){d(Ae,pe,_e,ge,$,"next",G)}function $(G){d(Ae,pe,_e,ge,$,"throw",G)}ge(void 0)})}}L.d(De,{Z:()=>B})},7582:(pt,De,L)=>{function J(ae,we){var Te={};for(var Oe in ae)Object.prototype.hasOwnProperty.call(ae,Oe)&&we.indexOf(Oe)<0&&(Te[Oe]=ae[Oe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(Oe=Object.getOwnPropertySymbols(ae);$e<Oe.length;$e++)we.indexOf(Oe[$e])<0&&Object.prototype.propertyIsEnumerable.call(ae,Oe[$e])&&(Te[Oe[$e]]=ae[Oe[$e]])}return Te}function ne(ae,we,Te,Oe){return new(Te||(Te=Promise))(function(Ve,Ye){function ot(gt){try{tt(Oe.next(gt))}catch(rn){Ye(rn)}}function Rn(gt){try{tt(Oe.throw(gt))}catch(rn){Ye(rn)}}function tt(gt){gt.done?Ve(gt.value):function $e(Ve){return Ve instanceof Te?Ve:new Te(function(Ye){Ye(Ve)})}(gt.value).then(ot,Rn)}tt((Oe=Oe.apply(ae,we||[])).next())})}function te(ae){return this instanceof te?(this.v=ae,this):new te(ae)}function Ce(ae,we,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Oe=Te.apply(ae,we||[]),Ve=[];return $e={},Ye("next"),Ye("throw"),Ye("return"),$e[Symbol.asyncIterator]=function(){return this},$e;function Ye(yn){Oe[yn]&&($e[yn]=function(Ln){return new Promise(function(Xt,lr){Ve.push([yn,Ln,Xt,lr])>1||ot(yn,Ln)})})}function ot(yn,Ln){try{!function Rn(yn){yn.value instanceof te?Promise.resolve(yn.value.v).then(tt,gt):rn(Ve[0][2],yn)}(Oe[yn](Ln))}catch(Xt){rn(Ve[0][3],Xt)}}function tt(yn){ot("next",yn)}function gt(yn){ot("throw",yn)}function rn(yn,Ln){yn(Ln),Ve.shift(),Ve.length&&ot(Ve[0][0],Ve[0][1])}}function fe(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,we=ae[Symbol.asyncIterator];return we?we.call(ae):(ae=function xe(ae){var we="function"==typeof Symbol&&Symbol.iterator,Te=we&&ae[we],Oe=0;if(Te)return Te.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&Oe>=ae.length&&(ae=void 0),{value:ae&&ae[Oe++],done:!ae}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),Te={},Oe("next"),Oe("throw"),Oe("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function Oe(Ve){Te[Ve]=ae[Ve]&&function(Ye){return new Promise(function(ot,Rn){!function $e(Ve,Ye,ot,Rn){Promise.resolve(Rn).then(function(tt){Ve({value:tt,done:ot})},Ye)}(ot,Rn,(Ye=ae[Ve](Ye)).done,Ye.value)})}}}L.d(De,{FC:()=>Ce,KL:()=>fe,_T:()=>J,mG:()=>ne,qq:()=>te})}},pt=>{pt(pt.s=9420)}]);